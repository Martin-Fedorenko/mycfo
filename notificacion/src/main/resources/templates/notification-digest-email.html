<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{email-layout :: layout}"
>
  <head>
    <title th:text="'MyCFO - Resumen ' + ${digestType}">MyCFO - Resumen</title>
  </head>
  <body>
    <div th:fragment="content">
      <h2 th:text="'Resumen ' + ${digestType} + ' de Notificaciones'">
        Resumen de Notificaciones
      </h2>

      <div class="date" th:text="${date}">Fecha</div>

      <div
        style="
          background-color: #e3f2fd;
          padding: 20px;
          border-radius: 8px;
          margin: 20px 0;
        "
      >
        <h3 style="margin-top: 0; color: #1976d2">📊 Resumen del Período</h3>
        <p>
          <strong>Total de notificaciones:</strong>
          <span th:text="${#lists.size(notifications)}">0</span>
        </p>
        <p><strong>Período:</strong> <span th:text="${digestType}">-</span></p>
        <p><strong>Fecha:</strong> <span th:text="${date}">-</span></p>
      </div>

      <div
        th:if="${#lists.isEmpty(notifications)}"
        style="text-align: center; padding: 40px; color: #6c757d"
      >
        <h3>🎉 ¡Excelente!</h3>
        <p>No tienes notificaciones pendientes en este período.</p>
        <p>Tu gestión financiera está al día.</p>
      </div>

      <div th:if="${!#lists.isEmpty(notifications)}">
        <h3>📋 Notificaciones del Período</h3>

        <div
          th:each="notification : ${notifications}"
          class="notification-card"
          th:classappend="'severity-' + ${notification.severity}"
        >
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: flex-start;
              margin-bottom: 10px;
            "
          >
            <h4 style="margin: 0; flex: 1" th:text="${notification.title}">
              Título
            </h4>
            <span
              style="
                background-color: #667eea;
                color: white;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                text-transform: uppercase;
              "
              th:text="${notification.severity}"
              >INFO</span
            >
          </div>

          <p th:text="${notification.body}">Contenido</p>

          <div style="font-size: 12px; color: #6c757d; margin-top: 10px">
            <span
              th:text="${#temporals.format(notification.createdAt, 'dd/MM/yyyy HH:mm')}"
              >Fecha</span
            >
            <span th:if="${notification.resourceType != null}">
              • <span th:text="${notification.resourceType}">Tipo</span></span
            >
          </div>
        </div>
      </div>

      <div style="text-align: center; margin: 30px 0">
        <a href="http://localhost:3000/listado-notificaciones" class="btn">
          Ver Todas las Notificaciones
        </a>
      </div>

      <div
        style="
          background-color: #f8f9fa;
          padding: 20px;
          border-radius: 8px;
          margin-top: 30px;
        "
      >
        <h4>💡 Consejos para una mejor gestión:</h4>
        <ul>
          <li>Revisa regularmente tus notificaciones para mantenerte al día</li>
          <li>Configura alertas personalizadas según tus necesidades</li>
          <li>Usa los filtros para encontrar información específica</li>
          <li>Mantén actualizados tus datos financieros</li>
        </ul>
      </div>

      <div
        style="
          background-color: #fff3cd;
          padding: 15px;
          border-radius: 6px;
          margin-top: 20px;
          border-left: 4px solid #ffc107;
        "
      >
        <p style="margin: 0">
          <strong>⚙️ Configuración:</strong> Puedes cambiar la frecuencia de
          estos resúmenes en tu perfil de usuario.
        </p>
      </div>
    </div>
  </body>
</html>
