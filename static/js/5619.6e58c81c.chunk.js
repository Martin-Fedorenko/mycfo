"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3827,5619],{3241:(e,n,t)=>{t.d(n,{A:()=>f});var s=t(89379),r=t(80045),i=t(65043),o=t(58387),a=t(31807),l=t(97194),c=t(55895),d=t(98736),x=t(68700),A=t(58128),h=t(51612),p=t(28301),u=t(21657),m=t(70579);const j=["children","className","component","disablePointerEvents","disableTypography","position","variant"];var v;const g=(0,A.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,n["position".concat((0,l.A)(t.position))],!0===t.disablePointerEvents&&n.disablePointerEvents,n[t.variant]]}})((0,h.A)(e=>{let{theme:n}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(n.vars||n).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(u.A.positionStart,"&:not(.").concat(u.A.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}})),f=i.forwardRef(function(e,n){const t=(0,p.b)({props:e,name:"MuiInputAdornment"}),{children:A,className:h,component:f="div",disablePointerEvents:y=!1,disableTypography:b=!1,position:C,variant:E}=t,S=(0,r.A)(t,j),M=(0,x.A)()||{};let w=E;E&&M.variant,M&&!w&&(w=M.variant);const L=(0,s.A)((0,s.A)({},t),{},{hiddenLabel:M.hiddenLabel,size:M.size,disablePointerEvents:y,position:C,variant:w}),k=(e=>{const{classes:n,disablePointerEvents:t,hiddenLabel:s,position:r,size:i,variant:o}=e,c={root:["root",t&&"disablePointerEvents",r&&"position".concat((0,l.A)(r)),o,s&&"hiddenLabel",i&&"size".concat((0,l.A)(i))]};return(0,a.A)(c,u.P,n)})(L);return(0,m.jsx)(d.A.Provider,{value:null,children:(0,m.jsx)(g,(0,s.A)((0,s.A)({as:f,ownerState:L,className:(0,o.A)(k.root,h),ref:n},S),{},{children:"string"!==typeof A||b?(0,m.jsxs)(i.Fragment,{children:["start"===C?v||(v=(0,m.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):null,A]}):(0,m.jsx)(c.A,{color:"textSecondary",children:A})}))})})},12043:(e,n,t)=>{t.d(n,{A:()=>i});var s=t(14057),r=t(70579);const i=(0,s.A)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},16128:(e,n,t)=>{t.d(n,{A:()=>m});var s=t(89379),r=t(80045),i=t(65043),o=t(58387),a=t(31807),l=t(58128),c=t(28301),d=t(79857),x=t(86061);function A(e){return(0,x.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var h=t(70579);const p=["className","component"],u=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),m=i.forwardRef(function(e,n){const t=(0,c.b)({props:e,name:"MuiCardContent"}),{className:i,component:l="div"}=t,d=(0,r.A)(t,p),x=(0,s.A)((0,s.A)({},t),{},{component:l}),m=(e=>{const{classes:n}=e;return(0,a.A)({root:["root"]},A,n)})(x);return(0,h.jsx)(u,(0,s.A)({as:l,className:(0,o.A)(m.root,i),ownerState:x,ref:n},d))})},16936:(e,n,t)=>{t.d(n,{A:()=>i});var s=t(14057),r=t(70579);const i=(0,s.A)((0,r.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},21657:(e,n,t)=>{t.d(n,{A:()=>o,P:()=>i});var s=t(79857),r=t(86061);function i(e){return(0,r.Ay)("MuiInputAdornment",e)}const o=(0,s.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"])},33827:(e,n,t)=>{t.r(n),t.d(n,{default:()=>B});var s=t(65043),r=t(53969),i=t(55895),o=t(94799),a=t(53089),l=t(24343),c=t(3241),d=t(10256),x=t(3353),A=t(9446),h=t(88889),p=t(70298),u=t(56647),m=t(46471),j=t(91244),v=t(16128),g=t(95563),f=t(12097),y=t(56465),b=t(63745),C=t(12043),E=t(16936),S=t(14057),M=t(70579);const w=(0,S.A)((0,M.jsx)("path",{d:"M12 19c0-3.87 3.13-7 7-7 1.08 0 2.09.25 3 .68V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h8.08c-.05-.33-.08-.66-.08-1M4 6l8 5 8-5v2l-8 5-8-5zm13.34 16-3.54-3.54 1.41-1.41 2.12 2.12 4.24-4.24L23 16.34z"}),"MarkEmailRead");var L=t(5362);const k=(0,S.A)((0,M.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox"),R=(0,S.A)((0,M.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank");var P=t(29001),N=t(16831),I=t(87984),z=t(30342),T=t(18448);function B(){const[e,n]=s.useState(""),[t,S]=s.useState("all"),[B,_]=s.useState("all"),[F,V]=s.useState(0),[D,H]=s.useState(null),[O,W]=s.useState([]),q=(0,P.Zp)(),{userId:G,isAuthenticated:U}=(0,z.A)(),{items:Y,unread:Z,loading:X,error:J,reload:K,markOneRead:Q}=(0,N.E)(U?G:null),$=s.useMemo(()=>{let n=Y;return e&&(n=n.filter(n=>n.title.toLowerCase().includes(e.toLowerCase())||n.body.toLowerCase().includes(e.toLowerCase()))),"all"!==t&&(n=n.filter(e=>e.badge===t)),"all"!==B&&(n=n.filter(e=>e.badge===B)),n},[Y,e,t,B]),ee=Math.ceil($.length/10),ne=$.slice(10*F,10*(F+1));return(0,M.jsxs)(r.A,{sx:{p:3},children:[(0,M.jsxs)(r.A,{sx:{mb:3},children:[(0,M.jsx)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Centro de Notificaciones"}),(0,M.jsx)(i.A,{variant:"body1",sx:{color:"text.primary"},children:"Gestiona todas tus notificaciones y alertas"})]}),(0,M.jsxs)(o.A,{sx:{p:2,mb:3},children:[(0,M.jsxs)(a.A,{container:!0,spacing:2,alignItems:"center",children:[(0,M.jsx)(a.A,{item:!0,xs:12,md:4,children:(0,M.jsx)(l.A,{fullWidth:!0,placeholder:"Buscar notificaciones...",value:e,onChange:e=>{n(e.target.value),V(0)},InputProps:{startAdornment:(0,M.jsx)(c.A,{position:"start",children:(0,M.jsx)(b.A,{})})}})}),(0,M.jsx)(a.A,{item:!0,xs:12,md:3,children:(0,M.jsxs)(d.A,{fullWidth:!0,children:[(0,M.jsx)(x.A,{children:"Tipo"}),(0,M.jsxs)(A.A,{value:t,label:"Tipo",onChange:e=>{return n="type",t=e.target.value,"type"===n?S(t):"severity"===n&&_(t),void V(0);var n,t},children:[(0,M.jsx)(h.A,{value:"all",children:"Todos los tipos"}),(0,M.jsx)(h.A,{value:"MOVEMENT_NEW",children:"Nuevos Movimientos"}),(0,M.jsx)(h.A,{value:"BUDGET_EXCEEDED",children:"Presupuestos Excedidos"}),(0,M.jsx)(h.A,{value:"CASH_FLOW_ALERT",children:"Alertas Cash Flow"}),(0,M.jsx)(h.A,{value:"REPORT_READY",children:"Reportes Listos"}),(0,M.jsx)(h.A,{value:"REMINDER_CUSTOM",children:"Recordatorios"})]})]})}),(0,M.jsx)(a.A,{item:!0,xs:12,md:2,children:(0,M.jsxs)(p.A,{direction:"row",spacing:1,children:[(0,M.jsx)(u.A,{onClick:e=>{H(e.currentTarget)},children:(0,M.jsx)(C.A,{})}),(0,M.jsx)(u.A,{onClick:()=>q("/configuracion-notificaciones"),children:(0,M.jsx)(E.A,{})})]})})]}),(0,M.jsxs)(m.A,{anchorEl:D,open:Boolean(D),onClose:()=>{H(null)},children:[(0,M.jsx)(h.A,{onClick:()=>{O.length===$.length?W([]):W($.map(e=>e.id))},children:O.length===$.length?"Deseleccionar todo":"Seleccionar todo"}),O.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(h.A,{onClick:async()=>{try{for(const e of O)await Q(e);W([])}catch(J){console.error("Error marcando como le\xeddas:",J)}},children:[(0,M.jsx)(w,{sx:{mr:1}}),"Marcar como le\xeddas"]}),(0,M.jsxs)(h.A,{onClick:async()=>{try{for(const e of O)await(0,I.fP)(e,G);W([]),K()}catch(J){console.error("Error eliminando notificaciones:",J)}},children:[(0,M.jsx)(L.A,{sx:{mr:1}}),"Eliminar"]})]})]})]}),(0,M.jsxs)(a.A,{container:!0,spacing:2,sx:{mb:3},children:[(0,M.jsx)(a.A,{item:!0,xs:12,sm:6,md:3,children:(0,M.jsx)(j.A,{children:(0,M.jsxs)(v.A,{children:[(0,M.jsx)(i.A,{color:"text.secondary",gutterBottom:!0,children:"Total"}),(0,M.jsx)(i.A,{variant:"h5",children:Y.length})]})})}),(0,M.jsx)(a.A,{item:!0,xs:12,sm:6,md:3,children:(0,M.jsx)(j.A,{children:(0,M.jsxs)(v.A,{children:[(0,M.jsx)(i.A,{color:"text.secondary",gutterBottom:!0,children:"Sin leer"}),(0,M.jsx)(i.A,{variant:"h5",color:"error",children:Z})]})})}),(0,M.jsx)(a.A,{item:!0,xs:12,sm:6,md:3,children:(0,M.jsx)(j.A,{children:(0,M.jsxs)(v.A,{children:[(0,M.jsx)(i.A,{color:"text.secondary",gutterBottom:!0,children:"Filtradas"}),(0,M.jsx)(i.A,{variant:"h5",children:$.length})]})})}),(0,M.jsx)(a.A,{item:!0,xs:12,sm:6,md:3,children:(0,M.jsx)(j.A,{children:(0,M.jsxs)(v.A,{children:[(0,M.jsx)(i.A,{color:"text.secondary",gutterBottom:!0,children:"Seleccionadas"}),(0,M.jsx)(i.A,{variant:"h5",children:O.length})]})})})]}),(0,M.jsx)(o.A,{children:X?(0,M.jsx)(r.A,{sx:{p:4,textAlign:"center"},children:(0,M.jsx)(i.A,{children:"Cargando notificaciones..."})}):J?(0,M.jsx)(r.A,{sx:{p:4,textAlign:"center"},children:(0,M.jsxs)(i.A,{color:"error",children:["Error al cargar las notificaciones: ",J.message]})}):0===ne.length?(0,M.jsx)(r.A,{sx:{p:4,textAlign:"center"},children:(0,M.jsx)(i.A,{color:"text.secondary",children:"No hay notificaciones que coincidan con los filtros"})}):(0,M.jsxs)(M.Fragment,{children:[ne.map(e=>(0,M.jsxs)(j.A,{sx:{mb:1,opacity:e.is_read?.7:1,borderLeft:e.is_read?"none":"4px solid #2e7d67",backgroundColor:O.includes(e.id)?"action.selected":"background.paper"},children:[(0,M.jsx)(v.A,{children:(0,M.jsx)(r.A,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:(0,M.jsxs)(r.A,{sx:{flex:1},children:[(0,M.jsx)(r.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:(0,M.jsx)(i.A,{variant:"h6",sx:{fontWeight:e.is_read?"normal":"bold",flex:1},children:e.title})}),(0,M.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:(0,T.ZV)(e.body)}),(0,M.jsx)(i.A,{variant:"caption",color:"text.secondary",children:(0,T.Yq)(e.date)})]})})}),(0,M.jsxs)(g.A,{children:[(0,M.jsx)(f.A,{size:"small",startIcon:O.includes(e.id)?(0,M.jsx)(k,{}):(0,M.jsx)(R,{}),onClick:()=>{return n=e.id,void W(e=>e.includes(n)?e.filter(e=>e!==n):[...e,n]);var n},color:O.includes(e.id)?"primary":"default",variant:O.includes(e.id)?"contained":"outlined",children:"Seleccionar"}),!e.is_read&&(0,M.jsx)(f.A,{size:"small",startIcon:(0,M.jsx)(w,{}),onClick:()=>Q(e.id),color:"success",variant:"outlined",children:"Marcar como le\xedda"}),(0,M.jsx)(f.A,{size:"small",startIcon:(0,M.jsx)(L.A,{}),color:"error",variant:"outlined",onClick:()=>(async e=>{try{await(0,I.fP)(e,G),K()}catch(J){console.error("Error eliminando notificaci\xf3n:",J)}})(e.id),children:"Eliminar"})]})]},e.id)),ee>1&&(0,M.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,M.jsx)(y.A,{count:ee,page:F+1,onChange:(e,n)=>V(n-1),color:"primary"})})]})})]})}},55619:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});t(65043);var s=t(33827),r=t(70579);function i(e){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.default,{})})}},63745:(e,n,t)=>{t.d(n,{A:()=>i});var s=t(14057),r=t(70579);const i=(0,s.A)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},95563:(e,n,t)=>{t.d(n,{A:()=>m});var s=t(89379),r=t(80045),i=t(65043),o=t(58387),a=t(31807),l=t(58128),c=t(28301),d=t(79857),x=t(86061);function A(e){return(0,x.Ay)("MuiCardActions",e)}(0,d.A)("MuiCardActions",["root","spacing"]);var h=t(70579);const p=["disableSpacing","className"],u=(0,l.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),m=i.forwardRef(function(e,n){const t=(0,c.b)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:l}=t,d=(0,r.A)(t,p),x=(0,s.A)((0,s.A)({},t),{},{disableSpacing:i}),m=(e=>{const{classes:n,disableSpacing:t}=e,s={root:["root",!t&&"spacing"]};return(0,a.A)(s,A,n)})(x);return(0,h.jsx)(u,(0,s.A)({className:(0,o.A)(m.root,l),ownerState:x,ref:n},d))})}}]);
//# sourceMappingURL=5619.6e58c81c.chunk.js.map