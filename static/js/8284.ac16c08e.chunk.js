(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2514,8284],{16251:()=>{},29800:()=>{},34955:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var o=r(89379),n=(r(65043),r(53969)),s=r(26529),a=r(56647),i=r(74917),l=r(36252),c=r(70579);const d="#FDE4E3",h="#FACDCA",u="#E5F4E5",g="#CAE7CB";function x(e){let{onExportPdf:t,onExportExcel:r,sx:x={}}=e;return(0,c.jsxs)(n.A,{sx:(0,o.A)({display:"flex",gap:1},x),children:[(0,c.jsx)(s.A,{title:"Exportar PDF",children:(0,c.jsx)(a.A,{onClick:t,size:"small",color:"error",sx:e=>{const t={bgcolor:"".concat(h," !important"),backgroundColor:"".concat(h," !important"),borderColor:"#d32f2f","& .MuiSvgIcon-root":{color:"#000 !important"}};return(0,o.A)({border:"1px solid",borderColor:"#d32f2f",bgcolor:"".concat(d," !important"),backgroundColor:"".concat(d," !important"),"& .MuiSvgIcon-root":{color:"#000 !important"},"&:hover":t,width:36,height:36},e.applyStyles("dark",{borderColor:"#d32f2f","&:hover":t}))},"aria-label":"Exportar PDF",children:(0,c.jsx)(i.A,{fontSize:"small"})})}),(0,c.jsx)(s.A,{title:"Exportar Excel",children:(0,c.jsxs)(a.A,{onClick:r,size:"small",color:"success",sx:e=>{const t={bgcolor:"".concat(g," !important"),backgroundColor:"".concat(g," !important"),borderColor:"#2e7d32","& .MuiSvgIcon-root":{color:"#000 !important"}};return(0,o.A)({border:"1px solid",borderColor:"#2e7d32",bgcolor:"".concat(u," !important"),backgroundColor:"".concat(u," !important"),"& .MuiSvgIcon-root":{color:"#000 !important"},"&:hover":t,width:36,height:36},e.applyStyles("dark",{borderColor:"#2e7d32","&:hover":t}))},"aria-label":"Exportar Excel",children:[(0,c.jsx)(l.A,{fontSize:"small"})," "]})})]})}},67015:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var o=r(65043),n=r(34943),s=r(53969),a=r(55895),i=r(94799),l=r(10256),c=r(3353),d=r(9446),h=r(88889),u=r(70579);const g=e=>{let{selectedYear:t,onYearChange:r}=e;const o=Array.from({length:5},(e,t)=>(new Date).getFullYear()-t);return(0,u.jsx)(s.A,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:(0,u.jsxs)(l.A,{variant:"outlined",size:"small",sx:{minWidth:120},children:[(0,u.jsx)(c.A,{id:"anio-label",children:"A\xf1o"}),(0,u.jsx)(d.A,{labelId:"anio-label",id:"anio-select",value:t,onChange:r,label:"A\xf1o",children:o.map(e=>(0,u.jsx)(h.A,{value:e,children:e},e))})]})})};var x=r(53089),f=r(28259),p=r(87443),y=r(10756),m=r(86172),v=r(81341),A=r(34375);const b=e=>{const t=Number(e);return Number.isNaN(t)?"-":t.toLocaleString("es-AR",{style:"currency",currency:"ARS"})};function j(e){let{year:t,ingresos:r,egresos:o}=e;const n=r.reduce((e,t)=>e+(Number(t.total)||0),0),l=o.reduce((e,t)=>e+Math.abs(Number(t.total)||0),0),c=n-l;return(0,u.jsxs)(s.A,{sx:{width:"100%"},children:[(0,u.jsxs)(x.A,{container:!0,spacing:2,sx:{mb:4},children:[(0,u.jsx)(x.A,{item:!0,xs:12,sm:4,children:(0,u.jsxs)(i.A,{sx:{p:2},children:[(0,u.jsx)(a.A,{variant:"subtitle1",children:"Ingresos"}),(0,u.jsx)(a.A,{variant:"h6",color:"green",children:b(n)})]})}),(0,u.jsx)(x.A,{item:!0,xs:12,sm:4,children:(0,u.jsxs)(i.A,{sx:{p:2},children:[(0,u.jsx)(a.A,{variant:"subtitle1",children:"Egresos"}),(0,u.jsx)(a.A,{variant:"h6",color:"red",children:b(l)})]})}),(0,u.jsx)(x.A,{item:!0,xs:12,sm:4,children:(0,u.jsxs)(i.A,{sx:{p:2},children:[(0,u.jsx)(a.A,{variant:"subtitle1",children:"Resultado"}),(0,u.jsx)(a.A,{variant:"h6",color:c>=0?"green":"red",children:b(c)})]})})]}),(0,u.jsxs)(a.A,{variant:"h6",gutterBottom:!0,children:["Detalle de Ingresos (",t,")"]}),(0,u.jsx)(f.A,{component:i.A,sx:{mb:4,maxHeight:360,overflowY:"auto",overflowX:"auto"},children:(0,u.jsxs)(p.A,{stickyHeader:!0,sx:{"& .MuiTableCell-root":{border:"1px solid rgba(224, 224, 224, 1)"},"& .MuiTableHead-root .MuiTableCell-root":{fontWeight:700}},children:[(0,u.jsx)(y.A,{children:(0,u.jsxs)(m.A,{children:[(0,u.jsx)(v.A,{scope:"col",children:"N\xba"}),(0,u.jsx)(v.A,{scope:"col",children:"Categor\xeda"}),(0,u.jsx)(v.A,{scope:"col",align:"right",children:"Monto"})]})}),(0,u.jsx)(A.A,{children:r.map((e,t)=>(0,u.jsxs)(m.A,{sx:{"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)",cursor:"pointer"}},children:[(0,u.jsx)(v.A,{children:t+1}),(0,u.jsx)(v.A,{children:e.categoria&&String(e.categoria).trim().length?e.categoria:"Sin categor\xeda"}),(0,u.jsx)(v.A,{align:"right",children:b(Number(e.total)||0)})]},t))})]})}),(0,u.jsxs)(a.A,{variant:"h6",gutterBottom:!0,children:["Detalle de Egresos (",t,")"]}),(0,u.jsx)(f.A,{component:i.A,sx:{maxHeight:360,overflowY:"auto",overflowX:"auto"},children:(0,u.jsxs)(p.A,{stickyHeader:!0,sx:{"& .MuiTableCell-root":{border:"1px solid rgba(224, 224, 224, 1)"},"& .MuiTableHead-root .MuiTableCell-root":{fontWeight:700}},children:[(0,u.jsx)(y.A,{children:(0,u.jsxs)(m.A,{children:[(0,u.jsx)(v.A,{scope:"col",children:"N\xba"}),(0,u.jsx)(v.A,{scope:"col",children:"Categor\xeda"}),(0,u.jsx)(v.A,{scope:"col",align:"right",children:"Monto"})]})}),(0,u.jsx)(A.A,{children:o.map((e,t)=>(0,u.jsxs)(m.A,{sx:{"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.08)",cursor:"pointer"}},children:[(0,u.jsx)(v.A,{children:t+1}),(0,u.jsx)(v.A,{children:e.categoria&&String(e.categoria).trim().length?e.categoria:"Sin categor\xeda"}),(0,u.jsx)(v.A,{align:"right",children:b(Math.abs(Number(e.total)||0))})]},t))})]})})]})}var E=r(34955),w=r(50108),k=r(82291),P=r(87734),C=r(52185),I=r(6026),O=r(80379),N=r(70095),S=r(66163),M=r(21389),z=r(64857),F=r(65239),R=r.n(F),D=r(86806),T=r(13658);function W(){const[e,t]=o.useState((new Date).getFullYear()),[r,l]=o.useState({ingresosMensuales:Array(12).fill(0),egresosMensuales:Array(12).fill(0),detalleIngresos:[],detalleEgresos:[]}),c=o.useRef(null);o.useEffect(()=>{const t=T.A.REPORTE;if(!t||!e)return;const r=new URLSearchParams;r.set("anio",Number(e));const o={},n=sessionStorage.getItem("sub"),s=sessionStorage.getItem("accessToken");n&&(o["X-Usuario-Sub"]=n),s&&(o.Authorization="Bearer ".concat(s)),fetch("".concat(t,"/pyl?").concat(r.toString()),{headers:o}).then(async e=>{var t,r,o,n;if(!e.ok)throw new Error("HTTP ".concat(e.status));const s=await e.json();l({ingresosMensuales:null!==(t=s.ingresosMensuales)&&void 0!==t?t:Array(12).fill(0),egresosMensuales:null!==(r=s.egresosMensuales)&&void 0!==r?r:Array(12).fill(0),detalleIngresos:null!==(o=s.detalleIngresos)&&void 0!==o?o:[],detalleEgresos:null!==(n=s.detalleEgresos)&&void 0!==n?n:[]})}).catch(e=>{console.error("Error al obtener los datos del backend P&L:",e),l({ingresosMensuales:Array(12).fill(0),egresosMensuales:Array(12).fill(0),detalleIngresos:[],detalleEgresos:[]})})},[e]);const d=e=>{const t=(null!==e&&void 0!==e?e:"").toString().trim();return t.length?t:"Sin categor\xeda"},h=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"].map((e,t)=>({mes:e,Ingresos:r.ingresosMensuales[t],Egresos:r.egresosMensuales[t]}));return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(n.Ay,{}),(0,u.jsxs)(s.A,{sx:{width:"100%",maxWidth:{sm:"100%",md:"1700px"},mx:"auto",p:3},children:[(0,u.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,u.jsx)(a.A,{component:"h2",variant:"h4",children:"Estado de Resultados"}),(0,u.jsx)(E.A,{onExportExcel:()=>{const{detalleIngresos:t,detalleEgresos:o}=r,n=t.reduce((e,t)=>e+(Number(t.total)||0),0),s=o.reduce((e,t)=>e+Math.abs(Number(t.total)||0),0),a=n-s,i=[["Estado de Resultados","(".concat(e,")")],[],["Ingresos","",{v:n,t:"n"}],...t.map(e=>["",d(e.categoria),{v:Number(e.total)||0,t:"n"}]),[],["Egresos","",{v:s,t:"n"}],...o.map(e=>["",d(e.categoria),{v:Math.abs(Number(e.total)||0),t:"n"}]),[],["Resultado del Ejercicio","",{v:a,t:"n"}]],l=[{s:{r:0,c:0},e:{r:0,c:2}},{s:{r:2,c:0},e:{r:2,c:1}},{s:{r:2+t.length+1,c:0},e:{r:2+t.length+1,c:1}},{s:{r:2+t.length+1+o.length+2,c:0},e:{r:2+t.length+1+o.length+2,c:1}}];(0,D.b)(i,"estado-de-resultados-".concat(e),"Estado de Resultados",[{wch:25},{wch:25},{wch:15}],l,["C"])},onExportPdf:()=>{const t=c.current;t?R()(t).then(t=>{const o=t.toDataURL("image/png"),n=new M.jsPDF;n.text("Estado de Resultados (".concat(e,")"),14,22);const s=n.getImageProperties(o),a=n.internal.pageSize.getWidth(),i=s.height*a/s.width;n.addImage(o,"PNG",14,30,a-28,i);const{detalleIngresos:l,detalleEgresos:c}=r,h=l.reduce((e,t)=>e+t.total,0),u=c.reduce((e,t)=>e+t.total,0),g=h-u,x=[];x.push(["Ingresos","",h.toFixed(2)]),l.forEach(e=>{const t=Number(e.total)||0;x.push(["",d(e.categoria),t.toFixed(2)])}),x.push(["Egresos","",u.toFixed(2)]),c.forEach(e=>{const t=Math.abs(Number(e.total)||0);x.push(["",d(e.categoria),t.toFixed(2)])}),x.push(["Resultado del Ejercicio","",g.toFixed(2)]),(0,z.Ay)(n,{head:[["Tipo","Categor\xeda","Total"]],body:x,startY:i+40}),n.save("estado-de-resultados-".concat(e,".pdf"))}):alert("No se pudo encontrar el gr\xe1fico para exportar.")}})]}),(0,u.jsx)(g,{selectedYear:e,onYearChange:e=>t(Number(e.target.value))}),(0,u.jsx)(j,{year:e,ingresos:r.detalleIngresos,egresos:r.detalleEgresos}),(0,u.jsx)("div",{ref:c,children:(0,u.jsxs)(i.A,{variant:"outlined",sx:{mt:4,p:2},children:[(0,u.jsx)(a.A,{variant:"subtitle2",sx:{mb:2,fontWeight:600,color:"text.primary"},children:"Comparativo mensual de Ingresos vs Egresos"}),(0,u.jsx)(w.u,{width:"100%",height:300,children:(0,u.jsxs)(k.E,{data:h,children:[(0,u.jsx)(P.d,{strokeDasharray:"3 3",stroke:"#E0E0E0"}),(0,u.jsx)(C.W,{dataKey:"mes"}),(0,u.jsx)(I.h,{}),(0,u.jsx)(O.m,{formatter:e=>(e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(Number(e)||0))(e)}),(0,u.jsx)(N.s,{}),(0,u.jsx)(S.y,{dataKey:"Ingresos",fill:"#2e7d32"}),(0,u.jsx)(S.y,{dataKey:"Egresos",fill:"#c62828"})]})})]})})]})]})}function _(){return(0,u.jsx)(W,{})}},67233:()=>{},86806:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var o=r(81652);const n=function(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Sheet1",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];if(e&&0!==e.length){if(r=o.utils.aoa_to_sheet(e),!r["!ref"]){const t=e.length-1,n=e.reduce((e,t)=>Math.max(e,t.length-1),0);t>=0&&n>=0&&(r["!ref"]=o.utils.encode_range({s:{r:0,c:0},e:{r:t,c:n}}))}if(s.length>0&&(r["!cols"]=s),a.length>0&&r["!ref"]&&(r["!merges"]=a),i.length>0&&r["!ref"]){const e=o.utils.decode_range(r["!ref"]);for(let t=e.s.r;t<=e.e.r;++t)for(const e of i){const n=o.utils.decode_col(e),s=o.utils.encode_cell({r:t,c:n});r[s]&&"n"===r[s].t&&(r[s].z="$ #,##0.00")}}}else r=o.utils.aoa_to_sheet([["No hay datos para exportar."]]),r["!cols"]=[{wch:30}];const l=o.utils.book_new();o.utils.book_append_sheet(l,r,n),o.writeFile(l,"".concat(t,".xlsx"))}},87734:(e,t,r)=>{"use strict";r.d(t,{d:()=>z});var o=r(65043),n=r(155),s=r(76307),a=r(16281),i=r(98854),l=r(51109),c=r(78796),d=r(56555),h=r(70787),u=r(93987),g=r(76371),x=r(96291),f=["x1","y1","x2","y2","key"],p=["offset"],y=["xAxisId","yAxisId"],m=["xAxisId","yAxisId"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},j.apply(null,arguments)}function E(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var w=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:l}=e;return o.createElement("rect",{x:n,y:s,ry:l,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function k(e,t){var r;if(o.isValidElement(e))r=o.cloneElement(e,t);else if("function"===typeof e)r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:l}=t,c=E(t,f),d=(0,x.u)(c),{offset:h}=d,u=E(d,p);r=o.createElement("line",j({},u,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:l}))}return r}function P(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,l=E(e,y),c=s.map((e,o)=>{var s=A(A({},l),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(o),index:o});return k(n,s)});return o.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function C(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,l=E(e,m),c=s.map((e,o)=>{var s=A(A({},l),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(o),index:o});return k(n,s)});return o.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function I(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(e=>Math.round(e+s-s)).sort((e,t)=>e-t);s!==d[0]&&d.unshift(0);var h=d.map((e,l)=>{var c=!d[l+1]?s+i-e:d[l+1]-e;if(c<=0)return null;var h=l%t.length;return o.createElement("rect",{key:"react-".concat(l),y:e,x:n,height:c,width:a,stroke:"none",fill:t[h],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return o.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function O(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(e=>Math.round(e+s-s)).sort((e,t)=>e-t);s!==d[0]&&d.unshift(0);var h=d.map((e,t)=>{var c=!d[t+1]?s+i-e:d[t+1]-e;if(c<=0)return null;var h=t%r.length;return o.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:c,height:l,stroke:"none",fill:r[h],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return o.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var N=(e,t)=>{var{xAxis:r,width:o,height:n,offset:s}=e;return(0,a.PW)((0,i.f)(A(A(A({},l.F),r),{},{ticks:(0,a.Rh)(r,!0),viewBox:{x:0,y:0,width:o,height:n}})),s.left,s.left+s.width,t)},S=(e,t)=>{var{yAxis:r,width:o,height:n,offset:s}=e;return(0,a.PW)((0,i.f)(A(A(A({},l.F),r),{},{ticks:(0,a.Rh)(r,!0),viewBox:{x:0,y:0,width:o,height:n}})),s.top,s.top+s.height,t)},M={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function z(e){var t=(0,c.yi)(),r=(0,c.rY)(),a=(0,c.W7)(),i=A(A({},(0,g.e)(e,M)),{},{x:(0,s.Et)(e.x)?e.x:a.left,y:(0,s.Et)(e.y)?e.y:a.top,width:(0,s.Et)(e.width)?e.width:a.width,height:(0,s.Et)(e.height)?e.height:a.height}),{xAxisId:l,yAxisId:x,x:f,y:p,width:y,height:m,syncWithTicks:v,horizontalValues:b,verticalValues:E}=i,k=(0,u.r)(),z=(0,h.G)(e=>(0,d.ZB)(e,"xAxis",l,k)),F=(0,h.G)(e=>(0,d.ZB)(e,"yAxis",x,k));if(!(0,s.Et)(y)||y<=0||!(0,s.Et)(m)||m<=0||!(0,s.Et)(f)||f!==+f||!(0,s.Et)(p)||p!==+p)return null;var R=i.verticalCoordinatesGenerator||N,D=i.horizontalCoordinatesGenerator||S,{horizontalPoints:T,verticalPoints:W}=i;if((!T||!T.length)&&"function"===typeof D){var _=b&&b.length,Y=D({yAxis:F?A(A({},F),{},{ticks:_?b:F.ticks}):void 0,width:t,height:r,offset:a},!!_||v);(0,n.R)(Array.isArray(Y),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Y,"]")),Array.isArray(Y)&&(T=Y)}if((!W||!W.length)&&"function"===typeof R){var B=E&&E.length,G=R({xAxis:z?A(A({},z),{},{ticks:B?E:z.ticks}):void 0,width:t,height:r,offset:a},!!B||v);(0,n.R)(Array.isArray(G),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof G,"]")),Array.isArray(G)&&(W=G)}return o.createElement("g",{className:"recharts-cartesian-grid"},o.createElement(w,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),o.createElement(I,j({},i,{horizontalPoints:T})),o.createElement(O,j({},i,{verticalPoints:W})),o.createElement(P,j({},i,{offset:a,horizontalPoints:T,xAxis:z,yAxis:F})),o.createElement(C,j({},i,{offset:a,verticalPoints:W,xAxis:z,yAxis:F})))}z.displayName="CartesianGrid"}}]);
//# sourceMappingURL=8284.ac16c08e.chunk.js.map