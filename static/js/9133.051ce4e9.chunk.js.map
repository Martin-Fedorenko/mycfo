{"version":3,"file":"static/js/9133.051ce4e9.chunk.js","mappings":"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","sources":["api/http.js","../node_modules/@mui/icons-material/esm/ArrowBack.js","pronostico/pronostico-fijo/PronosticoFijoDetalle.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  CognitoUserPool,\r\n  CognitoUser,\r\n  CognitoRefreshToken,\r\n} from \"amazon-cognito-identity-js\";\r\nimport { sessionService } from \"../shared-services/sessionService\";\r\nimport URL_CONFIG from \"../config/api-config\";\r\n\r\nconst http = axios.create();\r\nconst PRONOSTICO_BASE_URL = URL_CONFIG.PRONOSTICO;\r\nconst cognitoPoolConfig = {\r\n  UserPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\r\n  ClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\r\n};\r\n\r\nlet refreshPromise = null;\r\nlet hasForcedLogout = false;\r\n\r\nconst isPronosticoRequest = (url) =>\r\n  Boolean(\r\n    url &&\r\n      PRONOSTICO_BASE_URL &&\r\n      String(url).startsWith(String(PRONOSTICO_BASE_URL)),\r\n  );\r\n\r\nconst safeSessionGet = (key) => {\r\n  try {\r\n    return sessionStorage.getItem(key);\r\n  } catch (err) {\r\n    console.warn(\"No se pudo leer sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst safeSessionSet = (key, value) => {\r\n  try {\r\n    if (value !== undefined && value !== null) {\r\n      sessionStorage.setItem(key, value);\r\n    }\r\n  } catch (err) {\r\n    console.warn(\"No se pudo escribir en sessionStorage:\", err);\r\n  }\r\n};\r\n\r\nconst clearSessionAndRedirect = () => {\r\n  if (hasForcedLogout) {\r\n    return;\r\n  }\r\n  hasForcedLogout = true;\r\n  try {\r\n    sessionStorage.clear();\r\n  } catch {\r\n    /* noop */\r\n  }\r\n  if (sessionService?.limpiarSesion) {\r\n    sessionService.limpiarSesion();\r\n  }\r\n  if (typeof window !== \"undefined\") {\r\n    window.location.href = \"/#/signin\";\r\n  }\r\n};\r\n\r\nconst buildCognitoUser = () => {\r\n  const username = safeSessionGet(\"email\") || safeSessionGet(\"username\");\r\n  if (\r\n    !username ||\r\n    !cognitoPoolConfig.UserPoolId ||\r\n    !cognitoPoolConfig.ClientId\r\n  ) {\r\n    return null;\r\n  }\r\n  const pool = new CognitoUserPool(cognitoPoolConfig);\r\n  return new CognitoUser({\r\n    Username: username,\r\n    Pool: pool,\r\n  });\r\n};\r\n\r\nconst refreshTokens = () => {\r\n  const refreshTokenValue = safeSessionGet(\"refreshToken\");\r\n  const cognitoUser = buildCognitoUser();\r\n  if (!refreshTokenValue || !cognitoUser) {\r\n    return Promise.reject(new Error(\"No hay datos para renovar la sesión.\"));\r\n  }\r\n  const refreshToken = new CognitoRefreshToken({\r\n    RefreshToken: refreshTokenValue,\r\n  });\r\n  return new Promise((resolve, reject) => {\r\n    cognitoUser.refreshSession(refreshToken, (err, session) => {\r\n      if (err) {\r\n        reject(err);\r\n        return;\r\n      }\r\n      const nextAccessToken = session.getAccessToken().getJwtToken();\r\n      const nextIdToken = session.getIdToken().getJwtToken();\r\n      const nextRefreshToken = session.getRefreshToken().getToken();\r\n      safeSessionSet(\"accessToken\", nextAccessToken);\r\n      safeSessionSet(\"idToken\", nextIdToken);\r\n      if (nextRefreshToken) {\r\n        safeSessionSet(\"refreshToken\", nextRefreshToken);\r\n      }\r\n      resolve(nextAccessToken);\r\n    });\r\n  });\r\n};\r\n\r\nconst getRefreshPromise = () => {\r\n  if (!refreshPromise) {\r\n    refreshPromise = refreshTokens()\r\n      .then((token) => {\r\n        refreshPromise = null;\r\n        return token;\r\n      })\r\n      .catch((error) => {\r\n        refreshPromise = null;\r\n        throw error;\r\n      });\r\n  }\r\n  return refreshPromise;\r\n};\r\n\r\nhttp.interceptors.request.use((config) => {\r\n  const accessToken = sessionStorage.getItem(\"accessToken\");\r\n  if (isPronosticoRequest(config.url)) {\r\n    config.headers = config.headers ?? {};\r\n    if (accessToken) {\r\n      config.headers.Authorization = `Bearer ${accessToken}`;\r\n    }\r\n    const usuarioSub = sessionStorage.getItem(\"sub\");\r\n    if (usuarioSub) {\r\n      config.headers[\"X-Usuario-Sub\"] = usuarioSub;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nhttp.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const { config, response } = error;\r\n    if (\r\n      !config ||\r\n      !response ||\r\n      response.status !== 401 ||\r\n      !isPronosticoRequest(config.url)\r\n    ) {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (config.__isRetryRequest) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    try {\r\n      const newAccessToken = await getRefreshPromise();\r\n      if (!newAccessToken) {\r\n        throw new Error(\"No se obtuvo un token renovado.\");\r\n      }\r\n      config.__isRetryRequest = true;\r\n      config.headers = config.headers ?? {};\r\n      config.headers.Authorization = `Bearer ${newAccessToken}`;\r\n      return http(config);\r\n    } catch (refreshError) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(refreshError);\r\n    }\r\n  },\r\n);\r\n\r\nexport default http;\r\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z\"\n}), 'ArrowBack');","import * as React from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  ToggleButton,\r\n  ToggleButtonGroup,\r\n  Alert,\r\n  Button\r\n} from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  CartesianGrid,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  ReferenceLine,\r\n  ReferenceArea\r\n} from 'recharts';\r\nimport LoadingSpinner from '../../shared-components/LoadingSpinner';\r\nimport API_CONFIG from '../../config/api-config';\r\nimport http from '../../api/http';\r\n\r\nexport default function PronosticoFijoDetalle() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [forecast, setForecast] = React.useState(null);\r\n  const [error, setError] = React.useState(null);\r\n  const [viewMode, setViewMode] = React.useState('todos'); // 'todos', 'ingresos', 'egresos', 'balance'\r\n\r\n  React.useEffect(() => {\r\n    cargarForecast();\r\n  }, [id]);\r\n\r\n  const cargarForecast = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await http.get(`${API_CONFIG.PRONOSTICO}/api/forecasts/${id}`);\r\n      setForecast(response.data);\r\n    } catch (err) {\r\n      console.error('Error cargando forecast:', err);\r\n      setError(err.response?.data?.message || 'Error al cargar el pronóstico. Por favor intenta nuevamente.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const prepareChartData = () => {\r\n    if (!forecast || !forecast.lineas) return [];\r\n\r\n    return forecast.lineas\r\n      .sort((a, b) => {\r\n        // Ordenar por año y luego por mes\r\n        if (a.año !== b.año) return a.año - b.año;\r\n        return a.mes - b.mes;\r\n      })\r\n      .map(linea => ({\r\n        mes: `${linea.mes}/${linea.año}`,\r\n        año: linea.año,\r\n        mesNum: linea.mes,\r\n        tipo: linea.tipo || 'estimado', // 'real' o 'estimado'\r\n        ingresos: parseFloat(linea.ingresosEsperados || 0),\r\n        egresos: parseFloat(linea.egresosEsperados || 0),\r\n        balance: parseFloat(linea.balanceNetoEsperado || 0)\r\n      }));\r\n  };\r\n\r\n  const chartData = prepareChartData();\r\n\r\n  // Determinar el punto de cambio entre real y estimado\r\n  const getSplitPoint = () => {\r\n    if (!chartData || chartData.length === 0) return -1;\r\n    for (let i = 0; i < chartData.length; i++) {\r\n      if (chartData[i].tipo === 'estimado') {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  const getLinesToDisplay = () => {\r\n    const splitPoint = getSplitPoint();\r\n    const hasRealAndEstimated = splitPoint > 0;\r\n\r\n    switch (viewMode) {\r\n      case 'ingresos':\r\n        if (hasRealAndEstimated) {\r\n          return (\r\n            <>\r\n              <Line \r\n                dataKey=\"ingresos\" \r\n                stroke=\"#2e7d32\" \r\n                strokeWidth={2} \r\n                name=\"Ingresos\" \r\n                dot={false}\r\n              />\r\n            </>\r\n          );\r\n        }\r\n        return <Line type=\"monotone\" dataKey=\"ingresos\" stroke=\"#4caf50\" strokeWidth={2} name=\"Ingresos\" />;\r\n      case 'egresos':\r\n        if (hasRealAndEstimated) {\r\n          return (\r\n            <>\r\n              <Line \r\n                dataKey=\"egresos\" \r\n                stroke=\"#c62828\" \r\n                strokeWidth={2} \r\n                name=\"Egresos\" \r\n                dot={false}\r\n              />\r\n            </>\r\n          );\r\n        }\r\n        return <Line type=\"monotone\" dataKey=\"egresos\" stroke=\"#f44336\" strokeWidth={2} name=\"Egresos\" />;\r\n      case 'balance':\r\n        if (hasRealAndEstimated) {\r\n          return (\r\n            <>\r\n              <Line \r\n                dataKey=\"balance\" \r\n                stroke=\"#1565c0\" \r\n                strokeWidth={2} \r\n                name=\"Balance\" \r\n                dot={false}\r\n              />\r\n            </>\r\n          );\r\n        }\r\n        return <Line type=\"monotone\" dataKey=\"balance\" stroke=\"#2196f3\" strokeWidth={2} name=\"Balance\" />;\r\n      case 'todos':\r\n      default:\r\n        if (hasRealAndEstimated) {\r\n          return (\r\n            <>\r\n              <Line dataKey=\"ingresos\" stroke=\"#2e7d32\" strokeWidth={2} name=\"Ingresos\" dot={false} />\r\n              <Line dataKey=\"egresos\" stroke=\"#c62828\" strokeWidth={2} name=\"Egresos\" dot={false} />\r\n              <Line dataKey=\"balance\" stroke=\"#1565c0\" strokeWidth={2} name=\"Balance\" dot={false} />\r\n            </>\r\n          );\r\n        }\r\n        return (\r\n          <>\r\n            <Line type=\"monotone\" dataKey=\"ingresos\" stroke=\"#4caf50\" strokeWidth={2} name=\"Ingresos\" />\r\n            <Line type=\"monotone\" dataKey=\"egresos\" stroke=\"#f44336\" strokeWidth={2} name=\"Egresos\" />\r\n            <Line type=\"monotone\" dataKey=\"balance\" stroke=\"#2196f3\" strokeWidth={2} name=\"Balance\" />\r\n          </>\r\n        );\r\n    }\r\n  };\r\n\r\n  const getSplitPointMes = () => {\r\n    const splitPoint = getSplitPoint();\r\n    if (splitPoint <= 0) return null;\r\n    return chartData[splitPoint]?.mes;\r\n  };\r\n\r\n  const formatearFecha = (fechaISO) => {\r\n    if (!fechaISO) return '-';\r\n    try {\r\n      const fecha = new Date(fechaISO);\r\n      return fecha.toLocaleDateString('es-AR', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n      });\r\n    } catch (e) {\r\n      return fechaISO;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Box sx={{ p: 3 }}>\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n        <Button startIcon={<ArrowBackIcon />} onClick={() => navigate('/pronostico-fijo')}>\r\n          Volver\r\n        </Button>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (!forecast) {\r\n    return (\r\n      <Box sx={{ p: 3 }}>\r\n        <Alert severity=\"warning\">No se encontró el pronóstico solicitado.</Alert>\r\n        <Button startIcon={<ArrowBackIcon />} onClick={() => navigate('/pronostico-fijo')} sx={{ mt: 2 }}>\r\n          Volver\r\n        </Button>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ width: '100%', minHeight: '100vh', p: 3 }}>\r\n      <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\r\n        <Button\r\n          startIcon={<ArrowBackIcon />}\r\n          onClick={() => navigate('/pronostico-fijo')}\r\n          sx={{ mr: 2 }}\r\n        >\r\n          Volver\r\n        </Button>\r\n        <Typography variant=\"h4\">\r\n          {forecast.nombre || 'Pronóstico'}\r\n        </Typography>\r\n      </Box>\r\n\r\n      {/* Información del pronóstico */}\r\n      <Paper sx={{ p: 3, mb: 3 }}>\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          Información del Pronóstico\r\n        </Typography>\r\n        <Box sx={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: 2, mt: 2 }}>\r\n          <Box>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Horizonte\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n              {forecast.horizonteMeses} meses\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Frecuencia\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n              Cada {forecast.mesesFrecuencia} meses\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Períodos Analizados\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n              {forecast.periodosAnalizados} períodos\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Fecha de Generación\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n              {formatearFecha(forecast.createdAt)}\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Período del Pronóstico\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n              {forecast.mesInicioPronostico} - {forecast.mesFinPronostico}\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Paper>\r\n\r\n      {/* Controles de visualización del gráfico */}\r\n      {chartData.length > 0 && (\r\n        <Paper sx={{ p: 3, mb: 3 }}>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\r\n            <Typography variant=\"h6\" sx={{ mr: 3 }}>\r\n              Visualización\r\n            </Typography>\r\n            <ToggleButtonGroup\r\n              value={viewMode}\r\n              exclusive\r\n              onChange={(e, newMode) => newMode && setViewMode(newMode)}\r\n              size=\"small\"\r\n            >\r\n              <ToggleButton value=\"todos\">\r\n                Todos\r\n              </ToggleButton>\r\n              <ToggleButton value=\"ingresos\">\r\n                Solo Ingresos\r\n              </ToggleButton>\r\n              <ToggleButton value=\"egresos\">\r\n                Solo Egresos\r\n              </ToggleButton>\r\n              <ToggleButton value=\"balance\">\r\n                Solo Balance\r\n              </ToggleButton>\r\n            </ToggleButtonGroup>\r\n          </Box>\r\n\r\n          {/* Gráfico */}\r\n          <ResponsiveContainer width=\"100%\" height={400}>\r\n            <LineChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"mes\" />\r\n              <YAxis />\r\n              <Tooltip formatter={(value) => `$${value.toLocaleString('es-AR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`} />\r\n              <Legend />\r\n              {getSplitPointMes() && (\r\n                <>\r\n                  <ReferenceLine \r\n                    x={getSplitPointMes()} \r\n                    stroke=\"#9e9e9e\" \r\n                    strokeWidth={2} \r\n                    strokeDasharray=\"3 3\"\r\n                    label={{ value: \"Estimado\", position: \"top\", fill: \"#9e9e9e\" }}\r\n                  />\r\n                  <ReferenceArea \r\n                    x1={getSplitPointMes()} \r\n                    fill=\"#e3f2fd\" \r\n                    fillOpacity={0.3}\r\n                  />\r\n                </>\r\n              )}\r\n              {getLinesToDisplay()}\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </Paper>\r\n      )}\r\n\r\n      {chartData.length === 0 && (\r\n        <Alert severity=\"warning\">\r\n          Este pronóstico no tiene datos disponibles.\r\n        </Alert>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n"],"names":["http","axios","create","PRONOSTICO_BASE_URL","URL_CONFIG","PRONOSTICO","cognitoPoolConfig","UserPoolId","process","ClientId","refreshPromise","hasForcedLogout","isPronosticoRequest","url","Boolean","String","startsWith","safeSessionGet","key","sessionStorage","getItem","err","console","warn","safeSessionSet","value","undefined","setItem","clearSessionAndRedirect","clear","_unused","sessionService","limpiarSesion","window","location","href","refreshTokens","refreshTokenValue","cognitoUser","buildCognitoUser","username","pool","CognitoUserPool","CognitoUser","Username","Pool","Promise","reject","Error","refreshToken","CognitoRefreshToken","RefreshToken","resolve","refreshSession","session","nextAccessToken","getAccessToken","getJwtToken","nextIdToken","getIdToken","nextRefreshToken","getRefreshToken","getToken","interceptors","request","use","config","accessToken","_config$headers","headers","Authorization","concat","usuarioSub","response","async","error","status","__isRetryRequest","_config$headers2","newAccessToken","then","token","catch","refreshError","createSvgIcon","_jsx","d","PronosticoFijoDetalle","id","useParams","navigate","useNavigate","loading","setLoading","React","forecast","setForecast","setError","viewMode","setViewMode","cargarForecast","get","API_CONFIG","data","_err$response","_err$response$data","message","chartData","lineas","sort","a","b","año","mes","map","linea","mesNum","tipo","ingresos","parseFloat","ingresosEsperados","egresos","egresosEsperados","balance","balanceNetoEsperado","getSplitPoint","length","i","getSplitPointMes","_chartData$splitPoint","splitPoint","LoadingSpinner","_jsxs","Box","sx","p","children","Alert","severity","mb","Button","startIcon","ArrowBackIcon","onClick","width","minHeight","display","alignItems","mr","Typography","variant","nombre","Paper","gutterBottom","gridTemplateColumns","gap","mt","color","horizonteMeses","mesesFrecuencia","periodosAnalizados","fechaISO","Date","toLocaleDateString","year","month","day","e","formatearFecha","createdAt","mesInicioPronostico","mesFinPronostico","ToggleButtonGroup","exclusive","onChange","newMode","size","ToggleButton","ResponsiveContainer","height","LineChart","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","Tooltip","formatter","toLocaleString","minimumFractionDigits","maximumFractionDigits","Legend","_Fragment","ReferenceLine","x","stroke","strokeWidth","label","position","fill","ReferenceArea","x1","fillOpacity","getLinesToDisplay","hasRealAndEstimated","Line","name","dot","type"],"sourceRoot":""}