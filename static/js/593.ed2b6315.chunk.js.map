{"version":3,"file":"static/js/593.ed2b6315.chunk.js","mappings":"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","sources":["consolidacion/mercado-pago/mpApi.js","consolidacion/mercado-pago/components/MpLinkCard.js","consolidacion/mercado-pago/catalogs.js","consolidacion/mercado-pago/components/MpToolbar.js","consolidacion/mercado-pago/components/EditableCategory.js","consolidacion/mercado-pago/components/MpPaymentsTable.js","consolidacion/mercado-pago/components/MpImportDialog.js","consolidacion/mercado-pago/components/MpPreviewDialog.js","consolidacion/mercado-pago/components/MpConfigDialog.js","consolidacion/mercado-pago/components/MainGrid.js","consolidacion/mercado-pago/Mercado-Pago.js","shared-components/CustomDatePicker.js","shared-components/categorias.js"],"sourcesContent":["// /mercado-pago/mpApi.js\r\nimport API_CONFIG from \"../../config/api-config\";\r\n\r\nconst BASE_URL = API_CONFIG.REGISTRO;\r\n\r\nconst USER_HEADER = \"X-Usuario-Sub\";\r\n\r\nasync function request(path, { method = \"GET\", body, headers } = {}) {\r\n  const url = `${BASE_URL}${path}`;\r\n  const opts = {\r\n    method,\r\n    headers: {\r\n      ...(headers || {}),\r\n    },\r\n  };\r\n\r\n  const usuarioSub = sessionStorage.getItem(\"sub\");\r\n  if (usuarioSub) {\r\n    opts.headers[USER_HEADER] = usuarioSub;\r\n  }\r\n\r\n  // Solo seteamos JSON si hay body\r\n  if (body !== undefined) {\r\n    opts.headers[\"Content-Type\"] = \"application/json\";\r\n    opts.body = JSON.stringify(body);\r\n  }\r\n\r\n  // Si NO usás cookies/sesión en el back, podés quitar esta línea:\r\n  // opts.credentials = \"include\";\r\n\r\n  const res = await fetch(url, opts);\r\n  const text = await res.text();\r\n  let data = null;\r\n  try {\r\n    data = text ? JSON.parse(text) : null;\r\n  } catch {\r\n    data = text;\r\n  }\r\n\r\n  if (!res.ok) {\r\n    const message =\r\n      data?.message || data?.error || text || `HTTP ${res.status}`;\r\n    const err = new Error(message);\r\n    err.status = res.status;\r\n    err.payload = data;\r\n    throw err;\r\n  }\r\n  return data;\r\n}\r\n\r\nexport const mpApi = {\r\n  getStatus: () => request(\"/api/mp/status\"),\r\n\r\n  startOAuth: async () => {\r\n    const res = await request(\"/api/mp/oauth/url\");\r\n    console.log(\"Respuesta /oauth/url:\", res);\r\n    const authUrl = res?.url || res?.authUrl;\r\n    if (!authUrl)\r\n      throw new Error(\"El backend no devolvió la URL de autorización\");\r\n    return authUrl;\r\n  },\r\n\r\n  unlink: () => request(\"/api/mp/unlink\", { method: \"POST\" }),\r\n\r\n  listPayments: (params = {}) => {\r\n    const { from, to, q, page = 0, pageSize = 20 } = params;\r\n    const sp = new URLSearchParams();\r\n    if (from) sp.set(\"from\", from);\r\n    if (to) sp.set(\"to\", to);\r\n    if (q) sp.set(\"q\", q);\r\n    sp.set(\"page\", page);\r\n    sp.set(\"size\", pageSize);\r\n    sp.set(\"sort\", \"fecha,DESC\");\r\n    return request(`/api/mp/payments?${sp.toString()}`);\r\n  },\r\n\r\n  // Nuevo endpoint para obtener solo los pagos importados\r\n  listImportedPayments: (params = {}) => {\r\n    const { from, to, q, page = 0, pageSize = 20 } = params;\r\n    const sp = new URLSearchParams();\r\n    if (from) sp.set(\"from\", from);\r\n    if (to) sp.set(\"to\", to);\r\n    if (q) sp.set(\"q\", q);\r\n    sp.set(\"page\", page);\r\n    sp.set(\"size\", pageSize);\r\n    sp.set(\"sort\", \"fecha,DESC\");\r\n    return request(`/api/mp/imported-payments?${sp.toString()}`);\r\n  },\r\n\r\n  // Métodos de preview (sin guardar)\r\n  previewPaymentsByMonth: ({ month, year }) =>\r\n    request(\"/api/mp/preview\", { method: \"POST\", body: { month, year } }),\r\n\r\n  previewPaymentById: (paymentId) =>\r\n    request(\"/api/mp/preview\", { method: \"POST\", body: { paymentId } }),\r\n\r\n  previewByExternalReference: (externalReference) =>\r\n    request(\"/api/mp/preview\", { method: \"POST\", body: { externalReference } }),\r\n\r\n  // Importar pagos seleccionados\r\n  importSelectedPayments: (paymentIds) =>\r\n    request(\"/api/mp/import/selected\", { method: \"POST\", body: paymentIds }),\r\n\r\n  // Métodos de importación directa (legacy)\r\n  importPaymentsByMonth: ({ month, year }) =>\r\n    request(\"/api/mp/import\", { method: \"POST\", body: { month, year } }),\r\n\r\n  importPaymentById: (paymentId) =>\r\n    request(\"/api/mp/import\", { method: \"POST\", body: { paymentId } }),\r\n\r\n  getConfig: () => request(\"/api/mp/config\"),\r\n  updateConfig: (cfg) =>\r\n    request(\"/api/mp/config\", { method: \"PUT\", body: cfg }),\r\n\r\n  billPayments: (ids) =>\r\n    request(\"/api/mp/facturar\", { method: \"POST\", body: { paymentIds: ids } }),\r\n\r\n  // Actualizar categoría de un pago\r\n  updatePaymentCategory: (registroId, newCategory) =>\r\n    request(`/api/mp/payments/${registroId}/category`, {\r\n      method: \"PUT\",\r\n      body: { categoria: newCategory },\r\n    }),\r\n};\r\n","// /mercado-pago/components/MpLinkCard.js\r\nimport React from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  CardActions,\r\n  Button,\r\n  Stack,\r\n  Box,\r\n} from \"@mui/material\";\r\nimport { mpApi } from \"../mpApi\";\r\nimport logo from \"./logoMPblanconegro.png\";\r\n\r\nexport default function MpLinkCard({ onLinked }) {\r\n  const [busy, setBusy] = React.useState(false);\r\n  const [err, setErr] = React.useState(null);\r\n\r\n  const startLink = async () => {\r\n    setBusy(true);\r\n    setErr(null);\r\n    try {\r\n      const url = await mpApi.startOAuth();\r\n      if (!url) throw new Error(\"URL de autorización vacía\");\r\n      window.location.href = url;\r\n    } catch (e) {\r\n      setErr(e?.message || \"No se pudo iniciar la vinculación\");\r\n      setBusy(false);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const p = new URLSearchParams(window.location.search);\r\n    if ((p.get(\"mp\") === \"linked\" || p.get(\"linked\") === \"1\") && onLinked) {\r\n      onLinked();\r\n    }\r\n  }, [onLinked]);\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        maxWidth: 860,\r\n        mx: \"auto\",\r\n        mt: 6,\r\n        borderRadius: 2,\r\n        overflow: \"hidden\",\r\n      }}\r\n    >\r\n      <CardHeader\r\n        title=\"Vincular tu cuenta de Mercado Pago\"\r\n        subheader=\"Conecta tu cuenta para importar pagos y movimientos.\"\r\n        sx={{ pb: 0 }}\r\n      />\r\n\r\n      {/* Espacio entre el header y el logo */}\r\n      <Stack alignItems=\"center\" justifyContent=\"center\" sx={{ mt: 3, mb: 1 }}>\r\n        <Box\r\n          sx={{\r\n            p: 1.25,\r\n            borderRadius: 2,\r\n            bgcolor: \"#0d1117\",\r\n            border: \"1px solid rgba(255,255,255,0.08)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            minWidth: 80,\r\n          }}\r\n        >\r\n          <img\r\n            src={logo}\r\n            alt=\"Mercado Pago\"\r\n            style={{\r\n              height: 125,\r\n              opacity: 0.95,\r\n              filter: \"drop-shadow(0 2px 6px rgba(0,0,0,0.45))\",\r\n            }}\r\n          />\r\n        </Box>\r\n      </Stack>\r\n\r\n      <Stack spacing={3}>\r\n        <CardContent>\r\n          {/* Aquí puedes agregar más contenido si lo necesitas */}\r\n        </CardContent>\r\n\r\n        <CardActions sx={{ px: 2, pb: 2 }}>\r\n          <Box\r\n            sx={{ width: \"100%\", display: \"flex\", justifyContent: \"center\" }}\r\n          >\r\n            <Button variant=\"contained\" onClick={startLink} disabled={busy}>\r\n              {busy ? \"Redirigiendo...\" : \"Vincular cuenta\"}\r\n            </Button>\r\n          </Box>\r\n        </CardActions>\r\n      </Stack>\r\n    </Card>\r\n  );\r\n}\r\n","// /mercado-pago/catalogs.js\r\n\r\n// Estados de pago típicos de MP (podés ajustar a tu backend)\r\nexport const PAYMENT_STATUS = [\r\n  { value: \"approved\", label: \"Aprobado\" },\r\n  { value: \"pending\", label: \"Pendiente\" },\r\n  { value: \"in_process\", label: \"En proceso\" },\r\n  { value: \"in_mediation\", label: \"En mediación\" },\r\n  { value: \"rejected\", label: \"Rechazado\" },\r\n  { value: \"cancelled\", label: \"Cancelado\" },\r\n  { value: \"refunded\", label: \"Reembolsado\" },\r\n  { value: \"charged_back\", label: \"Chargeback\" },\r\n];\r\n\r\nexport const UI = {\r\n  radius: 12,\r\n  gap: 1.5, // spacing en rem\r\n  cardVariant: \"outlined\",\r\n};\r\n\r\nexport const statusLabel = (v) =>\r\n  PAYMENT_STATUS.find((s) => s.value === v)?.label || v || \"—\";\r\n\r\nexport const statusChipProps = (v) => {\r\n  switch (v) {\r\n    case \"approved\":\r\n      return { color: \"success\", label: \"Aprobado\", variant: \"outlined\" };\r\n    case \"pending\":\r\n    case \"in_process\":\r\n      return { color: \"warning\", label: statusLabel(v), variant: \"outlined\" };\r\n    case \"rejected\":\r\n    case \"cancelled\":\r\n    case \"charged_back\":\r\n      return { color: \"error\", label: statusLabel(v), variant: \"outlined\" };\r\n    case \"refunded\":\r\n      return { color: \"info\", label: \"Reembolsado\", variant: \"outlined\" };\r\n    case \"in_mediation\":\r\n      return { color: \"default\", label: \"Mediación\", variant: \"outlined\" };\r\n    default:\r\n      return { color: \"default\", label: statusLabel(v), variant: \"outlined\" };\r\n  }\r\n};\r\n\r\nexport const DEFAULT_PAGE_SIZE = 20;\r\nexport const PAGE_SIZE_OPTIONS = [10, 20, 50, 100];\r\n\r\nexport const currencyFormatter = (\r\n  amount,\r\n  currency = \"ARS\",\r\n  locale = \"es-AR\"\r\n) => {\r\n  try {\r\n    return new Intl.NumberFormat(locale, {\r\n      style: \"currency\",\r\n      currency,\r\n    }).format(amount ?? 0);\r\n  } catch {\r\n    return amount != null ? `${amount} ${currency || \"\"}`.trim() : \"—\";\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  Toolbar,\r\n  Stack,\r\n  Chip,\r\n  TextField,\r\n  MenuItem,\r\n  IconButton,\r\n  Tooltip,\r\n  Button,\r\n  Divider,\r\n  Box,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport RefreshIcon from \"@mui/icons-material/Refresh\";\r\nimport SettingsIcon from \"@mui/icons-material/Settings\";\r\nimport CloudDownloadIcon from \"@mui/icons-material/CloudDownload\";\r\nimport LinkOffIcon from \"@mui/icons-material/LinkOff\";\r\nimport ReceiptLongIcon from \"@mui/icons-material/ReceiptLong\";\r\nimport IosShareIcon from \"@mui/icons-material/IosShare\";\r\nimport { PAYMENT_STATUS } from \"../catalogs\";\r\nimport CustomDatePicker from \"../../../shared-components/CustomDatePicker\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default function MpToolbar({\r\n  accountLabel,\r\n  filters,\r\n  onFiltersChange,\r\n  onOpenImport,\r\n  onOpenConfig,\r\n  onUnlink,\r\n  onRefresh,\r\n  onExport,\r\n  onBillSelected,\r\n  selectedCount = 0,\r\n  unlinkBusy = false, // <-- nuevo: deshabilita el botón mientras corre\r\n}) {\r\n  const set = (patch) => onFiltersChange({ ...filters, ...patch });\r\n\r\n  const parseDate = (value) => {\r\n    if (!value) return null;\r\n    const parsed = dayjs(value);\r\n    return parsed.isValid() ? parsed : null;\r\n  };\r\n\r\n  const handleDateChange = (field) => (value) => {\r\n    set({\r\n      [field]: value && value.isValid() ? value.format(\"YYYY-MM-DD\") : \"\",\r\n    });\r\n  };\r\n\r\n  const fieldLabelSx = {\r\n    fontWeight: 600,\r\n    color: \"text.secondary\",\r\n    mb: 0.5,\r\n    display: \"block\",\r\n  };\r\n\r\n  const DateField = ({ label, value, onChange }) => (\r\n    <Box sx={{ minWidth: { xs: \"100%\", sm: 200 } }}>\r\n      <Typography variant=\"caption\" sx={fieldLabelSx}>\r\n        {label}\r\n      </Typography>\r\n      <CustomDatePicker value={value} onChange={onChange} />\r\n    </Box>\r\n  );\r\n\r\n  const SearchField = ({ value, onChange }) => (\r\n    <Box sx={{ minWidth: { xs: \"100%\", sm: 260 } }}>\r\n      <Typography variant=\"caption\" sx={fieldLabelSx}>\r\n        Buscar\r\n      </Typography>\r\n      <TextField\r\n        size=\"small\"\r\n        placeholder=\"Buscar...\"\r\n        value={value}\r\n        onChange={onChange}\r\n        fullWidth\r\n      />\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <Toolbar\r\n      sx={{\r\n        p: 2,\r\n        gap: 2,\r\n        flexWrap: \"wrap\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        \"& .MuiTextField-root\": { minWidth: { xs: \"100%\", sm: 180 } },\r\n      }}\r\n    >\r\n      {/* Identificación de cuenta */}\r\n      <Box\r\n        sx={{\r\n          mr: 1,\r\n          p: 2,\r\n          borderRadius: 2,\r\n          border: \"1px solid\",\r\n          borderColor: \"divider\",\r\n          bgcolor: \"background.paper\",\r\n          minWidth: { xs: \"100%\", sm: 220 },\r\n        }}\r\n      >\r\n        <Stack spacing={1} alignItems=\"center\">\r\n          <Chip\r\n            label={accountLabel}\r\n            color=\"primary\"\r\n            variant=\"outlined\"\r\n            sx={{ fontSize: \"0.9rem\", fontWeight: 600 }}\r\n          />\r\n          <Tooltip title={unlinkBusy ? \"Desvinculando...\" : \"Desvincular\"}>\r\n            <span>\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={<LinkOffIcon />}\r\n                onClick={onUnlink}\r\n                disabled={unlinkBusy}\r\n                size=\"small\"\r\n                sx={{\r\n                  borderColor: \"divider\",\r\n                  color: \"text.primary\",\r\n                  bgcolor: \"background.paper\",\r\n                  minWidth: 0,\r\n                  \"&:hover\": {\r\n                    borderColor: \"primary.main\",\r\n                    bgcolor: \"action.hover\",\r\n                  },\r\n                }}\r\n              >\r\n                Desvincular\r\n              </Button>\r\n            </span>\r\n          </Tooltip>\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* Filtros */}\r\n      <Stack\r\n        direction={{ xs: \"column\", md: \"row\" }}\r\n        spacing={1}\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n        sx={{ flexGrow: 1 }}\r\n      >\r\n        <DateField\r\n          label=\"Desde\"\r\n          value={parseDate(filters.from)}\r\n          onChange={handleDateChange(\"from\")}\r\n        />\r\n        <DateField\r\n          label=\"Hasta\"\r\n          value={parseDate(filters.to)}\r\n          onChange={handleDateChange(\"to\")}\r\n        />\r\n        {/* Filtro de estado oculto temporalmente */}\r\n        {/* <TextField\r\n          size=\"small\"\r\n          select\r\n          label=\"Estado\"\r\n          sx={{ minWidth: 160 }}\r\n          value={filters.payStatus}\r\n          onChange={(e) => set({ payStatus: e.target.value })}\r\n        >\r\n          <MenuItem value=\"\">Todos</MenuItem>\r\n          {PAYMENT_STATUS.map((s) => (\r\n            <MenuItem key={s.value} value={s.value}>\r\n              {s.label}\r\n            </MenuItem>\r\n          ))}\r\n        </TextField> */}\r\n        <SearchField\r\n          value={filters.q}\r\n          onChange={(e) => set({ q: e.target.value })}\r\n        />\r\n        {/* Botón de refrescar oculto temporalmente */}\r\n        {/* <Tooltip title=\"Refrescar\">\r\n          <IconButton onClick={onRefresh}>\r\n            <RefreshIcon />\r\n          </IconButton>\r\n        </Tooltip> */}\r\n\r\n        {/* <Tooltip title=\"Configuración\">\r\n          <IconButton onClick={onOpenConfig}>\r\n            <SettingsIcon />\r\n          </IconButton>\r\n        </Tooltip> */}\r\n\r\n      </Stack>\r\n\r\n      {/* Acciones */}\r\n      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          startIcon={<CloudDownloadIcon />}\r\n          onClick={onOpenImport}\r\n          sx={{\r\n            px: 4,\r\n            py: 1.4,\r\n            fontSize: \"1rem\",\r\n            ml: 0,\r\n          }}\r\n        >\r\n          Importar\r\n        </Button>\r\n        {/* Botones de facturar y exportar ocultos temporalmente */}\r\n        {/* <Button\r\n          variant=\"contained\"\r\n          color=\"inherit\"\r\n          startIcon={<ReceiptLongIcon />}\r\n          disabled={!selectedCount}\r\n          onClick={onBillSelected}\r\n          sx={{\r\n            bgcolor: \"#fff\",\r\n            color: \"#222\",\r\n            boxShadow: 1,\r\n            \"&:hover\": { bgcolor: \"#f5f5f5\" },\r\n          }}\r\n        >\r\n          Facturar ({selectedCount})\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"inherit\"\r\n          startIcon={<IosShareIcon />}\r\n          onClick={onExport}\r\n          sx={{\r\n            bgcolor: \"#fff\",\r\n            color: \"#222\",\r\n            boxShadow: 1,\r\n            \"&:hover\": { bgcolor: \"#f5f5f5\" },\r\n          }}\r\n        >\r\n          Exportar\r\n        </Button> */}\r\n      </Box>\r\n    </Toolbar>\r\n  );\r\n}\r\n","// /mercado-pago/components/EditableCategory.js\r\nimport React from \"react\";\r\nimport {\r\n  Chip,\r\n  Box,\r\n  IconButton,\r\n  Tooltip,\r\n  Autocomplete,\r\n  TextField,\r\n} from \"@mui/material\";\r\nimport EditIcon from \"@mui/icons-material/Edit\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { TODAS_LAS_CATEGORIAS } from \"../../../shared-components/categorias\";\r\n\r\nexport default function EditableCategory({\r\n  value = \"MercadoPago\",\r\n  onChange,\r\n  disabled = false,\r\n}) {\r\n  const [isEditing, setIsEditing] = React.useState(false);\r\n  const [editValue, setEditValue] = React.useState(value);\r\n\r\n  React.useEffect(() => {\r\n    setEditValue(value);\r\n  }, [value]);\r\n\r\n  const handleSave = () => {\r\n    // Solo guardar si la categoría seleccionada es válida y diferente\r\n    if (\r\n      editValue &&\r\n      editValue !== value &&\r\n      TODAS_LAS_CATEGORIAS.includes(editValue)\r\n    ) {\r\n      onChange?.(editValue);\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditValue(value);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <Box\r\n        sx={{ display: \"flex\", alignItems: \"center\", gap: 0.5, minWidth: 200 }}\r\n      >\r\n        <Autocomplete\r\n          size=\"small\"\r\n          value={editValue}\r\n          onChange={(event, newValue) => {\r\n            if (newValue) {\r\n              setEditValue(newValue);\r\n            }\r\n          }}\r\n          options={TODAS_LAS_CATEGORIAS}\r\n          autoHighlight\r\n          openOnFocus\r\n          disableClearable\r\n          sx={{\r\n            minWidth: 150,\r\n            \"& .MuiOutlinedInput-root\": {\r\n              height: 32,\r\n              fontSize: \"0.75rem\",\r\n            },\r\n          }}\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              autoFocus\r\n              placeholder=\"Seleccionar categoría\"\r\n              variant=\"outlined\"\r\n            />\r\n          )}\r\n        />\r\n        <Tooltip title=\"Guardar\">\r\n          <IconButton size=\"small\" onClick={handleSave} color=\"primary\">\r\n            <CheckIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"Cancelar\">\r\n          <IconButton size=\"small\" onClick={handleCancel} color=\"inherit\">\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 0.5 }}>\r\n      <Chip\r\n        size=\"small\"\r\n        label={value}\r\n        color=\"default\"\r\n        variant=\"outlined\"\r\n        sx={{ minWidth: 80 }}\r\n      />\r\n      {!disabled && (\r\n        <Tooltip title=\"Editar categoría\">\r\n          <IconButton\r\n            size=\"small\"\r\n            onClick={() => setIsEditing(true)}\r\n            sx={{ opacity: 0.7, \"&:hover\": { opacity: 1 } }}\r\n          >\r\n            <EditIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Checkbox,\r\n  TableContainer,\r\n  TablePagination,\r\n  LinearProgress,\r\n  Chip,\r\n  Box,\r\n  Stack,\r\n  IconButton,\r\n} from \"@mui/material\";\r\nimport ContentCopyIcon from \"@mui/icons-material/ContentCopy\";\r\nimport {\r\n  PAGE_SIZE_OPTIONS,\r\n  statusChipProps,\r\n  currencyFormatter,\r\n} from \"../catalogs\";\r\nimport EditableCategory from \"./EditableCategory\";\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) return \"\";\r\n  const d = new Date(value);\r\n  // Solo mostrar la fecha (sin hora)\r\n  return d.toLocaleDateString(\"es-AR\");\r\n  // Si algún día quieres mostrar la hora cuando corresponda, descomenta esto:\r\n  // const hasTime = d.getHours() + d.getMinutes() + d.getSeconds() !== 0;\r\n  // return hasTime ? d.toLocaleString(\"es-AR\") : d.toLocaleDateString(\"es-AR\");\r\n};\r\n\r\nconst formatAmount = (amount, currency, isEgreso) => {\r\n  if (amount == null) return \"—\";\r\n\r\n  // Para egresos, mostrar con signo menos\r\n  const displayAmount = isEgreso && amount > 0 ? -amount : amount;\r\n\r\n  try {\r\n    return new Intl.NumberFormat(\"es-AR\", {\r\n      style: \"currency\",\r\n      currency: currency || \"ARS\",\r\n    }).format(displayAmount);\r\n  } catch {\r\n    return `${displayAmount} ${currency || \"ARS\"}`;\r\n  }\r\n};\r\n\r\nexport default function MpPaymentsTable({\r\n  rows = [],\r\n  loading = false,\r\n  page = 0,\r\n  pageSize = 20,\r\n  total = 0,\r\n  selected = [],\r\n  onSelectChange,\r\n  onPageChange,\r\n  onPageSizeChange,\r\n  onCategoryChange,\r\n}) {\r\n  const allSelected = rows.length > 0 && selected.length === rows.length;\r\n  const someSelected = selected.length > 0 && selected.length < rows.length;\r\n\r\n  const toggleAll = (e) => {\r\n    if (e.target.checked) {\r\n      onSelectChange(\r\n        rows.map((r, index) => r.id || r.mpPaymentId || `row-${index}`)\r\n      );\r\n    } else {\r\n      onSelectChange([]);\r\n    }\r\n  };\r\n\r\n  const toggleOne = (id) => {\r\n    if (selected.includes(id)) onSelectChange(selected.filter((s) => s !== id));\r\n    else onSelectChange([...selected, id]);\r\n  };\r\n\r\n  const handleCopy = (text) => {\r\n    if (!text) return;\r\n    navigator.clipboard?.writeText(String(text));\r\n  };\r\n\r\n  return (\r\n    <TableContainer sx={{ borderRadius: 2 }}>\r\n      {loading && <LinearProgress />}\r\n      <Table size=\"small\" stickyHeader>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell padding=\"checkbox\">\r\n              <Checkbox\r\n                checked={allSelected}\r\n                indeterminate={someSelected}\r\n                onChange={toggleAll}\r\n                inputProps={{ \"aria-label\": \"Seleccionar todos\" }}\r\n              />\r\n            </TableCell>\r\n            <TableCell sx={{ fontWeight: 600 }}>Tipo</TableCell>\r\n            <TableCell sx={{ fontWeight: 600 }}>Monto Total</TableCell>\r\n            <TableCell sx={{ fontWeight: 600 }}>Fecha</TableCell>\r\n            <TableCell sx={{ fontWeight: 600 }}>Descripción</TableCell>\r\n            <TableCell sx={{ fontWeight: 600 }}>Origen</TableCell>\r\n            <TableCell sx={{ fontWeight: 600 }}>Categoría</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n\r\n        <TableBody>\r\n          {rows.length === 0 && !loading && (\r\n            <TableRow>\r\n              <TableCell colSpan={7}>\r\n                <Box\r\n                  sx={{\r\n                    p: 3,\r\n                    textAlign: \"center\",\r\n                    color: \"text.secondary\",\r\n                  }}\r\n                >\r\n                  No hay pagos para mostrar.\r\n                </Box>\r\n              </TableCell>\r\n            </TableRow>\r\n          )}\r\n\r\n          {rows.map((r, index) => {\r\n            // Usar el ID del registro, mpPaymentId, o índice como fallback\r\n            const id = r.id || r.mpPaymentId || `row-${index}`;\r\n            const fecha = formatDate(r.fecha || r.date);\r\n\r\n            return (\r\n              <TableRow\r\n                key={id}\r\n                hover\r\n                selected={selected.includes(id)}\r\n                sx={{\r\n                  \"&.Mui-selected\": {\r\n                    backgroundColor: (t) => t.palette.action.selected,\r\n                  },\r\n                  \"&:hover\": {\r\n                    backgroundColor: (t) => t.palette.action.hover,\r\n                  },\r\n                }}\r\n              >\r\n                <TableCell padding=\"checkbox\">\r\n                  <Checkbox\r\n                    checked={selected.includes(id)}\r\n                    onChange={() => toggleOne(id)}\r\n                    inputProps={{ \"aria-label\": `Seleccionar ${id}` }}\r\n                  />\r\n                </TableCell>\r\n\r\n                <TableCell>\r\n                  <Chip\r\n                    size=\"small\"\r\n                    label={r.tipo || r.estado || r.status || \"—\"}\r\n                    sx={{\r\n                      backgroundColor:\r\n                        r.tipo === \"Egreso\"\r\n                          ? \"#ffebee\"\r\n                          : r.tipo === \"Ingreso\"\r\n                          ? \"#e8f5e8\"\r\n                          : \"#f5f5f5\",\r\n                      color:\r\n                        r.tipo === \"Egreso\"\r\n                          ? \"#d32f2f\"\r\n                          : r.tipo === \"Ingreso\"\r\n                          ? \"#2e7d32\"\r\n                          : \"#666666\",\r\n                      fontWeight: \"bold\",\r\n                      border:\r\n                        r.tipo === \"Egreso\"\r\n                          ? \"1px solid #d32f2f\"\r\n                          : r.tipo === \"Ingreso\"\r\n                          ? \"1px solid #2e7d32\"\r\n                          : \"1px solid #e0e0e0\",\r\n                    }}\r\n                    variant=\"outlined\"\r\n                  />\r\n                </TableCell>\r\n\r\n                <TableCell align=\"right\">\r\n                  {(() => {\r\n                    const amount = r.montoTotal ?? r.total ?? r.amount;\r\n                    const currency = r.moneda || r.currency || \"ARS\";\r\n                    const isEgreso = r.tipo === \"Egreso\";\r\n\r\n                    return (\r\n                      <span\r\n                        style={{\r\n                          color: isEgreso ? \"#d32f2f\" : \"#2e7d32\",\r\n                          fontWeight: \"bold\",\r\n                        }}\r\n                      >\r\n                        {formatAmount(amount, currency, isEgreso)}\r\n                      </span>\r\n                    );\r\n                  })()}\r\n                </TableCell>\r\n\r\n                <TableCell>{fecha}</TableCell>\r\n\r\n                <TableCell>\r\n                  {r.descripcion || r.detalle || r.description || \"—\"}\r\n                </TableCell>\r\n\r\n                <TableCell>\r\n                  {r.origen || r.comprador || r.buyer || \"—\"}\r\n                </TableCell>\r\n\r\n                <TableCell>\r\n                  <EditableCategory\r\n                    value={r.categoria || \"MercadoPago\"}\r\n                    onChange={(newCategory) =>\r\n                      onCategoryChange?.(r, newCategory)\r\n                    }\r\n                    disabled={!onCategoryChange} // Solo editable si hay callback\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </TableBody>\r\n      </Table>\r\n\r\n      <TablePagination\r\n        component=\"div\"\r\n        count={total}\r\n        page={page}\r\n        onPageChange={(_, p) => onPageChange(p)}\r\n        rowsPerPage={pageSize}\r\n        onRowsPerPageChange={(e) =>\r\n          onPageSizeChange(parseInt(e.target.value, 10))\r\n        }\r\n        rowsPerPageOptions={PAGE_SIZE_OPTIONS}\r\n      />\r\n    </TableContainer>\r\n  );\r\n}\r\n","// /mercado-pago/components/MpImportDialog.js\r\nimport React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  Stack,\r\n  Alert,\r\n  MenuItem,\r\n  Divider,\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n} from \"@mui/material\";\r\nimport logoMp from \"./logoMPblanconegro.png\";\r\n\r\nconst MONTHS = [\r\n  { v: 1, label: \"Enero\" },\r\n  { v: 2, label: \"Febrero\" },\r\n  { v: 3, label: \"Marzo\" },\r\n  { v: 4, label: \"Abril\" },\r\n  { v: 5, label: \"Mayo\" },\r\n  { v: 6, label: \"Junio\" },\r\n  { v: 7, label: \"Julio\" },\r\n  { v: 8, label: \"Agosto\" },\r\n  { v: 9, label: \"Septiembre\" },\r\n  { v: 10, label: \"Octubre\" },\r\n  { v: 11, label: \"Noviembre\" },\r\n  { v: 12, label: \"Diciembre\" },\r\n];\r\n\r\nexport default function MpImportDialog({ open, onClose, onImport }) {\r\n  const now = new Date();\r\n  const [month, setMonth] = React.useState(now.getMonth() + 1);\r\n  const [year, setYear] = React.useState(now.getFullYear());\r\n  const [paymentId, setPaymentId] = React.useState(\"\");\r\n  const [busy, setBusy] = React.useState(false);\r\n  const [err, setErr] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      setErr(null);\r\n      setBusy(false);\r\n      // Reseteo suave: deja por defecto el mes/año actual\r\n      setPaymentId(\"\");\r\n      setMonth(now.getMonth() + 1);\r\n      setYear(now.getFullYear());\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [open]);\r\n\r\n  const submit = async () => {\r\n    setErr(null);\r\n\r\n    // Validación solo para importación por mes (Payment ID comentado)\r\n    if (!month || !year) {\r\n      setErr(\"Seleccioná mes y año para importar por período.\");\r\n      return;\r\n    }\r\n\r\n    setBusy(true);\r\n    try {\r\n      await onImport?.({\r\n        mode: \"preview\",\r\n        month: Number(month),\r\n        year: Number(year),\r\n      });\r\n    } catch (e) {\r\n      setErr(e?.message || \"Error al obtener vista previa\");\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={busy ? undefined : onClose}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n    >\r\n      <DialogContent dividers>\r\n        <Stack spacing={3} sx={{ mt: 1 }}>\r\n          {/* Logo centrado */}\r\n          <Box sx={{ display: \"flex\", justifyContent: \"center\" }}>\r\n            <Box\r\n              sx={{\r\n                p: 1.1,\r\n                borderRadius: 2,\r\n                bgcolor: \"#0d1117\",\r\n                border: \"1px solid rgba(255,255,255,0.08)\",\r\n                display: \"inline-flex\",\r\n              }}\r\n            >\r\n              <img\r\n                src={logoMp}\r\n                alt=\"Mercado Pago\"\r\n                style={{\r\n                  height: 125,\r\n                  opacity: 0.95,\r\n                  filter: \"drop-shadow(0 2px 6px rgba(0,0,0,0.45))\",\r\n                }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* Sección 1: Único pago - COMENTADO TEMPORALMENTE */}\r\n          {/* <Divider textAlign=\"center\">\r\n            <Typography\r\n              variant=\"subtitle1\"\r\n              sx={{\r\n                opacity: 0.8,\r\n                textTransform: \"uppercase\",\r\n                fontWeight: 400,\r\n                fontSize: \"1.1rem\",\r\n              }}\r\n            >\r\n              IMPORTAR UN MOVIMIENTO\r\n            </Typography>\r\n          </Divider>\r\n\r\n          <Paper variant=\"outlined\" sx={{ p: 2, borderRadius: 2 }}>\r\n            <Stack spacing={1}>\r\n              <TextField\r\n                size=\"small\"\r\n                label=\"Payment ID\"\r\n                value={paymentId}\r\n                onChange={(e) => setPaymentId(e.target.value.trim())}\r\n                placeholder=\"Ej. 124899180987\"\r\n                inputMode=\"numeric\"\r\n                fullWidth\r\n              />\r\n            </Stack>\r\n          </Paper> */}\r\n\r\n          {/* Sección 2: Por meses */}\r\n          <Divider textAlign=\"center\">\r\n            <Typography\r\n              variant=\"subtitle1\"\r\n              sx={{\r\n                opacity: 0.8,\r\n                textTransform: \"uppercase\",\r\n                fontWeight: 400,\r\n                fontSize: \"1.1rem\",\r\n              }}\r\n            >\r\n              IMPORTAR MOVIMIENTOS POR MES\r\n            </Typography>\r\n          </Divider>\r\n\r\n          <Paper variant=\"outlined\" sx={{ p: 2, borderRadius: 2 }}>\r\n            <Stack spacing={1}>\r\n              <Stack direction={{ xs: \"column\", sm: \"row\" }} spacing={2}>\r\n                <TextField\r\n                  size=\"small\"\r\n                  select\r\n                  fullWidth\r\n                  label=\"Mes\"\r\n                  value={month}\r\n                  onChange={(e) => setMonth(e.target.value)}\r\n                >\r\n                  {MONTHS.map((m) => (\r\n                    <MenuItem key={m.v} value={m.v}>\r\n                      {m.label}\r\n                    </MenuItem>\r\n                  ))}\r\n                </TextField>\r\n                <TextField\r\n                  size=\"small\"\r\n                  label=\"Año\"\r\n                  type=\"number\"\r\n                  fullWidth\r\n                  value={year}\r\n                  onChange={(e) => setYear(e.target.value)}\r\n                  inputProps={{ min: 2000, max: 2100, step: 1 }}\r\n                />\r\n              </Stack>\r\n            </Stack>\r\n          </Paper>\r\n\r\n          {err && <Alert severity=\"error\">{err}</Alert>}\r\n        </Stack>\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button onClick={onClose} disabled={busy}>\r\n          Cancelar\r\n        </Button>\r\n        <Button variant=\"contained\" onClick={submit} disabled={busy}>\r\n          {busy ? \"Buscando…\" : \"Vista Previa\"}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","// /mercado-pago/components/MpPreviewDialog.js\r\nimport React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Stack,\r\n  Alert,\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  LinearProgress,\r\n  Divider,\r\n} from \"@mui/material\";\r\nimport { mpApi } from \"../mpApi\";\r\nimport MpPaymentsTable from \"./MpPaymentsTable\";\r\n\r\nexport default function MpPreviewDialog({\r\n  open,\r\n  onClose,\r\n  previewData = [],\r\n  loading = false,\r\n  onImportSelected,\r\n}) {\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [importing, setImporting] = React.useState(false);\r\n\r\n  // Reset selection when dialog opens/closes\r\n  React.useEffect(() => {\r\n    if (open) {\r\n      setSelected([]);\r\n    }\r\n  }, [open]);\r\n\r\n  const handleImportSelected = async () => {\r\n    if (selected.length === 0) {\r\n      return;\r\n    }\r\n\r\n    setImporting(true);\r\n    try {\r\n      await onImportSelected?.(selected);\r\n      setSelected([]);\r\n      onClose?.();\r\n    } catch (error) {\r\n      console.error(\"Error importing selected payments:\", error);\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selected.length === previewData.length) {\r\n      setSelected([]);\r\n    } else {\r\n      setSelected(previewData.map((p) => p.mpPaymentId).filter(Boolean));\r\n    }\r\n  };\r\n\r\n  // Contar duplicados y válidos\r\n  const duplicadosCount = previewData.filter((p) => p.esDuplicado).length;\r\n  const validosCount = previewData.length - duplicadosCount;\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"xl\"\r\n      fullWidth\r\n      PaperProps={{\r\n        sx: { minHeight: \"80vh\" },\r\n      }}\r\n    >\r\n      <DialogTitle>\r\n        <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\r\n          <Typography variant=\"h6\">Vista Previa de Pagos</Typography>\r\n          {previewData.length > 0 && (\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              ({previewData.length} pagos encontrados)\r\n            </Typography>\r\n          )}\r\n        </Stack>\r\n      </DialogTitle>\r\n\r\n      <DialogContent dividers>\r\n        <Stack spacing={2}>\r\n          {loading && <LinearProgress />}\r\n\r\n          {previewData.length === 0 && !loading && (\r\n            <Alert severity=\"info\">No se encontraron pagos para mostrar.</Alert>\r\n          )}\r\n\r\n          {previewData.length > 0 && (\r\n            <>\r\n              {duplicadosCount > 0 && (\r\n                <Alert severity=\"warning\">\r\n                  Se encontraron <strong>{duplicadosCount}</strong> pago(s)\r\n                  duplicado(s). Estos pagos ya fueron importados anteriormente.\r\n                </Alert>\r\n              )}\r\n\r\n              <Paper variant=\"outlined\" sx={{ borderRadius: 2 }}>\r\n                <MpPaymentsTable\r\n                  rows={previewData}\r\n                  loading={false}\r\n                  page={0}\r\n                  pageSize={previewData.length}\r\n                  total={previewData.length}\r\n                  selected={selected}\r\n                  onSelectChange={setSelected}\r\n                  onPageChange={() => {}}\r\n                  onPageSizeChange={() => {}}\r\n                />\r\n              </Paper>\r\n\r\n              <Box\r\n                sx={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  {selected.length} de {previewData.length} pagos seleccionados\r\n                </Typography>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  onClick={handleSelectAll}\r\n                  disabled={previewData.length === 0}\r\n                >\r\n                  {selected.length === previewData.length\r\n                    ? \"Deseleccionar todos\"\r\n                    : \"Seleccionar todos\"}\r\n                </Button>\r\n              </Box>\r\n            </>\r\n          )}\r\n        </Stack>\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button onClick={onClose} disabled={importing}>\r\n          Cancelar\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={handleImportSelected}\r\n          disabled={selected.length === 0 || importing}\r\n        >\r\n          {importing\r\n            ? \"Importando...\"\r\n            : `Importar ${selected.length} seleccionados`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  Stack,\r\n  FormControlLabel,\r\n  Switch,\r\n  Alert,\r\n  Grid,\r\n  Paper,\r\n  Typography,\r\n  Tooltip,\r\n  Skeleton,\r\n} from \"@mui/material\";\r\nimport InfoOutlined from \"@mui/icons-material/InfoOutlined\";\r\nimport { mpApi } from \"../mpApi\";\r\n\r\nexport default function MpConfigDialog({ open, onClose, onSaved, onUnlink }) {\r\n  const [cfg, setCfg] = React.useState({\r\n    autoBill: false,\r\n    timezone: \"America/Argentina/Buenos_Aires\",\r\n    currency: \"ARS\",\r\n  });\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [saving, setSaving] = React.useState(false);\r\n  const [err, setErr] = React.useState(null);\r\n\r\n  const load = React.useCallback(async () => {\r\n    if (!open) return;\r\n    setLoading(true);\r\n    setErr(null);\r\n    try {\r\n      const c = await mpApi.getConfig();\r\n      setCfg({\r\n        autoBill: !!c?.autoBill,\r\n        timezone: c?.timezone || \"America/Argentina/Buenos_Aires\",\r\n        currency: (c?.currency || \"ARS\").toUpperCase(),\r\n      });\r\n    } catch (e) {\r\n      setErr(e?.message || \"No se pudo cargar la configuración\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [open]);\r\n\r\n  React.useEffect(() => {\r\n    load();\r\n  }, [load]);\r\n\r\n  const save = async () => {\r\n    setSaving(true);\r\n    setErr(null);\r\n    try {\r\n      await mpApi.updateConfig(cfg);\r\n      onSaved?.();\r\n    } catch (e) {\r\n      setErr(e?.message || \"No se pudo guardar\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // Helpers visuales para fila label-valor\r\n  const Row = ({ label, hint, control }) => (\r\n    <Grid container spacing={2} alignItems=\"center\">\r\n      <Grid item xs={12} sm={4}>\r\n        <Stack direction=\"row\" spacing={0.5} alignItems=\"center\">\r\n          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\r\n            {label}\r\n          </Typography>\r\n          {hint && (\r\n            <Tooltip title={hint}>\r\n              <InfoOutlined fontSize=\"small\" color=\"action\" />\r\n            </Tooltip>\r\n          )}\r\n        </Stack>\r\n      </Grid>\r\n      <Grid item xs={12} sm={8}>\r\n        {control}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={saving ? undefined : onClose}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle sx={{ pb: 1 }}>CONFIGURAR</DialogTitle>\r\n\r\n      <DialogContent dividers>\r\n        <Paper variant=\"outlined\" sx={{ p: 2, borderRadius: 2 }}>\r\n          <Stack spacing={2}>\r\n            {err && <Alert severity=\"error\">{err}</Alert>}\r\n\r\n            {/* Punto de Venta (visual) -> usamos timezone como ejemplo de campo de texto */}\r\n            {loading ? (\r\n              <Skeleton variant=\"rounded\" height={40} />\r\n            ) : (\r\n              <Row\r\n                label=\"Punto de Venta\"\r\n                hint=\"Identificador de tu punto de venta.\"\r\n                control={\r\n                  <TextField\r\n                    size=\"small\"\r\n                    placeholder=\"0001\"\r\n                    value={cfg.timezone}\r\n                    onChange={(e) =>\r\n                      setCfg({ ...cfg, timezone: e.target.value })\r\n                    }\r\n                    disabled={loading}\r\n                    fullWidth\r\n                  />\r\n                }\r\n              />\r\n            )}\r\n\r\n            {/* Depósito (visual) -> usamos currency como ejemplo (ISO) */}\r\n            {loading ? (\r\n              <Skeleton variant=\"rounded\" height={40} />\r\n            ) : (\r\n              <Row\r\n                label=\"Depósito\"\r\n                hint=\"Depósito por defecto.\"\r\n                control={\r\n                  <TextField\r\n                    size=\"small\"\r\n                    placeholder=\"Depósito Universal\"\r\n                    value={cfg.currency}\r\n                    onChange={(e) =>\r\n                      setCfg({ ...cfg, currency: e.target.value.toUpperCase() })\r\n                    }\r\n                    inputProps={{ maxLength: 3 }}\r\n                    disabled={loading}\r\n                    fullWidth\r\n                  />\r\n                }\r\n              />\r\n            )}\r\n\r\n            {/* Condición de Pago (editable como texto) */}\r\n            <Row\r\n              label=\"Condición de Pago\"\r\n              hint=\"Solo visual por ahora.\"\r\n              control={\r\n                <TextField\r\n                  size=\"small\"\r\n                  placeholder=\"Cuenta Corriente\"\r\n                  value={cfg.condicionPago || \"\"}\r\n                  onChange={(e) =>\r\n                    setCfg({ ...cfg, condicionPago: e.target.value })\r\n                  }\r\n                  disabled={loading}\r\n                  fullWidth\r\n                />\r\n              }\r\n            />\r\n\r\n            {/* Cuenta de cobro (editable como texto) */}\r\n            <Row\r\n              label=\"Cuenta de cobro\"\r\n              hint=\"Solo visual por ahora.\"\r\n              control={\r\n                <TextField\r\n                  size=\"small\"\r\n                  placeholder=\"Banco Santander\"\r\n                  value={cfg.cuentaCobro || \"\"}\r\n                  onChange={(e) =>\r\n                    setCfg({ ...cfg, cuentaCobro: e.target.value })\r\n                  }\r\n                  disabled={loading}\r\n                  fullWidth\r\n                />\r\n              }\r\n            />\r\n\r\n            {/* Enviar botón de pago -> mapeado a autoBill (switch) */}\r\n            {/* <Row\r\n              label=\"Enviar botón de pago\"\r\n              hint=\"Activa envíos automáticos de botón/factura cuando aplique.\"\r\n              control={\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={cfg.autoBill}\r\n                      onChange={(e) =>\r\n                        setCfg({ ...cfg, autoBill: e.target.checked })\r\n                      }\r\n                      disabled={loading}\r\n                    />\r\n                  }\r\n                  label=\"Activado\"\r\n                />\r\n              }\r\n            /> */}\r\n          </Stack>\r\n        </Paper>\r\n      </DialogContent>\r\n\r\n      <DialogActions sx={{ gap: 1 }}>\r\n        {onUnlink && (\r\n          <Button\r\n            color=\"inherit\"\r\n            onClick={onUnlink}\r\n            disabled={saving || loading}\r\n          >\r\n            Desvincular\r\n          </Button>\r\n        )}\r\n        <Button onClick={onClose} disabled={saving}>\r\n          Cerrar\r\n        </Button>\r\n        <Button variant=\"contained\" onClick={save} disabled={saving || loading}>\r\n          {saving ? \"Guardando…\" : \"Guardar\"}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","// /mercado-pago/components/MainGrid.js\r\nimport React from \"react\";\r\nimport { Box, Snackbar, Alert, Paper } from \"@mui/material\";\r\nimport { mpApi } from \"../mpApi\";\r\nimport MpToolbar from \"./MpToolbar\";\r\nimport MpPaymentsTable from \"./MpPaymentsTable\";\r\nimport MpImportDialog from \"./MpImportDialog\";\r\nimport MpPreviewDialog from \"./MpPreviewDialog\";\r\nimport MpConfigDialog from \"./MpConfigDialog\";\r\nimport { DEFAULT_PAGE_SIZE } from \"../catalogs\";\r\n\r\nexport default function MainGrid({ status, onRefreshStatus }) {\r\n  const [filters, setFilters] = React.useState({\r\n    from: \"\",\r\n    to: \"\",\r\n    payStatus: \"\",\r\n    q: \"\",\r\n  });\r\n  const [rows, setRows] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [page, setPage] = React.useState(0);\r\n  const [pageSize, setPageSize] = React.useState(DEFAULT_PAGE_SIZE);\r\n  const [total, setTotal] = React.useState(0);\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [importOpen, setImportOpen] = React.useState(false);\r\n  const [previewOpen, setPreviewOpen] = React.useState(false);\r\n  const [previewData, setPreviewData] = React.useState([]);\r\n  const [previewLoading, setPreviewLoading] = React.useState(false);\r\n  const [configOpen, setConfigOpen] = React.useState(false);\r\n  const [unlinking, setUnlinking] = React.useState(false);\r\n  const [snack, setSnack] = React.useState({\r\n    open: false,\r\n    severity: \"success\",\r\n    message: \"\",\r\n  });\r\n\r\n  const accountLabel =\r\n    status?.account?.nickname ||\r\n    status?.account?.email ||\r\n    status?.account?.legalName ||\r\n    \"Cuenta vinculada\";\r\n\r\n  const notify = (message, severity = \"success\") =>\r\n    setSnack({ open: true, severity, message });\r\n\r\n  // Nueva función para obtener pagos importados (con cache-buster)\r\n  const fetchPayments = React.useCallback(async () => {\r\n    const resp = await mpApi.listImportedPayments({\r\n      from: filters.from || undefined,\r\n      to: filters.to || undefined,\r\n      q: filters.q || undefined,\r\n      payStatus: filters.payStatus || undefined,\r\n      page, // 0-based\r\n      pageSize,\r\n      ts: Date.now(), // cache-buster\r\n    });\r\n    const items = resp?.content || [];\r\n    const tot = resp?.totalElements ?? items.length;\r\n    return { items, tot };\r\n  }, [filters, page, pageSize]);\r\n\r\n  // loadPayments ahora usa fetchPayments\r\n  const loadPayments = React.useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { items, tot } = await fetchPayments();\r\n      setRows(items);\r\n      setTotal(tot);\r\n      setSelected([]);\r\n    } catch (e) {\r\n      notify(e?.message || \"No se pudieron cargar los pagos\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [fetchPayments]);\r\n\r\n  React.useEffect(() => {\r\n    loadPayments();\r\n  }, [loadPayments]);\r\n\r\n  // Limpiar datos al desmontar el componente (cambiar de solapa)\r\n  React.useEffect(() => {\r\n    return () => {\r\n      // Limpiar datos locales al salir de la página\r\n      setRows([]);\r\n      setSelected([]);\r\n      setPage(0);\r\n      setTotal(0);\r\n      console.log(\"MainGrid: Componente desmontado, datos limpiados\");\r\n    };\r\n  }, []);\r\n\r\n  const handleUnlink = async () => {\r\n    if (!window.confirm(\"¿Desvincular la cuenta de Mercado Pago?\")) return;\r\n    setUnlinking(true);\r\n    try {\r\n      await mpApi.unlink();\r\n      setRows([]);\r\n      setSelected([]);\r\n      setPage(0);\r\n      notify(\"Cuenta desvinculada\");\r\n      onRefreshStatus?.();\r\n    } catch (e) {\r\n      notify(e?.message || \"No se pudo desvincular\", \"error\");\r\n    } finally {\r\n      setUnlinking(false);\r\n    }\r\n  };\r\n\r\n  // Polling para detectar cambios tras importación\r\n  const refreshUntilChange = React.useCallback(\r\n    async (prevTotal) => {\r\n      const attempts = 6;\r\n      for (let i = 0; i < attempts; i++) {\r\n        try {\r\n          const delay = 800 + i * 800;\r\n          await new Promise((r) => setTimeout(r, delay));\r\n          const { items, tot } = await fetchPayments();\r\n          if (\r\n            tot !== prevTotal ||\r\n            (items?.length &&\r\n              rows?.length &&\r\n              items[0]?.mpPaymentId !== rows[0]?.mpPaymentId)\r\n          ) {\r\n            setRows(items);\r\n            setTotal(tot);\r\n            setSelected([]);\r\n            return true;\r\n          }\r\n        } catch {\r\n          // ignoramos y seguimos intentando\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    [fetchPayments, rows]\r\n  );\r\n\r\n  // handleImport adaptado para usar preview\r\n  const handleImport = async (args) => {\r\n    try {\r\n      setPreviewLoading(true);\r\n      setImportOpen(false);\r\n\r\n      let previewResponse;\r\n      if (args.mode === \"preview\") {\r\n        if (args.paymentId) {\r\n          previewResponse = await mpApi.previewPaymentById(args.paymentId);\r\n        } else {\r\n          previewResponse = await mpApi.previewPaymentsByMonth({\r\n            month: args.month,\r\n            year: args.year,\r\n          });\r\n        }\r\n      } else {\r\n        // Legacy mode - import directly\r\n        const prevTotal = total;\r\n        if (args.mode === \"period\") {\r\n          await mpApi.importPaymentsByMonth({\r\n            month: args.month,\r\n            year: args.year,\r\n          });\r\n        } else {\r\n          await mpApi.importPaymentById(args.paymentId);\r\n        }\r\n        notify(\"Importación solicitada. Buscando cambios…\");\r\n        setPage(0);\r\n        await loadPayments();\r\n        const changed = await refreshUntilChange(prevTotal);\r\n        if (!changed) {\r\n          notify(\r\n            \"No se detectaron cambios aún. Probá refrescar en unos segundos.\",\r\n            \"warning\"\r\n          );\r\n        }\r\n        return;\r\n      }\r\n\r\n      const previewItems = previewResponse?.preview || [];\r\n      setPreviewData(previewItems);\r\n      setPreviewOpen(true);\r\n\r\n      if (previewItems.length === 0) {\r\n        notify(\"No se encontraron pagos para importar\", \"warning\");\r\n      } else {\r\n        notify(\r\n          `${previewItems.length} pagos encontrados. Selecciona cuáles importar.`,\r\n          \"info\"\r\n        );\r\n      }\r\n    } catch (e) {\r\n      notify(e?.message || \"Error al obtener vista previa\", \"error\");\r\n    } finally {\r\n      setPreviewLoading(false);\r\n    }\r\n  };\r\n\r\n  // handleImportSelected - importar pagos seleccionados del preview\r\n  const handleImportSelected = async (selectedPaymentIds) => {\r\n    try {\r\n      await mpApi.importSelectedPayments(selectedPaymentIds);\r\n      notify(`${selectedPaymentIds.length} pagos importados exitosamente`);\r\n      setPreviewOpen(false);\r\n      setPreviewData([]);\r\n      setPage(0);\r\n      await loadPayments();\r\n    } catch (e) {\r\n      notify(e?.message || \"Error al importar pagos seleccionados\", \"error\");\r\n      throw e; // Re-throw para que el preview dialog maneje el error\r\n    }\r\n  };\r\n\r\n  // handleCategoryChange - actualizar categoría de un pago\r\n  const handleCategoryChange = async (payment, newCategory) => {\r\n    try {\r\n      // Llamar al backend para actualizar la categoría usando el ID del registro\r\n      await mpApi.updatePaymentCategory(payment.id, newCategory);\r\n\r\n      // Actualizar el estado local\r\n      setRows((prevRows) =>\r\n        prevRows.map((row) =>\r\n          row.id === payment.id ? { ...row, categoria: newCategory } : row\r\n        )\r\n      );\r\n      notify(`Categoría actualizada a: ${newCategory}`);\r\n    } catch (e) {\r\n      notify(e?.message || \"Error al actualizar categoría\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleBill = async () => {\r\n    if (!selected.length) return;\r\n    if (!window.confirm(`¿Facturar ${selected.length} pago(s) seleccionados?`))\r\n      return;\r\n    try {\r\n      await mpApi.billPayments(selected);\r\n      notify(\"Facturación en proceso/completada\");\r\n      loadPayments();\r\n    } catch (e) {\r\n      notify(e?.message || \"Error al facturar\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    setPage(0);\r\n    loadPayments();\r\n  };\r\n\r\n  // ===== Exportar a Excel (.xls - XML 2003) =====\r\n  const handleExport = () => {\r\n    // 1) Fuente: seleccionados si hay; si no, filas visibles\r\n    const data = selected.length\r\n      ? rows.filter((r) => selected.includes(r.mpPaymentId))\r\n      : rows;\r\n\r\n    if (!data.length) {\r\n      notify(\"No hay datos para exportar\", \"warning\");\r\n      return;\r\n    }\r\n\r\n    // 2) Columnas (mismo orden que la tabla)\r\n    const headers = [\r\n      \"Fecha\",\r\n      \"Payment ID\",\r\n      \"Detalle\",\r\n      \"Comprador\",\r\n      \"Comprobante\",\r\n      \"Estado\",\r\n      \"Total\",\r\n      \"Moneda\",\r\n      \"Orden/Referencia\",\r\n      \"Link\",\r\n    ];\r\n\r\n    // 3) Helpers\r\n    const fmtDate = (v) => {\r\n      if (!v) return \"\";\r\n      const d = new Date(v);\r\n      const hasTime = d.getHours() + d.getMinutes() + d.getSeconds() !== 0;\r\n      return hasTime\r\n        ? d.toLocaleString(\"es-AR\")\r\n        : d.toLocaleDateString(\"es-AR\");\r\n    };\r\n    const xmlEscape = (s) =>\r\n      String(s ?? \"\")\r\n        .replace(/&/g, \"&amp;\")\r\n        .replace(/</g, \"&lt;\")\r\n        .replace(/>/g, \"&gt;\")\r\n        .replace(/\"/g, \"&quot;\");\r\n\r\n    // 4) Transformar filas a celdas tipadas (Texto vs Número)\r\n    const rowsXml = data\r\n      .map((r) => {\r\n        const cells = [\r\n          { t: \"String\", v: fmtDate(r.fecha || r.date) },\r\n          { t: \"String\", v: r.mpPaymentId || r.id || \"\" },\r\n          { t: \"String\", v: r.detalle || r.description || \"\" },\r\n          { t: \"String\", v: r.comprador || r.buyer || \"\" },\r\n          { t: \"String\", v: r.comprobante || r.receipt || \"\" },\r\n          { t: \"String\", v: r.estado || r.status || \"\" },\r\n          // Total: si es número => Number; si viene string => lo dejamos texto\r\n          (() => {\r\n            const n = r.total ?? r.amount;\r\n            const val = typeof n === \"number\" ? n : Number(n);\r\n            return Number.isFinite(val)\r\n              ? { t: \"Number\", v: val }\r\n              : { t: \"String\", v: n ?? \"\" };\r\n          })(),\r\n          { t: \"String\", v: r.moneda || r.currency || \"ARS\" },\r\n          { t: \"String\", v: r.externalReference || r.orderId || \"\" },\r\n          { t: \"String\", v: r.permalink || r.init_point || \"\" },\r\n        ]\r\n          .map((c) => {\r\n            if (c.t === \"Number\") {\r\n              return `<Cell><Data ss:Type=\"Number\">${c.v}</Data></Cell>`;\r\n            }\r\n            return `<Cell><Data ss:Type=\"String\">${xmlEscape(\r\n              c.v\r\n            )}</Data></Cell>`;\r\n          })\r\n          .join(\"\");\r\n        return `<Row>${cells}</Row>`;\r\n      })\r\n      .join(\"\");\r\n\r\n    // 5) Encabezados XML Spreadsheet 2003\r\n    const headersXml =\r\n      \"<Row>\" +\r\n      headers\r\n        .map(\r\n          (h) => `<Cell><Data ss:Type=\"String\">${xmlEscape(h)}</Data></Cell>`\r\n        )\r\n        .join(\"\") +\r\n      \"</Row>\";\r\n\r\n    const worksheetName = \"Pagos_MP\";\r\n    const xml =\r\n      `<?xml version=\"1.0\"?>` +\r\n      `<?mso-application progid=\"Excel.Sheet\"?>` +\r\n      `<Workbook xmlns=\"urn:schemas-microsoft-com:office:spreadsheet\" ` +\r\n      `xmlns:o=\"urn:schemas-microsoft-com:office:office\" ` +\r\n      `xmlns:x=\"urn:schemas-microsoft-com:office:excel\" ` +\r\n      `xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\">` +\r\n      `<Worksheet ss:Name=\"${xmlEscape(worksheetName)}\">` +\r\n      `<Table>` +\r\n      headersXml +\r\n      rowsXml +\r\n      `</Table>` +\r\n      `</Worksheet>` +\r\n      `</Workbook>`;\r\n\r\n    // 6) Descargar .xls (Excel abre directo)\r\n    const blob = new Blob([xml], { type: \"application/vnd.ms-excel\" });\r\n    const a = document.createElement(\"a\");\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = `pagos_mp_${new Date().toISOString().slice(0, 10)}.xls`;\r\n    a.click();\r\n  };\r\n  // ===== Fin exportar =====\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 1200, mx: \"auto\", mt: 3, px: 2 }}>\r\n      <Paper\r\n        variant=\"outlined\"\r\n        sx={{\r\n          mb: 2,\r\n          borderRadius: 2,\r\n          p: 1,\r\n          bgcolor: (t) =>\r\n            t.palette.mode === \"dark\"\r\n              ? \"background.default\"\r\n              : \"background.paper\",\r\n        }}\r\n      >\r\n        <MpToolbar\r\n          accountLabel={accountLabel}\r\n          filters={filters}\r\n          onFiltersChange={setFilters}\r\n          onOpenImport={() => setImportOpen(true)}\r\n          onOpenConfig={() => setConfigOpen(true)}\r\n          onUnlink={handleUnlink}\r\n          onRefresh={handleRefresh}\r\n          onExport={handleExport}\r\n          onBillSelected={handleBill}\r\n          selectedCount={selected.length}\r\n          unlinkBusy={unlinking}\r\n        />\r\n      </Paper>\r\n\r\n      <Paper variant=\"outlined\" sx={{ borderRadius: 2 }}>\r\n        <MpPaymentsTable\r\n          rows={rows}\r\n          loading={loading}\r\n          page={page}\r\n          pageSize={pageSize}\r\n          total={total}\r\n          selected={selected}\r\n          onSelectChange={setSelected}\r\n          onPageChange={setPage}\r\n          onPageSizeChange={(ps) => {\r\n            setPageSize(ps);\r\n            setPage(0);\r\n          }}\r\n          onCategoryChange={handleCategoryChange}\r\n        />\r\n      </Paper>\r\n\r\n      <MpImportDialog\r\n        open={importOpen}\r\n        onClose={() => setImportOpen(false)}\r\n        onImport={handleImport}\r\n      />\r\n\r\n      <MpPreviewDialog\r\n        open={previewOpen}\r\n        onClose={() => {\r\n          setPreviewOpen(false);\r\n          setPreviewData([]);\r\n        }}\r\n        previewData={previewData}\r\n        loading={previewLoading}\r\n        onImportSelected={handleImportSelected}\r\n      />\r\n\r\n      <MpConfigDialog\r\n        open={configOpen}\r\n        onClose={() => setConfigOpen(false)}\r\n        onSaved={() => {\r\n          setConfigOpen(false);\r\n          notify(\"Configuración guardada\");\r\n          setPage(0);\r\n          loadPayments();\r\n        }}\r\n      />\r\n\r\n      <Snackbar\r\n        open={snack.open}\r\n        autoHideDuration={4000}\r\n        onClose={() => setSnack((s) => ({ ...s, open: false }))}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n      >\r\n        <Alert\r\n          onClose={() => setSnack((s) => ({ ...s, open: false }))}\r\n          severity={snack.severity}\r\n          variant=\"filled\"\r\n        >\r\n          {snack.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n}\r\n","// /mercado-pago/Mercado-Pago.js\r\nimport React from \"react\";\r\nimport {\r\n  Container,\r\n  Alert,\r\n  Stack,\r\n  LinearProgress,\r\n  Skeleton,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n} from \"@mui/material\";\r\nimport { mpApi } from \"./mpApi\";\r\nimport MpLinkCard from \"./components/MpLinkCard\";\r\nimport MainGrid from \"./components/MainGrid\";\r\n\r\nexport default function MercadoPagoPage() {\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n  const [status, setStatus] = React.useState(null);\r\n\r\n  const loadStatus = React.useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const s = await mpApi.getStatus();\r\n      setStatus(s);\r\n    } catch (e) {\r\n      setError(e?.message || \"No se pudo cargar el estado\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Primera carga\r\n  React.useEffect(() => {\r\n    loadStatus();\r\n  }, [loadStatus]);\r\n\r\n  // Soporte a ?mp=linked / ?linked=1 después del OAuth y limpieza de URL\r\n  React.useEffect(() => {\r\n    const p = new URLSearchParams(window.location.search);\r\n    if (p.get(\"mp\") === \"linked\" || p.get(\"linked\") === \"1\") {\r\n      window.history.replaceState({}, document.title, window.location.pathname);\r\n      loadStatus();\r\n    }\r\n  }, [loadStatus]);\r\n\r\n  // Limpiar datos al salir de la página (cambiar de solapa)\r\n  React.useEffect(() => {\r\n    const handleBeforeUnload = () => {\r\n      // Opcional: limpiar datos locales si es necesario\r\n      // localStorage.removeItem('mp_data');\r\n    };\r\n\r\n    const handleVisibilityChange = () => {\r\n      if (document.hidden) {\r\n        // La página se ocultó (cambió de solapa)\r\n        console.log(\"MercadoPago: Página oculta, manteniendo sesión\");\r\n      } else {\r\n        // La página se mostró de nuevo\r\n        console.log(\"MercadoPago: Página visible, verificando estado\");\r\n        loadStatus();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\r\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"beforeunload\", handleBeforeUnload);\r\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\r\n    };\r\n  }, [loadStatus]);\r\n\r\n  const onRefreshStatus = () => loadStatus();\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" sx={{ py: 3 }}>\r\n      {/* Encabezado simple (opcional) */}\r\n      <Stack\r\n        direction=\"row\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"space-between\"\r\n        sx={{ mb: 2 }}\r\n      >\r\n        <Typography variant=\"h4\">Mercado Pago</Typography>\r\n        {/* espacio reservado para acciones futuras */}\r\n        <Box sx={{ minWidth: 120 }} />\r\n      </Stack>\r\n\r\n      {/* Estado de error con acción de reintento */}\r\n      {error && (\r\n        <Alert\r\n          severity=\"warning\"\r\n          sx={{ mb: 2 }}\r\n          action={\r\n            <Button color=\"inherit\" size=\"small\" onClick={loadStatus}>\r\n              Reintentar\r\n            </Button>\r\n          }\r\n        >\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Cargando: barra + skeletons para que se vea “vivo” */}\r\n      {loading && (\r\n        <Stack spacing={2}>\r\n          <LinearProgress />\r\n          <Skeleton variant=\"rounded\" height={140} />\r\n          <Skeleton variant=\"rounded\" height={420} />\r\n        </Stack>\r\n      )}\r\n\r\n      {/* Contenido */}\r\n      {!loading && !error && (\r\n        <>\r\n          {!status?.linked ? (\r\n            <MpLinkCard onLinked={loadStatus} />\r\n          ) : (\r\n            <MainGrid status={status} onRefreshStatus={onRefreshStatus} />\r\n          )}\r\n        </>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport dayjs from 'dayjs';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport { useForkRef } from '@mui/material/utils';\r\nimport Button from '@mui/material/Button';\r\nimport CalendarTodayRoundedIcon from '@mui/icons-material/CalendarTodayRounded';\r\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\r\nimport {\r\n  useParsedFormat,\r\n  usePickerContext,\r\n  useSplitFieldProps,\r\n} from '@mui/x-date-pickers';\r\n\r\ndayjs.extend(utc);\r\n\r\nfunction ButtonField(props) {\r\n  const { forwardedProps } = useSplitFieldProps(props, 'date');\r\n  const pickerContext = usePickerContext();\r\n  const handleRef = useForkRef(pickerContext.triggerRef, pickerContext.rootRef);\r\n  const parsedFormat = useParsedFormat();\r\n\r\n  const valueStr =\r\n    pickerContext.value == null\r\n      ? parsedFormat\r\n      : pickerContext.value.format(pickerContext.fieldFormat);\r\n\r\n  return (\r\n    <Button\r\n      {...forwardedProps}\r\n      variant=\"outlined\"\r\n      ref={handleRef}\r\n      size=\"small\"\r\n      startIcon={<CalendarTodayRoundedIcon fontSize=\"small\" />}\r\n      sx={{ minWidth: 'fit-content', width: '100%' }}\r\n      disabled={pickerContext.disabled || forwardedProps?.disabled}\r\n      onClick={() => {\r\n        if (pickerContext.disabled || forwardedProps?.disabled) return;\r\n        pickerContext.setOpen((prev) => !prev);\r\n      }}\r\n    >\r\n      {pickerContext.label ?? valueStr}\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport default function CustomDatePicker({ value, onChange, disabled = false }) {\r\n  const handleChange = (newValue) => {\r\n    if (!onChange) return;\r\n    if (dayjs.isDayjs(newValue)) {\r\n      const normalized = dayjs.utc(newValue.startOf(\"day\").format(\"YYYY-MM-DD\"));\r\n      onChange(normalized);\r\n    } else {\r\n      onChange(newValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <LocalizationProvider dateAdapter={AdapterDayjs}>\r\n      <DatePicker\r\n        value={value ? dayjs(value) : null}\r\n        label={value == null ? null : dayjs(value).format('MMM DD, YYYY')}\r\n        onChange={handleChange}\r\n        disabled={disabled}\r\n        slots={{ field: ButtonField }}\r\n        slotProps={{\r\n          nextIconButton: { size: 'small', disabled },\r\n          previousIconButton: { size: 'small', disabled },\r\n          field: { disabled },\r\n        }}\r\n        views={['day', 'month', 'year']}\r\n        sx={{ width: '100%' }}\r\n      />\r\n    </LocalizationProvider>\r\n  );\r\n}\r\n","/**\r\n * Categorías unificadas para toda la aplicación\r\n * Estas categorías están sincronizadas con el backend\r\n */\r\n\r\n// Categorías de EGRESOS\r\nexport const CATEGORIAS_EGRESO = [\r\n  \"Alimentos y Bebidas\",\r\n  \"Transporte\",\r\n  \"Vivienda\",\r\n  \"Servicios Básicos\",\r\n  \"Ocio y Entretenimiento\",\r\n  \"Compras Personales\",\r\n  \"Salud\",\r\n  \"Educación\",\r\n  \"Impuestos y Tasas\",\r\n  \"Servicios Financieros\",\r\n  \"Compras de Negocio\",\r\n  \"Otros Egresos\",\r\n];\r\n\r\n// Categorías de INGRESOS\r\nexport const CATEGORIAS_INGRESO = [\r\n  \"Ventas de Productos\",\r\n  \"Prestación de Servicios\",\r\n  \"Cobranzas\",\r\n  \"Transferencias Recibidas\",\r\n  \"Inversiones y Rendimientos\",\r\n  \"Otros Ingresos\",\r\n];\r\n\r\n// Todas las categorías (para uso genérico)\r\nexport const TODAS_LAS_CATEGORIAS = [\r\n  ...CATEGORIAS_EGRESO,\r\n  ...CATEGORIAS_INGRESO,\r\n];\r\n\r\n/**\r\n * Obtiene las categorías según el tipo de registro\r\n * @param {string} tipo - 'Ingreso', 'Egreso', o null para todas\r\n * @returns {string[]} Array de categorías\r\n */\r\nexport function obtenerCategorias(tipo) {\r\n  if (!tipo) return TODAS_LAS_CATEGORIAS;\r\n  if (tipo === \"Ingreso\") return CATEGORIAS_INGRESO;\r\n  if (tipo === \"Egreso\") return CATEGORIAS_EGRESO;\r\n  return TODAS_LAS_CATEGORIAS;\r\n}\r\n"],"names":["BASE_URL","API_CONFIG","REGISTRO","async","request","path","method","body","headers","arguments","length","undefined","url","concat","opts","_objectSpread","usuarioSub","sessionStorage","getItem","JSON","stringify","res","fetch","text","data","parse","_unused","ok","_data","_data2","message","error","status","err","Error","payload","mpApi","getStatus","startOAuth","console","log","authUrl","unlink","listPayments","params","from","to","q","page","pageSize","sp","URLSearchParams","set","toString","listImportedPayments","previewPaymentsByMonth","_ref","month","year","previewPaymentById","paymentId","previewByExternalReference","externalReference","importSelectedPayments","paymentIds","importPaymentsByMonth","_ref2","importPaymentById","getConfig","updateConfig","cfg","billPayments","ids","updatePaymentCategory","registroId","newCategory","categoria","MpLinkCard","onLinked","busy","setBusy","React","setErr","p","window","location","search","get","_jsxs","Card","variant","sx","maxWidth","mx","mt","borderRadius","overflow","children","_jsx","CardHeader","title","subheader","pb","Stack","alignItems","justifyContent","mb","Box","bgcolor","border","display","minWidth","src","logo","alt","style","height","opacity","filter","spacing","CardContent","CardActions","px","width","Button","onClick","href","e","disabled","DEFAULT_PAGE_SIZE","PAGE_SIZE_OPTIONS","MpToolbar","accountLabel","filters","onFiltersChange","onOpenImport","onOpenConfig","onUnlink","onRefresh","onExport","onBillSelected","selectedCount","unlinkBusy","patch","parseDate","value","parsed","dayjs","isValid","handleDateChange","field","format","fieldLabelSx","fontWeight","color","DateField","label","onChange","xs","sm","Typography","CustomDatePicker","SearchField","_ref3","TextField","size","placeholder","fullWidth","Toolbar","gap","flexWrap","mr","borderColor","Chip","fontSize","Tooltip","startIcon","LinkOffIcon","direction","md","flexGrow","target","CloudDownloadIcon","py","ml","EditableCategory","isEditing","setIsEditing","editValue","setEditValue","handleSave","TODAS_LAS_CATEGORIAS","includes","handleCancel","Autocomplete","event","newValue","options","autoHighlight","openOnFocus","disableClearable","renderInput","autoFocus","IconButton","CheckIcon","CloseIcon","EditIcon","formatDate","Date","toLocaleDateString","formatAmount","amount","currency","isEgreso","displayAmount","Intl","NumberFormat","MpPaymentsTable","rows","loading","total","selected","onSelectChange","onPageChange","onPageSizeChange","onCategoryChange","allSelected","someSelected","TableContainer","LinearProgress","Table","stickyHeader","TableHead","TableRow","TableCell","padding","Checkbox","checked","indeterminate","map","r","index","id","mpPaymentId","inputProps","TableBody","colSpan","textAlign","fecha","date","hover","backgroundColor","t","palette","action","s","toggleOne","tipo","estado","align","_r$montoTotal","montoTotal","moneda","descripcion","detalle","description","origen","comprador","buyer","TablePagination","component","count","_","rowsPerPage","onRowsPerPageChange","parseInt","rowsPerPageOptions","MONTHS","v","MpImportDialog","open","onClose","onImport","now","setMonth","getMonth","setYear","getFullYear","setPaymentId","Dialog","DialogContent","dividers","logoMp","Divider","textTransform","Paper","select","m","MenuItem","type","min","max","step","Alert","severity","DialogActions","mode","Number","MpPreviewDialog","previewData","onImportSelected","setSelected","importing","setImporting","duplicadosCount","esDuplicado","PaperProps","minHeight","DialogTitle","_Fragment","handleSelectAll","Boolean","MpConfigDialog","onSaved","setCfg","autoBill","timezone","setLoading","saving","setSaving","load","c","toUpperCase","Row","hint","control","Grid","container","item","InfoOutlined","Skeleton","maxLength","condicionPago","cuentaCobro","MainGrid","_status$account","_status$account2","_status$account3","onRefreshStatus","setFilters","payStatus","setRows","setPage","setPageSize","setTotal","importOpen","setImportOpen","previewOpen","setPreviewOpen","setPreviewData","previewLoading","setPreviewLoading","configOpen","setConfigOpen","unlinking","setUnlinking","snack","setSnack","account","nickname","email","legalName","notify","fetchPayments","_resp$totalElements","resp","ts","items","content","tot","totalElements","loadPayments","refreshUntilChange","i","_items$","_rows$","delay","Promise","setTimeout","prevTotal","confirm","handleRefresh","handleExport","fmtDate","d","getHours","getMinutes","getSeconds","toLocaleString","xmlEscape","String","replace","rowsXml","cells","comprobante","receipt","_r$total","n","val","isFinite","orderId","permalink","init_point","join","headersXml","h","xml","blob","Blob","a","document","createElement","URL","createObjectURL","download","toISOString","slice","click","ps","payment","prevRows","row","_previewResponse","previewResponse","args","previewItems","preview","selectedPaymentIds","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal","MercadoPagoPage","setError","setStatus","loadStatus","history","replaceState","pathname","handleBeforeUnload","handleVisibilityChange","hidden","addEventListener","removeEventListener","Container","linked","ButtonField","props","_pickerContext$label","forwardedProps","useSplitFieldProps","pickerContext","usePickerContext","handleRef","useForkRef","triggerRef","rootRef","parsedFormat","useParsedFormat","valueStr","fieldFormat","ref","CalendarTodayRoundedIcon","setOpen","prev","LocalizationProvider","dateAdapter","AdapterDayjs","DatePicker","normalized","startOf","slots","slotProps","nextIconButton","previousIconButton","views","utc","CATEGORIAS_EGRESO","CATEGORIAS_INGRESO"],"sourceRoot":""}