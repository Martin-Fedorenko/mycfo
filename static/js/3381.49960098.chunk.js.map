{"version":3,"file":"static/js/3381.49960098.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/MoreVert.js","api/http.js","../node_modules/@mui/icons-material/esm/RestoreFromTrash.js","pronostico/presupuesto/components/MainGrid.js","pronostico/presupuesto/Presupuesto.js","../node_modules/@mui/icons-material/esm/DeleteOutline.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2\"\n}), 'MoreVert');","import axios from \"axios\";\r\nimport {\r\n  CognitoUserPool,\r\n  CognitoUser,\r\n  CognitoRefreshToken,\r\n} from \"amazon-cognito-identity-js\";\r\nimport { sessionService } from \"../shared-services/sessionService\";\r\nimport URL_CONFIG from \"../config/api-config\";\r\n\r\nconst http = axios.create();\r\nconst PRONOSTICO_BASE_URL = URL_CONFIG.PRONOSTICO;\r\nconst cognitoPoolConfig = {\r\n  UserPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\r\n  ClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\r\n};\r\n\r\nlet refreshPromise = null;\r\nlet hasForcedLogout = false;\r\n\r\nconst isPronosticoRequest = (url) =>\r\n  Boolean(\r\n    url &&\r\n      PRONOSTICO_BASE_URL &&\r\n      String(url).startsWith(String(PRONOSTICO_BASE_URL)),\r\n  );\r\n\r\nconst safeSessionGet = (key) => {\r\n  try {\r\n    return sessionStorage.getItem(key);\r\n  } catch (err) {\r\n    console.warn(\"No se pudo leer sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst safeSessionSet = (key, value) => {\r\n  try {\r\n    if (value !== undefined && value !== null) {\r\n      sessionStorage.setItem(key, value);\r\n    }\r\n  } catch (err) {\r\n    console.warn(\"No se pudo escribir en sessionStorage:\", err);\r\n  }\r\n};\r\n\r\nconst clearSessionAndRedirect = () => {\r\n  if (hasForcedLogout) {\r\n    return;\r\n  }\r\n  hasForcedLogout = true;\r\n  try {\r\n    sessionStorage.clear();\r\n  } catch {\r\n    /* noop */\r\n  }\r\n  if (sessionService?.limpiarSesion) {\r\n    sessionService.limpiarSesion();\r\n  }\r\n  if (typeof window !== \"undefined\") {\r\n    window.location.href = \"/#/signin\";\r\n  }\r\n};\r\n\r\nconst buildCognitoUser = () => {\r\n  const username = safeSessionGet(\"email\") || safeSessionGet(\"username\");\r\n  if (\r\n    !username ||\r\n    !cognitoPoolConfig.UserPoolId ||\r\n    !cognitoPoolConfig.ClientId\r\n  ) {\r\n    return null;\r\n  }\r\n  const pool = new CognitoUserPool(cognitoPoolConfig);\r\n  return new CognitoUser({\r\n    Username: username,\r\n    Pool: pool,\r\n  });\r\n};\r\n\r\nconst refreshTokens = () => {\r\n  const refreshTokenValue = safeSessionGet(\"refreshToken\");\r\n  const cognitoUser = buildCognitoUser();\r\n  if (!refreshTokenValue || !cognitoUser) {\r\n    return Promise.reject(new Error(\"No hay datos para renovar la sesiÃ³n.\"));\r\n  }\r\n  const refreshToken = new CognitoRefreshToken({\r\n    RefreshToken: refreshTokenValue,\r\n  });\r\n  return new Promise((resolve, reject) => {\r\n    cognitoUser.refreshSession(refreshToken, (err, session) => {\r\n      if (err) {\r\n        reject(err);\r\n        return;\r\n      }\r\n      const nextAccessToken = session.getAccessToken().getJwtToken();\r\n      const nextIdToken = session.getIdToken().getJwtToken();\r\n      const nextRefreshToken = session.getRefreshToken().getToken();\r\n      safeSessionSet(\"accessToken\", nextAccessToken);\r\n      safeSessionSet(\"idToken\", nextIdToken);\r\n      if (nextRefreshToken) {\r\n        safeSessionSet(\"refreshToken\", nextRefreshToken);\r\n      }\r\n      resolve(nextAccessToken);\r\n    });\r\n  });\r\n};\r\n\r\nconst getRefreshPromise = () => {\r\n  if (!refreshPromise) {\r\n    refreshPromise = refreshTokens()\r\n      .then((token) => {\r\n        refreshPromise = null;\r\n        return token;\r\n      })\r\n      .catch((error) => {\r\n        refreshPromise = null;\r\n        throw error;\r\n      });\r\n  }\r\n  return refreshPromise;\r\n};\r\n\r\nhttp.interceptors.request.use((config) => {\r\n  const accessToken = sessionStorage.getItem(\"accessToken\");\r\n  if (isPronosticoRequest(config.url)) {\r\n    config.headers = config.headers ?? {};\r\n    if (accessToken) {\r\n      config.headers.Authorization = `Bearer ${accessToken}`;\r\n    }\r\n    const usuarioSub = sessionStorage.getItem(\"sub\");\r\n    if (usuarioSub) {\r\n      config.headers[\"X-Usuario-Sub\"] = usuarioSub;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nhttp.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const { config, response } = error;\r\n    if (\r\n      !config ||\r\n      !response ||\r\n      response.status !== 401 ||\r\n      !isPronosticoRequest(config.url)\r\n    ) {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (config.__isRetryRequest) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    try {\r\n      const newAccessToken = await getRefreshPromise();\r\n      if (!newAccessToken) {\r\n        throw new Error(\"No se obtuvo un token renovado.\");\r\n      }\r\n      config.__isRetryRequest = true;\r\n      config.headers = config.headers ?? {};\r\n      config.headers.Authorization = `Bearer ${newAccessToken}`;\r\n      return http(config);\r\n    } catch (refreshError) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(refreshError);\r\n    }\r\n  },\r\n);\r\n\r\nexport default http;\r\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 4h-3.5l-1-1h-5l-1 1H5v2h14zM6 7v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7zm8 7v4h-4v-4H8l4-4 4 4z\"\n}), 'RestoreFromTrash');","import * as React from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Alert,\r\n  Tabs,\r\n  Tab,\r\n  Snackbar,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  IconButton,\r\n  Menu,\r\n  Tooltip,\r\n  Pagination,\r\n  CircularProgress,\r\n  Divider,\r\n} from \"@mui/material\";\r\nimport { alpha, useTheme } from \"@mui/material/styles\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport http from \"../../../api/http\";\r\nimport DeleteOutlineIcon from \"@mui/icons-material/DeleteOutline\";\r\nimport RestoreFromTrashIcon from \"@mui/icons-material/RestoreFromTrash\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport API_CONFIG from \"../../../config/api-config\";\r\nimport LoadingSpinner from \"../../../shared-components/LoadingSpinner\";\r\n\r\n\r\n\r\nconst tableRowStyle = {\r\n  backgroundColor: \"rgba(255, 255, 255, 0.02)\",\r\n  \"&:hover\": { backgroundColor: \"rgba(255, 255, 255, 0.05)\" },\r\n};\r\nconst tableCellStyle = (theme) => ({\r\n  border: `1px solid ${(theme.vars || theme).palette.divider}`,\r\n});\r\nconst headerCellStyle = (theme) => ({\r\n  ...tableCellStyle(theme),\r\n  fontWeight: 600,\r\n});\r\nconst getColumnWidth = (statusFilter) => ({\r\n  nombre: { width: statusFilter === \"deleted\" ? \"20%\" : \"25%\" },\r\n  desde: { width: statusFilter === \"deleted\" ? \"20%\" : \"25%\" },\r\n  hasta: { width: statusFilter === \"deleted\" ? \"20%\" : \"25%\" },\r\n  eliminado: { width: \"20%\" },\r\n  acciones: { width: statusFilter === \"deleted\" ? \"20%\" : \"25%\" },\r\n});\r\nconst monthLabels = [\r\n  \"enero\",\r\n  \"febrero\",\r\n  \"marzo\",\r\n  \"abril\",\r\n  \"mayo\",\r\n  \"junio\",\r\n  \"julio\",\r\n  \"agosto\",\r\n  \"septiembre\",\r\n  \"octubre\",\r\n  \"noviembre\",\r\n  \"diciembre\",\r\n];\r\nconst pad2 = (value) => String(value).padStart(2, \"0\");\r\nconst lastDayOfMonth = (year, month) => new Date(year, month, 0).getDate();\r\nconst parseRetentionDays = () => {\r\n  const raw = process.env.REACT_APP_PRESUPUESTO_RETENTION_DAYS;\r\n  const parsed = Number(raw);\r\n  if (Number.isNaN(parsed) || parsed <= 0) {\r\n    return 90;\r\n  }\r\n  return parsed;\r\n};\r\nconst formatDeletedAt = (value) => {\r\n  if (!value) return \"-\";\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.valueOf())) {\r\n    return value;\r\n  }\r\n  return date.toLocaleString(\"es-AR\", { hour12: false });\r\n};\r\nconst PAGE_SIZE = 3;\r\nconst DEFAULT_SORT = \"createdAt,desc\";\r\nconst createEmptyPage = () => ({\r\n  content: [],\r\n  totalElements: 0,\r\n  totalPages: 0,\r\n  number: 0,\r\n  size: PAGE_SIZE,\r\n});\r\nconst HeaderLabelAligned = ({ label, ghost }) => (\r\n  <Box sx={{ position: 'relative', display: 'inline-flex' }}>\r\n    <Box\r\n      aria-hidden\r\n      sx={{\r\n        visibility: 'hidden',\r\n        pointerEvents: 'none',\r\n        display: 'inline-flex',\r\n        whiteSpace: 'nowrap',\r\n      }}\r\n    >\r\n      {ghost}\r\n    </Box>\r\n    <Box sx={{ position: 'absolute', inset: 0, display: 'grid', placeItems: 'center', whiteSpace: 'nowrap' }}>\r\n      {label}\r\n    </Box>\r\n  </Box>\r\n);\r\n\r\nexport default function MainGrid() {\r\n  const theme = useTheme();\r\n  const isLightMode = theme.palette.mode === \"light\";\r\n  const paletteVars = theme.vars?.palette ?? theme.palette;\r\n  const tabsLabelColor = isLightMode\r\n    ? paletteVars.text?.primary ?? \"#000\"\r\n    : paletteVars.common?.white ?? \"#fff\";\r\n  const darkActionButtonSx = isLightMode ? undefined : { color: \"#42897f\" };\r\n  const navigate = useNavigate();\r\n  const baseURL = API_CONFIG.PRONOSTICO;\r\n  const retentionDays = React.useMemo(() => parseRetentionDays(), []);\r\n  const [statusFilter, setStatusFilter] = React.useState(\"active\");\r\n  const [pageIndex, setPageIndex] = React.useState(0);\r\n  const [presupuestosPage, setPresupuestosPage] =\r\n    React.useState(createEmptyPage);\r\n  const [hasActiveSearch, setHasActiveSearch] = React.useState(false);\r\n  const [searchPage, setSearchPage] = React.useState(null);\r\n  const [searchPageIndex, setSearchPageIndex] = React.useState(0);\r\n  const [query, setQuery] = React.useState(\"\");\r\n  const [filters, setFilters] = React.useState({\r\n    year: \"\",\r\n    fromMonth: \"\",\r\n    toMonth: \"\",\r\n  });\r\n  const [searchError, setSearchError] = React.useState(\"\");\r\n  const [listError, setListError] = React.useState(\"\");\r\n  const [loadingSearch, setLoadingSearch] = React.useState(false);\r\n  const [loadingAll, setLoadingAll] = React.useState(false);\r\n  const [confirmDialog, setConfirmDialog] = React.useState({\r\n    open: false,\r\n    presupuesto: null,\r\n  });\r\n  const [snackbar, setSnackbar] = React.useState({\r\n    open: false,\r\n    message: \"\",\r\n    action: null,\r\n  });\r\n  const [deletingId, setDeletingId] = React.useState(null);\r\n  const [menuState, setMenuState] = React.useState({\r\n    anchorEl: null,\r\n    presupuesto: null,\r\n  });\r\n  const [yearOptions, setYearOptions] = React.useState(() => {\r\n    const current = new Date().getFullYear();\r\n    return [current - 1, current, current + 1];\r\n  });\r\n  const searchParamsRef = React.useRef(\"\");\r\n  const lastDeletedRef = React.useRef(null);\r\n  const [usuarioRol, setUsuarioRol] = React.useState(null);\r\n  const monthName = React.useCallback((ym) => {\r\n    if (!ym) return \"\";\r\n    const [anio, mes] = ym.split(\"-\");\r\n    const idx = Number(mes) - 1;\r\n    return idx >= 0 && idx < monthLabels.length\r\n      ? `${monthLabels[idx]} ${anio}`\r\n      : ym;\r\n  }, []);\r\n\r\n  const cargarRolUsuario = React.useCallback(() => {\r\n    const sub = sessionStorage.getItem('sub');\r\n    if (!sub) return;\r\n    fetch(`${API_CONFIG.ADMINISTRACION}/api/usuarios/perfil`, {\r\n      headers: { 'X-Usuario-Sub': sub },\r\n    })\r\n      .then((res) => (res.ok ? res.json() : null))\r\n      .then((data) => {\r\n        if (data && data.rol) {\r\n          setUsuarioRol(data.rol);\r\n        }\r\n      })\r\n      .catch((err) => console.error('Error cargando rol de usuario:', err));\r\n  }, []);\r\n  const mergeYearOptions = React.useCallback((items) => {\r\n    if (!Array.isArray(items) || items.length === 0) {\r\n      return;\r\n    }\r\n    setYearOptions((prev) => {\r\n      const next = new Set(prev);\r\n      items.forEach((item) => {\r\n        const desdeYear = Number(item?.desde?.split(\"-\")[0]);\r\n        const hastaYear = Number(item?.hasta?.split(\"-\")[0]);\r\n        if (!Number.isNaN(desdeYear)) {\r\n          next.add(desdeYear);\r\n        }\r\n        if (!Number.isNaN(hastaYear)) {\r\n          next.add(hastaYear);\r\n        }\r\n      });\r\n      return Array.from(next).sort((a, b) => a - b);\r\n    });\r\n  }, []);\r\n  const normalizePage = React.useCallback((data) => {\r\n    if (!data || typeof data !== \"object\") {\r\n      return createEmptyPage();\r\n    }\r\n    const content = Array.isArray(data.content) ? data.content : [];\r\n    const totalElementsRaw = Number(data.totalElements);\r\n    const totalPagesRaw = Number(data.totalPages);\r\n    const numberRaw = Number(data.number);\r\n    const sizeRaw = Number(data.size);\r\n    return {\r\n      content,\r\n      totalElements: Number.isFinite(totalElementsRaw)\r\n        ? totalElementsRaw\r\n        : content.length,\r\n      totalPages: Number.isFinite(totalPagesRaw)\r\n        ? totalPagesRaw\r\n        : content.length > 0\r\n          ? 1\r\n          : 0,\r\n      number: Number.isFinite(numberRaw) ? numberRaw : 0,\r\n      size: Number.isFinite(sizeRaw) && sizeRaw > 0 ? sizeRaw : PAGE_SIZE,\r\n    };\r\n  }, []);\r\n  const fetchPresupuestos = React.useCallback(\r\n    async (statusValue, pageValue) => {\r\n      setLoadingAll(true);\r\n      try {\r\n        const trimmedQuery = query.trim();\r\n        const shouldExpand = trimmedQuery.length >= 2;\r\n        const effectivePage = shouldExpand ? 0 : Math.max(pageValue, 0);\r\n        const effectiveSize = shouldExpand ? 1000 : PAGE_SIZE;\r\n        const params = new URLSearchParams();\r\n        params.set(\"status\", statusValue);\r\n        params.set(\"page\", String(effectivePage));\r\n        params.set(\"size\", String(effectiveSize));\r\n        params.set(\"sort\", DEFAULT_SORT);\r\n        const res = await http.get(\r\n          `${baseURL}/api/presupuestos?${params.toString()}`,\r\n        );\r\n        const pageData = normalizePage(res.data);\r\n        if (\r\n          !shouldExpand &&\r\n          pageValue > 0 &&\r\n          pageData.totalPages > 0 &&\r\n          pageValue >= pageData.totalPages\r\n        ) {\r\n          setPageIndex(pageData.totalPages - 1);\r\n          return;\r\n        }\r\n        setPresupuestosPage(pageData);\r\n        mergeYearOptions(pageData.content);\r\n        setListError(\"\");\r\n        if (shouldExpand && pageValue !== 0) {\r\n          setPageIndex(0);\r\n        }\r\n      } catch (e) {\r\n        console.error(\"Error cargando presupuestos desde el backend:\", e);\r\n        setPresupuestosPage(createEmptyPage());\r\n        setListError(\r\n          \"No se pudo cargar la lista de presupuestos. Intenta nuevamente.\",\r\n        );\r\n      } finally {\r\n        setLoadingAll(false);\r\n      }\r\n    },\r\n    [baseURL, mergeYearOptions, normalizePage, query],\r\n  );\r\n  const fetchSearchPresupuestos = React.useCallback(\r\n    async (searchParamsString, statusValue, pageValue) => {\r\n      setLoadingSearch(true);\r\n      try {\r\n        const params = new URLSearchParams(searchParamsString || \"\");\r\n        params.set(\"status\", statusValue);\r\n        params.set(\"page\", String(Math.max(pageValue, 0)));\r\n        params.set(\"size\", String(PAGE_SIZE));\r\n        params.set(\"sort\", DEFAULT_SORT);\r\n        const res = await http.get(\r\n          `${baseURL}/api/presupuestos?${params.toString()}`,\r\n        );\r\n        const pageData = normalizePage(res.data);\r\n        if (\r\n          pageValue > 0 &&\r\n          pageData.totalPages > 0 &&\r\n          pageValue >= pageData.totalPages\r\n        ) {\r\n          setSearchPageIndex(pageData.totalPages - 1);\r\n          return;\r\n        }\r\n        setSearchPage(pageData);\r\n        mergeYearOptions(pageData.content);\r\n        setSearchError(\"\");\r\n      } catch (e) {\r\n        console.error(\"Error cargando presupuestos desde el backend:\", e);\r\n        setSearchPage(createEmptyPage());\r\n        setSearchError(\r\n          \"No se pudo cargar la lista filtrada. Intenta nuevamente.\",\r\n        );\r\n      } finally {\r\n        setLoadingSearch(false);\r\n      }\r\n    },\r\n    [baseURL, mergeYearOptions, normalizePage],\r\n  );\r\n  React.useEffect(() => {\r\n    fetchPresupuestos(statusFilter, pageIndex);\r\n    cargarRolUsuario();\r\n  }, [fetchPresupuestos, statusFilter, pageIndex, cargarRolUsuario]);\r\n  const handleStatusChange = (event, newValue) => {\r\n    if (newValue === statusFilter) return;\r\n    setStatusFilter(newValue);\r\n    setPageIndex(0);\r\n    setHasActiveSearch(false);\r\n    setSearchPage(null);\r\n    setSearchPageIndex(0);\r\n    setSearchError(\"\");\r\n    searchParamsRef.current = \"\";\r\n  };\r\n  React.useEffect(() => {\r\n    setMenuState({ anchorEl: null, presupuesto: null });\r\n  }, [statusFilter]);\r\n  const openActionsMenu = (event, presupuesto) => {\r\n    setMenuState({ anchorEl: event.currentTarget, presupuesto });\r\n  };\r\n  const closeActionsMenu = () => {\r\n    setMenuState({ anchorEl: null, presupuesto: null });\r\n  };\r\n  const openDeleteDialog = (presupuesto) => {\r\n    setDeletingId(null);\r\n    setConfirmDialog({ open: true, presupuesto });\r\n  };\r\n  const handleSelectDelete = () => {\r\n    const presupuesto = menuState.presupuesto;\r\n    closeActionsMenu();\r\n    if (presupuesto) {\r\n      openDeleteDialog(presupuesto);\r\n    }\r\n  };\r\n  const closeDeleteDialog = React.useCallback(() => {\r\n    setConfirmDialog({ open: false, presupuesto: null });\r\n  }, []);\r\n  const performRestore = React.useCallback(\r\n    async (presupuesto, successMessage = \"Presupuesto restaurado.\") => {\r\n      if (!presupuesto) {\r\n        return;\r\n      }\r\n      try {\r\n        await http.post(\r\n          `${baseURL}/api/presupuestos/${presupuesto.id}/restore`,\r\n        );\r\n        await fetchPresupuestos(statusFilter, pageIndex);\r\n        if (hasActiveSearch && searchParamsRef.current) {\r\n          await fetchSearchPresupuestos(\r\n            searchParamsRef.current,\r\n            statusFilter,\r\n            searchPageIndex,\r\n          );\r\n        }\r\n        if (successMessage) {\r\n          setSnackbar({ open: true, message: successMessage, action: null });\r\n        }\r\n        setListError(\"\");\r\n      } catch (e) {\r\n        console.error(\"Error restaurando presupuesto:\", e);\r\n        setSnackbar({\r\n          open: true,\r\n          message: \"No se pudo restaurar el presupuesto.\",\r\n          action: null,\r\n        });\r\n      }\r\n    },\r\n    [\r\n      baseURL,\r\n      fetchPresupuestos,\r\n      fetchSearchPresupuestos,\r\n      hasActiveSearch,\r\n      pageIndex,\r\n      searchPageIndex,\r\n      statusFilter,\r\n    ],\r\n  );\r\n  const handleRestore = React.useCallback(\r\n    (presupuesto) => {\r\n      performRestore(presupuesto, \"Presupuesto restaurado.\");\r\n    },\r\n    [performRestore],\r\n  );\r\n  const handleUndoDelete = React.useCallback(async () => {\r\n    const presupuesto = lastDeletedRef.current;\r\n    if (!presupuesto) {\r\n      setSnackbar((prev) => ({ ...prev, open: false }));\r\n      return;\r\n    }\r\n    lastDeletedRef.current = null;\r\n    await performRestore(presupuesto, \"Presupuesto restaurado.\");\r\n  }, [performRestore]);\r\n  const handleConfirmDelete = async () => {\r\n    const presupuesto = confirmDialog.presupuesto;\r\n    if (!presupuesto) {\r\n      closeDeleteDialog();\r\n      return;\r\n    }\r\n    if (deletingId === presupuesto.id) {\r\n      return;\r\n    }\r\n    setDeletingId(presupuesto.id);\r\n    try {\r\n      await http.delete(`${baseURL}/api/presupuestos/${presupuesto.id}`);\r\n      lastDeletedRef.current = presupuesto;\r\n      await fetchPresupuestos(statusFilter, pageIndex);\r\n      if (hasActiveSearch && searchParamsRef.current) {\r\n        await fetchSearchPresupuestos(\r\n          searchParamsRef.current,\r\n          statusFilter,\r\n          searchPageIndex,\r\n        );\r\n      }\r\n      setSnackbar({\r\n        open: true,\r\n        message: \"Presupuesto eliminado.\",\r\n        action: (\r\n          <Button\r\n            color=\"secondary\"\r\n            size=\"small\"\r\n            onClick={() => handleUndoDelete()}\r\n          >\r\n            Deshacer\r\n          </Button>\r\n        ),\r\n      });\r\n      setListError(\"\");\r\n    } catch (e) {\r\n      console.error(\"Error eliminando presupuesto:\", e);\r\n      setSnackbar({\r\n        open: true,\r\n        message: \"No se pudo eliminar el presupuesto.\",\r\n        action: null,\r\n      });\r\n    } finally {\r\n      setDeletingId(null);\r\n      closeDeleteDialog();\r\n    }\r\n  };\r\n  const handleSnackbarClose = (_, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n    setSnackbar((prev) => ({ ...prev, open: false }));\r\n  };\r\n  const isDeletingCurrent = deletingId === confirmDialog.presupuesto?.id;\r\n  const monthOptions = React.useMemo(\r\n    () =>\r\n      monthLabels.map((label, index) => ({\r\n        value: String(index + 1),\r\n        label: label.charAt(0).toUpperCase() + label.slice(1),\r\n      })),\r\n    [],\r\n  );\r\n  const columnsCount = statusFilter === \"deleted\" ? 5 : 4;\r\n  const mainTotalPages = Number(presupuestosPage.totalPages) || 0;\r\n  const mainCurrentPage = mainTotalPages > 0 ? presupuestosPage.number + 1 : 1;\r\n  const searchTotalPages = searchPage ? Number(searchPage.totalPages) || 0 : 0;\r\n  const searchCurrentPage =\r\n    searchTotalPages > 0 && searchPage ? searchPage.number + 1 : 1;\r\n  const visiblePresupuestos = React.useMemo(() => {\r\n    const term = query.trim().toLowerCase();\r\n    const data = Array.isArray(presupuestosPage.content)\r\n      ? presupuestosPage.content\r\n      : [];\r\n    if (!term) return data;\r\n    return data.filter((p) => {\r\n      const nombre = (p?.nombre || \"\").toLowerCase();\r\n      const desde = (p?.desde || \"\").toLowerCase();\r\n      const hasta = (p?.hasta || \"\").toLowerCase();\r\n      const desdeMes = monthName(p?.desde || \"\").toLowerCase();\r\n      const hastaMes = monthName(p?.hasta || \"\").toLowerCase();\r\n      return (\r\n        nombre.includes(term) ||\r\n        desde.includes(term) ||\r\n        hasta.includes(term) ||\r\n        desdeMes.includes(term) ||\r\n        hastaMes.includes(term)\r\n      );\r\n    });\r\n  }, [presupuestosPage.content, query, monthName]);\r\n  const handleFilterChange = (field) => (event) => {\r\n    const value = event.target.value;\r\n    setFilters((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n  const handleSearch = () => {\r\n    setSearchError(\"\");\r\n    const params = new URLSearchParams();\r\n    const hasYear = Boolean(filters.year);\r\n    const hasFrom = Boolean(filters.fromMonth);\r\n    const hasTo = Boolean(filters.toMonth);\r\n    if (hasFrom || hasTo) {\r\n      if (!hasFrom || !hasTo) {\r\n        setSearchError(\"Debes seleccionar ambos meses para armar el rango.\");\r\n        return;\r\n      }\r\n      const baseYear = hasYear\r\n        ? Number(filters.year)\r\n        : new Date().getFullYear();\r\n      const fromMonth = Number(filters.fromMonth);\r\n      const toMonth = Number(filters.toMonth);\r\n      if (fromMonth > toMonth) {\r\n        setSearchError(\"El mes Desde no puede ser posterior al mes Hasta.\");\r\n        return;\r\n      }\r\n      const fromDate = `${baseYear}-${pad2(fromMonth)}-01`;\r\n      const toDateValue = `${baseYear}-${pad2(toMonth)}-${pad2(lastDayOfMonth(baseYear, toMonth))}`;\r\n      params.set(\"from\", fromDate);\r\n      params.set(\"to\", toDateValue);\r\n    } else if (hasYear) {\r\n      const fromDate = `${filters.year}-01-01`;\r\n      const toDateValue = `${filters.year}-12-31`;\r\n      params.set(\"year\", filters.year);\r\n    }\r\n    const queryString = params.toString();\r\n    if (!queryString) {\r\n      setHasActiveSearch(false);\r\n      setSearchPage(null);\r\n      setSearchPageIndex(0);\r\n      searchParamsRef.current = \"\";\r\n      return;\r\n    }\r\n    setHasActiveSearch(true);\r\n    setSearchPageIndex(0);\r\n    searchParamsRef.current = queryString;\r\n    fetchSearchPresupuestos(queryString, statusFilter, 0);\r\n  };\r\n  const handleReset = () => {\r\n    setFilters({ year: \"\", fromMonth: \"\", toMonth: \"\" });\r\n    setQuery(\"\");\r\n    setSearchError(\"\");\r\n    setHasActiveSearch(false);\r\n    setSearchPage(null);\r\n    setSearchPageIndex(0);\r\n    searchParamsRef.current = \"\";\r\n  };\r\n  const handlePageChange = (_, value) => {\r\n    const newPage = Number(value) - 1;\r\n    if (Number.isNaN(newPage) || newPage < 0) {\r\n      return;\r\n    }\r\n    setPageIndex(newPage);\r\n  };\r\n  const handleSearchPageChange = (_, value) => {\r\n    if (!hasActiveSearch || !searchParamsRef.current) {\r\n      return;\r\n    }\r\n    const newPage = Number(value) - 1;\r\n    if (Number.isNaN(newPage) || newPage < 0) {\r\n      return;\r\n    }\r\n    setSearchPageIndex(newPage);\r\n    fetchSearchPresupuestos(searchParamsRef.current, statusFilter, newPage);\r\n  };\r\n  const renderRows = (items) =>\r\n    items.map((p) => {\r\n      const slug = encodeURIComponent(\r\n        (p.nombre || \"\").trim().toLowerCase().replace(/\\s+/g, \"-\"),\r\n      );\r\n      const isDeleted = statusFilter === \"deleted\";\r\n      const isMenuOpenForRow =\r\n        Boolean(menuState.anchorEl) &&\r\n        menuState.presupuesto &&\r\n        menuState.presupuesto.id === p.id;\r\n      const menuId = isMenuOpenForRow ? \"presupuesto-actions-menu\" : undefined;\r\n      const buttonId = `acciones-presupuesto-${p.id}`;\r\n      const esAdmin = (usuarioRol || '').toUpperCase().includes('ADMIN');\r\n      return (\r\n        <TableRow key={p.id} sx={tableRowStyle}>\r\n          <TableCell sx={(theme) => ({ ...tableCellStyle(theme), ...getColumnWidth(statusFilter).nombre })}>\r\n            {p.nombre}\r\n          </TableCell>\r\n          <TableCell sx={(theme) => ({ ...tableCellStyle(theme), ...getColumnWidth(statusFilter).desde })}>\r\n            {monthName(p.desde)}\r\n          </TableCell>\r\n          <TableCell sx={(theme) => ({ ...tableCellStyle(theme), ...getColumnWidth(statusFilter).hasta })}>\r\n            {monthName(p.hasta)}\r\n          </TableCell>\r\n          {isDeleted && (\r\n            <TableCell sx={(theme) => ({ ...tableCellStyle(theme), ...getColumnWidth(statusFilter).eliminado })}>\r\n              {formatDeletedAt(p.deletedAt)}\r\n            </TableCell>\r\n          )}\r\n          <TableCell\r\n            sx={(theme) => ({ ...tableCellStyle(theme), ...getColumnWidth(statusFilter).acciones })}\r\n            align=\"right\"\r\n          >\r\n            {isDeleted ? (\r\n              <Button\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                startIcon={<RestoreFromTrashIcon />}\r\n                onClick={() => handleRestore(p)}\r\n              >\r\n                Restaurar\r\n              </Button>\r\n            ) : (\r\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\", gap: 1 }}>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  onClick={() => navigate(`/presupuestos/${slug}`)}\r\n                  sx={darkActionButtonSx}\r\n                >\r\n                  Ver detalle\r\n                </Button>\r\n                {esAdmin && (\r\n                  <Tooltip title=\"MÃ¡s acciones\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\"MÃ¡s acciones\"\r\n                      aria-controls={menuId}\r\n                      aria-haspopup=\"true\"\r\n                      aria-expanded={isMenuOpenForRow ? \"true\" : undefined}\r\n                      id={buttonId}\r\n                      onClick={(event) => openActionsMenu(event, p)}\r\n                    >\r\n                      <MoreVertIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )}\r\n              </Box>\r\n            )}\r\n          </TableCell>\r\n        </TableRow>\r\n      );\r\n    });\r\n\r\n  const firstMain = React.useMemo(\r\n    () => (Array.isArray(presupuestosPage?.content) && presupuestosPage.content.length ? presupuestosPage.content[0] : null),\r\n    [presupuestosPage?.content]\r\n  );\r\n\r\n  const firstSearchRow = React.useMemo(\r\n    () => (searchPage && Array.isArray(searchPage.content) && searchPage.content.length ? searchPage.content[0] : null),\r\n    [searchPage]\r\n  );\r\n\r\n  const headerGhostMain = {\r\n    nombre: firstMain?.nombre || 'Nombre de ejemplo',\r\n    desde: monthName(firstMain?.desde || '2025-01'),\r\n    hasta: monthName(firstMain?.hasta || '2025-12'),\r\n    eliminado: formatDeletedAt(firstMain?.deletedAt || '2025-10-14T20:21:43Z'),\r\n  };\r\n\r\n  const headerGhostSearch = {\r\n    nombre: firstSearchRow?.nombre || 'Nombre de ejemplo',\r\n    desde: monthName(firstSearchRow?.desde || '2025-01'),\r\n    hasta: monthName(firstSearchRow?.hasta || '2025-12'),\r\n    eliminado: formatDeletedAt(firstSearchRow?.deletedAt || '2025-10-14T20:21:43Z'),\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ width: \"100%\", p: 3 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Presupuestos\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" gutterBottom>\r\n        Visualiza tus presupuestos creados o genera uno nuevo\r\n      </Typography>\r\n      <Tabs value={statusFilter} onChange={handleStatusChange} sx={{ mt: 1 }}>\r\n        <Tab\r\n          value=\"active\"\r\n          label=\"Activos\"\r\n          sx={{\r\n            color: tabsLabelColor,\r\n            \"&.Mui-selected\": { color: tabsLabelColor },\r\n            \"& .MuiTab-wrapper\": { color: tabsLabelColor },\r\n          }}\r\n        />\r\n        <Tab\r\n          value=\"deleted\"\r\n          label=\"Borrados\"\r\n          sx={{\r\n            color: tabsLabelColor,\r\n            \"&.Mui-selected\": { color: tabsLabelColor },\r\n            \"& .MuiTab-wrapper\": { color: tabsLabelColor },\r\n          }}\r\n        />\r\n      </Tabs>\r\n      <Typography\r\n        variant=\"caption\"\r\n        sx={{ display: \"block\", mb: 2, color: 'text.primary' }}\r\n      >\r\n        {`Los presupuestos se purgan de forma definitiva a los ${retentionDays} dÃ­as.`}\r\n      </Typography>\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          flexWrap: \"wrap\",\r\n          gap: 2,\r\n          alignItems: \"center\",\r\n          mt: 2,\r\n          mb: 2,\r\n        }}\r\n      >\r\n        <FormControl size=\"small\" sx={{ minWidth: 120 }}>\r\n          <InputLabel id=\"presupuesto-year-label\">AÃ±o</InputLabel>\r\n          <Select\r\n            labelId=\"presupuesto-year-label\"\r\n            value={filters.year}\r\n            label=\"AÃ±o\"\r\n            onChange={handleFilterChange(\"year\")}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Todos</em>\r\n            </MenuItem>\r\n            {yearOptions.map((year) => (\r\n              <MenuItem key={year} value={String(year)}>\r\n                {year}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <FormControl size=\"small\" sx={{ minWidth: 150 }}>\r\n          <InputLabel id=\"presupuesto-from-label\">Desde (mes)</InputLabel>\r\n          <Select\r\n            labelId=\"presupuesto-from-label\"\r\n            value={filters.fromMonth}\r\n            label=\"Desde (mes)\"\r\n            onChange={handleFilterChange(\"fromMonth\")}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Sin filtro</em>\r\n            </MenuItem>\r\n            {monthOptions.map((option) => (\r\n              <MenuItem key={option.value} value={option.value}>\r\n                {option.label}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <FormControl size=\"small\" sx={{ minWidth: 150 }}>\r\n          <InputLabel id=\"presupuesto-to-label\">Hasta (mes)</InputLabel>\r\n          <Select\r\n            labelId=\"presupuesto-to-label\"\r\n            value={filters.toMonth}\r\n            label=\"Hasta (mes)\"\r\n            onChange={handleFilterChange(\"toMonth\")}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Sin filtro</em>\r\n            </MenuItem>\r\n            {monthOptions.map((option) => (\r\n              <MenuItem key={option.value} value={option.value}>\r\n                {option.label}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={handleSearch}\r\n          disabled={loadingSearch}\r\n        >\r\n          Buscar\r\n        </Button>\r\n        <Button variant=\"text\" onClick={handleReset} disabled={loadingSearch}>\r\n          Limpiar\r\n        </Button>\r\n      </Box>\r\n      <TextField\r\n        label=\"Buscar por nombre, mes o aÃ±o\"\r\n        variant=\"outlined\"\r\n        size=\"small\"\r\n        value={query}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n        sx={{\r\n          mt: 1,\r\n          mb: 2,\r\n          width: { xs: '100%', sm: 250 },\r\n        }}\r\n      />\r\n      {searchError && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {searchError}\r\n        </Alert>\r\n      )}\r\n      {hasActiveSearch && (\r\n        <>\r\n          <Box sx={{ mt: 4, mb: 2 }}>\r\n            <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 1 }}>\r\n              Resultado de la bÃºsqueda\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Paper\r\n            sx={(theme) => ({\r\n              width: \"100%\",\r\n              mb: 3,\r\n              overflowX: \"auto\",\r\n              p: 0,\r\n              bgcolor: alpha(\r\n                theme.palette.primary.main,\r\n                theme.palette.mode === \"dark\" ? 0.12 : 0.06,\r\n              ),\r\n              border: `1px solid ${(theme.vars || theme).palette.divider}`,\r\n            })}\r\n          >\r\n            {loadingSearch ? (\r\n              <LoadingSpinner message=\"Cargando presupuestos...\" />\r\n            ) : searchPage &&\r\n              Array.isArray(searchPage.content) &&\r\n              searchPage.content.length > 0 ? (\r\n              <>\r\n                <Table>\r\n                  <TableHead>\r\n                    <TableRow sx={tableRowStyle}>\r\n                      <TableCell\r\n                        sx={(theme) => ({\r\n                          ...headerCellStyle(theme),\r\n                          ...getColumnWidth(statusFilter).nombre,\r\n                        })}\r\n                        align=\"left\"\r\n                      >\r\n                        <HeaderLabelAligned label=\"Nombre\" ghost={headerGhostSearch.nombre} />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        sx={(theme) => ({\r\n                          ...headerCellStyle(theme),\r\n                          ...getColumnWidth(statusFilter).desde,\r\n                        })}\r\n                        align=\"left\"\r\n                      >\r\n                        <HeaderLabelAligned label=\"Desde\" ghost={headerGhostSearch.desde} />\r\n                      </TableCell>\r\n                      <TableCell\r\n                        sx={(theme) => ({\r\n                          ...headerCellStyle(theme),\r\n                          ...getColumnWidth(statusFilter).hasta,\r\n                        })}\r\n                        align=\"left\"\r\n                      >\r\n                        <HeaderLabelAligned label=\"Hasta\" ghost={headerGhostSearch.hasta} />\r\n                      </TableCell>\r\n                      {statusFilter === \"deleted\" && (\r\n                        <TableCell\r\n                          sx={(theme) => ({\r\n                            ...headerCellStyle(theme),\r\n                            ...getColumnWidth(statusFilter).eliminado,\r\n                          })}\r\n                          align=\"left\"\r\n                        >\r\n                          <HeaderLabelAligned label=\"Eliminados\" ghost={headerGhostSearch.eliminado} />\r\n                        </TableCell>\r\n                      )}\r\n                      <TableCell\r\n                        sx={(theme) => ({\r\n                          ...headerCellStyle(theme),\r\n                          ...getColumnWidth(statusFilter).acciones,\r\n                        })}\r\n                        align=\"right\"\r\n                      >\r\n                        {/* Wrapper que replica el ancho del bloque de acciones */}\r\n                        <Box sx={{ position: 'relative', display: 'inline-flex' }}>\r\n                          {/* Contenido âfantasmaâ para medir ancho del bloque real */}\r\n                          <Box\r\n                            aria-hidden\r\n                            sx={{\r\n                              visibility: 'hidden',\r\n                              pointerEvents: 'none',\r\n                              display: 'inline-flex',\r\n                              alignItems: 'center',\r\n                              gap: 1,\r\n                            }}\r\n                          >\r\n                            <Button variant=\"outlined\" size=\"small\" sx={darkActionButtonSx}>Ver detalle</Button>\r\n                            <IconButton size=\"small\"><MoreVertIcon fontSize=\"small\" /></IconButton>\r\n                          </Box>\r\n                          {/* Texto centrado exactamente sobre ese ancho */}\r\n                          <Box sx={{ position:'absolute', inset:0, display:'grid', placeItems:'center', whiteSpace:'nowrap', fontWeight: 600 }}>\r\n                            Acciones\r\n                          </Box>\r\n                        </Box>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>{renderRows(searchPage.content)}</TableBody>\r\n                </Table>\r\n                {searchTotalPages > 1 && (\r\n                  <Box mt={2} display=\"flex\" justifyContent=\"center\">\r\n                    <Pagination\r\n                      color=\"primary\"\r\n                      size=\"small\"\r\n                      count={searchTotalPages}\r\n                      page={searchCurrentPage}\r\n                      onChange={handleSearchPageChange}\r\n                      siblingCount={0}\r\n                      boundaryCount={1}\r\n                      aria-label=\"Paginacion de resultados de presupuestos\"\r\n                      getItemAriaLabel={(type, page) => {\r\n                        switch (type) {\r\n                          case \"page\":\r\n                            return `Ir a la pagina ${page} de resultados`;\r\n                          case \"previous\":\r\n                            return \"Pagina anterior de resultados\";\r\n                          case \"next\":\r\n                            return \"Pagina siguiente de resultados\";\r\n                          default:\r\n                            return `Ir a la pagina ${page} de resultados`;\r\n                        }\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                )}\r\n              </>\r\n            ) : (\r\n              !searchError && (\r\n                <Alert severity=\"info\">\r\n                  No encontramos presupuestos para el rango seleccionado.\r\n                </Alert>\r\n              )\r\n            )}\r\n          </Paper>\r\n        </>\r\n      )}\r\n      <Box sx={{ mt: 4, mb: 2 }}>\r\n        <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 1 }}>\r\n          Listado completo\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      {listError && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {listError}\r\n        </Alert>\r\n      )}\r\n      <Paper sx={{ width: \"100%\", overflowX: \"auto\" }}>\r\n        {loadingAll ? (\r\n          <LoadingSpinner message=\"Cargando presupuestos...\" />\r\n        ) : (\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow sx={tableRowStyle}>\r\n                <TableCell\r\n                  sx={(theme) => ({\r\n                    ...headerCellStyle(theme),\r\n                    ...getColumnWidth(statusFilter).nombre,\r\n                  })}\r\n                  align=\"left\"\r\n                >\r\n                  <HeaderLabelAligned label=\"Nombre\" ghost={headerGhostMain.nombre} />\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={(theme) => ({\r\n                    ...headerCellStyle(theme),\r\n                    ...getColumnWidth(statusFilter).desde,\r\n                  })}\r\n                  align=\"left\"\r\n                >\r\n                  <HeaderLabelAligned label=\"Desde\" ghost={headerGhostMain.desde} />\r\n                </TableCell>\r\n                <TableCell\r\n                  sx={(theme) => ({\r\n                    ...headerCellStyle(theme),\r\n                    ...getColumnWidth(statusFilter).hasta,\r\n                  })}\r\n                  align=\"left\"\r\n                >\r\n                  <HeaderLabelAligned label=\"Hasta\" ghost={headerGhostMain.hasta} />\r\n                </TableCell>\r\n                {statusFilter === \"deleted\" && (\r\n                  <TableCell\r\n                    sx={(theme) => ({\r\n                      ...headerCellStyle(theme),\r\n                      ...getColumnWidth(statusFilter).eliminado,\r\n                    })}\r\n                    align=\"left\"\r\n                  >\r\n                    <HeaderLabelAligned label=\"Eliminados\" ghost={headerGhostMain.eliminado} />\r\n                  </TableCell>\r\n                )}\r\n                <TableCell\r\n                  sx={(theme) => ({\r\n                    ...headerCellStyle(theme),\r\n                    ...getColumnWidth(statusFilter).acciones,\r\n                  })}\r\n                  align=\"right\"\r\n                >\r\n                  {/* Wrapper que replica el ancho del bloque de acciones */}\r\n                  <Box sx={{ position: 'relative', display: 'inline-flex' }}>\r\n                    {/* Contenido âfantasmaâ para medir ancho del bloque real */}\r\n                    <Box\r\n                      aria-hidden\r\n                      sx={{\r\n                        visibility: 'hidden',\r\n                        pointerEvents: 'none',\r\n                        display: 'inline-flex',\r\n                        alignItems: 'center',\r\n                        gap: 1,\r\n                      }}\r\n                    >\r\n                      <Button variant=\"outlined\" size=\"small\" sx={darkActionButtonSx}>Ver detalle</Button>\r\n                      <IconButton size=\"small\"><MoreVertIcon fontSize=\"small\" /></IconButton>\r\n                    </Box>\r\n                    {/* Texto centrado exactamente sobre ese ancho */}\r\n                    <Box sx={{ position:'absolute', inset:0, display:'grid', placeItems:'center', whiteSpace:'nowrap', fontWeight: 600 }}>\r\n                      Acciones\r\n                    </Box>\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {visiblePresupuestos.length > 0 && renderRows(visiblePresupuestos)}\r\n              {visiblePresupuestos.length === 0 && !listError && (\r\n                <TableRow>\r\n                  <TableCell\r\n                    colSpan={columnsCount}\r\n                    sx={(theme) => ({\r\n                      ...tableCellStyle(theme),\r\n                      textAlign: \"center\",\r\n                      py: 3,\r\n                    })}\r\n                  >\r\n                    No hay presupuestos para mostrar.\r\n                  </TableCell>\r\n                </TableRow>\r\n              )}\r\n              {listError && (\r\n                <TableRow>\r\n                  <TableCell\r\n                    colSpan={columnsCount}\r\n                    sx={(theme) => ({\r\n                      ...tableCellStyle(theme),\r\n                      textAlign: \"center\",\r\n                      py: 3,\r\n                    })}\r\n                  >\r\n                    <Alert severity=\"error\">{listError}</Alert>\r\n                  </TableCell>\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        )}\r\n      </Paper>\r\n      {mainTotalPages > 1 && (\r\n        <Box mt={2} display=\"flex\" justifyContent=\"center\">\r\n          <Pagination\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            count={mainTotalPages}\r\n            page={mainCurrentPage}\r\n            onChange={handlePageChange}\r\n            siblingCount={0}\r\n            boundaryCount={1}\r\n            aria-label=\"Paginacion de presupuestos\"\r\n            getItemAriaLabel={(type, page) => {\r\n              switch (type) {\r\n                case \"page\":\r\n                  return `Ir a la pagina ${page} de presupuestos`;\r\n                case \"previous\":\r\n                  return \"Pagina anterior de presupuestos\";\r\n                case \"next\":\r\n                  return \"Pagina siguiente de presupuestos\";\r\n                default:\r\n                  return `Ir a la pagina ${page} de presupuestos`;\r\n              }\r\n            }}\r\n          />\r\n        </Box>\r\n      )}\r\n      <Box mt={3}>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() => navigate(\"/presupuestos/nuevo\")}\r\n        >\r\n          Crear nuevo presupuesto\r\n        </Button>\r\n      </Box>\r\n      <Menu\r\n        id=\"presupuesto-actions-menu\"\r\n        anchorEl={menuState.anchorEl}\r\n        open={Boolean(menuState.anchorEl)}\r\n        onClose={closeActionsMenu}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        keepMounted\r\n        MenuListProps={{\r\n          \"aria-labelledby\": menuState.presupuesto\r\n            ? `acciones-presupuesto-${menuState.presupuesto.id}`\r\n            : undefined,\r\n        }}\r\n      >\r\n        <MenuItem\r\n          onClick={handleSelectDelete}\r\n          disabled={!menuState.presupuesto}\r\n        >\r\n          <DeleteOutlineIcon fontSize=\"small\" sx={{ mr: 1 }} /> Eliminar\r\n        </MenuItem>\r\n      </Menu>\r\n      <Dialog\r\n        open={confirmDialog.open}\r\n        onClose={() => {\r\n          if (deletingId) {\r\n            return;\r\n          }\r\n          closeDeleteDialog();\r\n        }}\r\n        disableEscapeKeyDown={Boolean(deletingId)}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>Eliminar presupuesto</DialogTitle>\r\n        <DialogContent dividers>\r\n          <Typography variant=\"body2\">\r\n            {`Vas a eliminar el presupuesto \"${confirmDialog.presupuesto?.nombre || \"\"}\". PodrÃ¡s restaurarlo desde la Papelera durante ${retentionDays} dÃ­as.`}\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={closeDeleteDialog} disabled={isDeletingCurrent}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"error\"\r\n            variant=\"contained\"\r\n            onClick={handleConfirmDelete}\r\n            disabled={isDeletingCurrent}\r\n            startIcon={\r\n              isDeletingCurrent ? (\r\n                <CircularProgress size={16} color=\"inherit\" />\r\n              ) : null\r\n            }\r\n          >\r\n            {isDeletingCurrent ? \"Eliminando...\" : \"Eliminar\"}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={handleSnackbarClose}\r\n        message={snackbar.message}\r\n        action={snackbar.action}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport MainGrid from './components/MainGrid';\r\n\r\nexport default function Presupuesto(props) {\r\n  return (\r\n    <>\r\n        <MainGrid />\r\n    </>\r\n  );\r\n}","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z\"\n}), 'DeleteOutline');"],"names":["createSvgIcon","_jsx","d","http","axios","create","PRONOSTICO_BASE_URL","URL_CONFIG","PRONOSTICO","cognitoPoolConfig","UserPoolId","process","ClientId","refreshPromise","hasForcedLogout","isPronosticoRequest","url","Boolean","String","startsWith","safeSessionGet","key","sessionStorage","getItem","err","console","warn","safeSessionSet","value","undefined","setItem","clearSessionAndRedirect","clear","_unused","sessionService","limpiarSesion","window","location","href","refreshTokens","refreshTokenValue","cognitoUser","buildCognitoUser","username","pool","CognitoUserPool","CognitoUser","Username","Pool","Promise","reject","Error","refreshToken","CognitoRefreshToken","RefreshToken","resolve","refreshSession","session","nextAccessToken","getAccessToken","getJwtToken","nextIdToken","getIdToken","nextRefreshToken","getRefreshToken","getToken","interceptors","request","use","config","accessToken","_config$headers","headers","Authorization","concat","usuarioSub","response","async","error","status","__isRetryRequest","_config$headers2","newAccessToken","then","token","catch","refreshError","tableRowStyle","backgroundColor","tableCellStyle","theme","border","vars","palette","divider","headerCellStyle","_objectSpread","fontWeight","getColumnWidth","statusFilter","nombre","width","desde","hasta","eliminado","acciones","monthLabels","pad2","padStart","lastDayOfMonth","year","month","Date","getDate","parseRetentionDays","parsed","Number","REACT_APP_PRESUPUESTO_RETENTION_DAYS","isNaN","formatDeletedAt","date","valueOf","toLocaleString","hour12","PAGE_SIZE","DEFAULT_SORT","createEmptyPage","content","totalElements","totalPages","number","size","HeaderLabelAligned","_ref","label","ghost","_jsxs","Box","sx","position","display","children","visibility","pointerEvents","whiteSpace","inset","placeItems","MainGrid","_theme$vars$palette","_theme$vars","_paletteVars$text$pri","_paletteVars$text","_paletteVars$common$w","_paletteVars$common","_confirmDialog$presup","_confirmDialog$presup2","useTheme","isLightMode","mode","paletteVars","tabsLabelColor","text","primary","common","white","darkActionButtonSx","color","navigate","useNavigate","baseURL","API_CONFIG","retentionDays","React","setStatusFilter","pageIndex","setPageIndex","presupuestosPage","setPresupuestosPage","hasActiveSearch","setHasActiveSearch","searchPage","setSearchPage","searchPageIndex","setSearchPageIndex","query","setQuery","filters","setFilters","fromMonth","toMonth","searchError","setSearchError","listError","setListError","loadingSearch","setLoadingSearch","loadingAll","setLoadingAll","confirmDialog","setConfirmDialog","open","presupuesto","snackbar","setSnackbar","message","action","deletingId","setDeletingId","menuState","setMenuState","anchorEl","yearOptions","setYearOptions","current","getFullYear","searchParamsRef","lastDeletedRef","usuarioRol","setUsuarioRol","monthName","ym","anio","mes","split","idx","length","cargarRolUsuario","sub","fetch","ADMINISTRACION","res","ok","json","data","rol","mergeYearOptions","items","Array","isArray","prev","next","Set","forEach","item","_item$desde","_item$hasta","desdeYear","hastaYear","add","from","sort","a","b","normalizePage","totalElementsRaw","totalPagesRaw","numberRaw","sizeRaw","isFinite","fetchPresupuestos","statusValue","pageValue","shouldExpand","trim","effectivePage","Math","max","effectiveSize","params","URLSearchParams","set","get","toString","pageData","e","fetchSearchPresupuestos","searchParamsString","closeActionsMenu","closeDeleteDialog","performRestore","successMessage","arguments","post","id","handleRestore","handleUndoDelete","isDeletingCurrent","monthOptions","map","index","charAt","toUpperCase","slice","columnsCount","mainTotalPages","mainCurrentPage","searchTotalPages","searchCurrentPage","visiblePresupuestos","term","toLowerCase","filter","p","desdeMes","hastaMes","includes","handleFilterChange","field","event","target","renderRows","slug","encodeURIComponent","replace","isDeleted","isMenuOpenForRow","menuId","buttonId","esAdmin","TableRow","TableCell","deletedAt","align","Button","variant","startIcon","RestoreFromTrashIcon","onClick","justifyContent","gap","Tooltip","title","IconButton","openActionsMenu","currentTarget","MoreVertIcon","fontSize","firstMain","firstSearchRow","headerGhostMain","headerGhostSearch","Typography","gutterBottom","Tabs","onChange","handleStatusChange","newValue","mt","Tab","mb","flexWrap","alignItems","FormControl","minWidth","InputLabel","Select","labelId","MenuItem","option","handleSearch","hasYear","hasFrom","hasTo","baseYear","fromDate","toDateValue","queryString","disabled","handleReset","TextField","xs","sm","Alert","severity","_Fragment","Divider","Paper","overflowX","bgcolor","alpha","main","LoadingSpinner","Table","TableHead","TableBody","Pagination","count","page","handleSearchPageChange","_","newPage","siblingCount","boundaryCount","getItemAriaLabel","type","colSpan","textAlign","py","handlePageChange","Menu","onClose","anchorOrigin","vertical","horizontal","transformOrigin","keepMounted","MenuListProps","handleSelectDelete","openDeleteDialog","DeleteOutlineIcon","mr","Dialog","disableEscapeKeyDown","maxWidth","fullWidth","DialogTitle","DialogContent","dividers","DialogActions","delete","CircularProgress","Snackbar","autoHideDuration","handleSnackbarClose","reason","Presupuesto","props"],"sourceRoot":""}