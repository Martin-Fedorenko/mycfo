{"version":3,"file":"static/js/3771.b834df63.chunk.js","mappings":"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","sources":["utils/formatters.js","api/http.js","dashboard/useResolvedColorTokens.js","dashboard/components/QuickActions.js","dashboard/components/KpiCard.js","dashboard/components/BudgetWidget.js","dashboard/components/LiquidityGapWidget.js","dashboard/components/RecentMovementsWidget.js","dashboard/components/RecentInvoicesWidget.js","dashboard/components/ReconciliationWidget.js","dashboard/components/SalesTrendWidget.js","dashboard/components/SalesByCategoryWidget.js","dashboard/components/InsightsWidget.js","dashboard/services/movementsService.js","dashboard/services/kpisService.js","dashboard/services/analyticsService.js","dashboard/Dashboard.js"],"sourcesContent":["const currencyFormatterAR = new Intl.NumberFormat('es-AR', {\r\n  style: 'currency',\r\n  currency: 'ARS',\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\n/**\r\n * Devuelve una cadena formateada en pesos argentinos.\r\n * Se asegura de manejar valores nulos, indefinidos o no numricos.\r\n */\r\nexport const formatCurrencyAR = (value, { fallback = '$0' } = {}) => {\r\n  if (value === null || value === undefined) {\r\n    return fallback;\r\n  }\r\n\r\n  const numericValue = Number(value);\r\n  if (Number.isNaN(numericValue)) {\r\n    return fallback;\r\n  }\r\n\r\n  return currencyFormatterAR.format(numericValue);\r\n};\r\n\r\nexport const formatPercentage = (value, { fractionDigits = 0, fallback = '0%' } = {}) => {\r\n  if (value === null || value === undefined) {\r\n    return fallback;\r\n  }\r\n\r\n  const numericValue = Number(value);\r\n  if (Number.isNaN(numericValue)) {\r\n    return fallback;\r\n  }\r\n\r\n  return `${numericValue.toFixed(fractionDigits)}%`;\r\n};\r\n","import axios from \"axios\";\r\nimport {\r\n  CognitoUserPool,\r\n  CognitoUser,\r\n  CognitoRefreshToken,\r\n} from \"amazon-cognito-identity-js\";\r\nimport { sessionService } from \"../shared-services/sessionService\";\r\nimport URL_CONFIG from \"../config/api-config\";\r\n\r\nconst http = axios.create();\r\nconst PRONOSTICO_BASE_URL = URL_CONFIG.PRONOSTICO;\r\nconst cognitoPoolConfig = {\r\n  UserPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\r\n  ClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\r\n};\r\n\r\nlet refreshPromise = null;\r\nlet hasForcedLogout = false;\r\n\r\nconst isPronosticoRequest = (url) =>\r\n  Boolean(\r\n    url &&\r\n      PRONOSTICO_BASE_URL &&\r\n      String(url).startsWith(String(PRONOSTICO_BASE_URL)),\r\n  );\r\n\r\nconst safeSessionGet = (key) => {\r\n  try {\r\n    return sessionStorage.getItem(key);\r\n  } catch (err) {\r\n    console.warn(\"No se pudo leer sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst safeSessionSet = (key, value) => {\r\n  try {\r\n    if (value !== undefined && value !== null) {\r\n      sessionStorage.setItem(key, value);\r\n    }\r\n  } catch (err) {\r\n    console.warn(\"No se pudo escribir en sessionStorage:\", err);\r\n  }\r\n};\r\n\r\nconst clearSessionAndRedirect = () => {\r\n  if (hasForcedLogout) {\r\n    return;\r\n  }\r\n  hasForcedLogout = true;\r\n  try {\r\n    sessionStorage.clear();\r\n  } catch {\r\n    /* noop */\r\n  }\r\n  if (sessionService?.limpiarSesion) {\r\n    sessionService.limpiarSesion();\r\n  }\r\n  if (typeof window !== \"undefined\") {\r\n    window.location.href = \"/#/signin\";\r\n  }\r\n};\r\n\r\nconst buildCognitoUser = () => {\r\n  const username = safeSessionGet(\"email\") || safeSessionGet(\"username\");\r\n  if (\r\n    !username ||\r\n    !cognitoPoolConfig.UserPoolId ||\r\n    !cognitoPoolConfig.ClientId\r\n  ) {\r\n    return null;\r\n  }\r\n  const pool = new CognitoUserPool(cognitoPoolConfig);\r\n  return new CognitoUser({\r\n    Username: username,\r\n    Pool: pool,\r\n  });\r\n};\r\n\r\nconst refreshTokens = () => {\r\n  const refreshTokenValue = safeSessionGet(\"refreshToken\");\r\n  const cognitoUser = buildCognitoUser();\r\n  if (!refreshTokenValue || !cognitoUser) {\r\n    return Promise.reject(new Error(\"No hay datos para renovar la sesin.\"));\r\n  }\r\n  const refreshToken = new CognitoRefreshToken({\r\n    RefreshToken: refreshTokenValue,\r\n  });\r\n  return new Promise((resolve, reject) => {\r\n    cognitoUser.refreshSession(refreshToken, (err, session) => {\r\n      if (err) {\r\n        reject(err);\r\n        return;\r\n      }\r\n      const nextAccessToken = session.getAccessToken().getJwtToken();\r\n      const nextIdToken = session.getIdToken().getJwtToken();\r\n      const nextRefreshToken = session.getRefreshToken().getToken();\r\n      safeSessionSet(\"accessToken\", nextAccessToken);\r\n      safeSessionSet(\"idToken\", nextIdToken);\r\n      if (nextRefreshToken) {\r\n        safeSessionSet(\"refreshToken\", nextRefreshToken);\r\n      }\r\n      resolve(nextAccessToken);\r\n    });\r\n  });\r\n};\r\n\r\nconst getRefreshPromise = () => {\r\n  if (!refreshPromise) {\r\n    refreshPromise = refreshTokens()\r\n      .then((token) => {\r\n        refreshPromise = null;\r\n        return token;\r\n      })\r\n      .catch((error) => {\r\n        refreshPromise = null;\r\n        throw error;\r\n      });\r\n  }\r\n  return refreshPromise;\r\n};\r\n\r\nhttp.interceptors.request.use((config) => {\r\n  const accessToken = sessionStorage.getItem(\"accessToken\");\r\n  if (isPronosticoRequest(config.url)) {\r\n    config.headers = config.headers ?? {};\r\n    if (accessToken) {\r\n      config.headers.Authorization = `Bearer ${accessToken}`;\r\n    }\r\n    const usuarioSub = sessionStorage.getItem(\"sub\");\r\n    if (usuarioSub) {\r\n      config.headers[\"X-Usuario-Sub\"] = usuarioSub;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nhttp.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const { config, response } = error;\r\n    if (\r\n      !config ||\r\n      !response ||\r\n      response.status !== 401 ||\r\n      !isPronosticoRequest(config.url)\r\n    ) {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (config.__isRetryRequest) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    try {\r\n      const newAccessToken = await getRefreshPromise();\r\n      if (!newAccessToken) {\r\n        throw new Error(\"No se obtuvo un token renovado.\");\r\n      }\r\n      config.__isRetryRequest = true;\r\n      config.headers = config.headers ?? {};\r\n      config.headers.Authorization = `Bearer ${newAccessToken}`;\r\n      return http(config);\r\n    } catch (refreshError) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(refreshError);\r\n    }\r\n  },\r\n);\r\n\r\nexport default http;\r\n","import { useTheme, useColorScheme } from \"@mui/material/styles\";\r\n\r\n/**\r\n * Resolves the actual color mode (light/dark/system) and exposes handy text colors.\r\n */\r\nexport default function useResolvedColorTokens() {\r\n  const theme = useTheme();\r\n  const { mode, systemMode } = useColorScheme();\r\n  const resolvedMode =\r\n    (mode === \"system\" ? systemMode : mode) || theme.palette.mode || \"light\";\r\n  const paletteVars = theme.vars?.palette ?? theme.palette ?? {};\r\n\r\n  const primaryTextColor =\r\n    resolvedMode === \"dark\"\r\n      ? paletteVars.common?.white ??\r\n        paletteVars.text?.primary ??\r\n        \"rgba(255, 255, 255, 0.9)\"\r\n      : paletteVars.common?.black ??\r\n        paletteVars.text?.primary ??\r\n        \"rgba(0, 0, 0, 0.88)\";\r\n\r\n  const secondaryTextColor =\r\n    paletteVars.text?.secondary ??\r\n    (resolvedMode === \"dark\"\r\n      ? \"rgba(255, 255, 255, 0.7)\"\r\n      : \"rgba(0, 0, 0, 0.6)\");\r\n\r\n  return { resolvedMode, paletteVars, primaryTextColor, secondaryTextColor };\r\n}\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Box from \"@mui/material/Box\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst QuickActions = ({ actions = [], loading = false, onAction }) => {\r\n  const { resolvedMode, primaryTextColor } = useResolvedColorTokens();\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ width: \"100%\" }}>\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}>\r\n          <Skeleton variant=\"text\" width={160} />\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            {Array.from({ length: 4 }).map((_, index) => (\r\n              <Skeleton\r\n                // eslint-disable-next-line react/no-array-index-key\r\n                key={index}\r\n                variant=\"rounded\"\r\n                width={120}\r\n                height={40}\r\n              />\r\n            ))}\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        width: \"100%\",\r\n        backdropFilter: \"blur(6px)\",\r\n        borderRadius: 2,\r\n        mx: \"auto\",\r\n      }}\r\n    >\r\n      <CardContent\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: 1,\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            display: \"flex\",\r\n            flexWrap: { xs: \"nowrap\", md: \"wrap\" },\r\n            overflowX: { xs: \"auto\", md: \"visible\" },\r\n            gap: 1,\r\n            pb: { xs: 0.5, md: 0 },\r\n            justifyContent: { xs: \"flex-start\", md: \"center\" },\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n            \"&::-webkit-scrollbar\": {\r\n              display: \"none\",\r\n            },\r\n          }}\r\n        >\r\n          {actions.map((action) => (\r\n            <Button\r\n              key={action.id}\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              startIcon={action.icon}\r\n              onClick={() => onAction?.(action)}\r\n              sx={{\r\n                flexShrink: 0,\r\n                borderRadius: 2,\r\n                px: 2,\r\n                py: 1,\r\n                textTransform: \"none\",\r\n                minWidth: { xs: 140, md: 150 },\r\n                fontWeight: 600,\r\n                ...(isDarkMode && { color: \"#42897f\" }),\r\n              }}\r\n            >\r\n              {action.label}\r\n            </Button>\r\n          ))}\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default QuickActions;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Box from \"@mui/material/Box\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst defaultFormatter = (value) => value;\r\n\r\nconst KpiCard = ({\r\n  title,\r\n  value,\r\n  formatter = defaultFormatter,\r\n  secondaryLabel,\r\n  secondaryValue,\r\n  secondaryFormatter = defaultFormatter,\r\n  trend = [],\r\n  trendColor = \"primary.main\",\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n}) => {\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardContent>\r\n          <Skeleton variant=\"text\" width=\"60%\" height={24} />\r\n          <Skeleton variant=\"text\" width=\"70%\" height={36} />\r\n          <Skeleton variant=\"rectangular\" width=\"100%\" height={40} sx={{ mt: 2 }} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (value === null || typeof value === \"undefined\") {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n            Sin datos disponibles para este indicador.\r\n          </Typography>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Actualizar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n      <CardContent sx={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", gap: 2, px: 2.5, py: 2 }}>\r\n        <Typography\r\n          variant=\"subtitle2\"\r\n          sx={{ flexShrink: 0, whiteSpace: \"nowrap\", color: primaryTextColor }}\r\n        >\r\n          {title}\r\n        </Typography>\r\n        <Box sx={{ textAlign: \"right\", flexGrow: 1 }}>\r\n          <Typography variant=\"h5\" fontWeight={600} sx={{ color: primaryTextColor }}>\r\n            {formatter(value)}\r\n          </Typography>\r\n          {secondaryLabel ? (\r\n            <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n              {secondaryLabel}:{\" \"}\r\n              <Box component=\"span\" fontWeight={500}>\r\n                {secondaryFormatter(secondaryValue)}\r\n              </Box>\r\n            </Typography>\r\n          ) : null}\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default KpiCard;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport LinearProgress from \"@mui/material/LinearProgress\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Divider from \"@mui/material/Divider\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport http from \"../../api/http\";\r\nimport { formatCurrencyAR, formatPercentage } from \"../../utils/formatters\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\nimport API_CONFIG from \"../../config/api-config\";\r\n\r\nconst getStatusColor = (ratio) => {\r\n  if (ratio <= 0.9) {\r\n    return { color: \"success\", label: \"En verde\" };\r\n  }\r\n  if (ratio <= 1.1) {\r\n    return { color: \"warning\", label: \"Cerca del objetivo\" };\r\n  }\r\n  return { color: \"error\", label: \"Sobre el plan\" };\r\n};\r\n\r\nconst monthLabels = [\r\n  \"enero\",\r\n  \"febrero\",\r\n  \"marzo\",\r\n  \"abril\",\r\n  \"mayo\",\r\n  \"junio\",\r\n  \"julio\",\r\n  \"agosto\",\r\n  \"septiembre\",\r\n  \"octubre\",\r\n  \"noviembre\",\r\n  \"diciembre\",\r\n];\r\n\r\nconst formatMonthLabel = (value) => {\r\n  if (!value) return \"\";\r\n  const parts = String(value).split(\"-\");\r\n  if (parts.length < 2) {\r\n    return value;\r\n  }\r\n  const year = Number(parts[0]);\r\n  const monthIndex = Number(parts[1]) - 1;\r\n  if (\r\n    !Number.isFinite(year) ||\r\n    !Number.isFinite(monthIndex) ||\r\n    monthIndex < 0 ||\r\n    monthIndex >= monthLabels.length\r\n  ) {\r\n    return value;\r\n  }\r\n  return `${monthLabels[monthIndex]} ${year}`;\r\n};\r\n\r\nconst formatDateRange = (from, to) => {\r\n  const startLabel = formatMonthLabel(from);\r\n  const endLabel = formatMonthLabel(to);\r\n  if (startLabel && endLabel) {\r\n    return startLabel === endLabel ? startLabel : `${startLabel} - ${endLabel}`;\r\n  }\r\n  return startLabel || endLabel || \"\";\r\n};\r\n\r\nconst toSlug = (name) =>\r\n  encodeURIComponent(\r\n    String(name ?? \"\")\r\n      .trim()\r\n      .toLowerCase()\r\n      .replace(/\\s+/g, \"-\"),\r\n  );\r\n\r\nconst parseYearMonthStart = (value) => {\r\n  if (!value) return null;\r\n  const parts = String(value).split(\"-\");\r\n  if (parts.length < 2) {\r\n    return null;\r\n  }\r\n  const year = Number(parts[0]);\r\n  const monthIndex = Number(parts[1]) - 1;\r\n  if (!Number.isFinite(year) || !Number.isFinite(monthIndex)) {\r\n    return null;\r\n  }\r\n  return new Date(year, monthIndex, 1);\r\n};\r\n\r\nconst parseYearMonthEnd = (value) => {\r\n  const start = parseYearMonthStart(value);\r\n  if (!start) return null;\r\n  return new Date(start.getFullYear(), start.getMonth() + 1, 0, 23, 59, 59, 999);\r\n};\r\n\r\nconst isBudgetActiveOnDate = (budget, reference) => {\r\n  if (!budget) return false;\r\n  const from = parseYearMonthStart(budget.desde);\r\n  const to = parseYearMonthEnd(budget.hasta);\r\n  if (!from || !to) {\r\n    return false;\r\n  }\r\n  return from <= reference && reference <= to;\r\n};\r\n\r\nconst valueToNumber = (value) => {\r\n  if (value === null || value === undefined) {\r\n    return 0;\r\n  }\r\n  if (typeof value === \"number\") {\r\n    return value;\r\n  }\r\n  if (typeof value === \"string\") {\r\n    const parsed = Number(value);\r\n    return Number.isNaN(parsed) ? 0 : parsed;\r\n  }\r\n  if (typeof value === \"object\" && value !== null && \"value\" in value) {\r\n    const nested = Number(value.value);\r\n    return Number.isNaN(nested) ? 0 : nested;\r\n  }\r\n  return 0;\r\n};\r\n\r\nconst aggregateTotals = (items) =>\r\n  items.reduce(\r\n    (acc, item) => ({\r\n      ingresoEstimado: acc.ingresoEstimado + valueToNumber(item.ingresoEstimado),\r\n      ingresoReal: acc.ingresoReal + valueToNumber(item.ingresoReal),\r\n      egresoEstimado: acc.egresoEstimado + valueToNumber(item.egresoEstimado),\r\n      egresoReal: acc.egresoReal + valueToNumber(item.egresoReal),\r\n      saldoEstimado: acc.saldoEstimado + valueToNumber(item.saldoEstimado),\r\n      saldoReal: acc.saldoReal + valueToNumber(item.saldoReal),\r\n    }),\r\n    {\r\n      ingresoEstimado: 0,\r\n      ingresoReal: 0,\r\n      egresoEstimado: 0,\r\n      egresoReal: 0,\r\n      saldoEstimado: 0,\r\n      saldoReal: 0,\r\n    },\r\n  );\r\n\r\nconst buildCategories = (totals) => {\r\n  if (!totals) {\r\n    return [];\r\n  }\r\n  const categories = [\r\n    {\r\n      name: \"Ingresos\",\r\n      planned: totals.ingresoEstimado,\r\n      actual: totals.ingresoReal,\r\n    },\r\n    {\r\n      name: \"Egresos\",\r\n      planned: totals.egresoEstimado,\r\n      actual: totals.egresoReal,\r\n    },\r\n  ];\r\n  if (\r\n    Math.abs(totals.saldoEstimado) > 0 ||\r\n    Math.abs(totals.saldoReal) > 0\r\n  ) {\r\n    categories.push({\r\n      name: \"Resultado\",\r\n      planned: totals.saldoEstimado,\r\n      actual: totals.saldoReal,\r\n    });\r\n  }\r\n  return categories;\r\n};\r\n\r\nconst extractBudgetList = (payload) => {\r\n  if (Array.isArray(payload)) {\r\n    return payload;\r\n  }\r\n  if (payload && Array.isArray(payload.content)) {\r\n    return payload.content;\r\n  }\r\n  return [];\r\n};\r\n\r\nconst normalizeError = (err) => {\r\n  if (!err) return null;\r\n  if (typeof err === \"string\") {\r\n    return err;\r\n  }\r\n  if (err?.response?.data?.error) {\r\n    return String(err.response.data.error);\r\n  }\r\n  if (err?.message) {\r\n    return err.message;\r\n  }\r\n  return \"No pudimos cargar el presupuesto actual.\";\r\n};\r\n\r\nconst transformMockBudget = (mock) => {\r\n  if (!mock) {\r\n    return null;\r\n  }\r\n  const slug = mock.slug\r\n    ? encodeURIComponent(String(mock.slug))\r\n    : toSlug(mock.name || mock.nombre || \"\");\r\n  return {\r\n    id: mock.id ?? null,\r\n    nombre: mock.name || mock.nombre || \"Presupuesto\",\r\n    slug,\r\n    desde: mock.desde ?? null,\r\n    hasta: mock.hasta ?? null,\r\n    rangeLabel:\r\n      mock.period?.label ||\r\n      formatDateRange(mock.desde ?? null, mock.hasta ?? null),\r\n    categories: Array.isArray(mock.categories) ? mock.categories : [],\r\n    totals: null,\r\n  };\r\n};\r\n\r\nconst periodToDate = (value) => {\r\n  if (!value) return null;\r\n  const parts = String(value).split(\"-\");\r\n  if (parts.length < 2) {\r\n    return null;\r\n  }\r\n  const year = Number(parts[0]);\r\n  const monthIndex = Number(parts[1]) - 1;\r\n  if (!Number.isFinite(year) || !Number.isFinite(monthIndex)) {\r\n    return null;\r\n  }\r\n  return new Date(year, monthIndex, 15);\r\n};\r\n\r\nconst BudgetWidget = ({\r\n  companyId,\r\n  period,\r\n  data,\r\n  loading: externalLoading = false,\r\n  error: externalError = null,\r\n  onRetry,\r\n}) => {\r\n  const navigate = useNavigate();\r\n  const { resolvedMode, primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n  const [budget, setBudget] = React.useState(null);\r\n  const useMocks = process.env.REACT_APP_USE_MOCKS === \"true\";\r\n  const baseURL = API_CONFIG.PRONOSTICO;\r\n  const referenceDate = React.useMemo(\r\n    () => periodToDate(period) ?? new Date(),\r\n    [period],\r\n  );\r\n\r\n  const loadBudgetData = React.useCallback(async () => {\r\n    if (useMocks) {\r\n      if (externalLoading && !data) {\r\n        setLoading(true);\r\n        setError(null);\r\n        setBudget(null);\r\n        return;\r\n      }\r\n      setBudget(transformMockBudget(data));\r\n      setError(externalError ? normalizeError(externalError) : null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const params = new URLSearchParams();\r\n      params.set(\"status\", \"active\");\r\n      params.set(\"page\", \"0\");\r\n      params.set(\"size\", \"100\");\r\n      params.set(\"sort\", \"createdAt,desc\");\r\n      const response = await http.get(\r\n        `${baseURL}/api/presupuestos?${params.toString()}`,\r\n      );\r\n      const list = extractBudgetList(response?.data);\r\n      const vigente = list.find((item) =>\r\n        isBudgetActiveOnDate(item, referenceDate),\r\n      );\r\n      if (!vigente) {\r\n        setBudget(null);\r\n        return;\r\n      }\r\n      const totalsResponse = await http.get(\r\n        `${baseURL}/api/presupuestos/${vigente.id}/totales`,\r\n      );\r\n      const totales = Array.isArray(totalsResponse?.data)\r\n        ? totalsResponse.data\r\n        : [];\r\n      const aggregated = aggregateTotals(totales);\r\n      setBudget({\r\n        id: vigente.id,\r\n        nombre: vigente.nombre,\r\n        slug: toSlug(vigente.nombre),\r\n        desde: vigente.desde,\r\n        hasta: vigente.hasta,\r\n        rangeLabel: formatDateRange(vigente.desde, vigente.hasta),\r\n        categories: buildCategories(aggregated),\r\n        totals: aggregated,\r\n      });\r\n    } catch (err) {\r\n      setError(normalizeError(err));\r\n      setBudget(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [\r\n    useMocks,\r\n    externalLoading,\r\n    data,\r\n    externalError,\r\n    baseURL,\r\n    referenceDate,\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    loadBudgetData();\r\n  }, [loadBudgetData]);\r\n\r\n  const handleRetry = React.useCallback(() => {\r\n    if (useMocks && typeof onRetry === \"function\") {\r\n      onRetry();\r\n      return;\r\n    }\r\n    loadBudgetData();\r\n  }, [useMocks, onRetry, loadBudgetData]);\r\n\r\n  const goToList = React.useCallback(() => {\r\n    navigate(\"/presupuestos\");\r\n  }, [navigate]);\r\n\r\n  const goToNew = React.useCallback(() => {\r\n    navigate(\"/presupuestos/nuevo\");\r\n  }, [navigate]);\r\n\r\n  const goToDetail = React.useCallback(() => {\r\n    if (!budget?.slug) {\r\n      return;\r\n    }\r\n    navigate(`/presupuestos/${budget.slug}`);\r\n  }, [navigate, budget]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Presupuesto actual\"\r\n          subheader=\"Cargando datos...\"\r\n          titleTypographyProps={{\r\n            variant: \"h6\",\r\n            sx: { color: primaryTextColor },\r\n          }}\r\n          subheaderTypographyProps={{\r\n            variant: \"body2\",\r\n            sx: { color: secondaryTextColor },\r\n          }}\r\n        />\r\n        <CardContent>\r\n          {Array.from({ length: 4 }).map((_, index) => (\r\n            <Stack\r\n              key={index}\r\n              direction=\"row\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"space-between\"\r\n              sx={{ mb: 1.5 }}\r\n            >\r\n              <Skeleton variant=\"text\" width=\"40%\" />\r\n              <Skeleton variant=\"text\" width=\"20%\" />\r\n            </Stack>\r\n          ))}\r\n          <Skeleton variant=\"rectangular\" height={8} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Presupuesto actual\"\r\n          titleTypographyProps={{ variant: \"h6\", sx: { color: primaryTextColor } }}\r\n        />\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {handleRetry ? (\r\n            <Button variant=\"outlined\" onClick={handleRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const categories = budget?.categories ?? [];\r\n  const subheader = budget\r\n    ? [budget.nombre, budget.rangeLabel].filter(Boolean).join(\" - \")\r\n    : undefined;\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}\r\n    >\r\n      <CardHeader\r\n        title=\"Presupuesto actual\"\r\n        subheader={subheader}\r\n        titleTypographyProps={{ variant: \"h6\", sx: { color: primaryTextColor } }}\r\n        subheaderTypographyProps={{ variant: \"body2\", sx: { color: primaryTextColor } }}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {budget ? (\r\n          <Stack spacing={2}>\r\n            {budget.totals ? (\r\n              <Stack direction=\"row\" justifyContent=\"space-between\">\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Saldo estimado:{\" \"}\r\n                  {formatCurrencyAR(budget.totals.saldoEstimado)}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"body2\"\r\n                  color=\"text.secondary\"\r\n                  fontWeight={600}\r\n                >\r\n                  Saldo real: {formatCurrencyAR(budget.totals.saldoReal)}\r\n                </Typography>\r\n              </Stack>\r\n            ) : null}\r\n            {categories.length > 0 ? (\r\n              categories.map((item) => {\r\n                const planned = Number(item.planned) || 0;\r\n                const actual = Number(item.actual) || 0;\r\n                const ratio = planned === 0 ? 0 : actual / planned;\r\n                const status = getStatusColor(ratio);\r\n                const rawPercentage =\r\n                  planned === 0 ? 0 : (actual / planned) * 100;\r\n                const limitedProgress = Math.min(rawPercentage, 150);\r\n                const progress =\r\n                  limitedProgress > 100\r\n                    ? 100\r\n                    : Math.max(0, limitedProgress);\r\n\r\n                return (\r\n                  <Box\r\n                    key={item.name}\r\n                    sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}\r\n                  >\r\n                    <Stack\r\n                      direction=\"row\"\r\n                      justifyContent=\"space-between\"\r\n                      alignItems=\"center\"\r\n                    >\r\n                      <Typography variant=\"subtitle2\">\r\n                        {item.name}\r\n                      </Typography>\r\n                      <Chip\r\n                        color={status.color}\r\n                        label={`${formatPercentage(rawPercentage, {\r\n                          fractionDigits: 0,\r\n                        })} - ${status.label}`}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                      />\r\n                    </Stack>\r\n                    <LinearProgress\r\n                      variant=\"determinate\"\r\n                      value={progress}\r\n                      color={status.color}\r\n                      sx={{\r\n                        height: 8,\r\n                        borderRadius: 999,\r\n                        backgroundColor: \"action.hover\",\r\n                        [`& .MuiLinearProgress-bar`]: {\r\n                          borderRadius: 999,\r\n                        },\r\n                      }}\r\n                    />\r\n                    <Stack direction=\"row\" justifyContent=\"space-between\">\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        Planificado: {formatCurrencyAR(planned)}\r\n                      </Typography>\r\n                      <Typography\r\n                        variant=\"body2\"\r\n                        color=\"text.secondary\"\r\n                        fontWeight={600}\r\n                      >\r\n                        Ejecutado: {formatCurrencyAR(actual)}\r\n                      </Typography>\r\n                    </Stack>\r\n                    <Divider sx={{ my: 0.5 }} />\r\n                  </Box>\r\n                );\r\n              })\r\n            ) : (\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                No hay datos cargados para este presupuesto.\r\n              </Typography>\r\n            )}\r\n          </Stack>\r\n        ) : (\r\n          <Stack spacing={2}>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              No hay presupuesto actual.\r\n            </Typography>\r\n            <Stack direction=\"row\" spacing={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={goToNew}\r\n                sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n              >\r\n                Nuevo presupuesto\r\n              </Button>\r\n              <Button variant=\"text\" onClick={goToList}>\r\n                Ver presupuestos\r\n              </Button>\r\n            </Stack>\r\n          </Stack>\r\n        )}\r\n      </CardContent>\r\n      {budget ? (\r\n        <CardActions sx={{ justifyContent: \"flex-end\", px: 3, pb: 2 }}>\r\n          <Stack direction=\"row\" spacing={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={goToDetail}\r\n              disabled={!budget?.slug}\r\n            >\r\n              Ver ms\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={goToNew}\r\n              sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n            >\r\n              Nuevo presupuesto\r\n            </Button>\r\n            <Button variant=\"text\" onClick={goToList}>\r\n              Ver presupuestos\r\n            </Button>\r\n          </Stack>\r\n        </CardActions>\r\n      ) : null}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default BudgetWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\r\nimport API_CONFIG from \"../../config/api-config\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst currency = (v) => new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS' }).format(v || 0);\r\n\r\nexport default function LiquidityGapWidget() {\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n  const [data, setData] = React.useState(null);\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n\r\n  React.useEffect(() => {\r\n    const baseUrl = API_CONFIG.REPORTE;\r\n    if (!baseUrl) return;\r\n\r\n    const now = new Date();\r\n    const year = now.getFullYear();\r\n    const month = now.getMonth() + 1; // 1..12\r\n\r\n    const headers = {};\r\n    const sub = sessionStorage.getItem('sub');\r\n    const token = sessionStorage.getItem('accessToken');\r\n    if (sub) headers['X-Usuario-Sub'] = sub;\r\n    if (token) headers['Authorization'] = `Bearer ${token}`;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    const fetchCash = fetch(`${baseUrl}/cashflow?anio=${year}`, { headers })\r\n      .then(r => r.ok ? r.json() : Promise.reject(`HTTP ${r.status}`))\r\n      .then(arr => {\r\n        const registros = Array.isArray(arr) ? arr : [];\r\n        const ingresos = registros.filter(r => r.tipo === 'Ingreso' && new Date(r.fechaEmision).getMonth() + 1 === month)\r\n          .reduce((a, r) => a + (r.montoTotal || 0), 0);\r\n        const egresos = registros.filter(r => r.tipo === 'Egreso' && new Date(r.fechaEmision).getMonth() + 1 === month)\r\n          .reduce((a, r) => a + (r.montoTotal || 0), 0);\r\n        return { ingresos, egresos };\r\n      });\r\n\r\n    const params = new URLSearchParams();\r\n    params.set('anio', year);\r\n    const fetchAccrual = fetch(`${baseUrl}/pyl?${params.toString()}`, { headers })\r\n      .then(r => r.ok ? r.json() : Promise.reject(`HTTP ${r.status}`))\r\n      .then(json => {\r\n        const idx = month - 1;\r\n        const ingresos = (json?.ingresosMensuales ?? [])[idx] || 0;\r\n        const egresos = (json?.egresosMensuales ?? [])[idx] || 0;\r\n        return { ingresos, egresos };\r\n      });\r\n\r\n    Promise.all([fetchCash, fetchAccrual])\r\n      .then(([cash, accrual]) => {\r\n        const dataset = [\r\n          {\r\n            name: 'Ingresos',\r\n            Reales: cash.ingresos,\r\n            Devengado: accrual.ingresos,\r\n          },\r\n          {\r\n            name: 'Egresos',\r\n            Reales: cash.egresos,\r\n            Devengado: accrual.egresos,\r\n          },\r\n        ];\r\n        setData({ dataset, cash, accrual });\r\n      })\r\n      .catch(err => setError(String(err)))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\", display: 'flex', flexDirection: 'column' }}>\r\n      <CardHeader\r\n        title=\"Caja vs Devengado (ltimo mes)\"\r\n        subheader=\"Comparativo de ingresos y egresos para detectar gaps\"\r\n        titleTypographyProps={{\r\n          variant: \"h6\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        subheaderTypographyProps={{\r\n          variant: \"body2\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {loading ? (\r\n          <Skeleton variant=\"rectangular\" height={220} />\r\n        ) : error ? (\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        ) : data ? (\r\n          <>\r\n            <ResponsiveContainer width=\"100%\" height={240}>\r\n              <BarChart data={data.dataset} margin={{ top: 8, right: 16, bottom: 8, left: 0 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E0E0E0\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(v) => currency(v)} />\r\n                <Legend />\r\n                <Bar dataKey=\"Reales\" fill=\"#2e7d32\" />\r\n                <Bar dataKey=\"Devengado\" fill=\"#0288d1\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n            <Stack direction=\"row\" spacing={2} sx={{ mt: 2 }} flexWrap=\"wrap\">\r\n              <ChipLike label=\"Gap Ingresos\" value={currency((data.accrual.ingresos || 0) - (data.cash.ingresos || 0))} />\r\n              <ChipLike label=\"Gap Egresos\" value={currency((data.accrual.egresos || 0) - (data.cash.egresos || 0))} />\r\n            </Stack>\r\n          </>\r\n        ) : null}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nconst ChipLike = ({ label, value }) => {\r\n  const { primaryTextColor, secondaryTextColor, paletteVars, resolvedMode } =\r\n    useResolvedColorTokens();\r\n  const chipBackground =\r\n    paletteVars.action?.hover ??\r\n    (resolvedMode === \"dark\"\r\n      ? \"rgba(255, 255, 255, 0.12)\"\r\n      : \"rgba(0, 0, 0, 0.05)\");\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"6px 12px\",\r\n        borderRadius: 8,\r\n        background: chipBackground,\r\n      }}\r\n    >\r\n      <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n        {label}\r\n      </Typography>\r\n      <Typography\r\n        variant=\"body2\"\r\n        fontWeight={600}\r\n        sx={{ color: primaryTextColor }}\r\n      >\r\n        {value}\r\n      </Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst typeStyles = {\r\n  ingreso: { color: \"#1b5e20\", backgroundColor: \"rgba(46, 125, 50, 0.12)\" },\r\n  egreso: { color: \"#b71c1c\", backgroundColor: \"rgba(198, 40, 40, 0.12)\" },\r\n  deuda: { color: \"#37474f\", backgroundColor: \"rgba(55, 71, 79, 0.12)\" },\r\n  acreencia: { color: \"#01579b\", backgroundColor: \"rgba(1, 87, 155, 0.12)\" },\r\n  transferencia: { color: \"#4a148c\", backgroundColor: \"rgba(74, 20, 140, 0.12)\" },\r\n};\r\n\r\nconst getTypeStyle = (tipo) => {\r\n  if (!tipo) {\r\n    return { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n  }\r\n  const key = String(tipo).toLowerCase();\r\n  return typeStyles[key] ?? { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n};\r\n\r\nconst formatAmount = (value, currency = \"ARS\") => {\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"-\";\r\n  }\r\n  try {\r\n    return new Intl.NumberFormat(\"es-AR\", {\r\n      style: \"currency\",\r\n      currency: currency || \"ARS\",\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(numeric);\r\n  } catch (error) {\r\n    return `${numeric.toLocaleString(\"es-AR\", {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    })} ${currency || \"\"}`.trim();\r\n  }\r\n};\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) {\r\n    return \"-\";\r\n  }\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"-\";\r\n  }\r\n  return date.toLocaleDateString(\"es-AR\", {\r\n    day: \"2-digit\",\r\n    month: \"short\",\r\n  });\r\n};\r\n\r\nconst RecentMovementsWidget = ({\r\n  data,\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n  onNavigate,\r\n}) => {\r\n  const { resolvedMode, primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n  const cardHeaderTypography = React.useMemo(\r\n    () => ({\r\n      titleTypographyProps: {\r\n        variant: \"h6\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n      subheaderTypographyProps: {\r\n        variant: \"body2\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n    }),\r\n    [primaryTextColor]\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Movimientos\"\r\n          subheader=\"Cargando...\"\r\n          {...cardHeaderTypography}\r\n        />\r\n        <CardContent>\r\n          <Skeleton variant=\"rectangular\" height={180} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title=\"Movimientos\" {...cardHeaderTypography} />\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const movements = Array.isArray(data) ? data : [];\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}\r\n    >\r\n      <CardHeader\r\n        title=\"Movimientos\"\r\n        subheader=\"ltimos movimientos registrados\"\r\n        {...cardHeaderTypography}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {movements.length === 0 ? (\r\n          <Stack spacing={2} alignItems=\"flex-start\">\r\n            <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n              Todava no hay movimientos para mostrar. Registra un ingreso o egreso para verlos aqu.\r\n            </Typography>\r\n            {onRetry ? (\r\n              <Button variant=\"outlined\" onClick={onRetry}>\r\n                Actualizar\r\n              </Button>\r\n            ) : null}\r\n          </Stack>\r\n        ) : (\r\n          <TableContainer>\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Tipo</TableCell>\r\n                  <TableCell align=\"right\">Monto</TableCell>\r\n                  <TableCell>Fecha</TableCell>\r\n                  <TableCell>Categora</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {movements.map((movement, index) => {\r\n                  const key = movement.id ?? `movement-${index}`;\r\n                  const tipo = movement.tipo ?? \"Movimiento\";\r\n                  const categoria = movement.categoria || \"Sin categora\";\r\n                  const amountColor = (movement.montoTotal ?? 0) < 0 ? \"error.main\" : \"success.main\";\r\n                  const typeStyle = getTypeStyle(tipo);\r\n                  return (\r\n                    <TableRow key={key} hover>\r\n                      <TableCell>\r\n                        <Chip\r\n                          label={tipo}\r\n                          size=\"small\"\r\n                          sx={{\r\n                            fontWeight: 600,\r\n                            color: typeStyle.color,\r\n                            backgroundColor: typeStyle.backgroundColor,\r\n                            border: `1px solid ${typeStyle.color}`,\r\n                          }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell align=\"right\" sx={{ color: amountColor, fontWeight: 600 }}>\r\n                        {formatAmount(movement.montoTotal, movement.moneda)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">{formatDate(movement.fechaEmision)}</Typography>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n                          {categoria}\r\n                        </Typography>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 3, pb: 2, gap: 1 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={onNavigate}\r\n          disabled={!onNavigate}\r\n          sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n        >\r\n          Ver ms\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RecentMovementsWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst typeStyles = {\r\n  venta: { color: \"#1b5e20\", backgroundColor: \"rgba(46, 125, 50, 0.12)\" },\r\n  compra: { color: \"#b71c1c\", backgroundColor: \"rgba(198, 40, 40, 0.12)\" },\r\n};\r\n\r\nconst getTypeStyle = (tipo) => {\r\n  if (!tipo) {\r\n    return { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n  }\r\n  const key = String(tipo).toLowerCase();\r\n  return typeStyles[key] ?? { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n};\r\n\r\nconst formatAmount = (value, currency = \"ARS\") => {\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"-\";\r\n  }\r\n  try {\r\n    return new Intl.NumberFormat(\"es-AR\", {\r\n      style: \"currency\",\r\n      currency: currency || \"ARS\",\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(numeric);\r\n  } catch (error) {\r\n    return `${numeric.toLocaleString(\"es-AR\", {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    })} ${currency || \"\"}`.trim();\r\n  }\r\n};\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) {\r\n    return \"-\";\r\n  }\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"-\";\r\n  }\r\n  return date.toLocaleDateString(\"es-AR\", {\r\n    day: \"2-digit\",\r\n    month: \"short\",\r\n  });\r\n};\r\n\r\nconst RecentInvoicesWidget = ({\r\n  data,\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n  onNavigate,\r\n}) => {\r\n  const { resolvedMode, primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n  const cardHeaderTypography = React.useMemo(\r\n    () => ({\r\n      titleTypographyProps: {\r\n        variant: \"h6\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n      subheaderTypographyProps: {\r\n        variant: \"body2\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n    }),\r\n    [primaryTextColor]\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Facturas\"\r\n          subheader=\"Cargando...\"\r\n          {...cardHeaderTypography}\r\n        />\r\n        <CardContent>\r\n          <Skeleton variant=\"rectangular\" height={180} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title=\"Facturas\" {...cardHeaderTypography} />\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const invoices = Array.isArray(data) ? data : [];\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}\r\n    >\r\n      <CardHeader\r\n        title=\"Facturas\"\r\n        subheader=\"ltimas facturas registradas\"\r\n        {...cardHeaderTypography}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {invoices.length === 0 ? (\r\n          <Stack spacing={2} alignItems=\"flex-start\">\r\n            <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n              Todava no hay facturas para mostrar. Carga una factura para verla ac.\r\n            </Typography>\r\n            {onRetry ? (\r\n              <Button variant=\"outlined\" onClick={onRetry}>\r\n                Actualizar\r\n              </Button>\r\n            ) : null}\r\n          </Stack>\r\n        ) : (\r\n          <TableContainer>\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Tipo</TableCell>\r\n                  <TableCell>Nmero</TableCell>\r\n                  <TableCell align=\"right\">Monto</TableCell>\r\n                  <TableCell>Fecha</TableCell>\r\n                  <TableCell>Cliente</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {invoices.map((invoice, index) => {\r\n                  const key = invoice.id ?? `invoice-${index}`;\r\n                  const tipo = invoice.tipoFactura ?? \"Factura\";\r\n                  const numero = invoice.numeroDocumento ?? \"-\";\r\n                  const cliente =\r\n                    invoice.compradorNombre || invoice.vendedorNombre || \"Sin dato\";\r\n                  const amountColor = (invoice.montoTotal ?? 0) < 0 ? \"error.main\" : \"success.main\";\r\n                  const typeStyle = getTypeStyle(tipo);\r\n\r\n                  return (\r\n                    <TableRow key={key} hover>\r\n                      <TableCell>\r\n                        <Chip\r\n                          label={tipo}\r\n                          size=\"small\"\r\n                          sx={{\r\n                            fontWeight: 600,\r\n                            color: typeStyle.color,\r\n                            backgroundColor: typeStyle.backgroundColor,\r\n                            border: `1px solid ${typeStyle.color}`,\r\n                          }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">{numero}</Typography>\r\n                      </TableCell>\r\n                      <TableCell align=\"right\" sx={{ color: amountColor, fontWeight: 600 }}>\r\n                        {formatAmount(invoice.montoTotal, invoice.moneda)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">\r\n                          {formatDate(invoice.fechaEmision)}\r\n                        </Typography>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n                          {cliente}\r\n                        </Typography>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 3, pb: 2, gap: 1 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={onNavigate}\r\n          disabled={!onNavigate}\r\n          sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n        >\r\n          Ver ms\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RecentInvoicesWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport LinearProgress from \"@mui/material/LinearProgress\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Box from \"@mui/material/Box\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst numberFormatter = new Intl.NumberFormat(\"es-AR\", {\r\n  maximumFractionDigits: 0,\r\n});\r\n\r\nconst percentFormatter = new Intl.NumberFormat(\"es-AR\", {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 1,\r\n});\r\n\r\nconst clampPercent = (value) => {\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return 0;\r\n  }\r\n  return Math.min(Math.max(numeric, 0), 100);\r\n};\r\n\r\nconst formatPercent = (value) => `${percentFormatter.format(clampPercent(value))}%`;\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) {\r\n    return \"--\";\r\n  }\r\n  return String(value);\r\n};\r\n\r\nconst ReconciliationWidget = ({\r\n  data,\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n  onNavigate,\r\n}) => {\r\n  const { resolvedMode } = useResolvedColorTokens();\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title=\"Conciliacin bancaria\" subheader=\"Sincronizando movimientos...\" />\r\n        <CardContent>\r\n          {Array.from({ length: 3 }).map((_, index) => (\r\n            <Skeleton key={index} variant=\"rectangular\" height={48} sx={{ mb: 1.5 }} />\r\n          ))}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n        <CardHeader title=\"Conciliacin bancaria\" />\r\n        <CardContent sx={{ flexGrow: 1, display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const summary = data ?? null;\r\n  const progress = clampPercent(summary?.porcentajeConciliados);\r\n  const porTipo = Array.isArray(summary?.porTipo) ? [...summary.porTipo] : [];\r\n  porTipo.sort((a, b) => (Number(b?.total ?? 0) || 0) - (Number(a?.total ?? 0) || 0));\r\n\r\n  const conciliadosPercent =\r\n    summary && summary.totalMovimientos\r\n      ? (summary.conciliados * 100) / (summary.totalMovimientos || 1)\r\n      : 0;\r\n  const pendientesPercent =\r\n    summary && summary.totalMovimientos\r\n      ? (summary.pendientes * 100) / (summary.totalMovimientos || 1)\r\n      : 0;\r\n\r\n  const renderMetric = (label, value, helper) => (\r\n    <Stack\r\n      key={label}\r\n      spacing={0.5}\r\n      sx={{\r\n        p: 1.25,\r\n        borderRadius: 1.5,\r\n        border: \"1px solid\",\r\n        borderColor: \"divider\",\r\n        minWidth: 0,\r\n        flex: 1,\r\n      }}\r\n    >\r\n      <Typography variant=\"caption\" color=\"text.secondary\">\r\n        {label}\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" fontWeight={600}>\r\n        {value}\r\n      </Typography>\r\n      {helper ? (\r\n        <Typography variant=\"caption\" color=\"text.secondary\">\r\n          {helper}\r\n        </Typography>\r\n      ) : null}\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n      <CardHeader\r\n        title=\"Conciliacin bancaria\"\r\n        subheader={\r\n          summary?.periodLabel ? `Perodo ${summary.periodLabel}` : \"Resumen del ltimo perodo\"\r\n        }\r\n      />\r\n      <CardContent sx={{ flexGrow: 1, display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n        {summary ? (\r\n          <>\r\n            <Stack\r\n              direction={{ xs: \"column\", sm: \"row\" }}\r\n              spacing={1.5}\r\n              sx={{ alignItems: { xs: \"stretch\", sm: \"flex-start\" } }}\r\n            >\r\n              {renderMetric(\r\n                \"Movimientos\",\r\n                numberFormatter.format(summary.totalMovimientos ?? 0),\r\n                \"Total del perodo\"\r\n              )}\r\n              {renderMetric(\r\n              \"Conciliados\",\r\n              numberFormatter.format(summary.conciliados ?? 0),\r\n              formatPercent(conciliadosPercent)\r\n            )}\r\n            {renderMetric(\r\n              \"Pendientes\",\r\n              numberFormatter.format(summary.pendientes ?? 0),\r\n              formatPercent(pendientesPercent)\r\n            )}\r\n            </Stack>\r\n\r\n            <Box>\r\n              <Stack\r\n                direction=\"row\"\r\n                justifyContent=\"space-between\"\r\n                alignItems=\"center\"\r\n                sx={{ mb: 0.75 }}\r\n              >\r\n                <Typography variant=\"subtitle2\">Avance general</Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  {formatPercent(progress)}\r\n                </Typography>\r\n              </Stack>\r\n              <LinearProgress\r\n                variant=\"determinate\"\r\n                value={progress}\r\n                sx={{\r\n                  height: 10,\r\n                  borderRadius: 999,\r\n                  backgroundColor: \"action.hover\",\r\n                  [`& .MuiLinearProgress-bar`]: {\r\n                    borderRadius: 999,\r\n                  },\r\n                }}\r\n              />\r\n            </Box>\r\n\r\n            <Stack spacing={0.5}>\r\n              <Typography variant=\"subtitle2\">ltimas referencias</Typography>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                ltima conciliacin: {formatDate(summary.ultimaConciliacion)}\r\n              </Typography>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                ltimo movimiento pendiente: {formatDate(summary.ultimoPendiente)}\r\n              </Typography>\r\n            </Stack>\r\n\r\n            <Stack spacing={1}>\r\n              <Typography variant=\"subtitle2\">Detalle por tipo</Typography>\r\n              {porTipo.length > 0 ? (\r\n                porTipo.map((item) => {\r\n                  const itemProgress = clampPercent(item?.porcentaje ?? 0);\r\n                  return (\r\n                    <Stack\r\n                      key={item?.tipo ?? \"tipo-desconocido\"}\r\n                      spacing={0.5}\r\n                      sx={{\r\n                        border: \"1px solid\",\r\n                        borderColor: \"divider\",\r\n                        borderRadius: 1.5,\r\n                        p: 1.25,\r\n                      }}\r\n                    >\r\n                      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                        <Typography variant=\"body2\" fontWeight={600}>\r\n                          {item?.tipo ?? \"Sin tipo\"}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" color=\"text.secondary\">\r\n                          {formatPercent(itemProgress)}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <LinearProgress\r\n                        variant=\"determinate\"\r\n                        value={itemProgress}\r\n                        sx={{\r\n                          height: 8,\r\n                          borderRadius: 999,\r\n                          backgroundColor: \"action.hover\",\r\n                          [`& .MuiLinearProgress-bar`]: {\r\n                            borderRadius: 999,\r\n                          },\r\n                        }}\r\n                      />\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        {numberFormatter.format(item?.conciliados ?? 0)} /{\" \"}\r\n                        {numberFormatter.format(item?.total ?? 0)} conciliados\r\n                      </Typography>\r\n                    </Stack>\r\n                  );\r\n                })\r\n              ) : (\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  No hay movimientos clasificados por tipo en este perodo.\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n          </>\r\n        ) : (\r\n          <Stack spacing={2} alignItems=\"flex-start\">\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Todava no hay movimientos que analizar en este perodo. Carga o importa operaciones\r\n              para comenzar a conciliarlas.\r\n            </Typography>\r\n            {onRetry ? (\r\n              <Button variant=\"outlined\" onClick={onRetry}>\r\n                Actualizar\r\n              </Button>\r\n            ) : null}\r\n          </Stack>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 3, pb: 2 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={() => onNavigate?.()}\r\n          disabled={!onNavigate}\r\n          sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n        >\r\n          Ir a conciliacin\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ReconciliationWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Divider from \"@mui/material/Divider\";\r\nimport { LineChart } from \"@mui/x-charts/LineChart\";\r\nimport { useTheme, alpha } from \"@mui/material/styles\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst formatCurrency = (value) => {\r\n  if (value === null || value === undefined) {\r\n    return \"--\";\r\n  }\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"--\";\r\n  }\r\n  return new Intl.NumberFormat(\"es-AR\", {\r\n    style: \"currency\",\r\n    currency: \"ARS\",\r\n    maximumFractionDigits: 0,\r\n  }).format(numeric);\r\n};\r\n\r\nconst numberFormatter = new Intl.NumberFormat(\"es-AR\", {\r\n  maximumFractionDigits: 0,\r\n});\r\n\r\nconst monthLabel = (raw, index) => {\r\n  if (!raw) {\r\n    const fallback = new Date(2000, index % 12, 1);\r\n    return new Intl.DateTimeFormat(\"es-AR\", { month: \"long\" }).format(fallback);\r\n  }\r\n\r\n  const normalized = String(raw).trim().toLowerCase();\r\n  const dictionary = {\r\n    ene: \"enero\",\r\n    feb: \"febrero\",\r\n    mar: \"marzo\",\r\n    abr: \"abril\",\r\n    may: \"mayo\",\r\n    jun: \"junio\",\r\n    jul: \"julio\",\r\n    ago: \"agosto\",\r\n    sep: \"septiembre\",\r\n    oct: \"octubre\",\r\n    nov: \"noviembre\",\r\n    dic: \"diciembre\",\r\n    january: \"enero\",\r\n    february: \"febrero\",\r\n    march: \"marzo\",\r\n    april: \"abril\",\r\n    june: \"junio\",\r\n    july: \"julio\",\r\n    august: \"agosto\",\r\n    september: \"septiembre\",\r\n    october: \"octubre\",\r\n    november: \"noviembre\",\r\n    december: \"diciembre\",\r\n  };\r\n\r\n  if (dictionary[normalized]) {\r\n    return dictionary[normalized];\r\n  }\r\n\r\n  const parsed = Date.parse(`${normalized} 1, 2020`);\r\n  if (Number.isNaN(parsed)) {\r\n    const fallback = new Date(2000, index % 12, 1);\r\n    return new Intl.DateTimeFormat(\"es-AR\", { month: \"long\" }).format(fallback);\r\n  }\r\n  return new Intl.DateTimeFormat(\"es-AR\", { month: \"long\" }).format(parsed);\r\n};\r\n\r\nconst SalesTrendWidget = ({ data, loading = false, error = null, emptyMessage }) => {\r\n  const theme = useTheme();\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const chartContainerRef = React.useRef(null);\r\n  const [chartWidth, setChartWidth] = React.useState(0);\r\n\r\n  const effectiveWidth = React.useMemo(() => {\r\n    if (!chartWidth) {\r\n      return 820;\r\n    }\r\n    const MIN_WIDTH = 540;\r\n    return Math.max(chartWidth, MIN_WIDTH);\r\n  }, [chartWidth]);\r\n\r\n  React.useLayoutEffect(() => {\r\n    const element = chartContainerRef.current;\r\n    if (!element) return undefined;\r\n\r\n    const updateWidth = () => {\r\n      const width =\r\n        element.offsetWidth || element.getBoundingClientRect().width || 0;\r\n      setChartWidth(width);\r\n    };\r\n\r\n    updateWidth();\r\n\r\n    if (typeof ResizeObserver !== \"undefined\") {\r\n      const observer = new ResizeObserver(updateWidth);\r\n      observer.observe(element);\r\n      return () => observer.disconnect();\r\n    }\r\n\r\n    window.addEventListener(\"resize\", updateWidth);\r\n    return () => window.removeEventListener(\"resize\", updateWidth);\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title={data?.title ?? \"Ingresos durante el perodo\"}\r\n          subheader=\"Generando serie...\"\r\n        />\r\n        <CardContent>\r\n          <Skeleton variant=\"text\" width=\"60%\" />\r\n          <Skeleton variant=\"text\" width=\"40%\" />\r\n          <Skeleton variant=\"rectangular\" height={220} sx={{ mt: 2 }} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title={data?.title ?? \"Ingresos durante el perodo\"} />\r\n        <CardContent>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const points = data?.points ?? [];\r\n  const xAxis = points.map((item) => monthLabel(item.month, item.monthIndex));\r\n  const seriesValues = points.map((item) => item.value ?? 0);\r\n  const noDataMessage = emptyMessage ?? data?.emptyMessage ?? \"No hay ingresos registrados en este perodo.\";\r\n  const hasData = seriesValues.length > 0;\r\n\r\n  // Calculamos un rango de eje Y con padding para que la curva se vea \"desde mas lejos\"\r\n  // y el eje 0 quede como referencia clara.\r\n  const hasNegative = seriesValues.some((v) => v < 0);\r\n  const hasPositive = seriesValues.some((v) => v > 0);\r\n  const rawMin = hasData ? Math.min(...seriesValues) : 0;\r\n  const rawMax = hasData ? Math.max(...seriesValues) : 0;\r\n\r\n  let yMin = 0;\r\n  let yMax = 0;\r\n\r\n  if (hasPositive && !hasNegative) {\r\n    // Solo positivos: de 0 a un poco ms del mximo\r\n    yMin = 0;\r\n    yMax = rawMax * 1.25 || 1;\r\n  } else if (!hasPositive && hasNegative) {\r\n    // Solo negativos: de un poco menos del mnimo a 0\r\n    yMin = rawMin * 1.25 || -1;\r\n    yMax = 0;\r\n  } else if (hasPositive && hasNegative) {\r\n    // Mezcla de positivos y negativos: rango simtrico alrededor de 0\r\n    const absMax = Math.max(Math.abs(rawMin), Math.abs(rawMax)) || 1;\r\n    const limit = absMax * 1.25;\r\n    yMin = -limit;\r\n    yMax = limit;\r\n  } else {\r\n    // Todo 0 o sin datos\r\n    yMin = -1;\r\n    yMax = 1;\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        height: \"100%\",\r\n        minHeight: 520,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n        <CardHeader\r\n          title={data?.title ?? \"Ingresos durante el perodo\"}\r\n          subheader={data?.subheader ?? \"Serie mensual de ingresos registrados en los ltimos 12 meses.\"}\r\n        titleTypographyProps={{\r\n          variant: \"h6\",\r\n          fontWeight: 600,\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        subheaderTypographyProps={{\r\n          variant: \"body2\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        action={\r\n          <Stack\r\n            direction=\"row\"\r\n            spacing={2}\r\n            alignItems=\"flex-start\"\r\n            sx={{\r\n              pr: 2.5,\r\n              pt: 0.5,\r\n              flexWrap: \"wrap\",\r\n              rowGap: 1,\r\n              justifyContent: \"flex-end\",\r\n              \"& .MuiTypography-overline\": { letterSpacing: 0.6 },\r\n            }}\r\n          >\r\n            <Stack spacing={0.5} alignItems=\"flex-end\" sx={{ minWidth: 120 }}>\r\n              <Typography variant=\"overline\" sx={{ color: primaryTextColor }}>\r\n                Maximo\r\n              </Typography>\r\n              <Typography variant=\"subtitle2\" fontWeight={600} sx={{ color: primaryTextColor }}>\r\n                {formatCurrency(data?.max?.value)}\r\n              </Typography>\r\n              <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                {data?.max?.label ?? \"--\"}\r\n              </Typography>\r\n            </Stack>\r\n            <Divider\r\n              flexItem\r\n              orientation=\"vertical\"\r\n              sx={{ alignSelf: \"stretch\", borderColor: \"divider\", mx: 0.5 }}\r\n            />\r\n            <Stack spacing={0.5} alignItems=\"flex-end\" sx={{ minWidth: 120 }}>\r\n              <Typography variant=\"overline\" sx={{ color: primaryTextColor }}>\r\n                Minimo\r\n              </Typography>\r\n              <Typography variant=\"subtitle2\" fontWeight={600} sx={{ color: primaryTextColor }}>\r\n                {formatCurrency(data?.min?.value)}\r\n              </Typography>\r\n              <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                {data?.min?.label ?? \"--\"}\r\n              </Typography>\r\n            </Stack>\r\n            <Divider\r\n              flexItem\r\n              orientation=\"vertical\"\r\n              sx={{ alignSelf: \"stretch\", borderColor: \"divider\", mx: 0.5 }}\r\n            />\r\n            <Stack spacing={0.5} alignItems=\"flex-end\" sx={{ minWidth: 120 }}>\r\n              <Typography variant=\"overline\" sx={{ color: primaryTextColor }}>\r\n                Promedio\r\n              </Typography>\r\n              <Typography variant=\"subtitle2\" fontWeight={600} sx={{ color: primaryTextColor }}>\r\n                {formatCurrency(data?.average)}\r\n              </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                  ltimos 12 meses\r\n                </Typography>\r\n            </Stack>\r\n          </Stack>\r\n        }\r\n        sx={{\r\n          py: 2,\r\n          \"& .MuiCardHeader-content\": {\r\n            gap: 0.25,\r\n            alignSelf: \"flex-start\",\r\n          },\r\n          \"& .MuiCardHeader-action\": {\r\n            mt: 0,\r\n          },\r\n        }}\r\n      />\r\n      <CardContent\r\n        sx={{\r\n          flexGrow: 1,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          px: { xs: 1, md: 1.5 },\r\n          pt: { xs: 0.9, md: 1.25 },\r\n          pb: { xs: 2.1, md: 2.35 },\r\n        }}\r\n      >\r\n        <Box\r\n          ref={chartContainerRef}\r\n          sx={{\r\n            width: \"100%\",\r\n            display: \"block\",\r\n            mt: { xs: 1, md: 2 },\r\n            px: 0,\r\n          }}\r\n        >\r\n          {hasData ? (\r\n            <LineChart\r\n              width={effectiveWidth}\r\n              height={360}\r\n              series={[\r\n                {\r\n                  data: seriesValues,\r\n                  type: \"line\",\r\n                  area: true,\r\n                  // Usamos curva lineal para que los valores sean exactamente los devueltos por el backend\r\n                  // y evitar \"monticulos\" visuales entre meses con valor 0.\r\n                  curve: \"linear\",\r\n                  color: theme.palette.primary.main,\r\n                  areaStyle: { fill: alpha(theme.palette.primary.main, 0.22) },\r\n                  showMark: true,\r\n                  valueFormatter: (value) => numberFormatter.format(value ?? 0),\r\n                  lineStyle: { strokeWidth: 3 },\r\n                },\r\n              ]}\r\n              yAxis={[\r\n                {\r\n                  min: yMin,\r\n                  max: yMax,\r\n                  tickNumber: 5,\r\n                  valueFormatter: (value) => formatCurrency(value),\r\n                  tickLabelStyle: {\r\n                    fontSize: 11,\r\n                  },\r\n                },\r\n              ]}\r\n              xAxis={[\r\n                {\r\n                  id: \"months\",\r\n                  data: xAxis,\r\n                  scaleType: \"point\",\r\n                  tickLabelStyle: {\r\n                    textTransform: \"capitalize\",\r\n                    fontSize: 10.5,\r\n                    transform: \"translateY(6px)\",\r\n                    whiteSpace: \"nowrap\",\r\n                  },\r\n                  tickLabelSpacing: 0,\r\n                },\r\n              ]}\r\n              margin={{ left: 50, right: 90, top: 8, bottom: 40 }}\r\n              grid={{ vertical: true, horizontal: true }}\r\n              sx={{\r\n                \"& .MuiChartsAxis-bottom .MuiTypography-root\": {\r\n                  fontSize: 12,\r\n                  whiteSpace: \"nowrap\",\r\n                  overflow: \"visible\",\r\n                },\r\n                \"& .MuiChartsAxis-left .MuiTypography-root\": {\r\n                  fontSize: 12,\r\n                  whiteSpace: \"nowrap\",\r\n                  overflow: \"visible\",\r\n                },\r\n                \"& .MuiChartsAxis-label\": { fontWeight: 500 },\r\n                \"& .MuiChartsGrid-line\": { strokeDasharray: \"4 4\" },\r\n                \"& .MuiMarkElement-root\": {\r\n                  strokeWidth: 2,\r\n                  stroke: theme.palette.background.paper,\r\n                  r: 4,\r\n                },\r\n                \"& .MuiAreaElement-root\": { opacity: 0.24 },\r\n              }}\r\n              slotProps={{\r\n                legend: { hidden: true },\r\n                tooltip: {\r\n                  valueFormatter: (value) => formatCurrency(value),\r\n                },\r\n              }}\r\n              showTooltip\r\n            />\r\n          ) : (\r\n            <Box\r\n              sx={{\r\n                height: 360,\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                borderRadius: 2,\r\n                border: \"1px dashed\",\r\n                borderColor: \"divider\",\r\n                color: secondaryTextColor,\r\n                typography: \"body2\",\r\n              }}\r\n            >\r\n              {noDataMessage}\r\n            </Box>\r\n          )}\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SalesTrendWidget;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Divider from \"@mui/material/Divider\";\r\nimport { BarChart } from \"@mui/x-charts/BarChart\";\r\nimport { useTheme, alpha } from \"@mui/material/styles\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst formatCurrency = (value) => {\r\n  if (value === null || value === undefined) {\r\n    return \"--\";\r\n  }\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"--\";\r\n  }\r\n  return new Intl.NumberFormat(\"es-AR\", {\r\n    style: \"currency\",\r\n    currency: \"ARS\",\r\n    maximumFractionDigits: 0,\r\n  }).format(numeric);\r\n};\r\n\r\nconst SalesByCategoryWidget = ({\r\n  data = [],\r\n  loading = false,\r\n  error = null,\r\n  emptyMessage = \"No hay datos para mostrar por categora en este perodo.\",\r\n  title = \"Ingresos por categoras\",\r\n  subtitle = \"Distribucin anual por segmento\",\r\n}) => {\r\n  const theme = useTheme();\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const chartContainerRef = React.useRef(null);\r\n  const [chartWidth, setChartWidth] = React.useState(0);\r\n\r\n  const effectiveWidth = React.useMemo(() => {\r\n    if (!chartWidth) {\r\n      return 820;\r\n    }\r\n    const MIN_WIDTH = 540;\r\n    return Math.max(chartWidth, MIN_WIDTH);\r\n  }, [chartWidth]);\r\n\r\n  React.useLayoutEffect(() => {\r\n    const element = chartContainerRef.current;\r\n    if (!element) return undefined;\r\n\r\n    const updateWidth = () => {\r\n      const width =\r\n        element.offsetWidth || element.getBoundingClientRect().width || 0;\r\n      setChartWidth(width);\r\n    };\r\n\r\n    updateWidth();\r\n\r\n    if (typeof ResizeObserver !== \"undefined\") {\r\n      const observer = new ResizeObserver(updateWidth);\r\n      observer.observe(element);\r\n      return () => observer.disconnect();\r\n    }\r\n\r\n    window.addEventListener(\"resize\", updateWidth);\r\n    return () => window.removeEventListener(\"resize\", updateWidth);\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title={title} subheader=\"Armando ranking...\" />\r\n        <CardContent>\r\n          <Stack spacing={1}>\r\n            {Array.from({ length: 6 }).map((_, index) => (\r\n              <Skeleton key={index} variant=\"rectangular\" height={24} />\r\n            ))}\r\n          </Stack>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title={title} />\r\n        <CardContent>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const hasData = Array.isArray(data) && data.length > 0;\r\n  const safeData = hasData ? data : [];\r\n  const categories = safeData.map((item) => item.category ?? \"Sin categora\");\r\n  const values = safeData.map((item) => Number(item.value) || 0);\r\n\r\n  // Ajustamos el eje Y para permitir valores negativos y dar margen vertical\r\n  // con un rango que tenga sentido visualmente.\r\n  const hasNegativeValues = values.some((v) => v < 0);\r\n  const hasPositiveValues = values.some((v) => v > 0);\r\n  const rawMin = hasData ? Math.min(...values) : 0;\r\n  const rawMax = hasData ? Math.max(...values) : 0;\r\n\r\n  let yMin = 0;\r\n  let yMax = 0;\r\n\r\n  if (hasPositiveValues && !hasNegativeValues) {\r\n    // Solo positivos: de 0 a un poco ms del mximo\r\n    yMin = 0;\r\n    yMax = rawMax * 1.25 || 1;\r\n  } else if (!hasPositiveValues && hasNegativeValues) {\r\n    // Solo negativos: de un poco menos del mnimo a 0\r\n    yMin = rawMin * 1.25 || -1;\r\n    yMax = 0;\r\n  } else if (hasPositiveValues && hasNegativeValues) {\r\n    // Valores mixtos: rango simtrico alrededor de 0\r\n    const absMax = Math.max(Math.abs(rawMin), Math.abs(rawMax)) || 1;\r\n    const limit = absMax * 1.25;\r\n    yMin = -limit;\r\n    yMax = limit;\r\n  } else {\r\n    // Todo 0 o sin datos\r\n    yMin = -1;\r\n    yMax = 1;\r\n  }\r\n\r\n  let topCategory = null;\r\n  let bottomCategory = null;\r\n  let average = null;\r\n\r\n  if (hasData) {\r\n    const total = values.reduce((sum, value) => sum + value, 0);\r\n    average = values.length > 0 ? total / values.length : null;\r\n    const sorted = [...safeData].sort(\r\n      (a, b) => (Number(b.value) || 0) - (Number(a.value) || 0)\r\n    );\r\n    topCategory = sorted[0] ?? null;\r\n    bottomCategory = sorted[sorted.length - 1] ?? null;\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        height: \"100%\",\r\n        minHeight: 520,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n      <CardHeader\r\n        title={title}\r\n        subheader={subtitle}\r\n        titleTypographyProps={{\r\n          variant: \"h6\",\r\n          fontWeight: 600,\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        subheaderTypographyProps={{\r\n          variant: \"body2\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        action={\r\n          hasData ? (\r\n            <Stack\r\n              direction=\"row\"\r\n              spacing={2}\r\n              alignItems=\"flex-start\"\r\n              sx={{\r\n                pr: 2.5,\r\n                pt: 0.5,\r\n                flexWrap: \"wrap\",\r\n                rowGap: 1,\r\n                justifyContent: \"flex-end\",\r\n                \"& .MuiTypography-overline\": { letterSpacing: 0.6 },\r\n              }}\r\n            >\r\n              <Stack spacing={0.5} alignItems=\"flex-end\" sx={{ minWidth: 120 }}>\r\n                <Typography\r\n                  variant=\"overline\"\r\n                  sx={{ color: primaryTextColor }}\r\n                >\r\n                  Categora superior\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle2\"\r\n                  fontWeight={600}\r\n                  sx={{ color: primaryTextColor }}\r\n                >\r\n                  {formatCurrency(topCategory?.value)}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                  {topCategory?.category ?? \"--\"}\r\n                </Typography>\r\n              </Stack>\r\n              <Divider\r\n                flexItem\r\n                orientation=\"vertical\"\r\n                sx={{ alignSelf: \"stretch\", borderColor: \"divider\", mx: 0.5 }}\r\n              />\r\n              <Stack spacing={0.5} alignItems=\"flex-end\" sx={{ minWidth: 120 }}>\r\n                <Typography\r\n                  variant=\"overline\"\r\n                  sx={{ color: primaryTextColor }}\r\n                >\r\n                  Categora menor\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle2\"\r\n                  fontWeight={600}\r\n                  sx={{ color: primaryTextColor }}\r\n                >\r\n                  {formatCurrency(bottomCategory?.value)}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                  {bottomCategory?.category ?? \"--\"}\r\n                </Typography>\r\n              </Stack>\r\n              <Divider\r\n                flexItem\r\n                orientation=\"vertical\"\r\n                sx={{ alignSelf: \"stretch\", borderColor: \"divider\", mx: 0.5 }}\r\n              />\r\n              <Stack spacing={0.5} alignItems=\"flex-end\" sx={{ minWidth: 120 }}>\r\n                <Typography\r\n                  variant=\"overline\"\r\n                  sx={{ color: primaryTextColor }}\r\n                >\r\n                  Promedio\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle2\"\r\n                  fontWeight={600}\r\n                  sx={{ color: primaryTextColor }}\r\n                >\r\n                  {formatCurrency(average)}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                  {values.length} categoras\r\n                </Typography>\r\n              </Stack>\r\n            </Stack>\r\n          ) : null\r\n        }\r\n        sx={{\r\n          py: 2,\r\n          \"& .MuiCardHeader-content\": {\r\n            gap: 0.25,\r\n            alignSelf: \"flex-start\",\r\n          },\r\n          \"& .MuiCardHeader-action\": {\r\n            mt: 0,\r\n          },\r\n        }}\r\n      />\r\n      <CardContent\r\n        sx={{\r\n          flexGrow: 1,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          px: { xs: 1, md: 1.5 },\r\n          pt: { xs: 0.9, md: 1.25 },\r\n          pb: { xs: 2.1, md: 2.35 },\r\n        }}\r\n      >\r\n        {hasData ? (\r\n          <Box\r\n            ref={chartContainerRef}\r\n            sx={{\r\n              width: \"100%\",\r\n              display: \"block\",\r\n              mt: { xs: 1, md: 2 },\r\n              px: 0,\r\n            }}\r\n          >\r\n            <BarChart\r\n              width={effectiveWidth}\r\n              height={360}\r\n              xAxis={[\r\n                {\r\n                  id: \"categories\",\r\n                  data: categories,\r\n                  scaleType: \"band\",\r\n                  valueFormatter: (value) => value,\r\n                  tickLabelStyle: {\r\n                    textTransform: \"capitalize\",\r\n                    fontSize: 12,\r\n                    whiteSpace: \"nowrap\",\r\n                  },\r\n                },\r\n              ]}\r\n              yAxis={[\r\n                {\r\n                  min: yMin,\r\n                  max: yMax,\r\n                  tickNumber: 5,\r\n                  valueFormatter: (value) => formatCurrency(value),\r\n                  tickLabelStyle: {\r\n                    fontSize: 11,\r\n                  },\r\n                },\r\n              ]}\r\n              series={[\r\n                {\r\n                  data: values,\r\n                  color: theme.palette.primary.main,\r\n                  valueFormatter: (value) => formatCurrency(value),\r\n                },\r\n              ]}\r\n              margin={{ left: 60, right: 100, top: 12, bottom: 56 }}\r\n              grid={{ vertical: true, horizontal: true }}\r\n              slotProps={{\r\n                legend: { hidden: true },\r\n                tooltip: {\r\n                  valueFormatter: (value) => formatCurrency(value),\r\n                },\r\n              }}\r\n              sx={{\r\n                \"& .MuiChartsAxis-bottom .MuiTypography-root\": {\r\n                  fontSize: 12,\r\n                  whiteSpace: \"nowrap\",\r\n                  overflow: \"visible\",\r\n                },\r\n                \"& .MuiChartsAxis-left .MuiTypography-root\": {\r\n                  fontSize: 12,\r\n                  whiteSpace: \"nowrap\",\r\n                  overflow: \"visible\",\r\n                },\r\n                \"& .MuiBarElement-root\": {\r\n                  fill: alpha(theme.palette.primary.main, 0.85),\r\n                },\r\n              }}\r\n            />\r\n          </Box>\r\n        ) : (\r\n          <Box\r\n            sx={{\r\n              flexGrow: 1,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              px: { xs: 2.5, md: 3 },\r\n            }}\r\n          >\r\n            <Typography\r\n              variant=\"body2\"\r\n              textAlign=\"center\"\r\n              sx={{ color: secondaryTextColor }}\r\n            >\r\n              {emptyMessage}\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SalesByCategoryWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Switch from \"@mui/material/Switch\";\r\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\r\nimport API_CONFIG from \"../../config/api-config\";\r\n\r\nconst InsightsWidget = () => {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(null);\r\n  const [data, setData] = React.useState(null);\r\n  const [useDeepSeek, setUseDeepSeek] = React.useState(false);\r\n  const summaryLines =\r\n    data && typeof data.diagnostico_corto === \"string\"\r\n      ? data.diagnostico_corto\r\n          .split(/\\n+/)\r\n          .map((line) => line.trim())\r\n          .filter(Boolean)\r\n      : [];\r\n  const senalesEntries =\r\n    data && data.senales\r\n      ? Object.entries(data.senales).filter(([, value]) => Boolean(value))\r\n      : [];\r\n  const detalleLines =\r\n    data && data.detalles\r\n      ? Object.values(data.detalles).filter(\r\n          (value) => typeof value === \"string\" && value.trim().length > 0\r\n        )\r\n      : [];\r\n  const riesgos =\r\n    Array.isArray(data?.riesgos_clave) && data.riesgos_clave.length > 0\r\n      ? data.riesgos_clave.filter(Boolean)\r\n      : [];\r\n  const tips =\r\n    Array.isArray(data?.tips) && data.tips.length > 0\r\n      ? data.tips.filter(Boolean)\r\n      : [];\r\n\r\n  const handleRun = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setData(null);\r\n    try {\r\n      const baseUrl = API_CONFIG.IA;\r\n      const now = new Date();\r\n      const params = new URLSearchParams();\r\n      params.set(\"anio\", now.getFullYear());\r\n      params.set(\"mes\", now.getMonth() + 1);\r\n      const headers = { \"Content-Type\": \"application/json\" };\r\n      const sub = sessionStorage.getItem('sub');\r\n      const token = sessionStorage.getItem('accessToken');\r\n      if (sub) headers['X-Usuario-Sub'] = sub;\r\n      if (token) headers['Authorization'] = `Bearer ${token}`;\r\n      params.set(\"modo\", useDeepSeek ? \"llm\" : \"basic\");\r\n      const res = await fetch(`${baseUrl}/ia/insights?${params.toString()}`, {\r\n        method: 'POST',\r\n        headers,\r\n      });\r\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n      const json = await res.json();\r\n      setData(json);\r\n    } catch (e) {\r\n      setError(String(e));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\", display: 'flex', flexDirection: 'column' }}>\r\n      <CardHeader title=\"Anlisis IA\" subheader=\"Diagnstico automtico de tu situacin\" />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {loading ? (\r\n          <Skeleton variant=\"rectangular\" height={180} />\r\n        ) : error ? (\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        ) : data ? (\r\n          <Stack spacing={1}>\r\n            {data.alerta ? (\r\n              <Alert severity=\"warning\" variant=\"outlined\">\r\n                Indicadores financieros en observacion.\r\n              </Alert>\r\n            ) : null}\r\n            {summaryLines.length > 0 ? (\r\n              summaryLines.map((line, idx) => (\r\n                <Typography key={idx} variant=\"body2\">\r\n                  {line}\r\n                </Typography>\r\n              ))\r\n            ) : (\r\n              <Typography variant=\"body2\">No hay resumen disponible.</Typography>\r\n            )}\r\n            {detalleLines.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Detalle del mes\r\n                </Typography>\r\n                {detalleLines.map((line, idx) => (\r\n                  <Typography key={`det-${idx}`} variant=\"body2\">\r\n                    - {line}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n            {senalesEntries.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Seales\r\n                </Typography>\r\n                {senalesEntries.map(([key, value]) => (\r\n                  <Typography key={key} variant=\"body2\">\r\n                    <b>{key.charAt(0).toUpperCase() + key.slice(1)}:</b> {value}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n            {riesgos.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Riesgos clave\r\n                </Typography>\r\n                {riesgos.map((item, idx) => (\r\n                  <Typography key={`risk-${idx}`} variant=\"body2\">\r\n                    - {item}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n            {tips.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Recomendaciones\r\n                </Typography>\r\n                {tips.slice(0, 4).map((item, idx) => (\r\n                  <Typography key={`tip-${idx}`} variant=\"body2\">\r\n                    - {item}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n          </Stack>\r\n        ) : (\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Activa \"Usar DeepSeek\" para el anlisis del modelo o usa el resumen bsico.\r\n          </Typography>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 2, pb: 2, justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={useDeepSeek}\r\n              onChange={(e) => setUseDeepSeek(e.target.checked)}\r\n              disabled={loading}\r\n            />\r\n          }\r\n          label=\"Usar DeepSeek\"\r\n        />\r\n        <Button variant=\"contained\" onClick={handleRun} disabled={loading}>\r\n          Interpretar situacin\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default InsightsWidget;\r\n\r\n","import API_CONFIG from \"../../config/api-config\";\r\n\r\nconst DEFAULT_LIMIT = 6;\r\n\r\nconst getSessionUserSub = () => {\r\n  if (typeof window === \"undefined\") {\r\n    return null;\r\n  }\r\n  try {\r\n    return window.sessionStorage.getItem(\"sub\");\r\n  } catch (err) {\r\n    console.error(\"No se pudo acceder a sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst toNumber = (value) => {\r\n  const numeric = Number(value);\r\n  return Number.isFinite(numeric) ? numeric : 0;\r\n};\r\n\r\nconst extractContent = (payload) => {\r\n  if (!payload) {\r\n    return [];\r\n  }\r\n  if (Array.isArray(payload)) {\r\n    return payload;\r\n  }\r\n  if (Array.isArray(payload.content)) {\r\n    return payload.content;\r\n  }\r\n  if (Array.isArray(payload.registros)) {\r\n    return payload.registros;\r\n  }\r\n  return [];\r\n};\r\n\r\nconst mapMovement = (item, index) => ({\r\n  id: item.id ?? item.uuid ?? `movement-${index}`,\r\n  tipo: item.tipo ?? item.tipoMovimiento ?? item.tipoOperacion ?? \"Movimiento\",\r\n  montoTotal: toNumber(item.montoTotal ?? item.monto ?? item.importe ?? 0),\r\n  moneda: item.moneda ?? item.monedaCodigo ?? \"ARS\",\r\n  fechaEmision: item.fechaEmision ?? item.fecha ?? item.fechaRegistro ?? null,\r\n  categoria:\r\n    item.categoria ??\r\n    item.categoriaNombre ??\r\n    item.categoriaDescripcion ??\r\n    item.area ??\r\n    null,\r\n});\r\n\r\nexport const fetchRecentMovements = async ({ limit = DEFAULT_LIMIT } = {}) => {\r\n  const usuarioSub = getSessionUserSub();\r\n  if (!usuarioSub) {\r\n    throw new Error(\"No encontramos el usuario en la sesin.\");\r\n  }\r\n\r\n  const safeLimit = Math.max(Number(limit) || DEFAULT_LIMIT, 1);\r\n  const params = new URLSearchParams({\r\n    page: \"0\",\r\n    size: String(safeLimit),\r\n    sortBy: \"fechaEmision\",\r\n    sortDir: \"desc\",\r\n  });\r\n\r\n  const response = await fetch(`${API_CONFIG.REGISTRO}/movimientos?${params.toString()}`, {\r\n    headers: {\r\n      \"X-Usuario-Sub\": usuarioSub,\r\n    },\r\n    credentials: \"include\",\r\n  });\r\n\r\n  let payload = null;\r\n  try {\r\n    payload = await response.json();\r\n  } catch (err) {\r\n    // Ignoramos errores de parseo; manejamos segun status.\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const message =\r\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\r\n      `No pudimos obtener los movimientos (cdigo ${response.status}).`;\r\n    const error = new Error(message);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  const records = extractContent(payload);\r\n  return records.slice(0, safeLimit).map(mapMovement);\r\n};\r\n\r\nconst mapInvoice = (item, index) => ({\r\n  id: item.id ?? item.idDocumento ?? `invoice-${index}`,\r\n  tipoFactura: item.tipoFactura ?? \"Factura\",\r\n  numeroDocumento: item.numeroDocumento ?? null,\r\n  montoTotal: toNumber(item.montoTotal ?? 0),\r\n  moneda: item.moneda ?? \"ARS\",\r\n  fechaEmision: item.fechaEmision ?? null,\r\n  compradorNombre: item.compradorNombre ?? null,\r\n  vendedorNombre: item.vendedorNombre ?? null,\r\n});\r\n\r\nexport const fetchRecentInvoices = async ({ limit = DEFAULT_LIMIT } = {}) => {\r\n  const usuarioSub = getSessionUserSub();\r\n  if (!usuarioSub) {\r\n    throw new Error(\"No encontramos el usuario en la sesin.\");\r\n  }\r\n\r\n  const safeLimit = Math.max(Number(limit) || DEFAULT_LIMIT, 1);\r\n  const params = new URLSearchParams({\r\n    page: \"0\",\r\n    size: String(safeLimit),\r\n    sortBy: \"fechaEmision\",\r\n    sortDir: \"desc\",\r\n  });\r\n\r\n  const response = await fetch(\r\n    `${API_CONFIG.REGISTRO}/facturas/buscar?${params.toString()}`,\r\n    {\r\n      headers: {\r\n        \"X-Usuario-Sub\": usuarioSub,\r\n      },\r\n      credentials: \"include\",\r\n    }\r\n  );\r\n\r\n  let payload = null;\r\n  try {\r\n    payload = await response.json();\r\n  } catch (err) {\r\n    // Ignoramos errores de parseo; manejamos segun status.\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const message =\r\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\r\n      `No pudimos obtener las facturas (cdigo ${response.status}).`;\r\n    const error = new Error(message);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  const records = extractContent(payload);\r\n  return records.slice(0, safeLimit).map(mapInvoice);\r\n};\r\n","import API_CONFIG from \"../../config/api-config\";\r\n\r\nconst getSessionUserSub = () => {\r\n  if (typeof window === \"undefined\") {\r\n    return null;\r\n  }\r\n  try {\r\n    return window.sessionStorage.getItem(\"sub\");\r\n  } catch (err) {\r\n    console.error(\"No se pudo acceder a sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst toNumber = (value) => {\r\n  const numeric = Number(value);\r\n  return Number.isFinite(numeric) ? numeric : 0;\r\n};\r\n\r\nconst formatPeriodLabel = (period) => {\r\n  if (!period || typeof period !== \"string\") {\r\n    return \"\";\r\n  }\r\n  const [year, month] = period.split(\"-\");\r\n  if (!year || !month) {\r\n    return period;\r\n  }\r\n  const date = new Date(Number(year), Number(month) - 1, 1);\r\n  return new Intl.DateTimeFormat(\"es-AR\", {\r\n    month: \"long\",\r\n    year: \"numeric\",\r\n  }).format(date);\r\n};\r\n\r\nexport const fetchMonthlySummary = async ({ period } = {}) => {\r\n  const usuarioSub = getSessionUserSub();\r\n  if (!usuarioSub) {\r\n    throw new Error(\"No encontramos el usuario en la sesin.\");\r\n  }\r\n\r\n  const params = new URLSearchParams();\r\n  if (period) {\r\n    const [year, month] = period.split(\"-\");\r\n    if (year && month) {\r\n      params.set(\"fecha\", `${year}-${month}-01`);\r\n    }\r\n  }\r\n\r\n  const url = `${API_CONFIG.REGISTRO}/movimientos/resumen/mensual${\r\n    params.toString() ? `?${params.toString()}` : \"\"\r\n  }`;\r\n\r\n  const response = await fetch(url, {\r\n    headers: {\r\n      \"X-Usuario-Sub\": usuarioSub,\r\n    },\r\n    credentials: \"include\",\r\n  });\r\n\r\n  let payload = null;\r\n  try {\r\n    payload = await response.json();\r\n  } catch (err) {\r\n    // ignoramos errores de parseo si la respuesta no es JSON\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const message =\r\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\r\n      `No pudimos obtener el resumen mensual (cdigo ${response.status}).`;\r\n    const error = new Error(message);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  return {\r\n    organizationId: payload?.organizacionId ?? null,\r\n    period: payload?.periodo ?? null,\r\n    periodLabel: formatPeriodLabel(payload?.periodo),\r\n    periodStart: payload?.periodoInicio ?? null,\r\n    periodEnd: payload?.periodoFin ?? null,\r\n    totalIncomes: toNumber(payload?.ingresosTotales),\r\n    totalExpenses: toNumber(payload?.egresosTotales),\r\n    netResult: toNumber(payload?.resultadoNeto),\r\n    movementsCount: Number(payload?.totalMovimientos ?? 0) || 0,\r\n  };\r\n};\r\n\r\nexport const fetchTotalBalance = async () => {\r\n  const usuarioSub = getSessionUserSub();\r\n  if (!usuarioSub) {\r\n    throw new Error(\"No encontramos el usuario en la sesin.\");\r\n  }\r\n\r\n  const url = `${API_CONFIG.REGISTRO}/movimientos/resumen/saldo-total`;\r\n\r\n  const response = await fetch(url, {\r\n    headers: {\r\n      \"X-Usuario-Sub\": usuarioSub,\r\n    },\r\n    credentials: \"include\",\r\n  });\r\n\r\n  let payload = null;\r\n  try {\r\n    payload = await response.json();\r\n  } catch (err) {\r\n    // ignoramos errores de parseo si la respuesta no es JSON\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const message =\r\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\r\n      `No pudimos obtener el saldo total (cdigo ${response.status}).`;\r\n    const error = new Error(message);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  return {\r\n    organizationId: payload?.organizacionId ?? null,\r\n    totalBalance: toNumber(payload?.saldoTotal),\r\n  };\r\n};\r\n","import API_CONFIG from \"../../config/api-config\";\n\nconst getSessionUserSub = () => {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n  try {\n    return window.sessionStorage.getItem(\"sub\");\n  } catch (err) {\n    console.error(\"No se pudo acceder a sessionStorage:\", err);\n    return null;\n  }\n};\n\nconst parseJsonSafe = async (response) => {\n  try {\n    return await response.json();\n  } catch (err) {\n    return null;\n  }\n};\n\nconst ensurePeriodDate = (period) => {\n  if (!period) {\n    return null;\n  }\n  const [year, month] = period.split(\"-\");\n  if (!year || !month) {\n    return null;\n  }\n  return `${year}-${month}-01`;\n};\n\nconst fetchMontosMensuales = async ({ period, months = 12 } = {}, endpoint) => {\n  const usuarioSub = getSessionUserSub();\n  if (!usuarioSub) {\n    throw new Error(\"No encontramos el usuario en la sesion.\");\n  }\n\n  const params = new URLSearchParams();\n  const fecha = ensurePeriodDate(period);\n  if (fecha) {\n    params.set(\"fecha\", fecha);\n  }\n  if (months) {\n    params.set(\"meses\", String(months));\n  }\n\n  const response = await fetch(\n    `${API_CONFIG.REGISTRO}/movimientos/resumen/${endpoint}${\n      params.toString() ? `?${params.toString()}` : \"\"\n    }`,\n    {\n      headers: {\n        \"X-Usuario-Sub\": usuarioSub,\n      },\n      credentials: \"include\",\n    }\n  );\n\n  const payload = await parseJsonSafe(response);\n\n  if (!response.ok) {\n    const message =\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\n      `No pudimos obtener los montos (${endpoint}) (codigo ${response.status}).`;\n    const error = new Error(message);\n    error.status = response.status;\n    throw error;\n  }\n\n  return payload ?? {};\n};\n\nconst fetchMontosPorCategoria = async ({ period } = {}, endpoint) => {\n  const usuarioSub = getSessionUserSub();\n  if (!usuarioSub) {\n    throw new Error(\"No encontramos el usuario en la sesion.\");\n  }\n\n  const params = new URLSearchParams();\n  const fecha = ensurePeriodDate(period);\n  if (fecha) {\n    params.set(\"fecha\", fecha);\n  }\n\n  const response = await fetch(\n    `${API_CONFIG.REGISTRO}/movimientos/resumen/${endpoint}${\n      params.toString() ? `?${params.toString()}` : \"\"\n    }`,\n    {\n      headers: {\n        \"X-Usuario-Sub\": usuarioSub,\n      },\n      credentials: \"include\",\n    }\n  );\n\n  const payload = await parseJsonSafe(response);\n\n  if (!response.ok) {\n    const message =\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\n      `No pudimos obtener los montos por categoria (${endpoint}) (codigo ${response.status}).`;\n    const error = new Error(message);\n    error.status = response.status;\n    throw error;\n  }\n\n  return payload ?? {};\n};\n\nconst fetchConciliacionResumen = async ({ period } = {}) => {\n  const usuarioSub = getSessionUserSub();\n  if (!usuarioSub) {\n    throw new Error(\"No encontramos el usuario en la sesion.\");\n  }\n\n  const params = new URLSearchParams();\n  const fecha = ensurePeriodDate(period);\n  if (fecha) {\n    params.set(\"fecha\", fecha);\n  }\n\n  const response = await fetch(\n    `${API_CONFIG.REGISTRO}/movimientos/resumen/conciliacion${\n      params.toString() ? `?${params.toString()}` : \"\"\n    }`,\n    {\n      headers: {\n        \"X-Usuario-Sub\": usuarioSub,\n      },\n      credentials: \"include\",\n    }\n  );\n\n  const payload = await parseJsonSafe(response);\n\n  if (!response.ok) {\n    const message =\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\n      `No pudimos obtener el resumen de conciliacion (codigo ${response.status}).`;\n    const error = new Error(message);\n    error.status = response.status;\n    throw error;\n  }\n\n  return payload ?? {};\n};\n\nexport const fetchMonthlyIncomes = (options = {}) =>\n  fetchMontosMensuales(options, \"ingresos-mensuales\");\n\nexport const fetchMonthlyExpenses = (options = {}) =>\n  fetchMontosMensuales(options, \"egresos-mensuales\");\n\nexport const fetchIncomeByCategory = (options = {}) =>\n  fetchMontosPorCategoria(options, \"ingresos-categorias\");\n\nexport const fetchExpensesByCategory = (options = {}) =>\n  fetchMontosPorCategoria(options, \"egresos-categorias\");\n\nexport const fetchReconciliationSummary = (options = {}) =>\n  fetchConciliacionResumen(options);\n\r\n\r\n\r\n","import * as React from \"react\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport AddCircleOutlineRoundedIcon from \"@mui/icons-material/AddCircleOutlineRounded\";\r\nimport UploadFileRoundedIcon from \"@mui/icons-material/UploadFileRounded\";\r\nimport AccountBalanceWalletRoundedIcon from \"@mui/icons-material/AccountBalanceWalletRounded\";\r\nimport PublishedWithChangesRoundedIcon from \"@mui/icons-material/PublishedWithChangesRounded\";\r\nimport ReceiptLongRoundedIcon from \"@mui/icons-material/ReceiptLongRounded\";\r\nimport AssessmentRoundedIcon from \"@mui/icons-material/AssessmentRounded\";\r\nimport NotificationsActiveRoundedIcon from \"@mui/icons-material/NotificationsActiveRounded\";\r\n\r\nimport QuickActions from \"./components/QuickActions\";\r\nimport KpiCard from \"./components/KpiCard\";\r\nimport BudgetWidget from \"./components/BudgetWidget\";\r\nimport CashflowWidget from \"./components/CashflowWidget\";\r\nimport LiquidityGapWidget from \"./components/LiquidityGapWidget\";\r\nimport RecentMovementsWidget from \"./components/RecentMovementsWidget\";\r\nimport RecentInvoicesWidget from \"./components/RecentInvoicesWidget\";\r\nimport ReconciliationWidget from \"./components/ReconciliationWidget\";\r\nimport SalesTrendWidget from \"./components/SalesTrendWidget\";\r\nimport SalesByCategoryWidget from \"./components/SalesByCategoryWidget\";\r\nimport InsightsWidget from \"./components/InsightsWidget\";\r\n// import BillingWidget from \"./components/BillingWidget\";\r\nimport { fetchRecentMovements, fetchRecentInvoices } from \"./services/movementsService\";\r\nimport { fetchMonthlySummary, fetchTotalBalance } from \"./services/kpisService\";\r\nimport {\r\n  fetchMonthlyIncomes,\r\n  fetchMonthlyExpenses,\r\n  fetchIncomeByCategory,\r\n  fetchExpensesByCategory,\r\n  fetchReconciliationSummary,\r\n} from \"./services/analyticsService\";\r\nimport useResolvedColorTokens from \"./useResolvedColorTokens\";\r\nimport { formatCurrencyAR } from \"../utils/formatters\";\r\n\r\nconst mockKpis = {\r\n  totalIncomes: 820000,\r\n  totalExpenses: 540000,\r\n  netResult: 280000,\r\n  cashBalance: 1250000,\r\n  cashRunwayDays: 46,\r\n  pendingReceivables: 420000,\r\n  receivablesDueSoon: 160000,\r\n  pendingPayables: 210000,\r\n  payablesOverdue: 65000,\r\n};\r\n\r\nconst mockKpiTrends = {\r\n  totalIncomes: [620000, 680000, 750000, 820000],\r\n  totalExpenses: [430000, 480000, 510000, 540000],\r\n  netResult: [190000, 205000, 240000, 280000],\r\n  cashBalance: [980000, 1080000, 1190000, 1250000],\r\n  pendingReceivables: [360000, 395000, 410000, 420000],\r\n  pendingPayables: [260000, 235000, 215000, 210000],\r\n};\r\n\r\nconst mockSalesTrend = {\r\n  title: \"Ingresos durante el periodo\",\r\n  average: 185000,\r\n  max: { value: 215000, label: \"abr 2025\" },\r\n  min: { value: 142000, label: \"ene 2025\" },\r\n  points: [\r\n    { month: \"ene\", value: 142000 },\r\n    { month: \"feb\", value: 168000 },\r\n    { month: \"mar\", value: 178500 },\r\n    { month: \"abr\", value: 215000 },\r\n    { month: \"may\", value: 204000 },\r\n    { month: \"jun\", value: 198000 },\r\n    { month: \"jul\", value: 191000 },\r\n    { month: \"ago\", value: 199500 },\r\n    { month: \"sep\", value: 188000 },\r\n    { month: \"oct\", value: 194500 },\r\n    { month: \"nov\", value: 187000 },\r\n    { month: \"dic\", value: 181500 },\r\n  ],\r\n};\r\n\r\nconst mockExpensesTrend = {\r\n  title: \"Egresos durante el periodo\",\r\n  average: 142000,\r\n  max: { value: 168000, label: \"mar 2025\" },\r\n  min: { value: 118000, label: \"ene 2025\" },\r\n  points: [\r\n    { month: \"ene\", value: 125000 },\r\n    { month: \"feb\", value: 132000 },\r\n    { month: \"mar\", value: 168000 },\r\n    { month: \"abr\", value: 154000 },\r\n    { month: \"may\", value: 149000 },\r\n    { month: \"jun\", value: 138000 },\r\n    { month: \"jul\", value: 146000 },\r\n    { month: \"ago\", value: 152000 },\r\n    { month: \"sep\", value: 139000 },\r\n    { month: \"oct\", value: 145000 },\r\n    { month: \"nov\", value: 141000 },\r\n    { month: \"dic\", value: 134000 },\r\n  ],\r\n};\r\n\r\nconst mockExpensesByCategory = [\r\n  { category: \"Servicios Bsicos\", value: 54000 },\r\n  { category: \"Vivienda\", value: 76000 },\r\n  { category: \"Transporte\", value: 42000 },\r\n  { category: \"Servicios Financieros\", value: 35500 },\r\n  { category: \"Impuestos y Tasas\", value: 68000 },\r\n  { category: \"Alimentos y Bebidas\", value: 38500 },\r\n  { category: \"Educacin\", value: 29500 },\r\n  { category: \"Salud\", value: 31800 },\r\n];\r\n\r\nconst mockCategoryPerformance = [\r\n  { category: \"Ventas\", value: 385188 },\r\n  { category: \"Servicios\", value: 353625 },\r\n  { category: \"Produccion\", value: 272799 },\r\n  { category: \"Logistica\", value: 199511 },\r\n  { category: \"Marketing\", value: 194480 },\r\n  { category: \"Tecnologia\", value: 193511 },\r\n  { category: \"RRHH\", value: 91909 },\r\n  { category: \"Administracion\", value: 77346 },\r\n];\r\n\r\nconst mockBudget = {\r\n  name: \"Presupuesto anual 2025\",\r\n  slug: \"presupuesto-anual-2025\",\r\n  period: {\r\n    label: \"Octubre 2025\",\r\n    routeParam: \"octubre-2025\",\r\n  },\r\n  categories: [\r\n    { name: \"Ventas\", planned: 850000, actual: 640000 },\r\n    { name: \"Marketing\", planned: 250000, actual: 210000 },\r\n    { name: \"Operaciones\", planned: 300000, actual: 320000 },\r\n    { name: \"RRHH\", planned: 180000, actual: 150000 },\r\n  ],\r\n};\r\n\r\nconst mockCashflow = {\r\n  labels: [\"Hoy\", \"+5d\", \"+10d\", \"+15d\", \"+20d\", \"+25d\", \"+30d\"],\r\n  incomes: [220000, 180000, 210000, 190000, 230000, 200000, 250000],\r\n  expenses: [150000, 160000, 170000, 165000, 175000, 160000, 185000],\r\n  net: [70000, 20000, 40000, 25000, 55000, 40000, 65000],\r\n};\r\n\r\nconst mockDueDates = [\r\n  {\r\n    id: \"afip-01\",\r\n    date: new Date().toISOString(),\r\n    type: \"AFIP\",\r\n    name: \"IVA mensual\",\r\n    amount: 155000,\r\n  },\r\n  {\r\n    id: \"prov-02\",\r\n    date: new Date(Date.now() + 3 * 86400000).toISOString(),\r\n    type: \"Proveedor\",\r\n    name: \"Servicios Cloud\",\r\n    amount: 98000,\r\n  },\r\n  {\r\n    id: \"cli-03\",\r\n    date: new Date(Date.now() + 7 * 86400000).toISOString(),\r\n    type: \"Cliente\",\r\n    name: \"Cobranza Grupo Litoral\",\r\n    amount: 210000,\r\n  },\r\n];\r\n\r\nconst mockTasks = [\r\n  {\r\n    id: \"task-1\",\r\n    title: \"Conciliar Banco Nacin\",\r\n    description: \"Tens 4 movimientos pendientes de revisar.\",\r\n    severity: \"high\",\r\n  },\r\n  {\r\n    id: \"task-2\",\r\n    title: \"Subir comprobantes de AFIP\",\r\n    description: \"Faltan adjuntar comprobantes del ltimo pago.\",\r\n    severity: \"medium\",\r\n  },\r\n  {\r\n    id: \"task-3\",\r\n    title: \"categoriar movimientos\",\r\n    description: \"3 ingresos sin categoria asignada.\",\r\n    severity: \"low\",\r\n  },\r\n];\r\n\r\nconst mockMovements = [\r\n  {\r\n    id: \"mov-1\",\r\n    tipo: \"Egreso\",\r\n    montoTotal: -125000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date().toISOString(),\r\n    categoria: \"Logistica\",\r\n  },\r\n  {\r\n    id: \"mov-2\",\r\n    tipo: \"Ingreso\",\r\n    montoTotal: 185000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date(Date.now() - 86400000).toISOString(),\r\n    categoria: \"Ventas\",\r\n  },\r\n  {\r\n    id: \"mov-3\",\r\n    tipo: \"Egreso\",\r\n    montoTotal: -78000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date(Date.now() - 2 * 86400000).toISOString(),\r\n    categoria: \"Marketing\",\r\n  },\r\n  {\r\n    id: \"mov-4\",\r\n    tipo: \"Transferencia\",\r\n    montoTotal: -45000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date(Date.now() - 3 * 86400000).toISOString(),\r\n    categoria: null,\r\n  },\r\n];\r\n\r\nconst mockReconciliation = {\r\n  periodo: \"2025-10\",\r\n  periodLabel: \"octubre 2025\",\r\n  totalMovimientos: 124,\r\n  conciliados: 96,\r\n  pendientes: 28,\r\n  porcentajeConciliados: 77.4,\r\n  ultimaConciliacion: \"2025-10-28\",\r\n  ultimoPendiente: \"2025-10-30\",\r\n  porTipo: [\r\n    {\r\n      tipo: \"Ingreso\",\r\n      total: 68,\r\n      conciliados: 55,\r\n      pendientes: 13,\r\n      porcentaje: 80.9,\r\n    },\r\n    {\r\n      tipo: \"Egreso\",\r\n      total: 56,\r\n      conciliados: 41,\r\n      pendientes: 15,\r\n      porcentaje: 73.2,\r\n    },\r\n  ],\r\n};\r\n\r\nconst mockBilling = {\r\n  invoices: [\r\n    {\r\n      id: \"fac-01\",\r\n      number: \"A-0003-000125\",\r\n      customer: \"Fbrica El Sol\",\r\n      amount: 145000,\r\n      date: new Date().toISOString(),\r\n    },\r\n    {\r\n      id: \"fac-02\",\r\n      number: \"A-0003-000124\",\r\n      customer: \"Cooperativa Delta\",\r\n      amount: 98000,\r\n      date: new Date(Date.now() - 86400000).toISOString(),\r\n    },\r\n    {\r\n      id: \"fac-03\",\r\n      number: \"B-0001-000543\",\r\n      customer: \"Estudio Contable Sur\",\r\n      amount: 54000,\r\n      date: new Date(Date.now() - 2 * 86400000).toISOString(),\r\n    },\r\n  ],\r\n};\r\n\r\nconst normalizeMovementsError = (error) => {\r\n  if (!error) {\r\n    return \"No pudimos cargar los movimientos.\";\r\n  }\r\n  if (typeof error === \"string\") {\r\n    return error;\r\n  }\r\n  if (error?.message) {\r\n    return error.message;\r\n  }\r\n  return \"No pudimos cargar los movimientos.\";\r\n};\r\n\r\nconst initialDashboardState = {\r\n  kpis: { loading: true, error: null, data: null },\r\n  budget: { loading: true, error: null, data: null },\r\n  cashflow: { loading: true, error: null, data: null },\r\n  dueDates: { loading: true, error: null, data: null },\r\n  tasks: { loading: true, error: null, data: null },\r\n  movements: { loading: true, error: null, data: null },\r\n  invoices: { loading: true, error: null, data: null },\r\n  reconciliation: { loading: true, error: null, data: null },\r\n  billing: { loading: true, error: null, data: null },\r\n  salesTrend: { loading: true, error: null, data: null },\r\n  salesByCategory: { loading: true, error: null, data: null },\r\n  expensesTrend: { loading: true, error: null, data: null },\r\n  expensesByCategory: { loading: true, error: null, data: null },\r\n};\r\n\r\nconst companiesMock = [\"MyCFO Demo\", \"Acme Corp\", \"Globex Latam\"];\r\n\r\nconst getRecentPeriods = (count = 6) =>\r\n  Array.from({ length: count }).map((_, index) => {\r\n    const date = new Date();\r\n    date.setMonth(date.getMonth() - index);\r\n    const label = new Intl.DateTimeFormat(\"es-AR\", {\r\n      month: \"long\",\r\n      year: \"numeric\",\r\n    }).format(date);\r\n    const value = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(\r\n      2,\r\n      \"0\"\r\n    )}`;\r\n    return { label, value };\r\n  });\r\n\r\nconst Dashboard = React.memo(() => {\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const { resolvedMode, paletteVars, primaryTextColor } =\r\n    useResolvedColorTokens();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const [state, setState] = React.useState(initialDashboardState);\r\n  const fetchTimeoutRef = React.useRef();\r\n  const activeRequestRef = React.useRef(0);\r\n  const useMocks = React.useRef(\r\n    process.env.REACT_APP_USE_MOCKS === \"true\"\r\n  ).current;\r\n  const buildMockState = React.useCallback(\r\n    () => ({\r\n      kpis: { loading: false, error: null, data: mockKpis },\r\n      budget: { loading: false, error: null, data: mockBudget },\r\n      cashflow: { loading: false, error: null, data: mockCashflow },\r\n      dueDates: { loading: false, error: null, data: mockDueDates },\r\n      tasks: { loading: false, error: null, data: mockTasks },\r\n      movements: { loading: false, error: null, data: mockMovements },\r\n      invoices: { loading: false, error: null, data: [] },\r\n      reconciliation: { loading: false, error: null, data: mockReconciliation },\r\n      billing: { loading: false, error: null, data: mockBilling },\r\n      salesTrend: { loading: false, error: null, data: mockSalesTrend },\r\n      salesByCategory: {\r\n        loading: false,\r\n        error: null,\r\n        data: mockCategoryPerformance,\r\n      },\r\n      expensesTrend: { loading: false, error: null, data: mockExpensesTrend },\r\n      expensesByCategory: {\r\n        loading: false,\r\n        error: null,\r\n        data: mockExpensesByCategory,\r\n      },\r\n    }),\r\n    []\r\n  );\r\n  const [snackbar, setSnackbar] = React.useState(null);\r\n  const [company, setCompany] = React.useState(companiesMock[0]);\r\n  const periodOptions = React.useMemo(() => getRecentPeriods(6), []);\r\n  const [period, setPeriod] = React.useState(periodOptions[0]?.value ?? \"\");\r\n\r\n  const userDisplayName = React.useMemo(() => {\r\n    if (typeof window === \"undefined\") {\r\n      return \"Usuario\";\r\n    }\r\n    try {\r\n      const storedFullName = sessionStorage.getItem(\"nombre\");\r\n      if (storedFullName && storedFullName.trim()) {\r\n        return storedFullName.trim();\r\n      }\r\n      const storedName = sessionStorage.getItem(\"name\");\r\n      if (storedName && storedName.trim()) {\r\n        return storedName.trim();\r\n      }\r\n      const storedEmail = sessionStorage.getItem(\"email\");\r\n      if (storedEmail && storedEmail.includes(\"@\")) {\r\n        return storedEmail.split(\"@\")[0];\r\n      }\r\n    } catch (error) {\r\n      // Ignoramos errores de acceso al storage\r\n    }\r\n    return \"Usuario\";\r\n  }, []);\r\n\r\n  const loadDashboardData = React.useCallback(() => {\r\n    setState((prev) => {\r\n      const next = {};\r\n      Object.entries(prev).forEach(([key, value]) => {\r\n        next[key] = { ...value, loading: true, error: null };\r\n      });\r\n      return next;\r\n    });\r\n\r\n    clearTimeout(fetchTimeoutRef.current);\r\n\r\n    if (useMocks) {\r\n      fetchTimeoutRef.current = setTimeout(() => {\r\n        setState(buildMockState());\r\n      }, 700);\r\n      return;\r\n    }\r\n\r\n    fetchTimeoutRef.current = undefined;\r\n\r\n    const requestId = activeRequestRef.current + 1;\r\n    activeRequestRef.current = requestId;\r\n\r\n    const applyResult = ({\r\n      movements: movementsState,\r\n      invoices: invoicesState,\r\n      kpis: kpisState,\r\n      salesTrend: salesTrendState,\r\n      salesByCategory: salesByCategoryState,\r\n      expensesTrend: expensesTrendState,\r\n      expensesByCategory: expensesByCategoryState,\r\n      reconciliation: reconciliationState,\r\n    }) => {\r\n      if (activeRequestRef.current !== requestId) {\r\n        return;\r\n      }\r\n      const mockState = buildMockState();\r\n      mockState.movements = movementsState ?? mockState.movements;\r\n      if (invoicesState) {\r\n        mockState.invoices = invoicesState;\r\n      }\r\n      if (kpisState) {\r\n        mockState.kpis = kpisState;\r\n      }\r\n      if (salesTrendState) {\r\n        mockState.salesTrend = salesTrendState;\r\n      }\r\n      if (salesByCategoryState) {\r\n        mockState.salesByCategory = salesByCategoryState;\r\n      }\r\n      if (expensesTrendState) {\r\n        mockState.expensesTrend = expensesTrendState;\r\n      }\r\n      if (expensesByCategoryState) {\r\n        mockState.expensesByCategory = expensesByCategoryState;\r\n      }\r\n      if (reconciliationState) {\r\n        mockState.reconciliation = reconciliationState;\r\n      }\r\n      setState(mockState);\r\n    };\r\n\r\n    const resolveErrorMessage = (reason, fallback) => {\r\n      if (!reason) return fallback;\r\n      if (typeof reason === \"string\") return reason;\r\n      if (reason.message) return reason.message;\r\n      if (reason.mensaje) return reason.mensaje;\r\n      return fallback;\r\n    };\r\n\r\n    const mapTrendResponse = (response, { title, emptyMessage, subheader }) => {\r\n      const datos = Array.isArray(response?.datos) ? response.datos : [];\r\n      const monthShort = new Intl.DateTimeFormat(\"es-AR\", { month: \"short\" });\r\n      const monthLong = new Intl.DateTimeFormat(\"es-AR\", {\r\n        month: \"long\",\r\n        year: \"numeric\",\r\n      });\r\n\r\n      const periodoBase = String(\r\n        response?.periodoBase ?? response?.periodo ?? \"\"\r\n      );\r\n      const [baseYearStr] = periodoBase.split(\"-\");\r\n      const targetYear = Number(baseYearStr) || new Date().getFullYear();\r\n\r\n      const totalsByPeriod = new Map();\r\n      datos.forEach((item) => {\r\n        const periodo = String(item?.periodo ?? \"\");\r\n        const [yearStr, monthStr] = periodo.split(\"-\");\r\n        const yearNum = Number(yearStr);\r\n        const monthNum = Number(monthStr);\r\n        if (Number.isFinite(yearNum) && Number.isFinite(monthNum)) {\r\n          const key = `${yearNum}-${String(monthNum).padStart(2, \"0\")}`;\r\n          totalsByPeriod.set(key, Number(item?.total ?? 0));\r\n        }\r\n      });\r\n\r\n      const fallbackByMonth = datos.reduce((acc, item) => {\r\n        const periodo = String(item?.periodo ?? \"\");\r\n        const [, monthStr] = periodo.split(\"-\");\r\n        const monthNum = Number(monthStr);\r\n        if (Number.isFinite(monthNum) && !acc.has(monthNum)) {\r\n          acc.set(monthNum, Number(item?.total ?? 0));\r\n        }\r\n        return acc;\r\n      }, new Map());\r\n\r\n      const pointsDetailed = Array.from({ length: 12 }, (_, index) => {\r\n        const date = new Date(targetYear, index, 1);\r\n        const key = `${date.getFullYear()}-${String(index + 1).padStart(\r\n          2,\r\n          \"0\"\r\n        )}`;\r\n        let value = totalsByPeriod.get(key);\r\n        if (typeof value === \"undefined\") {\r\n          value = fallbackByMonth.get(index + 1) ?? 0;\r\n        }\r\n        return {\r\n          month: monthShort.format(date),\r\n          fullLabel: monthLong.format(date),\r\n          value,\r\n        };\r\n      });\r\n\r\n      const values = pointsDetailed.map((point) => point.value);\r\n\r\n      // Promedio solo sobre los meses con movimiento distinto de cero,\r\n      // para que no se \"lice\" cuando solo hubo pocos meses con actividad.\r\n      const nonZeroValues = values.filter((val) => val !== 0);\r\n      const average =\r\n        nonZeroValues.length > 0\r\n          ? nonZeroValues.reduce((acc, val) => acc + val, 0) / nonZeroValues.length\r\n          : 0;\r\n      const maxValue = values.length > 0 ? Math.max(...values) : 0;\r\n      const minValue = values.length > 0 ? Math.min(...values) : 0;\r\n      const maxPoint = pointsDetailed.find((point) => point.value === maxValue);\r\n      const minPoint = pointsDetailed.find((point) => point.value === minValue);\r\n\r\n      return {\r\n        title,\r\n        emptyMessage,\r\n        subheader,\r\n        points: pointsDetailed.map(({ month, value }) => ({ month, value })),\r\n        average,\r\n        max: {\r\n          value: maxValue,\r\n          label: maxPoint ? maxPoint.fullLabel : \"--\",\r\n        },\r\n        min: {\r\n          value: minValue,\r\n          label: minPoint ? minPoint.fullLabel : \"--\",\r\n        },\r\n      };\r\n    };\r\n\r\n    const mapCategoryResponse = (response) => {\r\n      const categorias = Array.isArray(response?.categorias)\r\n        ? response.categorias\r\n        : [];\r\n      return categorias.map((item) => ({\r\n        category: item?.categoria ?? \"Sin categoria\",\r\n        value: Number(item?.total ?? 0),\r\n      }));\r\n    };\r\n\r\n    const mapConciliationResponse = (response) => {\r\n      if (!response) {\r\n        return null;\r\n      }\r\n\r\n      const total = Number(response.totalMovimientos ?? 0);\r\n      const conciliados = Number(response.conciliados ?? 0);\r\n      const pendientes =\r\n        response.pendientes !== undefined\r\n          ? Number(response.pendientes ?? 0)\r\n          : Math.max(total - conciliados, 0);\r\n      const porcentaje =\r\n        response.porcentajeConciliados !== undefined &&\r\n        response.porcentajeConciliados !== null\r\n          ? Number(response.porcentajeConciliados)\r\n          : total > 0\r\n          ? (conciliados * 100) / total\r\n          : 0;\r\n\r\n      const periodo = String(response.periodo ?? \"\");\r\n      let periodLabel = periodo || \"Periodo actual\";\r\n      const [yearStr, monthStr] = periodo.split(\"-\");\r\n      const monthIndex = Number(monthStr) - 1;\r\n      const yearNum = Number(yearStr);\r\n      const monthNames = [\r\n        \"enero\",\r\n        \"febrero\",\r\n        \"marzo\",\r\n        \"abril\",\r\n        \"mayo\",\r\n        \"junio\",\r\n        \"julio\",\r\n        \"agosto\",\r\n        \"septiembre\",\r\n        \"octubre\",\r\n        \"noviembre\",\r\n        \"diciembre\",\r\n      ];\r\n      if (\r\n        monthIndex >= 0 &&\r\n        monthIndex < monthNames.length &&\r\n        Number.isFinite(yearNum)\r\n      ) {\r\n        periodLabel = `${monthNames[monthIndex]} ${yearNum}`;\r\n      }\r\n\r\n      const porTipoRaw = Array.isArray(response.porTipo)\r\n        ? response.porTipo\r\n        : [];\r\n      const porTipo = porTipoRaw.map((item) => {\r\n        const totalTipo = Number(item?.total ?? 0);\r\n        const conciliadosTipo = Number(item?.conciliados ?? 0);\r\n        const pendientesTipo =\r\n          item?.pendientes !== undefined\r\n            ? Number(item.pendientes ?? 0)\r\n            : Math.max(totalTipo - conciliadosTipo, 0);\r\n        const porcentajeTipo =\r\n          totalTipo > 0 ? (conciliadosTipo * 100) / totalTipo : 0;\r\n        return {\r\n          tipo: item?.tipo ?? \"Sin tipo\",\r\n          total: totalTipo,\r\n          conciliados: conciliadosTipo,\r\n          pendientes: pendientesTipo,\r\n          porcentaje: porcentajeTipo,\r\n        };\r\n      });\r\n\r\n      return {\r\n        periodo,\r\n        periodLabel,\r\n        totalMovimientos: total,\r\n        conciliados,\r\n        pendientes,\r\n        porcentajeConciliados: porcentaje,\r\n        ultimaConciliacion: response.ultimaConciliacion ?? null,\r\n        ultimoPendiente: response.ultimoPendiente ?? null,\r\n        porTipo,\r\n      };\r\n    };\r\n\r\n    (async () => {\r\n      const [\r\n        movementsResult,\r\n        invoicesResult,\r\n        summaryResult,\r\n        totalBalanceResult,\r\n        incomesTrendResult,\r\n        incomesCategoryResult,\r\n        expensesTrendResult,\r\n        expensesCategoryResult,\r\n        reconciliationResult,\r\n      ] = await Promise.allSettled([\r\n        fetchRecentMovements({ limit: 6 }),\r\n        fetchRecentInvoices({ limit: 6 }),\r\n        fetchMonthlySummary({ period }),\r\n        fetchTotalBalance(),\r\n        fetchMonthlyIncomes({ period, months: 12 }),\r\n        fetchIncomeByCategory({ period }),\r\n        fetchMonthlyExpenses({ period, months: 12 }),\r\n        fetchExpensesByCategory({ period }),\r\n        fetchReconciliationSummary({ period }),\r\n      ]);\r\n\r\n      const movementsState =\r\n        movementsResult.status === \"fulfilled\"\r\n          ? { loading: false, error: null, data: movementsResult.value }\r\n          : {\r\n              loading: false,\r\n              error: normalizeMovementsError(movementsResult.reason),\r\n              data: null,\r\n            };\r\n\r\n      const invoicesState =\r\n        invoicesResult.status === \"fulfilled\"\r\n          ? { loading: false, error: null, data: invoicesResult.value }\r\n          : {\r\n              loading: false,\r\n              error: resolveErrorMessage(\r\n                invoicesResult.reason,\r\n                \"No pudimos obtener las facturas recientes.\"\r\n              ),\r\n              data: null,\r\n            };\r\n\r\n      let kpisState = null;\r\n      if (summaryResult.status === \"fulfilled\") {\r\n        const summary = summaryResult.value;\r\n        kpisState = {\r\n          loading: false,\r\n          error: null,\r\n          data: {\r\n            totalIncomes: summary.totalIncomes,\r\n            totalExpenses: summary.totalExpenses,\r\n            netResult: summary.netResult,\r\n            period: summary.period,\r\n            periodLabel: summary.periodLabel,\r\n            movementsCount: summary.movementsCount,\r\n          },\r\n        };\r\n        if (totalBalanceResult.status === \"fulfilled\") {\r\n          kpisState.data.totalBalance = totalBalanceResult.value.totalBalance;\r\n        }\r\n      } else {\r\n        const reason = summaryResult.reason;\r\n        const message =\r\n          (reason && (reason.message || reason.mensaje)) ||\r\n          \"No pudimos obtener el resumen mensual.\";\r\n        kpisState = {\r\n          loading: false,\r\n          error: message,\r\n          data: null,\r\n        };\r\n      }\r\n\r\n      const salesTrendState =\r\n        incomesTrendResult.status === \"fulfilled\"\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapTrendResponse(incomesTrendResult.value, {\r\n                title: \"Ingresos durante el periodo\",\r\n                emptyMessage: \"No hay ingresos registrados en este periodo.\",\r\n                subheader:\r\n                  \"Serie mensual de ingresos registrados en los ultimos 12 meses.\",\r\n              }),\r\n            }\r\n          : {\r\n              loading: false,\r\n              error: resolveErrorMessage(\r\n                incomesTrendResult.reason,\r\n                \"No pudimos obtener la serie de ingresos.\"\r\n              ),\r\n              data: null,\r\n            };\r\n\r\n      const salesByCategoryState =\r\n        incomesCategoryResult.status === \"fulfilled\"\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapCategoryResponse(incomesCategoryResult.value),\r\n            }\r\n          : {\r\n              loading: false,\r\n              error: resolveErrorMessage(\r\n                incomesCategoryResult.reason,\r\n                \"No pudimos obtener las ventas por categoria.\"\r\n              ),\r\n              data: null,\r\n            };\r\n\r\n      const expensesTrendState =\r\n        expensesTrendResult.status === \"fulfilled\"\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapTrendResponse(expensesTrendResult.value, {\r\n                title: \"Egresos durante el periodo\",\r\n                emptyMessage: \"No hay egresos registrados en este periodo.\",\r\n                subheader:\r\n                  \"Serie mensual de egresos registrados en los ultimos 12 meses.\",\r\n              }),\r\n            }\r\n          : {\r\n              loading: false,\r\n              error: resolveErrorMessage(\r\n                expensesTrendResult.reason,\r\n                \"No pudimos obtener la serie de egresos.\"\r\n              ),\r\n              data: null,\r\n            };\r\n\r\n      const expensesByCategoryState =\r\n        expensesCategoryResult.status === \"fulfilled\"\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapCategoryResponse(expensesCategoryResult.value),\r\n            }\r\n          : {\r\n              loading: false,\r\n              error: resolveErrorMessage(\r\n                expensesCategoryResult.reason,\r\n                \"No pudimos obtener los egresos por categoria.\"\r\n              ),\r\n              data: null,\r\n            };\r\n\r\n      const reconciliationState =\r\n        reconciliationResult.status === \"fulfilled\"\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapConciliationResponse(reconciliationResult.value),\r\n            }\r\n          : {\r\n              loading: false,\r\n              error: resolveErrorMessage(\r\n                reconciliationResult.reason,\r\n                \"No pudimos obtener el resumen de conciliacion.\"\r\n              ),\r\n              data: null,\r\n            };\r\n\r\n      applyResult({\r\n        movements: movementsState,\r\n        kpis: kpisState,\r\n        salesTrend: salesTrendState,\r\n        salesByCategory: salesByCategoryState,\r\n        expensesTrend: expensesTrendState,\r\n        expensesByCategory: expensesByCategoryState,\r\n        reconciliation: reconciliationState,\r\n      });\r\n    })();\r\n  }, [buildMockState, useMocks, period]);\r\n\r\n  React.useEffect(() => {\r\n    loadDashboardData();\r\n    return () => {\r\n      clearTimeout(fetchTimeoutRef.current);\r\n      activeRequestRef.current += 1;\r\n    };\r\n  }, [loadDashboardData]);\r\n\r\n  const handleNavigate = React.useCallback(\r\n    (path, params) => {\r\n      if (!path) return;\r\n      if (params) {\r\n        const searchParams = new URLSearchParams(params);\r\n        navigate({ pathname: path, search: `?${searchParams.toString()}` });\r\n      } else {\r\n        navigate(path);\r\n      }\r\n      if (typeof window !== \"undefined\") {\r\n        window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n      }\r\n    },\r\n    [navigate]\r\n  );\r\n\r\n  const quickActions = React.useMemo(\r\n    () => [\r\n      {\r\n        id: \"movement\",\r\n        label: \"Cargar movimiento\",\r\n        icon: <AddCircleOutlineRoundedIcon />,\r\n        action: () => handleNavigate(\"/carga\"),\r\n      },\r\n      {\r\n        id: \"excel\",\r\n        label: \"Importar Excel\",\r\n        icon: <UploadFileRoundedIcon />,\r\n        action: () => handleNavigate(\"/carga-movimientos\"),\r\n      },\r\n      {\r\n        id: \"mp\",\r\n        label: \"Mercado Pago\",\r\n        icon: <AccountBalanceWalletRoundedIcon />,\r\n        action: () => handleNavigate(\"/mercado-pago\"),\r\n      },\r\n      {\r\n        id: \"reconcile\",\r\n        label: \"Conciliar\",\r\n        icon: <PublishedWithChangesRoundedIcon />,\r\n        action: () => handleNavigate(\"/conciliacion\"),\r\n      },\r\n      {\r\n        id: \"invoice\",\r\n        label: \"Cargar factura\",\r\n        icon: <ReceiptLongRoundedIcon />,\r\n        action: () => handleNavigate(\"/carga/factura\"),\r\n      },\r\n      {\r\n        id: \"budget\",\r\n        label: \"Nuevo presupuesto\",\r\n        icon: <AssessmentRoundedIcon />,\r\n        action: () => handleNavigate(\"/presupuestos/nuevo\"),\r\n      },\r\n      {\r\n        id: \"reminder\",\r\n        label: \"Recordatorio\",\r\n        icon: <NotificationsActiveRoundedIcon />,\r\n        action: () => handleNavigate(\"/recordatorios\"),\r\n      },\r\n    ],\r\n    [handleNavigate]\r\n  );\r\n\r\n  const handleQuickAction = (action) => {\r\n    if (action?.action) {\r\n      action.action();\r\n    } else {\r\n      setSnackbar({\r\n        severity: \"info\",\r\n        message: `${action?.label ?? \"Accin\"} en desarrollo.`,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCloseSnackbar = (_, reason) => {\r\n    if (reason === \"clickaway\") return;\r\n    setSnackbar(null);\r\n  };\r\n\r\n  // const showMessage = React.useCallback((message, severity = \"success\") => {\r\n  //   setSnackbar({ message, severity });\r\n  // }, []);\r\n\r\n  const kpiCards = React.useMemo(() => {\r\n    const data = state.kpis.data;\r\n\r\n    return [\r\n      {\r\n        id: \"totalIncomes\",\r\n        title: \"Ingresos Totales Mensuales\",\r\n        value: data?.totalIncomes ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      {\r\n        id: \"totalExpenses\",\r\n        title: \"Egresos Totales Mensuales\",\r\n        value: data?.totalExpenses ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      {\r\n        id: \"netResult\",\r\n        title: \"Resultado Neto Mensuales\",\r\n        value: data?.netResult ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      {\r\n        id: \"totalBalance\",\r\n        title: \"Dinero Total\",\r\n        value: data?.totalBalance ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      // {\r\n      //   id: \"cashBalance\",\r\n      //   title: \"Saldo de caja\",\r\n      //    value: data.cashBalance,\r\n      //    formatter: formatCurrencyAR,\r\n      //    trend: mockKpiTrends.cashBalance,\r\n      //    trendColor: theme.palette.info.main,\r\n      //    secondaryLabel: \"Dias de cobertura\",\r\n      //    secondaryValue: data.cashRunwayDays,\r\n      //    secondaryFormatter: formatDays,\r\n      // },\r\n      // {\r\n      //   id: \"pendingReceivables\",\r\n      //   title: \"Cobros pendientes (30 dias)\",\r\n      //   value: data.pendingReceivables,\r\n      //   formatter: formatCurrencyAR,\r\n      //   trend: mockKpiTrends.pendingReceivables,\r\n      //   trendColor: theme.palette.primary.main,\r\n      //   secondaryLabel: \"Por vencer 7d\",\r\n      //   secondaryValue: data.receivablesDueSoon,\r\n      //   secondaryFormatter: formatCurrencyAR,\r\n      // },\r\n      // {\r\n      //   id: \"pendingPayables\",\r\n      //   title: \"Pagos pendientes (30 dias)\",\r\n      //   value: data.pendingPayables,\r\n      //   formatter: formatCurrencyAR,\r\n      //   trend: mockKpiTrends.pendingPayables,\r\n      //   trendColor: theme.palette.warning.main,\r\n      //   secondaryLabel: \"Vencidos\",\r\n      //   secondaryValue: data.payablesOverdue,\r\n      //   secondaryFormatter: formatCurrencyAR,\r\n      // },\r\n    ];\r\n  }, [state.kpis.data]);\r\n\r\n  const quickActionsLoading = state.kpis.loading && !state.kpis.data;\r\n\r\n  const quickActionsSx = React.useMemo(\r\n    () => ({\r\n      position: { xs: \"relative\", md: \"sticky\" },\r\n      top: { md: theme.spacing(1) },\r\n      zIndex: theme.zIndex.appBar - 1,\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n    }),\r\n    [theme]\r\n  );\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width: \"100%\",\r\n        maxWidth: 1650,\r\n        mx: \"auto\",\r\n        px: { xs: 2, sm: 3, md: 4, lg: 6 },\r\n        pb: 6,\r\n      }}\r\n    >\r\n      <Stack spacing={3} sx={{ width: \"100%\" }}>\r\n        <Stack\r\n          direction={{ xs: \"column\", md: \"row\" }}\r\n          spacing={2}\r\n          justifyContent=\"space-between\"\r\n          alignItems={{ xs: \"flex-start\", md: \"center\" }}\r\n          sx={{ width: \"100%\" }}\r\n        >\r\n          <Box>\r\n            <Typography variant=\"h4\" fontWeight={600}>\r\n              Hola, {userDisplayName}\r\n            </Typography>\r\n            <Typography variant=\"body2\" sx={{ color: primaryTextColor }}>\r\n              Todo lo importante de tu cuenta, en un solo lugar.\r\n            </Typography>\r\n          </Box>\r\n          {/* <Stack direction={{ xs: \"column\", sm: \"row\" }} spacing={2} sx={{ width: { xs: \"100%\", sm: \"auto\" } }}>\r\n            <TextField\r\n              select\r\n              label=\"Empresa\"\r\n              value={company}\r\n              onChange={(event) => setCompany(event.target.value)}\r\n              size=\"small\"\r\n              sx={{ minWidth: { xs: \"100%\", sm: 200 } }}\r\n            >\r\n              {companiesMock.map((option) => (\r\n                <MenuItem key={option} value={option}>\r\n                  {option}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n            <TextField\r\n              select\r\n              label=\"Perodo\"\r\n              value={period}\r\n              onChange={(event) => setPeriod(event.target.value)}\r\n              size=\"small\"\r\n              sx={{ minWidth: { xs: \"100%\", sm: 200 } }}\r\n            >\r\n              {periodOptions.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n          </Stack> */}\r\n        </Stack>\r\n\r\n        <Box sx={quickActionsSx}>\r\n          <QuickActions\r\n            actions={quickActions}\r\n            loading={quickActionsLoading}\r\n            onAction={handleQuickAction}\r\n          />\r\n        </Box>\r\n\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ maxWidth: { xs: \"100%\", md: 1600 }, mx: \"auto\" }}\r\n        >\r\n          {kpiCards.map((card) => (\r\n            <Grid item xs={12} sm={4} key={card.id}>\r\n              <KpiCard\r\n                title={card.title}\r\n                value={card.value}\r\n                formatter={card.formatter}\r\n                secondaryLabel={card.secondaryLabel}\r\n                secondaryValue={card.secondaryValue}\r\n                secondaryFormatter={card.secondaryFormatter}\r\n                trend={card.trend}\r\n                trendColor={card.trendColor}\r\n                loading={state.kpis.loading && !state.kpis.data}\r\n                error={state.kpis.error}\r\n                onRetry={loadDashboardData}\r\n              />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={3}\r\n          justifyContent=\"center\"\r\n          sx={{ width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item xs={12} md={6}>\r\n            <Box sx={{ width: \"100%\", maxWidth: 640, mx: \"auto\" }}>\r\n              <SalesTrendWidget\r\n                data={\r\n                  state.salesTrend.data ?? {\r\n                    title: \"Ingresos durante el periodo\",\r\n                    points: [],\r\n                    average: 0,\r\n                    max: { value: 0, label: \"--\" },\r\n                    min: { value: 0, label: \"--\" },\r\n                  }\r\n                }\r\n                loading={state.salesTrend.loading && !state.salesTrend.data}\r\n                error={state.salesTrend.error}\r\n                onNavigate={() => handleNavigate(\"/reportes/ventas\")}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Box sx={{ width: \"100%\", maxWidth: 640, mx: \"auto\" }}>\r\n              <SalesTrendWidget\r\n                data={\r\n                  state.expensesTrend.data ?? {\r\n                    title: \"Egresos durante el periodo\",\r\n                    points: [],\r\n                    average: 0,\r\n                    max: { value: 0, label: \"--\" },\r\n                    min: { value: 0, label: \"--\" },\r\n                  }\r\n                }\r\n                loading={\r\n                  state.expensesTrend.loading && !state.expensesTrend.data\r\n                }\r\n                error={state.expensesTrend.error}\r\n                emptyMessage=\"No hay egresos registrados en este periodo.\"\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={3}\r\n          justifyContent=\"center\"\r\n          sx={{ width: \"100%\", maxWidth: 1600, mx: \"auto\", mt: 1 }}\r\n        >\r\n          <Grid item xs={12} md={6}>\r\n            <Box sx={{ width: \"100%\", maxWidth: 640, mx: \"auto\" }}>\r\n              <SalesByCategoryWidget\r\n                data={state.salesByCategory.data ?? []}\r\n                loading={\r\n                  state.salesByCategory.loading && !state.salesByCategory.data\r\n                }\r\n                error={state.salesByCategory.error}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Box sx={{ width: \"100%\", maxWidth: 640, mx: \"auto\" }}>\r\n              <SalesByCategoryWidget\r\n                data={state.expensesByCategory.data ?? []}\r\n                loading={\r\n                  state.expensesByCategory.loading &&\r\n                  !state.expensesByCategory.data\r\n                }\r\n                error={state.expensesByCategory.error}\r\n                emptyMessage=\"No hay egresos por categoria en este periodo.\"\r\n                title=\"Egresos por categorias\"\r\n                subtitle=\"Distribucion anual por segmento\"\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ mt: 1, width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item xs={12} md={4}>\r\n            <BudgetWidget\r\n              companyId={company}\r\n              period={period}\r\n              data={state.budget.data}\r\n              loading={state.budget.loading && !state.budget.data}\r\n              error={state.budget.error}\r\n              onRetry={loadDashboardData}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} md={4}>\r\n            {/* Seccin comparativa Caja vs Devengado del ltimo mes */}\r\n            <LiquidityGapWidget />\r\n          </Grid>\r\n          <Grid item xs={12} md={4}>\r\n            <ReconciliationWidget\r\n              data={state.reconciliation.data}\r\n              loading={\r\n                state.reconciliation.loading && !state.reconciliation.data\r\n              }\r\n              error={state.reconciliation.error}\r\n              onRetry={loadDashboardData}\r\n              onNavigate={(account) =>\r\n                handleNavigate(\r\n                  \"/conciliacion\",\r\n                  account ? { cuenta: account } : undefined\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n\r\n        {/* Bloque de IA / insights a lo ancho al final */}\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ mt: 1, width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item xs={12} md={6}>\r\n            <RecentMovementsWidget\r\n              data={state.movements.data}\r\n              loading={state.movements.loading && !state.movements.data}\r\n              error={state.movements.error}\r\n              onRetry={loadDashboardData}\r\n              onNavigate={() => handleNavigate(\"/ver-movimientos\")}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <RecentInvoicesWidget\r\n              data={state.invoices?.data ?? null}\r\n              loading={state.invoices?.loading && !state.invoices?.data}\r\n              error={state.invoices?.error ?? null}\r\n              onRetry={loadDashboardData}\r\n              onNavigate={() => handleNavigate(\"/facturas\")}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ mt: 1, width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item xs={12} md={10}>\r\n            <Box sx={{ width: \"100%\", mx: \"auto\" }}>\r\n              <InsightsWidget />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n          <Button variant=\"text\" size=\"small\" onClick={loadDashboardData}>\r\n            Recargar datos de Dashboard\r\n          </Button>\r\n        </Box>\r\n      </Stack>\r\n\r\n      <Snackbar\r\n        open={Boolean(snackbar)}\r\n        autoHideDuration={4000}\r\n        onClose={handleCloseSnackbar}\r\n        anchorOrigin={{\r\n          vertical: isMobile ? \"top\" : \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n      >\r\n        {snackbar ? (\r\n          <Alert\r\n            onClose={handleCloseSnackbar}\r\n            severity={snackbar.severity ?? \"info\"}\r\n            variant=\"filled\"\r\n            sx={{ width: \"100%\" }}\r\n          >\r\n            {snackbar.message}\r\n          </Alert>\r\n        ) : null}\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n});\r\n\r\nexport default Dashboard;\r\n"],"names":["currencyFormatterAR","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","formatCurrencyAR","value","fallback","arguments","length","undefined","numericValue","Number","isNaN","format","formatPercentage","fractionDigits","concat","toFixed","http","axios","create","PRONOSTICO_BASE_URL","URL_CONFIG","PRONOSTICO","cognitoPoolConfig","UserPoolId","process","ClientId","refreshPromise","hasForcedLogout","isPronosticoRequest","url","Boolean","String","startsWith","safeSessionGet","key","sessionStorage","getItem","err","console","warn","safeSessionSet","setItem","clearSessionAndRedirect","clear","_unused","sessionService","limpiarSesion","window","location","href","refreshTokens","refreshTokenValue","cognitoUser","buildCognitoUser","username","pool","CognitoUserPool","CognitoUser","Username","Pool","Promise","reject","Error","refreshToken","CognitoRefreshToken","RefreshToken","resolve","refreshSession","session","nextAccessToken","getAccessToken","getJwtToken","nextIdToken","getIdToken","nextRefreshToken","getRefreshToken","getToken","interceptors","request","use","config","accessToken","_config$headers","headers","Authorization","usuarioSub","response","async","error","status","__isRetryRequest","_config$headers2","newAccessToken","then","token","catch","refreshError","useResolvedColorTokens","_ref","_theme$vars$palette","_theme$vars","_ref2","_paletteVars$common$w","_paletteVars$common","_paletteVars$text","_ref3","_paletteVars$common$b","_paletteVars$common2","_paletteVars$text2","_paletteVars$text$sec","_paletteVars$text3","theme","useTheme","mode","systemMode","useColorScheme","resolvedMode","palette","paletteVars","vars","primaryTextColor","common","white","text","primary","black","secondaryTextColor","secondary","actions","loading","onAction","isDarkMode","_jsx","Card","variant","sx","width","children","_jsxs","CardContent","display","flexDirection","gap","Skeleton","Box","Array","from","map","_","index","height","backdropFilter","borderRadius","mx","alignItems","flexWrap","xs","md","overflowX","pb","justifyContent","action","Button","color","startIcon","icon","onClick","_objectSpread","flexShrink","px","py","textTransform","minWidth","fontWeight","label","id","defaultFormatter","title","formatter","secondaryLabel","secondaryValue","secondaryFormatter","trend","trendColor","onRetry","mt","Alert","severity","Typography","whiteSpace","textAlign","flexGrow","component","monthLabels","formatMonthLabel","parts","split","year","monthIndex","isFinite","formatDateRange","to","startLabel","endLabel","toSlug","name","encodeURIComponent","trim","toLowerCase","replace","parseYearMonthStart","Date","isBudgetActiveOnDate","budget","reference","desde","start","getFullYear","getMonth","parseYearMonthEnd","hasta","valueToNumber","parsed","nested","buildCategories","totals","categories","planned","ingresoEstimado","actual","ingresoReal","egresoEstimado","egresoReal","Math","abs","saldoEstimado","saldoReal","push","normalizeError","_err$response","_err$response$data","data","message","_budget$categories","companyId","period","externalLoading","externalError","navigate","useNavigate","setLoading","React","setError","setBudget","useMocks","REACT_APP_USE_MOCKS","baseURL","API_CONFIG","referenceDate","_periodToDate","periodToDate","loadBudgetData","mock","_mock$id","_mock$desde","_mock$hasta","_mock$period","_mock$desde2","_mock$hasta2","slug","nombre","rangeLabel","isArray","transformMockBudget","params","URLSearchParams","set","get","toString","vigente","payload","content","find","item","totalsResponse","totales","aggregated","reduce","acc","items","handleRetry","goToList","goToNew","goToDetail","CardHeader","subheader","titleTypographyProps","subheaderTypographyProps","Stack","direction","mb","filter","join","spacing","ratio","getStatusColor","rawPercentage","limitedProgress","min","progress","max","Chip","size","LinearProgress","backgroundColor","Divider","my","CardActions","disabled","v","LiquidityGapWidget","setData","baseUrl","REPORTE","now","month","sub","fetchCash","fetch","r","ok","json","arr","registros","ingresos","tipo","fechaEmision","a","montoTotal","egresos","fetchAccrual","_json$ingresosMensual","_json$egresosMensuale","idx","ingresosMensuales","egresosMensuales","all","cash","accrual","dataset","Reales","Devengado","finally","_Fragment","ResponsiveContainer","BarChart","margin","top","right","bottom","left","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","YAxis","Tooltip","Legend","Bar","fill","ChipLike","_paletteVars$action$h","_paletteVars$action","chipBackground","hover","padding","background","typeStyles","ingreso","egreso","deuda","acreencia","transferencia","formatAmount","numeric","toLocaleString","formatDate","date","getTime","toLocaleDateString","day","onNavigate","cardHeaderTypography","movements","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","movement","_movement$id","_movement$tipo","_movement$montoTotal","categoria","amountColor","typeStyle","_typeStyles$key","getTypeStyle","border","moneda","venta","compra","invoices","invoice","_invoice$id","_invoice$tipoFactura","_invoice$numeroDocume","_invoice$montoTotal","tipoFactura","numero","numeroDocumento","cliente","compradorNombre","vendedorNombre","numberFormatter","percentFormatter","clampPercent","formatPercent","_summary$totalMovimie","_summary$conciliados","_summary$pendientes","summary","porcentajeConciliados","porTipo","sort","b","_b$total","_a$total","total","conciliadosPercent","totalMovimientos","conciliados","pendientesPercent","pendientes","renderMetric","helper","p","borderColor","flex","periodLabel","sm","ultimaConciliacion","ultimoPendiente","_item$porcentaje","_item$tipo","_item$tipo2","_item$conciliados","_item$total","itemProgress","porcentaje","formatCurrency","_data$points","_data$title3","_data$subheader","_data$max","_data$max$label","_data$max2","_data$min","_data$min$label","_data$min2","emptyMessage","chartContainerRef","chartWidth","setChartWidth","effectiveWidth","_data$title","_data$title2","element","current","updateWidth","offsetWidth","getBoundingClientRect","ResizeObserver","observer","observe","disconnect","addEventListener","removeEventListener","points","xAxis","monthLabel","raw","DateTimeFormat","normalized","dictionary","ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic","january","february","march","april","june","july","august","september","october","november","december","parse","seriesValues","_item$value","noDataMessage","hasData","hasNegative","some","hasPositive","rawMin","rawMax","yMin","yMax","limit","minHeight","pr","pt","rowGap","letterSpacing","flexItem","orientation","alignSelf","average","ref","LineChart","series","type","area","curve","main","areaStyle","alpha","showMark","valueFormatter","lineStyle","strokeWidth","yAxis","tickNumber","tickLabelStyle","fontSize","scaleType","transform","tickLabelSpacing","grid","vertical","horizontal","overflow","paper","opacity","slotProps","legend","hidden","tooltip","showTooltip","typography","_topCategory","_topCategory$category","_topCategory2","_bottomCategory","_bottomCategory$categ","_bottomCategory2","subtitle","safeData","_item$category","category","values","hasNegativeValues","hasPositiveValues","topCategory","bottomCategory","_sorted$","_sorted","sum","sorted","InsightsWidget","useDeepSeek","setUseDeepSeek","summaryLines","diagnostico_corto","line","senalesEntries","senales","Object","entries","detalleLines","detalles","riesgos","riesgos_clave","tips","alerta","charAt","toUpperCase","slice","FormControlLabel","control","Switch","checked","onChange","e","target","IA","res","method","DEFAULT_LIMIT","getSessionUserSub","toNumber","extractContent","mapMovement","_item$id","_ref4","_ref5","_item$montoTotal","_ref6","_item$moneda","_ref7","_ref8","_item$fechaEmision","_ref9","_ref0","_ref1","_item$categoria","uuid","tipoMovimiento","tipoOperacion","monto","importe","monedaCodigo","fecha","fechaRegistro","categoriaNombre","categoriaDescripcion","fetchRecentMovements","safeLimit","page","sortBy","sortDir","REGISTRO","credentials","mensaje","mapInvoice","_ref10","_item$id2","_item$tipoFactura","_item$numeroDocumento","_item$montoTotal2","_item$moneda2","_item$fechaEmision2","_item$compradorNombre","_item$vendedorNombre","idDocumento","fetchRecentInvoices","formatPeriodLabel","fetchMonthlySummary","_payload$organizacion","_payload","_payload$periodo","_payload2","_payload3","_payload$periodoInici","_payload4","_payload$periodoFin","_payload5","_payload6","_payload7","_payload8","_payload$totalMovimie","_payload9","organizationId","organizacionId","periodo","periodStart","periodoInicio","periodEnd","periodoFin","totalIncomes","ingresosTotales","totalExpenses","egresosTotales","netResult","resultadoNeto","movementsCount","fetchTotalBalance","_payload$organizacion2","_payload0","_payload1","totalBalance","saldoTotal","parseJsonSafe","ensurePeriodDate","fetchMontosMensuales","months","endpoint","fetchMontosPorCategoria","fetchMonthlyIncomes","fetchMonthlyExpenses","fetchIncomeByCategory","fetchExpensesByCategory","fetchReconciliationSummary","fetchConciliacionResumen","mockKpis","cashBalance","cashRunwayDays","pendingReceivables","receivablesDueSoon","pendingPayables","payablesOverdue","mockSalesTrend","mockExpensesTrend","mockExpensesByCategory","mockCategoryPerformance","mockBudget","routeParam","mockCashflow","labels","incomes","expenses","net","mockDueDates","toISOString","amount","mockTasks","description","mockMovements","mockReconciliation","mockBilling","number","customer","initialDashboardState","kpis","cashflow","dueDates","tasks","reconciliation","billing","salesTrend","salesByCategory","expensesTrend","expensesByCategory","companiesMock","_periodOptions$0$valu","_periodOptions$","_state$salesTrend$dat","_state$expensesTrend$","_state$salesByCategor","_state$expensesByCate","_state$invoices$data","_state$invoices","_state$invoices2","_state$invoices3","_state$invoices$error","_state$invoices4","_snackbar$severity","isMobile","useMediaQuery","breakpoints","down","state","setState","fetchTimeoutRef","activeRequestRef","buildMockState","snackbar","setSnackbar","company","setCompany","periodOptions","count","setMonth","padStart","getRecentPeriods","setPeriod","userDisplayName","storedFullName","storedName","storedEmail","includes","loadDashboardData","prev","next","forEach","clearTimeout","setTimeout","requestId","resolveErrorMessage","reason","mapTrendResponse","_response$periodoBase","datos","monthShort","monthLong","periodoBase","baseYearStr","targetYear","totalsByPeriod","Map","_item$periodo","yearStr","monthStr","yearNum","monthNum","fallbackByMonth","_item$periodo2","_item$total2","has","pointsDetailed","_fallbackByMonth$get","fullLabel","point","nonZeroValues","val","maxValue","minValue","maxPoint","minPoint","mapCategoryResponse","categorias","_item$total3","mapConciliationResponse","_response$totalMovimi","_response$conciliados","_response$pendientes","_response$periodo","_response$ultimaConci","_response$ultimoPendi","monthNames","_item$total4","_item$pendientes","totalTipo","conciliadosTipo","pendientesTipo","porcentajeTipo","movementsResult","invoicesResult","summaryResult","totalBalanceResult","incomesTrendResult","incomesCategoryResult","expensesTrendResult","expensesCategoryResult","reconciliationResult","allSettled","movementsState","kpisState","invoicesState","salesTrendState","salesByCategoryState","expensesTrendState","expensesByCategoryState","reconciliationState","mockState","applyResult","handleNavigate","path","searchParams","pathname","search","scrollTo","behavior","quickActions","AddCircleOutlineRoundedIcon","UploadFileRoundedIcon","AccountBalanceWalletRoundedIcon","PublishedWithChangesRoundedIcon","ReceiptLongRoundedIcon","AssessmentRoundedIcon","NotificationsActiveRoundedIcon","handleCloseSnackbar","kpiCards","_data$totalIncomes","_data$totalExpenses","_data$netResult","_data$totalBalance","quickActionsLoading","quickActionsSx","position","zIndex","appBar","maxWidth","lg","QuickActions","_action$label","Grid","container","card","KpiCard","SalesTrendWidget","SalesByCategoryWidget","BudgetWidget","ReconciliationWidget","account","cuenta","RecentMovementsWidget","RecentInvoicesWidget","Snackbar","open","autoHideDuration","onClose","anchorOrigin"],"sourceRoot":""}