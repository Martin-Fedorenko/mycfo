/*! For license information please see 6544.319cd8e6.chunk.js.LICENSE.txt */
(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6544],{17029:function(e,t,r){var i;i=function(e){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,r){"use strict";r.r(t);var i=r("react"),n=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),o=function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},s=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};function a(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise(function(r,i){t.call(navigator,e,r,i)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var c=function(e){function t(t){var r=e.call(this,t)||this;return r.canvas=null,r.ctx=null,r.requestUserMediaId=0,r.unmounted=!1,r.state={hasUserMedia:!1},r}return n(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,a()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(a()){var r=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),i=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),n=e.minScreenshotWidth!==t.minScreenshotWidth,o=e.minScreenshotHeight!==t.minScreenshotHeight;(i||n||o)&&(this.canvas=null,this.ctx=null),(r||i)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,r=this.props;if(!t.hasUserMedia)return null;var i=this.getCanvas(e);return i&&i.toDataURL(r.screenshotFormat,r.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,r=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var i=this.video.videoWidth,n=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=i/n;n=(i=r.minScreenshotWidth||this.video.clientWidth)/o,r.minScreenshotHeight&&n<r.minScreenshotHeight&&(i=(n=r.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||i,this.canvas.height=(null===e||void 0===e?void 0:e.height)||n,this.ctx=this.canvas.getContext("2d")}var s=this.ctx,a=this.canvas;return s&&a&&(a.width=(null===e||void 0===e?void 0:e.width)||a.width,a.height=(null===e||void 0===e?void 0:e.height)||a.height,r.mirrored&&(s.translate(a.width,0),s.scale(-1,1)),s.imageSmoothingEnabled=r.imageSmoothing,s.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||a.width,(null===e||void 0===e?void 0:e.height)||a.height),r.mirrored&&(s.scale(-1,1),s.translate(-a.width,0))),a},t.prototype.requestUserMedia=function(){var e=this,r=this.props,i=function(i,n){var o={video:"undefined"===typeof n||n};r.audio&&(o.audio="undefined"===typeof i||i),e.requestUserMediaId++;var s=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(o).then(function(r){e.unmounted||s!==e.requestUserMediaId?t.stopMediaStream(r):e.handleUserMedia(null,r)}).catch(function(t){e.handleUserMedia(t)})};if("mediaDevices"in navigator)i(r.audioConstraints,r.videoConstraints);else{var n=function(e){return{optional:[{sourceId:e}]}},o=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(e){var t=null,s=null;e.forEach(function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(s=e.id)});var a=o(r.audioConstraints);a&&(t=a);var c=o(r.videoConstraints);c&&(s=c),i(n(t),n(s))})}},t.prototype.handleUserMedia=function(e,t){var r=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void r.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(i){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}r.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,r=this.props,n=r.audio,a=(r.forceScreenshotSourceSize,r.disablePictureInPicture),c=(r.onUserMedia,r.onUserMediaError,r.screenshotFormat,r.screenshotQuality,r.minScreenshotWidth,r.minScreenshotHeight,r.audioConstraints,r.videoConstraints,r.imageSmoothing,r.mirrored),d=r.style,l=void 0===d?{}:d,u=r.children,h=s(r,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),p=c?o(o({},l),{transform:(l.transform||"")+" scaleX(-1)"}):l,f={getScreenshot:this.getScreenshot.bind(this)};return i.createElement(i.Fragment,null,i.createElement("video",o({autoPlay:!0,disablePictureInPicture:a,src:t.src,muted:!n,playsInline:!0,ref:function(t){e.video=t},style:p},h)),u&&u(f))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(i.Component);t.default=c},react:function(t,r){t.exports=e}}).default},e.exports=i(r(65043))},23411:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(14057),n=r(70579);const o=(0,i.A)([(0,n.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,n.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt")},56544:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var i=r(65043),n=r(53969),o=r(56647),s=r(55895),a=r(94799),c=r(38517),d=r(81911),l=r(78776),u=r(23411),h=r(27421),p=r(85465),f=r(5362),v=r(17029),m=r.n(v),g=r(23892),y=r(14057),x=r(70579);const b=(0,y.A)((0,x.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");var j=r(79722);function S(e){let{tipoDoc:t,endpointMap:r}=e;const v=(0,i.useRef)(null),[y,S]=(0,i.useState)(!0),[M,w]=(0,i.useState)(null),[U,A]=(0,i.useState)([]),[C,O]=(0,i.useState)(null);return(0,x.jsxs)(n.A,{sx:{mt:3},children:[(0,x.jsxs)(n.A,{sx:{position:"relative",width:"100%",borderRadius:2,overflow:"hidden"},children:[y?(0,x.jsx)(m(),{ref:v,audio:!1,screenshotFormat:"image/jpeg",style:{width:"100%"}}):(0,x.jsx)("img",{src:M,alt:"captura",style:{width:"100%"}}),y?(0,x.jsx)(o.A,{onClick:()=>{const e=v.current.getScreenshot();w(e),S(!1)},color:"primary",sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",width:50,height:50},children:(0,x.jsx)(u.A,{})}):(0,x.jsxs)(n.A,{sx:{position:"absolute",bottom:16,width:"100%",display:"flex",justifyContent:"center",gap:4},children:[(0,x.jsx)(o.A,{onClick:()=>{w(null),S(!0)},color:"error",sx:{width:50,height:50},children:(0,x.jsx)(h.A,{})}),(0,x.jsx)(o.A,{onClick:()=>{A(e=>[...e,M]),w(null),S(!0)},color:"success",sx:{width:50,height:50},children:(0,x.jsx)(p.A,{})})]})]}),U.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.A,{variant:"subtitle1",sx:{mt:3},children:"Fotos seleccionadas:"}),U.map((e,t)=>(0,x.jsxs)(a.A,{sx:{mt:1,p:1.5,display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid",borderColor:"grey.400",borderRadius:1},children:[(0,x.jsx)(s.A,{variant:"body2",children:"foto-".concat(t+1,".jpg")}),(0,x.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,x.jsx)(o.A,{onClick:()=>O(e),size:"small",color:"primary",children:(0,x.jsx)(b,{})}),(0,x.jsx)(o.A,{onClick:()=>{return e=t,void A(t=>t.filter((t,r)=>r!==e));var e},size:"small",color:"error",children:(0,x.jsx)(f.A,{})})]})]},t)),(0,x.jsx)(g.A,{label:"Subir fotos",width:"100%",sx:{mt:2},onClick:async()=>{if(0===U.length)return;const e=r[t].foto;try{const t=new FormData;U.forEach((e,r)=>{t.append("files",(e=>{const t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),n=new Uint8Array(i);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return new Blob([i],{type:r})})(e),"foto-".concat(r+1,".jpg"))}),await j.A.post(e,t,{headers:{"Content-Type":"multipart/form-data"}}),alert("\u2705 Fotos enviadas!")}catch(i){console.error("\u274c Error en env\xedo:",i)}}})]}),(0,x.jsxs)(c.A,{open:Boolean(C),onClose:()=>O(null),maxWidth:"md",fullWidth:!0,children:[(0,x.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Vista previa",(0,x.jsx)(o.A,{onClick:()=>O(null),size:"small",color:"error",children:(0,x.jsx)(h.A,{})})]}),(0,x.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:2},children:C&&(0,x.jsx)("img",{src:C,alt:"ampliada",style:{maxWidth:"100%",maxHeight:"70vh",objectFit:"contain",borderRadius:8}})})]})]})}}}]);
//# sourceMappingURL=6544.319cd8e6.chunk.js.map