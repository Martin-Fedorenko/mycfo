"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[250],{811:(e,r,t)=>{t.d(r,{A:()=>f});var n=t(89379),i=(t(65043),t(60446)),a=t.n(i),s=t(38348),l=t(12097),o=t(3537),d=t(28793),c=t(24793),u=t(12694),x=t(38068),m=t(67142),h=t(63199),A=t(70579);function p(e){var r;const{forwardedProps:t}=(0,x.o)(e,"time"),i=(0,h.T)(),a=(0,s.A)(i.triggerRef,i.rootRef),d=(0,m.U)(),c=null==i.value?d:i.value.format(i.fieldFormat);return(0,A.jsx)(l.A,(0,n.A)((0,n.A)({},t),{},{variant:"outlined",ref:a,size:"small",startIcon:(0,A.jsx)(o.A,{fontSize:"small"}),sx:{minWidth:"fit-content",width:"100%"},disabled:i.disabled||(null===t||void 0===t?void 0:t.disabled),onClick:()=>{i.disabled||null!==t&&void 0!==t&&t.disabled||i.setOpen(e=>!e)},children:null!==(r=i.label)&&void 0!==r?r:c}))}function f(e){let{value:r,onChange:t,disabled:n=!1}=e;return(0,A.jsx)(c.$J,{dateAdapter:d.R,children:(0,A.jsx)(u.A,{value:r,label:null!=r&&a()(r).isValid()?a()(r).format("HH:mm"):null,onChange:t,disabled:n,slots:{field:p},slotProps:{field:{disabled:n}},minutesStep:5,sx:{width:"100%"}})})}},15474:(e,r,t)=>{t.d(r,{A:()=>v});var n=t(89379),i=(t(65043),t(60446)),a=t.n(i),s=t(8259),l=t.n(s),o=t(38348),d=t(12097),c=t(31777),u=t(28793),x=t(24793),m=t(49171),h=t(38068),A=t(67142),p=t(63199),f=t(70579);function g(e){var r;const{forwardedProps:t}=(0,h.o)(e,"date"),i=(0,p.T)(),a=(0,o.A)(i.triggerRef,i.rootRef),s=(0,A.U)(),l=null==i.value?s:i.value.format(i.fieldFormat);return(0,f.jsx)(d.A,(0,n.A)((0,n.A)({},t),{},{variant:"outlined",ref:a,size:"small",startIcon:(0,f.jsx)(c.A,{fontSize:"small"}),sx:{minWidth:"fit-content",width:"100%"},disabled:i.disabled||(null===t||void 0===t?void 0:t.disabled),onClick:()=>{i.disabled||null!==t&&void 0!==t&&t.disabled||i.setOpen(e=>!e)},children:null!==(r=i.label)&&void 0!==r?r:l}))}function v(e){let{value:r,onChange:t,disabled:n=!1}=e;return(0,f.jsx)(x.$J,{dateAdapter:u.R,children:(0,f.jsx)(m.l,{value:r?a()(r):null,label:null==r?null:a()(r).format("MMM DD, YYYY"),onChange:e=>{if(t)if(a().isDayjs(e)){const r=a().utc(e.startOf("day").format("YYYY-MM-DD"));t(r)}else t(e)},disabled:n,slots:{field:g},slotProps:{nextIconButton:{size:"small",disabled:n},previousIconButton:{size:"small",disabled:n},field:{disabled:n}},views:["day","month","year"],sx:{width:"100%"}})})}a().extend(l())},22950:(e,r,t)=>{t.d(r,{A:()=>a});var n=t(14057),i=t(70579);const a=(0,n.A)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},70250:(e,r,t)=>{t.r(r),t.d(r,{default:()=>D});var n=t(89379),i=t(65043),a=t(53969),s=t(55895),l=t(12097),o=t(91449),d=t(94799),c=t(91244),u=t(16128),x=t(70298),m=t(76072),h=t(95563),A=t(38517),p=t(81911),f=t(78776),g=t(53089),v=t(24343),b=t(10256),j=t(9446),y=t(88889),w=t(85877),C=t(22950),S=t(81445),R=t(27496),k=t(61773),z=t(5362),E=t(60446),W=t.n(E),T=t(15474),I=t(811),Y=t(68190);function M(e){const[r,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(!0),[s,l]=(0,i.useState)(null),o=(0,i.useCallback)(async()=>{try{a(!0);const r=await async function(e){const{data:r}=await Y.A.get("/users/".concat(e,"/reminders"));return r}(e);t(r||[]),l(null)}catch(r){l(r),console.error("Error loading reminders:",r)}finally{a(!1)}},[e]);(0,i.useEffect)(()=>{o()},[o]);return{reminders:r,loading:n,error:s,reload:o,create:async r=>{try{const n=await async function(e,r){const{data:t}=await Y.A.post("/users/".concat(e,"/reminders"),r);return t}(e,r);return t(e=>[...e,n]),n}catch(s){throw console.error("Error creating reminder:",s),s}},update:async(r,n)=>{try{const i=await async function(e,r,t){const{data:n}=await Y.A.put("/users/".concat(e,"/reminders/").concat(r),t);return n}(e,r,n);return t(e=>e.map(e=>e.id===r?i:e)),i}catch(s){throw console.error("Error updating reminder:",s),s}},remove:async r=>{try{await async function(e,r){await Y.A.delete("/users/".concat(e,"/reminders/").concat(r))}(e,r),t(e=>e.filter(e=>e.id!==r))}catch(s){throw console.error("Error deleting reminder:",s),s}}}}var N=t(70579);const P=e=>{let{label:r,children:t}=e;return(0,N.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,N.jsx)(s.A,{variant:"subtitle2",color:"text.secondary",children:r}),t]})};function D(){const[e,r]=i.useState(!1),[t,E]=i.useState(null),[Y,D]=i.useState(!1),{reminders:O,loading:L,error:H,create:B,update:F,remove:V}=M(1),q=()=>({title:"",message:"",date:W()(),time:W()(),isRecurring:!1,recurrencePattern:"DAILY",reminderType:"CUSTOM"}),[G,U]=i.useState(q()),J=[{value:"DAILY",label:"Diario"},{value:"WEEKLY",label:"Semanal"},{value:"MONTHLY",label:"Mensual"},{value:"YEARLY",label:"Anual"}],$=[{value:"NONE",label:"No recurrente"},...J],K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){E(e);const r=W()(e.scheduledFor),t=r.isValid()?r:W()();U({title:e.title,message:e.message,date:t,time:t,isRecurring:e.isRecurring,recurrencePattern:e.recurrencePattern,reminderType:e.reminderType})}else E(null),U(q());r(!0)},Q=()=>{r(!1),E(null)},X=(e,r)=>{U(t=>(0,n.A)((0,n.A)({},t),{},{[e]:r}))},Z=e=>{var r;return(null===(r=J.find(r=>r.value===e))||void 0===r?void 0:r.label)||e};return(0,N.jsxs)(a.A,{sx:{width:"100%",maxWidth:{sm:"100%",md:"1700px"},mx:"auto",px:3,pt:1,pb:3},children:[(0,N.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,gap:3},children:[(0,N.jsxs)(a.A,{children:[(0,N.jsx)(s.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Recordatorios"}),(0,N.jsx)(s.A,{variant:"body1",sx:{color:"text.primary"},children:"Gestiona tus recordatorios y alertas personalizadas"})]}),(0,N.jsx)(l.A,{variant:"contained",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>K(),children:"Nuevo Recordatorio"})]}),(0,N.jsx)(a.A,{sx:{width:"100%"},children:L?(0,N.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,N.jsx)(s.A,{variant:"body1",color:"text.secondary",children:"Cargando recordatorios..."})}):H?(0,N.jsxs)(o.A,{severity:"error",children:["Error al cargar los recordatorios: ",H.message]}):0===O.length?(0,N.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",px:2},children:(0,N.jsxs)(d.A,{sx:{p:4,textAlign:"center",width:"100%",maxWidth:520},children:[(0,N.jsx)(S.A,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,N.jsx)(s.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No tienes recordatorios configurados"}),(0,N.jsx)(s.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Crea tu primer recordatorio para no perderte nada importante"}),(0,N.jsx)(l.A,{variant:"contained",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>K(),children:"Crear Recordatorio"})]})}):(0,N.jsx)(a.A,{sx:{columnCount:{xs:1,sm:2,lg:3,xl:4},columnGap:{xs:2,sm:2.5}},children:O.map(e=>{return(0,N.jsx)(a.A,{sx:{breakInside:"avoid",display:"inline-block",width:"100%",mb:2},children:(0,N.jsxs)(c.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:e=>e.shadows[8]}},children:[(0,N.jsxs)(u.A,{sx:{flexGrow:1,pb:1},children:[(0,N.jsx)(s.A,{variant:"h6",component:"h3",sx:{fontWeight:600,lineHeight:1.3,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",mb:2},children:e.title}),(0,N.jsx)(s.A,{variant:"body2",color:"text.primary",sx:{mb:2,lineHeight:1.5,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",minHeight:"4.5em"},children:e.message}),(0,N.jsxs)(x.A,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:[e.isRecurring&&(0,N.jsx)(m.A,{label:Z(e.recurrencePattern),size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.75rem"}}),e.recurrencePattern&&!e.isRecurring&&(0,N.jsx)(m.A,{label:"Tipo: ".concat(Z(e.recurrencePattern)),size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.75rem"}})]}),(0,N.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1,mt:"auto",pt:1,borderTop:1,borderColor:"divider"},children:[(0,N.jsx)(R.A,{fontSize:"small",color:"action"}),(0,N.jsx)(s.A,{variant:"caption",color:"text.primary",sx:{fontWeight:500,fontSize:"0.8rem"},children:(r=e.scheduledFor,new Date(r).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]}),(0,N.jsxs)(h.A,{sx:{pt:0,px:2,pb:2,gap:1},children:[(0,N.jsx)(l.A,{size:"small",variant:"outlined",startIcon:(0,N.jsx)(k.A,{}),onClick:()=>K(e),sx:{flex:1,textTransform:"none",fontWeight:500},children:"Editar"}),(0,N.jsx)(l.A,{size:"small",variant:"outlined",color:"error",startIcon:(0,N.jsx)(z.A,{}),onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este recordatorio?"))try{D(!0),await V(e)}catch(H){console.error("Error eliminando recordatorio:",H)}finally{D(!1)}})(e.id),sx:{flex:1,textTransform:"none",fontWeight:500},children:"Eliminar"})]})]})},e.id);var r})})}),(0,N.jsxs)(A.A,{open:e,onClose:Q,maxWidth:"md",fullWidth:!0,children:[(0,N.jsx)(p.A,{children:t?"Editar Recordatorio":"Nuevo Recordatorio"}),(0,N.jsx)(f.A,{children:(0,N.jsxs)(g.A,{container:!0,spacing:2,sx:{mt:1},children:[(0,N.jsx)(g.A,{item:!0,xs:12,children:(0,N.jsx)(P,{label:"T\xedtulo",children:(0,N.jsx)(v.A,{fullWidth:!0,placeholder:"T\xedtulo",value:G.title,onChange:e=>X("title",e.target.value),size:"small",required:!0})})}),(0,N.jsx)(g.A,{item:!0,xs:12,children:(0,N.jsx)(P,{label:"Mensaje",children:(0,N.jsx)(v.A,{fullWidth:!0,placeholder:"Descripci\xf3n",value:G.message,onChange:e=>X("message",e.target.value),size:"small",required:!0})})}),(0,N.jsx)(g.A,{item:!0,xs:12,sm:6,children:(0,N.jsx)(P,{label:"Fecha",children:(0,N.jsx)(T.A,{value:G.date,onChange:e=>X("date",e||W()())})})}),(0,N.jsx)(g.A,{item:!0,xs:12,sm:6,children:(0,N.jsx)(P,{label:"Hora",children:(0,N.jsx)(I.A,{value:G.time,onChange:e=>X("time",e||W()())})})}),(0,N.jsx)(g.A,{item:!0,xs:12,sm:6,children:(0,N.jsx)(P,{label:"Tipo",children:(0,N.jsx)(b.A,{fullWidth:!0,size:"small",children:(0,N.jsx)(j.A,{value:G.isRecurring?G.recurrencePattern:"NONE",onChange:e=>{const r=e.target.value;"NONE"===r?X("isRecurring",!1):(X("isRecurring",!0),X("recurrencePattern",r))},children:$.map(e=>(0,N.jsx)(y.A,{value:e.value,children:e.label},e.value))})})})})]})}),(0,N.jsxs)(w.A,{children:[(0,N.jsx)(l.A,{onClick:Q,children:"Cancelar"}),(0,N.jsx)(l.A,{onClick:async()=>{try{D(!0);const e=G.date&&G.date.isValid()?G.date:W()(),r=G.time&&G.time.isValid()?G.time:W()(),n=e.hour(r.hour()).minute(r.minute()).second(0).millisecond(0).toISOString(),i={title:G.title,message:G.message,scheduledFor:n,isRecurring:G.isRecurring,recurrencePattern:G.recurrencePattern,reminderType:G.reminderType};t?await F(t.id,i):await B(i),Q()}catch(H){console.error("Error guardando recordatorio:",H)}finally{D(!1)}},variant:"contained",sx:{color:"common.white"},disabled:Y||!G.title||!G.message||!G.date||!G.time,children:Y?"Guardando...":t?"Actualizar":"Crear"})]})]})]})}},95563:(e,r,t)=>{t.d(r,{A:()=>p});var n=t(89379),i=t(80045),a=t(65043),s=t(58387),l=t(31807),o=t(58128),d=t(28301),c=t(79857),u=t(86061);function x(e){return(0,u.Ay)("MuiCardActions",e)}(0,c.A)("MuiCardActions",["root","spacing"]);var m=t(70579);const h=["disableSpacing","className"],A=(0,o.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,!t.disableSpacing&&r.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),p=a.forwardRef(function(e,r){const t=(0,d.b)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:o}=t,c=(0,i.A)(t,h),u=(0,n.A)((0,n.A)({},t),{},{disableSpacing:a}),p=(e=>{const{classes:r,disableSpacing:t}=e,n={root:["root",!t&&"spacing"]};return(0,l.A)(n,x,r)})(u);return(0,m.jsx)(A,(0,n.A)({className:(0,s.A)(p.root,o),ownerState:u,ref:r},c))})}}]);
//# sourceMappingURL=250.8c2ff224.chunk.js.map