{"version":3,"file":"static/js/1070.28c68f9c.chunk.js","mappings":"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","sources":["utils/currency.js","shared-components/ExportadorSimple.js","api/http.js","reportes/reportes.service.js","pronostico/presupuesto/components/PresupuestoDetalle.js"],"sourcesContent":["export const numberFormatter = new Intl.NumberFormat('es-AR', {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nexport const formatCurrency = (value, { allowEmpty = false } = {}) => {\r\n  if (value === '' || value === null || typeof value === 'undefined') {\r\n    return allowEmpty ? '' : '$ 0';\r\n  }\r\n  const num = Number(value);\r\n  if (Number.isNaN(num)) {\r\n    return allowEmpty ? '' : '$ 0';\r\n  }\r\n  const sign = num < 0 ? '-' : '';\r\n  return `${sign}$ ${numberFormatter.format(Math.abs(num))}`;\r\n};\r\n\r\nexport const formatCurrencyInput = (value) => formatCurrency(value, { allowEmpty: true });\r\n\r\nexport const parseCurrency = (raw, { returnEmpty = false } = {}) => {\r\n  if (raw == null) return returnEmpty ? '' : 0;\r\n  const str = raw.toString().trim();\r\n  if (!str) return returnEmpty ? '' : 0;\r\n  const cleaned = str.replace(/\\s+/g, '').replace(/\\$/g, '');\r\n  const negative = cleaned.startsWith('-');\r\n  const numeric = cleaned.replace(/[^0-9,.-]/g, '');\r\n  if (!numeric || numeric === '-') return returnEmpty ? '' : 0;\r\n  const normalized = numeric\r\n    .replace(/-/g, '')\r\n    .replace(/\\./g, '')\r\n    .replace(',', '.');\r\n  const num = Number(normalized);\r\n  if (Number.isNaN(num)) return returnEmpty ? '' : 0;\r\n  return negative ? -num : num;\r\n};\r\n","import * as React from 'react';\r\nimport { Box, IconButton, Tooltip } from '@mui/material';\r\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\r\nimport GridOnIcon from '@mui/icons-material/GridOn'; // <-- Nuevo icono para Excel\r\n\r\nconst EXPORT_PDF_BG = '#FDE4E3';\r\nconst EXPORT_PDF_BG_HOVER = '#FACDCA';\r\nconst EXPORT_EXCEL_BG = '#E5F4E5';\r\nconst EXPORT_EXCEL_BG_HOVER = '#CAE7CB';\r\n\r\nexport default function ExportadorSimple({\r\n                                             onExportPdf,\r\n                                             onExportExcel,\r\n                                             sx = {},\r\n                                         }) {\r\n    return (\r\n        <Box\r\n            sx={{\r\n                display: 'flex',\r\n                gap: 1,\r\n                // NO posición fija por defecto para mayor flexibilidad\r\n                ...sx,\r\n            }}\r\n        >\r\n            <Tooltip title=\"Exportar PDF\">\r\n                <IconButton\r\n                    onClick={onExportPdf}\r\n                    size=\"small\"\r\n                    color=\"error\"\r\n                    sx={(theme) => {\r\n                        const hoverStyles = {\r\n                            bgcolor: `${EXPORT_PDF_BG_HOVER} !important`,\r\n                            backgroundColor: `${EXPORT_PDF_BG_HOVER} !important`,\r\n                            borderColor: '#d32f2f',\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                        };\r\n                        return {\r\n                            border: '1px solid',\r\n                            borderColor: '#d32f2f',\r\n                            bgcolor: `${EXPORT_PDF_BG} !important`,\r\n                            backgroundColor: `${EXPORT_PDF_BG} !important`,\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                            '&:hover': hoverStyles,\r\n                            width: 36,\r\n                            height: 36,\r\n                            ...theme.applyStyles('dark', {\r\n                                borderColor: '#d32f2f',\r\n                                '&:hover': hoverStyles,\r\n                            }),\r\n                        };\r\n                    }}\r\n                    aria-label=\"Exportar PDF\"\r\n                >\r\n                    <PictureAsPdfIcon fontSize=\"small\" />\r\n                </IconButton>\r\n            </Tooltip>\r\n\r\n            <Tooltip title=\"Exportar Excel\">\r\n                <IconButton\r\n                    onClick={onExportExcel}\r\n                    size=\"small\"\r\n                    color=\"success\"\r\n                    sx={(theme) => {\r\n                        const hoverStyles = {\r\n                            bgcolor: `${EXPORT_EXCEL_BG_HOVER} !important`,\r\n                            backgroundColor: `${EXPORT_EXCEL_BG_HOVER} !important`,\r\n                            borderColor: '#2e7d32',\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                        };\r\n                        return {\r\n                            border: '1px solid',\r\n                            borderColor: '#2e7d32',\r\n                            bgcolor: `${EXPORT_EXCEL_BG} !important`,\r\n                            backgroundColor: `${EXPORT_EXCEL_BG} !important`,\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                            '&:hover': hoverStyles,\r\n                            width: 36,\r\n                            height: 36,\r\n                            ...theme.applyStyles('dark', {\r\n                                borderColor: '#2e7d32',\r\n                                '&:hover': hoverStyles,\r\n                            }),\r\n                        };\r\n                    }}\r\n                    aria-label=\"Exportar Excel\"\r\n                >\r\n                    <GridOnIcon fontSize=\"small\" /> {/* Icono de tabla tipo Excel */}\r\n                </IconButton>\r\n            </Tooltip>\r\n        </Box>\r\n    );\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  CognitoUserPool,\r\n  CognitoUser,\r\n  CognitoRefreshToken,\r\n} from \"amazon-cognito-identity-js\";\r\nimport { sessionService } from \"../shared-services/sessionService\";\r\nimport URL_CONFIG from \"../config/api-config\";\r\n\r\nconst http = axios.create();\r\nconst PRONOSTICO_BASE_URL = URL_CONFIG.PRONOSTICO;\r\nconst cognitoPoolConfig = {\r\n  UserPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\r\n  ClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\r\n};\r\n\r\nlet refreshPromise = null;\r\nlet hasForcedLogout = false;\r\n\r\nconst isPronosticoRequest = (url) =>\r\n  Boolean(\r\n    url &&\r\n      PRONOSTICO_BASE_URL &&\r\n      String(url).startsWith(String(PRONOSTICO_BASE_URL)),\r\n  );\r\n\r\nconst safeSessionGet = (key) => {\r\n  try {\r\n    return sessionStorage.getItem(key);\r\n  } catch (err) {\r\n    console.warn(\"No se pudo leer sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst safeSessionSet = (key, value) => {\r\n  try {\r\n    if (value !== undefined && value !== null) {\r\n      sessionStorage.setItem(key, value);\r\n    }\r\n  } catch (err) {\r\n    console.warn(\"No se pudo escribir en sessionStorage:\", err);\r\n  }\r\n};\r\n\r\nconst clearSessionAndRedirect = () => {\r\n  if (hasForcedLogout) {\r\n    return;\r\n  }\r\n  hasForcedLogout = true;\r\n  try {\r\n    sessionStorage.clear();\r\n  } catch {\r\n    /* noop */\r\n  }\r\n  if (sessionService?.limpiarSesion) {\r\n    sessionService.limpiarSesion();\r\n  }\r\n  if (typeof window !== \"undefined\") {\r\n    window.location.href = \"/#/signin\";\r\n  }\r\n};\r\n\r\nconst buildCognitoUser = () => {\r\n  const username = safeSessionGet(\"email\") || safeSessionGet(\"username\");\r\n  if (\r\n    !username ||\r\n    !cognitoPoolConfig.UserPoolId ||\r\n    !cognitoPoolConfig.ClientId\r\n  ) {\r\n    return null;\r\n  }\r\n  const pool = new CognitoUserPool(cognitoPoolConfig);\r\n  return new CognitoUser({\r\n    Username: username,\r\n    Pool: pool,\r\n  });\r\n};\r\n\r\nconst refreshTokens = () => {\r\n  const refreshTokenValue = safeSessionGet(\"refreshToken\");\r\n  const cognitoUser = buildCognitoUser();\r\n  if (!refreshTokenValue || !cognitoUser) {\r\n    return Promise.reject(new Error(\"No hay datos para renovar la sesión.\"));\r\n  }\r\n  const refreshToken = new CognitoRefreshToken({\r\n    RefreshToken: refreshTokenValue,\r\n  });\r\n  return new Promise((resolve, reject) => {\r\n    cognitoUser.refreshSession(refreshToken, (err, session) => {\r\n      if (err) {\r\n        reject(err);\r\n        return;\r\n      }\r\n      const nextAccessToken = session.getAccessToken().getJwtToken();\r\n      const nextIdToken = session.getIdToken().getJwtToken();\r\n      const nextRefreshToken = session.getRefreshToken().getToken();\r\n      safeSessionSet(\"accessToken\", nextAccessToken);\r\n      safeSessionSet(\"idToken\", nextIdToken);\r\n      if (nextRefreshToken) {\r\n        safeSessionSet(\"refreshToken\", nextRefreshToken);\r\n      }\r\n      resolve(nextAccessToken);\r\n    });\r\n  });\r\n};\r\n\r\nconst getRefreshPromise = () => {\r\n  if (!refreshPromise) {\r\n    refreshPromise = refreshTokens()\r\n      .then((token) => {\r\n        refreshPromise = null;\r\n        return token;\r\n      })\r\n      .catch((error) => {\r\n        refreshPromise = null;\r\n        throw error;\r\n      });\r\n  }\r\n  return refreshPromise;\r\n};\r\n\r\nhttp.interceptors.request.use((config) => {\r\n  const accessToken = sessionStorage.getItem(\"accessToken\");\r\n  if (isPronosticoRequest(config.url)) {\r\n    config.headers = config.headers ?? {};\r\n    if (accessToken) {\r\n      config.headers.Authorization = `Bearer ${accessToken}`;\r\n    }\r\n    const usuarioSub = sessionStorage.getItem(\"sub\");\r\n    if (usuarioSub) {\r\n      config.headers[\"X-Usuario-Sub\"] = usuarioSub;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nhttp.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const { config, response } = error;\r\n    if (\r\n      !config ||\r\n      !response ||\r\n      response.status !== 401 ||\r\n      !isPronosticoRequest(config.url)\r\n    ) {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (config.__isRetryRequest) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    try {\r\n      const newAccessToken = await getRefreshPromise();\r\n      if (!newAccessToken) {\r\n        throw new Error(\"No se obtuvo un token renovado.\");\r\n      }\r\n      config.__isRetryRequest = true;\r\n      config.headers = config.headers ?? {};\r\n      config.headers.Authorization = `Bearer ${newAccessToken}`;\r\n      return http(config);\r\n    } catch (refreshError) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(refreshError);\r\n    }\r\n  },\r\n);\r\n\r\nexport default http;\r\n","import axios from 'axios';\r\nimport API_CONFIG from '../config/api-config';\r\n\r\nconst URL_REGISTRO = API_CONFIG.REGISTRO; \r\n\r\nfunction getUsuarioHeaders() {\r\n  const headers = {};\r\n  const sub = sessionStorage.getItem('sub');\r\n  const token = sessionStorage.getItem('accessToken');\r\n  if (sub) headers['X-Usuario-Sub'] = sub; // tenant\r\n  if (token) headers['Authorization'] = `Bearer ${token}`;\r\n  return headers;\r\n}\r\n\r\n/**\r\n * Llama a /movimientos en REGISTRO usando fecha_emision (fechaDesde/fechaHasta).\r\n * - tipos: string ('EGRESO' | 'INGRESO') o array => CSV.\r\n * - No enviar sortBy/sortDir (evita 400 por validación).\r\n * - Devuelve `data` (puede venir paginado en `data.content` o como array).\r\n */\r\nexport async function getMovimientosPorRango({ fechaDesde, fechaHasta, tipos }) {\r\n  const params = new URLSearchParams();\r\n  params.set('page', 0);\r\n  params.set('size', 500);\r\n  if (fechaDesde) params.set('fechaDesde', fechaDesde); // YYYY-MM-DD\r\n  if (fechaHasta) params.set('fechaHasta', fechaHasta);\r\n\r\n  // CSV: evita &tipos=INGRESO&tipos=EGRESO → 400\r\n  if (Array.isArray(tipos) && tipos.length > 0) {\r\n    params.set('tipos', tipos.join(','));\r\n  } else if (typeof tipos === 'string' && tipos) {\r\n    params.set('tipos', tipos);\r\n  }\r\n\r\n  const url = `${URL_REGISTRO}/movimientos?${params.toString()}`;\r\n  const { data } = await axios.get(url, { headers: getUsuarioHeaders() });\r\n  return data;\r\n}\r\n\r\n","import * as React from 'react';\r\nimport {\r\n  Box, Typography, Paper, Grid, Button, Tabs, Tab, Avatar, Chip, Stack, Tooltip,\r\n  IconButton, Divider, Drawer, List, ListItem, ListItemText, TextField, MenuItem, Switch,\r\n  FormControlLabel, Menu, Table, TableHead, TableRow, TableCell, TableBody\r\n} from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport ExportadorSimple from '../../../shared-components/ExportadorSimple';\r\nimport http from '../../../api/http';\r\nimport { formatCurrency } from '../../../utils/currency';\r\nimport { eachMonthOfInterval, startOfMonth, endOfMonth, format as formatDate } from 'date-fns';\r\nimport { getMovimientosPorRango } from '../../../reportes/reportes.service';\r\nimport {\r\n  ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip as RTooltip, Legend,\r\n  LineChart, Line, Area, ReferenceLine\r\n} from 'recharts';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\nimport FilterAltOutlinedIcon from '@mui/icons-material/FilterAltOutlined';\r\nimport RuleOutlinedIcon from '@mui/icons-material/RuleOutlined';\r\nimport HistoryOutlinedIcon from '@mui/icons-material/HistoryOutlined';\r\nimport SettingsOutlinedIcon from '@mui/icons-material/SettingsOutlined';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport WarningAmberOutlinedIcon from '@mui/icons-material/WarningAmberOutlined';\r\nimport API_CONFIG from '../../../config/api-config';\r\n\r\n// Helper seguro para números\r\nconst safeNumber = (v) =>\r\n  typeof v === 'number' ? v : v != null && !isNaN(Number(v)) ? Number(v) : 0;\r\n\r\n// Colores\r\nconst INGRESO_EST_COLOR = '#a5d6a7';\r\nconst INGRESO_REAL_COLOR = '#4caf50';\r\nconst EGRESO_EST_COLOR = '#ef9a9a';\r\nconst EGRESO_REAL_COLOR = '#f44336';\r\nconst SUPERAVIT_COLOR = '#4caf50';\r\nconst DEFICIT_COLOR = '#f44336';\r\nconst DEFICIT_CHIP_SX = {\r\n  fontWeight: 500,\r\n  bgcolor: '#FFDE70',\r\n  backgroundColor: '#FFDE70',\r\n  color: '#000',\r\n  border: '1px solid #F5C16C',\r\n  '& .MuiChip-label': { color: '#000' },\r\n  '& .MuiChip-icon': { color: '#000' },\r\n  '&.MuiChip-filled': { backgroundColor: '#FFDE70' },\r\n};\r\n\r\nconst datosBrutosTableSx = (theme) => ({\r\n  borderCollapse: 'collapse',\r\n  border: `1px solid ${(theme.vars || theme).palette.divider}`,\r\n});\r\n\r\nconst datosBrutosCellSx = (theme) => ({\r\n  border: `1px solid ${(theme.vars || theme).palette.divider}`,\r\n  padding: '12px',\r\n});\r\n\r\nconst datosBrutosHeaderCellSx = (theme) => ({\r\n  ...datosBrutosCellSx(theme),\r\n  fontWeight: 700,\r\n});\r\n\r\n// Mapeo de número de mes a nombre corto\r\nconst mesCorto = (numStr) => {\r\n  const nombres = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\r\n  const idx = parseInt(numStr, 10) - 1;\r\n  return nombres[idx] || numStr;\r\n};\r\n\r\n// Semáforo de salud presupuestaria por % cumplimiento\r\nfunction semaforoPorCumplimiento(pct) {\r\n  if (pct >= 0.95) return { label: 'Salud: Verde', color: 'success' };\r\n  if (pct >= 0.8) return { label: 'Salud: Amarillo', color: 'warning' };\r\n  return { label: 'Salud: Rojo', color: 'error' };\r\n}\r\n\r\n// Formatear diferencia\r\nconst formatDiff = (est, real) => {\r\n  const diff = safeNumber(real) - safeNumber(est);\r\n  const formatted = formatCurrency(Math.abs(diff));\r\n  return diff >= 0 ? `+${formatted}` : `-${formatted}`;\r\n};\r\n\r\nconst isValidDate = (value) => value instanceof Date && !Number.isNaN(value.getTime());\r\n\r\nconst toDateSafe = (value) => {\r\n  if (!value || typeof value !== 'string') return null;\r\n  const [yearStr, monthStr, dayStr] = value.split('-');\r\n  const year = Number(yearStr);\r\n  const month = Number(monthStr);\r\n  const day = Number(dayStr);\r\n  if (!Number.isFinite(year) || !Number.isFinite(month) || !Number.isFinite(day)) return null;\r\n  const date = new Date(year, month - 1, day);\r\n  return isValidDate(date) ? date : null;\r\n};\r\n\r\nasync function getRealPorMes(meses, tipo) {\r\n  const out = {};\r\n\r\n  for (const d of meses) {\r\n    const desde = formatDate(startOfMonth(d), 'yyyy-MM-dd');\r\n    const hasta = formatDate(endOfMonth(d), 'yyyy-MM-dd');\r\n    const mesKey = formatDate(d, 'yyyy-MM');\r\n    try {\r\n      const resp = await getMovimientosPorRango({ fechaDesde: desde, fechaHasta: hasta, tipos: tipo });\r\n      const movimientos = Array.isArray(resp?.content) ? resp.content : (Array.isArray(resp) ? resp : []);\r\n      const totalMes = movimientos.reduce((acc, movimiento) => {\r\n        const monto = Math.abs(Number(movimiento?.monto ?? movimiento?.montoTotal ?? 0));\r\n        return Number.isFinite(monto) ? acc + monto : acc;\r\n      }, 0);\r\n      out[mesKey] = totalMes;\r\n    } catch (error) {\r\n      console.error(`Error al obtener movimientos del mes ${mesKey} (${tipo}):`, error);\r\n      out[mesKey] = 0;\r\n    }\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\nexport default function PresupuestoDetalle() {\r\n  const { nombre: nombreUrl } = useParams();\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const isLightMode = theme.palette.mode === 'light';\r\n  const paletteVars = theme.vars?.palette ?? theme.palette;\r\n  const kpiColors = React.useMemo(\r\n    () => ({\r\n      ingresos: isLightMode ? 'hsl(120, 44%, 53%)' : paletteVars.success.light,\r\n      egresos: isLightMode ? 'hsl(0, 90%, 40%)' : paletteVars.error.light,\r\n      resultadoPos: isLightMode ? 'hsl(210, 98%, 42%)' : paletteVars.info.light,\r\n      resultadoNeg: isLightMode ? 'hsl(45, 90%, 40%)' : paletteVars.warning.light,\r\n    }),\r\n    [isLightMode, paletteVars.error.light, paletteVars.info.light, paletteVars.success.light, paletteVars.warning.light]\r\n  );\r\n  const tabsLabelColor = isLightMode\r\n    ? paletteVars.text?.primary ?? '#000'\r\n    : paletteVars.common?.white ?? '#fff';\r\n\r\n  const [presupuesto, setPresupuesto] = React.useState({\r\n    id: null,\r\n    nombre: '',\r\n    detalleMensual: [],\r\n  });\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n\r\n  const [tab, setTab] = React.useState(0); // 0: resumen, 1: tabla\r\n\r\n  // Filtros UI\r\n  const [verSoloDeficit, setVerSoloDeficit] = React.useState(false);\r\n  const [verSoloEstimados, setVerSoloEstimados] = React.useState(false);\r\n  const [umbralDesvio, setUmbralDesvio] = React.useState(0); // %\r\n  const [anchorFiltros, setAnchorFiltros] = React.useState(null);\r\n\r\n  // Panel lateral (KPIs clicables)\r\n  const [drawerOpen, setDrawerOpen] = React.useState(false);\r\n  const [drawerTipo, setDrawerTipo] = React.useState('Ingresos'); // 'ingresos' | 'egresos' | 'resultado'\r\n\r\n  React.useEffect(() => {\r\n    const cargar = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        // 1) Buscar presupuesto por nombre\r\n        const res = await http.get(`${API_CONFIG.PRONOSTICO}/api/presupuestos`);\r\n        const listaPayload = res?.data;\r\n        let lista = [];\r\n        if (Array.isArray(listaPayload)) {\r\n          lista = listaPayload;\r\n        } else if (Array.isArray(listaPayload?.content)) {\r\n          lista = listaPayload.content;\r\n        }\r\n\r\n        const slug = decodeURIComponent(nombreUrl || '')\r\n          .trim()\r\n          .toLowerCase()\r\n          .replace(/\\s+/g, '-');\r\n\r\n        const encontrado = lista.find(\r\n          (p) => (p?.nombre || '').trim().toLowerCase().replace(/\\s+/g, '-') === slug\r\n        );\r\n\r\n        if (!encontrado?.id) {\r\n          setPresupuesto({ id: null, nombre: 'No encontrado', detalleMensual: [] });\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // 2) (opcional) obtener nombre \"oficial\" desde header\r\n        let nombreOficial = encontrado.nombre;\r\n        try {\r\n          const resHeader = await http.get(`${API_CONFIG.PRONOSTICO}/api/presupuestos/${encontrado.id}`);\r\n          if (resHeader?.data?.nombre) nombreOficial = resHeader.data.nombre;\r\n        } catch { /* no crítico */ }\r\n\r\n        // 3) Traer TOTALES mensuales del backend nuevo\r\n        const resTot = await http.get(`${API_CONFIG.PRONOSTICO}/api/presupuestos/${encontrado.id}/totales`);\r\n        const totales = Array.isArray(resTot.data) ? resTot.data : [];\r\n\r\n        // 4) Mapear a la forma que usa el front\r\n        const detalleMensual = totales.map((t, idx) => {\r\n          const ingresoEst = safeNumber(t.ingresoEstimado);\r\n          const egresoEst = safeNumber(t.egresoEstimado);\r\n          return {\r\n            id: idx + 1,\r\n            mes: t.mes, // \"YYYY-MM\"\r\n            ingresoEst,\r\n            ingresoReal: 0, // Inicializar en 0\r\n            egresoEst,\r\n            egresoReal: 0, // Inicializar en 0\r\n            totalEst: ingresoEst - egresoEst,\r\n            totalReal: 0,\r\n          };\r\n        });\r\n\r\n        let realesIngresoPorMes = {};\r\n        let realesEgresoPorMes = {};\r\n        try {\r\n          const fechasDisponibles = detalleMensual\r\n            .map((detalle) => {\r\n              const mesKey = (detalle?.mes || '').slice(0, 7);\r\n              if (!mesKey) return null;\r\n              return toDateSafe(`${mesKey}-01`);\r\n            })\r\n            .filter(Boolean);\r\n\r\n          if (fechasDisponibles.length > 0) {\r\n            const minTime = Math.min(...fechasDisponibles.map((d) => d.getTime()));\r\n            const maxTime = Math.max(...fechasDisponibles.map((d) => d.getTime()));\r\n            const rangoInicioDate = startOfMonth(new Date(minTime));\r\n            const rangoFinDate = endOfMonth(new Date(maxTime));\r\n            const meses = eachMonthOfInterval({ start: rangoInicioDate, end: rangoFinDate });\r\n\r\n            const [egresosPorMes, ingresosPorMes] = await Promise.all([\r\n              getRealPorMes(meses, 'Egreso'),\r\n              getRealPorMes(meses, 'Ingreso'),\r\n            ]);\r\n            realesEgresoPorMes = egresosPorMes;\r\n            realesIngresoPorMes = ingresosPorMes;\r\n          }\r\n        } catch (movError) {\r\n          console.error('Error al obtener datos reales del presupuesto:', movError);\r\n          setError((prev) => prev ?? 'No se pudieron cargar los datos reales del presupuesto.');\r\n        }\r\n\r\n        const detalleMensualCompleto = detalleMensual.map((detalle) => {\r\n          const mesKey = (detalle?.mes || '').slice(0, 7);\r\n          const egresoReal = safeNumber(realesEgresoPorMes[mesKey] || 0);\r\n          const ingresoReal = safeNumber(realesIngresoPorMes[mesKey] || 0);\r\n\r\n          return {\r\n            ...detalle,\r\n            ingresoReal,\r\n            egresoReal,\r\n            totalReal: ingresoReal - egresoReal,\r\n          };\r\n        });\r\n\r\n        setPresupuesto({\r\n          id: encontrado.id,\r\n          nombre: nombreOficial,\r\n          detalleMensual: detalleMensualCompleto,\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error al cargar presupuesto:', error);\r\n        setError('Error al cargar el presupuesto');\r\n        setPresupuesto({ id: null, nombre: 'Error', detalleMensual: [] });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (nombreUrl) cargar();\r\n  }, [nombreUrl]);\r\n\r\n  // ⚠️ Antes filtrabas por fila.id != null → vaciaba todo porque el endpoint no trae id.\r\n  // Ahora solo validamos que exista \"mes\".\r\n  const datosMensualesRaw = Array.isArray(presupuesto.detalleMensual)\r\n    ? presupuesto.detalleMensual.filter((fila) => !!fila?.mes)\r\n    : [];\r\n\r\n  // Transformaciones + filtros (sin tocar datos originales)\r\n  const datosMensuales = React.useMemo(() => {\r\n    let rows = [...datosMensualesRaw];\r\n\r\n    // Calcular % desvío por mes (en base a total Estimado vs Real)\r\n    rows = rows.map((fila) => {\r\n      const est = safeNumber(fila.totalEst ?? (safeNumber(fila.ingresoEst) - safeNumber(fila.egresoEst)));\r\n      const real = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n      const base = Math.abs(est) > 0 ? Math.abs(est) : 1;\r\n      const pctDesvio = (real - est) / base; // + = mejor que estimado, - = peor\r\n      const deficit = real < 0;\r\n      return { ...fila, _estTotal: est, _realTotal: real, _pctDesvio: pctDesvio, _deficit: deficit };\r\n    });\r\n\r\n    if (verSoloDeficit) {\r\n      rows = rows.filter((r) => r._realTotal < 0);\r\n    }\r\n\r\n    // Aplicar filtro por umbral de desvío\r\n    if (Number.isFinite(umbralDesvio) && umbralDesvio > 0) {\r\n      const thr = umbralDesvio / 100;\r\n      rows = rows.filter((r) => Math.abs(r._pctDesvio) >= thr || !Number.isFinite(r._pctDesvio));\r\n    }\r\n\r\n    return rows;\r\n  }, [datosMensualesRaw, verSoloDeficit, umbralDesvio]);\r\n\r\n  // Totales (sobre no-filtrados para KPIs globales)\r\n  const totalIngresoEst = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.ingresoEst), 0);\r\n  const totalIngresoReal = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.ingresoReal), 0);\r\n  const totalEgresoEst = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.egresoEst), 0);\r\n  const totalEgresoReal = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.egresoReal), 0);\r\n  const resultadoReal = totalIngresoReal - totalEgresoReal;\r\n  const resultadoEstimado = totalIngresoEst - totalEgresoEst;\r\n\r\n  const pctCumplimientoGlobal = (() => {\r\n    const base = Math.abs(resultadoEstimado) > 0 ? Math.abs(resultadoEstimado) : 1;\r\n    // cap 120% para pintar semáforo\r\n    return Math.max(0, Math.min(1.2, resultadoReal / base));\r\n  })();\r\n\r\n  const salud = semaforoPorCumplimiento(pctCumplimientoGlobal);\r\n\r\n  // Datos para gráficos separados (respetan filtros visuales por meses)\r\n  const ingresosData = datosMensuales.map((fila) => {\r\n    const mm = (fila?.mes || '0000-01').split('-')[1];\r\n    return {\r\n      mes: mesCorto(mm),\r\n      estimado: safeNumber(fila.ingresoEst),\r\n      real: safeNumber(fila.ingresoReal),\r\n    };\r\n  });\r\n\r\n  const egresosData = datosMensuales.map((fila) => {\r\n    const mm = (fila?.mes || '0000-01').split('-')[1];\r\n    return {\r\n      mes: mesCorto(mm),\r\n      estimado: safeNumber(fila.egresoEst),\r\n      real: safeNumber(fila.egresoReal),\r\n    };\r\n  });\r\n\r\n  // Desvío/superávit mensual\r\n  const desvioData = datosMensuales.map((fila) => {\r\n    const superavit = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n    const mm = (fila?.mes || '0000-01').split('-')[1];\r\n    return {\r\n      mes: mesCorto(mm),\r\n      superavit,\r\n      fill: superavit >= 0 ? SUPERAVIT_COLOR : DEFICIT_COLOR,\r\n    };\r\n  });\r\n\r\n  // Navegación al detalle del mes\r\n  const goToMes = (fila) => {\r\n    // ⚠️ Antes exigías fila.id → muchos casos no lo traen.\r\n    // Con \"mes\" alcanza para derivar el nombre del mes.\r\n    if (!fila?.mes) {\r\n      alert('Mes no válido');\r\n      return;\r\n    }\r\n    const nombreNormalizado = encodeURIComponent((presupuesto.nombre || '').trim().toLowerCase().replace(/\\s+/g, '-'));\r\n    const parts = (fila.mes || '0000-01').split('-');\r\n    const mesNum = parseInt(parts[1] || '1', 10);\r\n    const mesNombre = new Intl.DateTimeFormat('es-ES', { month: 'long' }).format(new Date(2025, (mesNum || 1) - 1));\r\n    navigate(`/presupuestos/${nombreNormalizado}/detalle/${mesNombre}`);\r\n  };\r\n\r\n  // EXPORTS (igual)\r\n  const handleExportExcel = () => {\r\n    const data = [\r\n      ['Mes', 'Ingreso Estimado', 'Ingreso Real', 'Desvío Ingresos', 'Egreso Estimado', 'Egreso Real', 'Desvío Egresos', 'Total Estimado', 'Total Real', 'Total Desvío'],\r\n      ...datosMensualesRaw.map((fila) => [\r\n        fila.mes ?? '—',\r\n        safeNumber(fila.ingresoEst),\r\n        safeNumber(fila.ingresoReal),\r\n        safeNumber(fila.ingresoReal) - safeNumber(fila.ingresoEst),\r\n        safeNumber(fila.egresoEst),\r\n        safeNumber(fila.egresoReal),\r\n        safeNumber(fila.egresoReal) - safeNumber(fila.egresoEst),\r\n        safeNumber(fila.totalEst),\r\n        safeNumber(fila.totalReal),\r\n        safeNumber(fila.totalReal) - safeNumber(fila.totalEst),\r\n      ]),\r\n    ];\r\n\r\n    data.push(['', '', '', '', '', '', '', '', '', '']);\r\n    data.push(['Totales:', '', '', '', '', '', '', '', '', '']);\r\n    data.push([\r\n      '',\r\n      totalIngresoEst,\r\n      totalIngresoReal,\r\n      totalIngresoReal - totalIngresoEst,\r\n      totalEgresoEst,\r\n      totalEgresoReal,\r\n      totalEgresoReal - totalEgresoEst,\r\n      resultadoEstimado,\r\n      resultadoReal,\r\n      resultadoReal - resultadoEstimado,\r\n    ]);\r\n\r\n    import('xlsx').then(({ utils, writeFile }) => {\r\n      const ws = utils.aoa_to_sheet(data, { cellStyles: true });\r\n      const wb = utils.book_new();\r\n      utils.book_append_sheet(wb, ws, 'Detalle Presupuesto');\r\n      writeFile(wb, `Presupuesto_${presupuesto.nombre || ''}_${presupuesto.id || ''}.xlsx`, { cellStyles: true });\r\n    });\r\n  };\r\n\r\n  const handleExportPdf = () => {\r\n    import('html2pdf.js').then((html2pdf) => {\r\n      const element = document.getElementById('presupuesto-detalle-content');\r\n      const opt = {\r\n        margin: 0.5,\r\n        filename: `Presupuesto_${presupuesto.nombre || ''}_${presupuesto.id || ''}.pdf`,\r\n        image: { type: 'jpeg', quality: 0.95 },\r\n        html2canvas: { scale: 2 },\r\n        jsPDF: { unit: 'in', format: 'letter', orientation: 'landscape' },\r\n      };\r\n      html2pdf.default().from(element).set(opt).save();\r\n    });\r\n  };\r\n\r\n  // Drawer contenido: lista de meses ordenados por mayor desvío (absoluto)\r\n  const mesesOrdenadosPorDesvio = React.useMemo(() => {\r\n    const arr = datosMensualesRaw.map((fila) => {\r\n      const est = safeNumber(fila.totalEst ?? (safeNumber(fila.ingresoEst) - safeNumber(fila.egresoEst)));\r\n      const real = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n      const delta = real - est;\r\n      return { ...fila, _delta: delta, _absDelta: Math.abs(delta) };\r\n    });\r\n    return arr.sort((a, b) => b._absDelta - a._absDelta);\r\n  }, [datosMensualesRaw]);\r\n\r\n  const openMenu = Boolean(anchorFiltros);\r\n  const handleOpenMenu = (e) => setAnchorFiltros(e.currentTarget);\r\n  const handleCloseMenu = () => setAnchorFiltros(null);\r\n\r\n  return (\r\n    <Box id=\"presupuesto-detalle-content\" sx={{ width: '100%', p: 3 }}>\r\n      {/* Breadcrumbs simples */}\r\n      <Typography variant=\"h4\" gutterBottom fontWeight=\"600\">\r\n        Detalle de {presupuesto.nombre}\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" gutterBottom sx={{ color: 'text.primary' }}>\r\n        Compará tu planificación con lo real\r\n      </Typography>\r\n\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2, mt: 1, gap: 1, flexWrap: 'wrap' }}>\r\n        <Tabs value={tab} onChange={(e, v) => setTab(v)} indicatorColor=\"primary\">\r\n          <Tab\r\n            label=\"Resumen\"\r\n            sx={{\r\n              color: tabsLabelColor,\r\n              '&.Mui-selected': { color: tabsLabelColor },\r\n              '& .MuiTab-wrapper': { color: tabsLabelColor },\r\n            }}\r\n          />\r\n          <Tab\r\n            label=\"Datos brutos\"\r\n            sx={{\r\n              color: tabsLabelColor,\r\n              '&.Mui-selected': { color: tabsLabelColor },\r\n              '& .MuiTab-wrapper': { color: tabsLabelColor },\r\n            }}\r\n          />\r\n        </Tabs>\r\n\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n          <Tooltip title=\"Filtros\">\r\n            <IconButton onClick={handleOpenMenu}><FilterAltOutlinedIcon /></IconButton>\r\n          </Tooltip>\r\n          <ExportadorSimple onExportPdf={handleExportPdf} onExportExcel={handleExportExcel} />\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* Menú de Filtros */}\r\n      <Menu anchorEl={anchorFiltros} open={openMenu} onClose={handleCloseMenu}>\r\n        <Box sx={{ p: 2, width: 280 }}>\r\n          <Stack spacing={1.5}>\r\n            <FormControlLabel\r\n              control={<Switch checked={verSoloDeficit} onChange={(_, v) => setVerSoloDeficit(v)} />}\r\n              label=\"Ver solo meses con déficit\"\r\n            />\r\n            <FormControlLabel\r\n              control={<Switch checked={verSoloEstimados} onChange={(_, v) => setVerSoloEstimados(v)} />}\r\n              label=\"Mostrar foco en estimados (oculta ‘Real’ en gráficas)\"\r\n            />\r\n            <TextField\r\n              label=\"Umbral de desvío (%)\"\r\n              type=\"number\"\r\n              size=\"small\"\r\n              value={umbralDesvio}\r\n              onChange={(e) => setUmbralDesvio(Math.max(0, Number(e.target.value)))}\r\n            />\r\n          </Stack>\r\n        </Box>\r\n      </Menu>\r\n\r\n      {/* === PESTAÑA 0: RESUMEN VISUAL === */}\r\n      {tab === 0 && (\r\n        <>\r\n          {/* KPIs con acciones rápidas */}\r\n          <Grid container spacing={2} mb={2}>\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper sx={{ p: 3, textAlign: 'center', bgcolor: kpiColors.ingresos, color: 'white', position: 'relative', height: '100%' }}>\r\n                <Avatar sx={{ width: 56, height: 56, bgcolor: 'white', color: 'success.main', mx: 'auto', mb: 1 }}>+</Avatar>\r\n                <Typography variant=\"h6\">Ingresos</Typography>\r\n                <Typography variant=\"body2\" sx={{ display: 'block', color: 'rgba(255,255,255,0.9)' }}>\r\n                  Real acumulado\r\n                </Typography>\r\n                <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                  {formatCurrency(totalIngresoReal)}\r\n                </Typography>\r\n                <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.9)' }}>\r\n                  Estimado: {formatCurrency(totalIngresoEst)}\r\n                </Typography>\r\n                <Tooltip title=\"Ver meses con mayor desvío en ingresos\">\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => setDrawerOpen(true) || setDrawerTipo('Ingresos')}\r\n                    sx={{ position: 'absolute', top: 8, right: 8, bgcolor: 'rgba(255,255,255,0.9)' }}\r\n                  >\r\n                    <RuleOutlinedIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper sx={{ p: 3, textAlign: 'center', bgcolor: kpiColors.egresos, color: 'white', position: 'relative', height: '100%' }}>\r\n                <Avatar sx={{ width: 56, height: 56, bgcolor: 'white', color: 'error.main', mx: 'auto', mb: 1 }}>-</Avatar>\r\n                <Typography variant=\"h6\">Egresos</Typography>\r\n                <Typography variant=\"body2\" sx={{ display: 'block', color: 'rgba(255,255,255,0.9)' }}>\r\n                  Real acumulado\r\n                </Typography>\r\n                <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                  {formatCurrency(totalEgresoReal)}\r\n                </Typography>\r\n                <Typography variant=\"body2\" sx={{ color: 'rgba(255,255,255,0.9)' }}>\r\n                  Estimado: {formatCurrency(totalEgresoEst)}\r\n                </Typography>\r\n                <Tooltip title=\"Ver meses con mayor desvío en egresos\">\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => setDrawerOpen(true) || setDrawerTipo('egresos')}\r\n                    sx={{ position: 'absolute', top: 8, right: 8, bgcolor: 'rgba(255,255,255,0.9)' }}\r\n                  >\r\n                    <SettingsOutlinedIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper\r\n                sx={{\r\n                  p: 3,\r\n                  textAlign: 'center',\r\n                  bgcolor: resultadoReal >= 0 ? kpiColors.resultadoPos : kpiColors.resultadoNeg,\r\n                  color: 'white',\r\n                  position: 'relative',\r\n                  height: '100%'\r\n                }}\r\n              >\r\n                <Avatar\r\n                  sx={{\r\n                    width: 56,\r\n                    height: 56,\r\n                    bgcolor: 'white',\r\n                    color: resultadoReal >= 0 ? 'info.main' : 'warning.main',\r\n                    mx: 'auto',\r\n                    mb: 1,\r\n                  }}\r\n                >\r\n                  {resultadoReal >= 0 ? '✓' : '⚠'}\r\n                </Avatar>\r\n                <Typography variant=\"h6\">Resultado</Typography>\r\n                <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                  {formatCurrency(resultadoReal)}\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  {resultadoReal >= 0 ? 'Superávit' : 'Déficit'}\r\n                </Typography>\r\n                <Tooltip title=\"Ver meses ordenados por impacto en resultado\">\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => setDrawerOpen(true) || setDrawerTipo('resultado')}\r\n                    sx={{ position: 'absolute', top: 8, right: 8, bgcolor: 'rgba(255,255,255,0.9)' }}\r\n                  >\r\n                    <HistoryOutlinedIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper sx={{ p: 3, textAlign: 'center' }}>\r\n                <Typography variant=\"overline\">Marcador de salud</Typography>\r\n                <Stack alignItems=\"center\" spacing={1}>\r\n                  <Chip label={`${salud.label}`} color={salud.color} />\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Cumplimiento: {(pctCumplimientoGlobal * 100).toFixed(0)}%\r\n                  </Typography>\r\n                </Stack>\r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Divider sx={{ mb: 2 }} />\r\n\r\n          {/* === GRÁFICO 1: Ingresos Estimado vs Real por mes === */}\r\n          <Paper sx={{ p: 3, mb: 3 }}>\r\n            <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\">\r\n              <Typography variant=\"h6\" fontWeight=\"600\">Ingresos: Estimado vs Real</Typography>\r\n              <Chip size=\"small\" label={verSoloEstimados ? 'Foco: Estimados' : 'Todos'} />\r\n            </Stack>\r\n            <Box sx={{ mt: 2 }}>\r\n              {ingresosData.map((item, index) => {\r\n                const max = Math.max(item.estimado, item.real) * 1.2 || 1;\r\n                const fila = datosMensuales[index];\r\n                return (\r\n                  <Box key={`${item.mes}-${index}`} sx={{ mb: 3 }}>\r\n                    <Typography variant=\"subtitle1\" fontWeight=\"600\" gutterBottom>\r\n                      {item.mes}\r\n                    </Typography>\r\n                    <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                      {/* Estimado */}\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                           onClick={() => fila && goToMes(fila)}>\r\n                        <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Estimado:</Typography>\r\n                        <Box sx={{ flex: 1, height: 30 }}>\r\n                          <ResponsiveContainer width=\"100%\" height={30}>\r\n                            <BarChart data={[{ name: item.mes, valor: item.estimado }]} layout=\"vertical\">\r\n                              <XAxis type=\"number\" domain={[0, max]} hide />\r\n                              <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                              <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                              <Bar dataKey=\"valor\" fill={INGRESO_EST_COLOR} radius={[4, 4, 4, 4]}\r\n                                   label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                            </BarChart>\r\n                          </ResponsiveContainer>\r\n                        </Box>\r\n                      </Box>\r\n\r\n                      {/* Real */}\r\n                      {!verSoloEstimados && (\r\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                             onClick={() => fila && goToMes(fila)}>\r\n                          <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Real:</Typography>\r\n                          <Box sx={{ flex: 1, height: 30 }}>\r\n                            <ResponsiveContainer width=\"100%\" height={30}>\r\n                              <BarChart data={[{ name: item.mes, valor: item.real }]} layout=\"vertical\">\r\n                                <XAxis type=\"number\" domain={[0, max]} hide />\r\n                                <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                                <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                                <Bar dataKey=\"valor\" fill={INGRESO_REAL_COLOR} radius={[4, 4, 4, 4]}\r\n                                     label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                              </BarChart>\r\n                            </ResponsiveContainer>\r\n                          </Box>\r\n                        </Box>\r\n                      )}\r\n                    </Box>\r\n                  </Box>\r\n                );\r\n              })}\r\n            </Box>\r\n          </Paper>\r\n\r\n          {/* === GRÁFICO 2: Egresos Estimado vs Real por mes === */}\r\n          <Paper sx={{ p: 3, mb: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom fontWeight=\"600\">\r\n              Egresos: Estimado vs Real\r\n            </Typography>\r\n            <Box sx={{ mt: 2 }}>\r\n              {egresosData.map((item, index) => {\r\n                const max = Math.max(item.estimado, item.real) * 1.2 || 1;\r\n                const fila = datosMensuales[index];\r\n                return (\r\n                  <Box key={`${item.mes}-${index}`} sx={{ mb: 3 }}>\r\n                    <Typography variant=\"subtitle1\" fontWeight=\"600\" gutterBottom>\r\n                      {item.mes}\r\n                    </Typography>\r\n                    <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                      {/* Estimado */}\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                           onClick={() => fila && goToMes(fila)}>\r\n                        <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Estimado:</Typography>\r\n                        <Box sx={{ flex: 1, height: 30 }}>\r\n                          <ResponsiveContainer width=\"100%\" height={30}>\r\n                            <BarChart data={[{ name: item.mes, valor: item.estimado }]} layout=\"vertical\">\r\n                              <XAxis type=\"number\" domain={[0, max]} hide />\r\n                              <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                              <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                              <Bar dataKey=\"valor\" fill={EGRESO_EST_COLOR} radius={[4, 4, 4, 4]}\r\n                                   label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                            </BarChart>\r\n                          </ResponsiveContainer>\r\n                        </Box>\r\n                      </Box>\r\n\r\n                      {/* Real */}\r\n                      {!verSoloEstimados && (\r\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                             onClick={() => fila && goToMes(fila)}>\r\n                          <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Real:</Typography>\r\n                          <Box sx={{ flex: 1, height: 30 }}>\r\n                            <ResponsiveContainer width=\"100%\" height={30}>\r\n                              <BarChart data={[{ name: item.mes, valor: item.real }]} layout=\"vertical\">\r\n                                <XAxis type=\"number\" domain={[0, max]} hide />\r\n                                <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                                <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                                <Bar dataKey=\"valor\" fill={EGRESO_REAL_COLOR} radius={[4, 4, 4, 4]}\r\n                                     label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                              </BarChart>\r\n                            </ResponsiveContainer>\r\n                          </Box>\r\n                        </Box>\r\n                      )}\r\n                    </Box>\r\n                  </Box>\r\n                );\r\n              })}\r\n            </Box>\r\n          </Paper>\r\n\r\n          {/* === GRÁFICO 3: Tendencia del Resultado === */}\r\n          <Paper sx={{ p: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom fontWeight=\"600\">\r\n              Tendencia del Resultado Mensual\r\n            </Typography>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={desvioData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n                <defs>\r\n                  <linearGradient id=\"splitColor\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"50%\" stopColor=\"#4caf50\" stopOpacity={0.1} />\r\n                    <stop offset=\"50%\" stopColor=\"#f44336\" stopOpacity={0.1} />\r\n                  </linearGradient>\r\n                </defs>\r\n                <Area dataKey=\"superavit\" fill=\"url(#splitColor)\" stroke=\"none\" yAxisId=\"left\" />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"superavit\"\r\n                  stroke=\"#2196f3\"\r\n                  strokeWidth={2}\r\n                  dot={{ r: 6, cursor: 'pointer' }}\r\n                  activeDot={{ r: 8 }}\r\n                  yAxisId=\"left\"\r\n                  onClick={(_, index) => {\r\n                    const fila = datosMensuales[index];\r\n                    if (fila) goToMes(fila);\r\n                  }}\r\n                />\r\n                <ReferenceLine\r\n                  y={0}\r\n                  stroke=\"#666\"\r\n                  strokeDasharray=\"3 3\"\r\n                  label={{ value: 'Punto de equilibrio', position: 'right', fill: '#666', fontSize: 12 }}\r\n                />\r\n                <XAxis dataKey=\"mes\" />\r\n                <YAxis\r\n                  yAxisId=\"left\"\r\n                  domain={[dataMin => Math.min(dataMin, 0), dataMax => Math.max(dataMax, 0)]}\r\n                  tickFormatter={(value) => formatCurrency(value)}\r\n                  width={70}\r\n                />\r\n                <RTooltip\r\n                  formatter={(value) => [\r\n                    Number(value) >= 0\r\n                      ? `Superávit: ${formatCurrency(value)}`\r\n                      : `Déficit: ${formatCurrency(value)}`,\r\n                    'Resultado'\r\n                  ]}\r\n                  contentStyle={{ color: 'black' }}\r\n                />\r\n                <Legend\r\n                  payload={[\r\n                    { value: 'Resultado mensual', type: 'line', color: '#2196f3' },\r\n                    { value: 'Punto de equilibrio', type: 'dashedLine', color: '#666' },\r\n                  ]}\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </Paper>\r\n        </>\r\n      )}\r\n\r\n      {/* === PESTAÑA 1: TABLA === */}\r\n      {tab === 1 && (\r\n        <Paper sx={{ overflowX: 'auto' }}>\r\n          <Table sx={datosBrutosTableSx}>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Mes</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Ingreso Est.</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Ingreso Real</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Egreso Est.</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Egreso Real</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Resultado</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Acciones</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datosMensuales.length > 0 ? (\r\n                datosMensuales.map((fila, idx) => {\r\n                  const ingresoEst = safeNumber(fila.ingresoEst);\r\n                  const ingresoReal = safeNumber(fila.ingresoReal);\r\n                  const egresoEst = safeNumber(fila.egresoEst);\r\n                  const egresoReal = safeNumber(fila.egresoReal);\r\n                  const totalReal = safeNumber(fila.totalReal ?? (ingresoReal - egresoReal));\r\n                  const totalEst = safeNumber(fila.totalEst ?? (ingresoEst - egresoEst));\r\n                  const diff = totalReal - totalEst;\r\n                  const pct = Math.abs(totalEst) > 0 ? (diff / Math.abs(totalEst)) * 100 : 0;\r\n\r\n                  return (\r\n                    <TableRow key={fila.mes || idx}>\r\n                      <TableCell sx={datosBrutosCellSx}>\r\n                        {fila.mes}\r\n                        {totalReal < 0 && (\r\n                          <Chip\r\n                            size=\"small\"\r\n                            icon={<WarningAmberOutlinedIcon fontSize=\"small\" />}\r\n                            sx={{ ml: 1, ...DEFICIT_CHIP_SX }}\r\n                            label=\"Mes con déficit\"\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(ingresoEst)}</TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(ingresoReal)}</TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(egresoEst)}</TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(egresoReal)}</TableCell>\r\n                      <TableCell\r\n                        sx={(theme) => ({\r\n                          ...datosBrutosCellSx(theme),\r\n                          fontWeight: 700,\r\n                          color: pct >= 0 ? '#66bb6a' : '#ef5350',\r\n                        })}\r\n                      >\r\n                        {formatCurrency(totalReal)}{' '}\r\n                        <span style={{ color: pct >= 0 ? '#66bb6a' : '#ef5350' }}>({pct.toFixed(0)}%)</span>\r\n                      </TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>\r\n                        <Stack direction=\"row\" spacing={1}>\r\n                          <Button size=\"small\" variant=\"contained\" onClick={() => goToMes(fila)}>Ver mes</Button>\r\n                        </Stack>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })\r\n              ) : (\r\n                <TableRow>\r\n                  <TableCell\r\n                    colSpan={7}\r\n                    sx={(theme) => ({\r\n                      ...datosBrutosCellSx(theme),\r\n                      textAlign: 'center',\r\n                      padding: '20px',\r\n                      color: (theme.vars || theme).palette.text.secondary,\r\n                    })}\r\n                  >\r\n                    No hay datos mensuales con los filtros actuales.\r\n                  </TableCell>\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n      )}\r\n\r\n      {/* Botón de volver */}\r\n      <Box mt={4} display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flexWrap=\"wrap\" gap={1}>\r\n        <Button variant=\"outlined\" onClick={() => navigate(-1)}>Volver</Button>\r\n      </Box>\r\n\r\n      {/* Drawer lateral de KPIs */}\r\n      <Drawer anchor=\"right\" open={drawerOpen} onClose={() => setDrawerOpen(false)}>\r\n        <Box sx={{ width: 360, p: 2 }}>\r\n          <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\" sx={{ mb: 1 }}>\r\n            <Typography variant=\"h6\">Meses con mayor desvío</Typography>\r\n            <IconButton onClick={() => setDrawerOpen(false)}><CloseIcon /></IconButton>\r\n          </Stack>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n            {drawerTipo === 'Ingresos' && 'Ordenado por diferencia Ingreso Real vs Estimado.'}\r\n            {drawerTipo === 'Egresos' && 'Ordenado por diferencia Egreso Real vs Estimado.'}\r\n            {drawerTipo === 'resultado' && 'Ordenado por diferencia de Resultado Real vs Estimado.'}\r\n          </Typography>\r\n          <List dense>\r\n            {mesesOrdenadosPorDesvio.map((fila, idx) => {\r\n              const ingresoDelta = safeNumber(fila.ingresoReal) - safeNumber(fila.ingresoEst);\r\n              const egresoDelta = safeNumber(fila.egresoReal) - safeNumber(fila.egresoEst);\r\n              const resEst = safeNumber(fila.totalEst ?? (safeNumber(fila.ingresoEst) - safeNumber(fila.egresoEst)));\r\n              const resReal = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n              const resDelta = resReal - resEst;\r\n\r\n              const valor = drawerTipo === 'Ingresos' ? ingresoDelta : drawerTipo === 'egresos' ? egresoDelta : resDelta;\r\n\r\n              return (\r\n                <ListItem\r\n                  key={fila.mes || idx}\r\n                  secondaryAction={\r\n                    <Button size=\"small\" variant=\"text\" onClick={() => { setDrawerOpen(false); goToMes(fila); }}>\r\n                      Ajustar mes\r\n                    </Button>\r\n                  }\r\n                >\r\n                  <ListItemText\r\n                    primary={fila.mes}\r\n                    secondary={\r\n                      <span style={{ color: valor >= 0 ? '#66bb6a' : '#ef5350' }}>\r\n                        {valor >= 0 ? '+' : '-'}{formatCurrency(Math.abs(valor))}\r\n                      </span>\r\n                    }\r\n                  />\r\n                </ListItem>\r\n              );\r\n            })}\r\n          </List>\r\n        </Box>\r\n      </Drawer>\r\n    </Box>\r\n  );\r\n}\r\n"],"names":["numberFormatter","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","formatCurrency","value","allowEmpty","arguments","length","undefined","num","Number","isNaN","concat","format","Math","abs","formatCurrencyInput","parseCurrency","raw","returnEmpty","str","toString","trim","cleaned","replace","negative","startsWith","numeric","normalized","EXPORT_PDF_BG","EXPORT_PDF_BG_HOVER","EXPORT_EXCEL_BG","EXPORT_EXCEL_BG_HOVER","ExportadorSimple","_ref","onExportPdf","onExportExcel","sx","_jsxs","Box","_objectSpread","display","gap","children","_jsx","Tooltip","title","IconButton","onClick","size","color","theme","hoverStyles","bgcolor","backgroundColor","borderColor","border","width","height","applyStyles","PictureAsPdfIcon","fontSize","GridOnIcon","http","axios","create","PRONOSTICO_BASE_URL","URL_CONFIG","PRONOSTICO","cognitoPoolConfig","UserPoolId","process","ClientId","refreshPromise","hasForcedLogout","isPronosticoRequest","url","Boolean","String","safeSessionGet","key","sessionStorage","getItem","err","console","warn","safeSessionSet","setItem","clearSessionAndRedirect","clear","_unused","sessionService","limpiarSesion","window","location","href","refreshTokens","refreshTokenValue","cognitoUser","buildCognitoUser","username","pool","CognitoUserPool","CognitoUser","Username","Pool","Promise","reject","Error","refreshToken","CognitoRefreshToken","RefreshToken","resolve","refreshSession","session","nextAccessToken","getAccessToken","getJwtToken","nextIdToken","getIdToken","nextRefreshToken","getRefreshToken","getToken","interceptors","request","use","config","accessToken","_config$headers","headers","Authorization","usuarioSub","response","async","error","status","__isRetryRequest","_config$headers2","newAccessToken","then","token","catch","refreshError","URL_REGISTRO","API_CONFIG","REGISTRO","getUsuarioHeaders","sub","getMovimientosPorRango","fechaDesde","fechaHasta","tipos","params","URLSearchParams","set","Array","isArray","join","data","get","safeNumber","v","INGRESO_EST_COLOR","INGRESO_REAL_COLOR","EGRESO_EST_COLOR","EGRESO_REAL_COLOR","SUPERAVIT_COLOR","DEFICIT_COLOR","DEFICIT_CHIP_SX","fontWeight","datosBrutosTableSx","borderCollapse","vars","palette","divider","datosBrutosCellSx","padding","datosBrutosHeaderCellSx","mesCorto","numStr","parseInt","toDateSafe","yearStr","monthStr","dayStr","split","year","month","day","isFinite","date","Date","getTime","isValidDate","getRealPorMes","meses","tipo","out","d","desde","formatDate","startOfMonth","hasta","endOfMonth","mesKey","resp","totalMes","content","reduce","acc","movimiento","_movimiento$monto","monto","montoTotal","PresupuestoDetalle","_theme$vars$palette","_theme$vars","_paletteVars$text$pri","_paletteVars$text","_paletteVars$common$w","_paletteVars$common","nombre","nombreUrl","useParams","navigate","useNavigate","useTheme","isLightMode","mode","paletteVars","kpiColors","React","ingresos","success","light","egresos","resultadoPos","info","resultadoNeg","warning","tabsLabelColor","text","primary","common","white","presupuesto","setPresupuesto","id","detalleMensual","loading","setLoading","setError","tab","setTab","verSoloDeficit","setVerSoloDeficit","verSoloEstimados","setVerSoloEstimados","umbralDesvio","setUmbralDesvio","anchorFiltros","setAnchorFiltros","drawerOpen","setDrawerOpen","drawerTipo","setDrawerTipo","res","listaPayload","lista","slug","decodeURIComponent","toLowerCase","encontrado","find","p","nombreOficial","_resHeader$data","resHeader","resTot","map","t","idx","ingresoEst","ingresoEstimado","egresoEst","egresoEstimado","mes","ingresoReal","egresoReal","totalEst","totalReal","realesIngresoPorMes","realesEgresoPorMes","fechasDisponibles","detalle","slice","filter","minTime","min","maxTime","max","rangoInicioDate","rangoFinDate","eachMonthOfInterval","start","end","egresosPorMes","ingresosPorMes","all","movError","prev","detalleMensualCompleto","cargar","datosMensualesRaw","fila","datosMensuales","rows","_fila$totalEst","_fila$totalReal","est","real","pctDesvio","deficit","_estTotal","_realTotal","_pctDesvio","_deficit","r","thr","totalIngresoEst","totalIngresoReal","totalEgresoEst","totalEgresoReal","resultadoReal","resultadoEstimado","pctCumplimientoGlobal","base","salud","pct","label","ingresosData","mm","estimado","egresosData","desvioData","_fila$totalReal2","superavit","fill","goToMes","alert","nombreNormalizado","encodeURIComponent","parts","mesNum","mesNombre","DateTimeFormat","mesesOrdenadosPorDesvio","_fila$totalEst2","_fila$totalReal3","delta","_delta","_absDelta","sort","a","b","openMenu","Typography","variant","gutterBottom","justifyContent","alignItems","mb","mt","flexWrap","Tabs","onChange","e","indicatorColor","Tab","Stack","direction","spacing","currentTarget","FilterAltOutlinedIcon","handleExportPdf","html2pdf","element","document","getElementById","opt","margin","filename","image","type","quality","html2canvas","scale","jsPDF","unit","orientation","default","from","save","handleExportExcel","_fila$mes","push","_ref2","utils","writeFile","ws","aoa_to_sheet","cellStyles","wb","book_new","book_append_sheet","Menu","anchorEl","open","onClose","handleCloseMenu","FormControlLabel","control","Switch","checked","_","TextField","target","_Fragment","Grid","container","item","xs","sm","md","Paper","textAlign","position","Avatar","mx","top","right","RuleOutlinedIcon","SettingsOutlinedIcon","HistoryOutlinedIcon","Chip","toFixed","Divider","index","flexDirection","cursor","minWidth","flex","ResponsiveContainer","BarChart","name","valor","layout","XAxis","domain","hide","YAxis","dataKey","RTooltip","formatter","Bar","radius","LineChart","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","Area","stroke","yAxisId","Line","strokeWidth","dot","activeDot","ReferenceLine","y","strokeDasharray","dataMin","dataMax","tickFormatter","contentStyle","Legend","payload","overflowX","Table","TableHead","TableRow","TableCell","TableBody","_fila$totalReal4","_fila$totalEst3","diff","icon","WarningAmberOutlinedIcon","ml","style","Button","colSpan","secondary","Drawer","anchor","CloseIcon","List","dense","_fila$totalEst4","_fila$totalReal5","ingresoDelta","egresoDelta","resEst","resReal","ListItem","secondaryAction","ListItemText"],"sourceRoot":""}