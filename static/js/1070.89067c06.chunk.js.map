{"version":3,"file":"static/js/1070.89067c06.chunk.js","mappings":"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","sources":["utils/currency.js","shared-components/ExportadorSimple.js","api/http.js","reportes/reportes.service.js","pronostico/presupuesto/components/PresupuestoDetalle.js"],"sourcesContent":["export const numberFormatter = new Intl.NumberFormat('es-AR', {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\nexport const formatCurrency = (value, { allowEmpty = false } = {}) => {\r\n  if (value === '' || value === null || typeof value === 'undefined') {\r\n    return allowEmpty ? '' : '$ 0';\r\n  }\r\n  const num = Number(value);\r\n  if (Number.isNaN(num)) {\r\n    return allowEmpty ? '' : '$ 0';\r\n  }\r\n  const sign = num < 0 ? '-' : '';\r\n  return `${sign}$ ${numberFormatter.format(Math.abs(num))}`;\r\n};\r\n\r\nexport const formatCurrencyInput = (value) => formatCurrency(value, { allowEmpty: true });\r\n\r\nexport const parseCurrency = (raw, { returnEmpty = false } = {}) => {\r\n  if (raw == null) return returnEmpty ? '' : 0;\r\n  const str = raw.toString().trim();\r\n  if (!str) return returnEmpty ? '' : 0;\r\n  const cleaned = str.replace(/\\s+/g, '').replace(/\\$/g, '');\r\n  const negative = cleaned.startsWith('-');\r\n  const numeric = cleaned.replace(/[^0-9,.-]/g, '');\r\n  if (!numeric || numeric === '-') return returnEmpty ? '' : 0;\r\n  const normalized = numeric\r\n    .replace(/-/g, '')\r\n    .replace(/\\./g, '')\r\n    .replace(',', '.');\r\n  const num = Number(normalized);\r\n  if (Number.isNaN(num)) return returnEmpty ? '' : 0;\r\n  return negative ? -num : num;\r\n};\r\n","import * as React from 'react';\r\nimport { Box, IconButton, Tooltip } from '@mui/material';\r\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\r\nimport GridOnIcon from '@mui/icons-material/GridOn'; // <-- Nuevo icono para Excel\r\n\r\nconst EXPORT_PDF_BG = '#FDE4E3';\r\nconst EXPORT_PDF_BG_HOVER = '#FACDCA';\r\nconst EXPORT_EXCEL_BG = '#E5F4E5';\r\nconst EXPORT_EXCEL_BG_HOVER = '#CAE7CB';\r\n\r\nexport default function ExportadorSimple({\r\n                                             onExportPdf,\r\n                                             onExportExcel,\r\n                                             sx = {},\r\n                                         }) {\r\n    return (\r\n        <Box\r\n            sx={{\r\n                display: 'flex',\r\n                gap: 1,\r\n                // NO posición fija por defecto para mayor flexibilidad\r\n                ...sx,\r\n            }}\r\n        >\r\n            <Tooltip title=\"Exportar PDF\">\r\n                <IconButton\r\n                    onClick={onExportPdf}\r\n                    size=\"small\"\r\n                    color=\"error\"\r\n                    sx={(theme) => {\r\n                        const hoverStyles = {\r\n                            bgcolor: `${EXPORT_PDF_BG_HOVER} !important`,\r\n                            backgroundColor: `${EXPORT_PDF_BG_HOVER} !important`,\r\n                            borderColor: '#d32f2f',\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                        };\r\n                        return {\r\n                            border: '1px solid',\r\n                            borderColor: '#d32f2f',\r\n                            bgcolor: `${EXPORT_PDF_BG} !important`,\r\n                            backgroundColor: `${EXPORT_PDF_BG} !important`,\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                            '&:hover': hoverStyles,\r\n                            width: 36,\r\n                            height: 36,\r\n                            ...theme.applyStyles('dark', {\r\n                                borderColor: '#d32f2f',\r\n                                '&:hover': hoverStyles,\r\n                            }),\r\n                        };\r\n                    }}\r\n                    aria-label=\"Exportar PDF\"\r\n                >\r\n                    <PictureAsPdfIcon fontSize=\"small\" />\r\n                </IconButton>\r\n            </Tooltip>\r\n\r\n            <Tooltip title=\"Exportar Excel\">\r\n                <IconButton\r\n                    onClick={onExportExcel}\r\n                    size=\"small\"\r\n                    color=\"success\"\r\n                    sx={(theme) => {\r\n                        const hoverStyles = {\r\n                            bgcolor: `${EXPORT_EXCEL_BG_HOVER} !important`,\r\n                            backgroundColor: `${EXPORT_EXCEL_BG_HOVER} !important`,\r\n                            borderColor: '#2e7d32',\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                        };\r\n                        return {\r\n                            border: '1px solid',\r\n                            borderColor: '#2e7d32',\r\n                            bgcolor: `${EXPORT_EXCEL_BG} !important`,\r\n                            backgroundColor: `${EXPORT_EXCEL_BG} !important`,\r\n                            '& .MuiSvgIcon-root': {\r\n                                color: '#000 !important',\r\n                            },\r\n                            '&:hover': hoverStyles,\r\n                            width: 36,\r\n                            height: 36,\r\n                            ...theme.applyStyles('dark', {\r\n                                borderColor: '#2e7d32',\r\n                                '&:hover': hoverStyles,\r\n                            }),\r\n                        };\r\n                    }}\r\n                    aria-label=\"Exportar Excel\"\r\n                >\r\n                    <GridOnIcon fontSize=\"small\" /> {/* Icono de tabla tipo Excel */}\r\n                </IconButton>\r\n            </Tooltip>\r\n        </Box>\r\n    );\r\n}\r\n","import axios from \"axios\";\r\nimport {\r\n  CognitoUserPool,\r\n  CognitoUser,\r\n  CognitoRefreshToken,\r\n} from \"amazon-cognito-identity-js\";\r\nimport { sessionService } from \"../shared-services/sessionService\";\r\nimport URL_CONFIG from \"../config/api-config\";\r\n\r\nconst http = axios.create();\r\nconst PRONOSTICO_BASE_URL = URL_CONFIG.PRONOSTICO;\r\nconst cognitoPoolConfig = {\r\n  UserPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\r\n  ClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\r\n};\r\n\r\nlet refreshPromise = null;\r\nlet hasForcedLogout = false;\r\n\r\nconst isPronosticoRequest = (url) =>\r\n  Boolean(\r\n    url &&\r\n      PRONOSTICO_BASE_URL &&\r\n      String(url).startsWith(String(PRONOSTICO_BASE_URL)),\r\n  );\r\n\r\nconst safeSessionGet = (key) => {\r\n  try {\r\n    return sessionStorage.getItem(key);\r\n  } catch (err) {\r\n    console.warn(\"No se pudo leer sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst safeSessionSet = (key, value) => {\r\n  try {\r\n    if (value !== undefined && value !== null) {\r\n      sessionStorage.setItem(key, value);\r\n    }\r\n  } catch (err) {\r\n    console.warn(\"No se pudo escribir en sessionStorage:\", err);\r\n  }\r\n};\r\n\r\nconst clearSessionAndRedirect = () => {\r\n  if (hasForcedLogout) {\r\n    return;\r\n  }\r\n  hasForcedLogout = true;\r\n  try {\r\n    sessionStorage.clear();\r\n  } catch {\r\n    /* noop */\r\n  }\r\n  if (sessionService?.limpiarSesion) {\r\n    sessionService.limpiarSesion();\r\n  }\r\n  if (typeof window !== \"undefined\") {\r\n    window.location.href = \"/#/signin\";\r\n  }\r\n};\r\n\r\nconst buildCognitoUser = () => {\r\n  const username = safeSessionGet(\"email\") || safeSessionGet(\"username\");\r\n  if (\r\n    !username ||\r\n    !cognitoPoolConfig.UserPoolId ||\r\n    !cognitoPoolConfig.ClientId\r\n  ) {\r\n    return null;\r\n  }\r\n  const pool = new CognitoUserPool(cognitoPoolConfig);\r\n  return new CognitoUser({\r\n    Username: username,\r\n    Pool: pool,\r\n  });\r\n};\r\n\r\nconst refreshTokens = () => {\r\n  const refreshTokenValue = safeSessionGet(\"refreshToken\");\r\n  const cognitoUser = buildCognitoUser();\r\n  if (!refreshTokenValue || !cognitoUser) {\r\n    return Promise.reject(new Error(\"No hay datos para renovar la sesión.\"));\r\n  }\r\n  const refreshToken = new CognitoRefreshToken({\r\n    RefreshToken: refreshTokenValue,\r\n  });\r\n  return new Promise((resolve, reject) => {\r\n    cognitoUser.refreshSession(refreshToken, (err, session) => {\r\n      if (err) {\r\n        reject(err);\r\n        return;\r\n      }\r\n      const nextAccessToken = session.getAccessToken().getJwtToken();\r\n      const nextIdToken = session.getIdToken().getJwtToken();\r\n      const nextRefreshToken = session.getRefreshToken().getToken();\r\n      safeSessionSet(\"accessToken\", nextAccessToken);\r\n      safeSessionSet(\"idToken\", nextIdToken);\r\n      if (nextRefreshToken) {\r\n        safeSessionSet(\"refreshToken\", nextRefreshToken);\r\n      }\r\n      resolve(nextAccessToken);\r\n    });\r\n  });\r\n};\r\n\r\nconst getRefreshPromise = () => {\r\n  if (!refreshPromise) {\r\n    refreshPromise = refreshTokens()\r\n      .then((token) => {\r\n        refreshPromise = null;\r\n        return token;\r\n      })\r\n      .catch((error) => {\r\n        refreshPromise = null;\r\n        throw error;\r\n      });\r\n  }\r\n  return refreshPromise;\r\n};\r\n\r\nhttp.interceptors.request.use((config) => {\r\n  const accessToken = sessionStorage.getItem(\"accessToken\");\r\n  if (isPronosticoRequest(config.url)) {\r\n    config.headers = config.headers ?? {};\r\n    if (accessToken) {\r\n      config.headers.Authorization = `Bearer ${accessToken}`;\r\n    }\r\n    const usuarioSub = sessionStorage.getItem(\"sub\");\r\n    if (usuarioSub) {\r\n      config.headers[\"X-Usuario-Sub\"] = usuarioSub;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nhttp.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const { config, response } = error;\r\n    if (\r\n      !config ||\r\n      !response ||\r\n      response.status !== 401 ||\r\n      !isPronosticoRequest(config.url)\r\n    ) {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (config.__isRetryRequest) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    try {\r\n      const newAccessToken = await getRefreshPromise();\r\n      if (!newAccessToken) {\r\n        throw new Error(\"No se obtuvo un token renovado.\");\r\n      }\r\n      config.__isRetryRequest = true;\r\n      config.headers = config.headers ?? {};\r\n      config.headers.Authorization = `Bearer ${newAccessToken}`;\r\n      return http(config);\r\n    } catch (refreshError) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(refreshError);\r\n    }\r\n  },\r\n);\r\n\r\nexport default http;\r\n","import axios from 'axios';\r\nimport API_CONFIG from '../config/api-config';\r\n\r\nconst URL_REGISTRO = API_CONFIG.REGISTRO; \r\n\r\nfunction getUsuarioHeaders() {\r\n  const headers = {};\r\n  const sub = sessionStorage.getItem('sub');\r\n  const token = sessionStorage.getItem('accessToken');\r\n  if (sub) headers['X-Usuario-Sub'] = sub; // tenant\r\n  if (token) headers['Authorization'] = `Bearer ${token}`;\r\n  return headers;\r\n}\r\n\r\n/**\r\n * Llama a /movimientos en REGISTRO usando fecha_emision (fechaDesde/fechaHasta).\r\n * - tipos: string ('EGRESO' | 'INGRESO') o array => CSV.\r\n * - No enviar sortBy/sortDir (evita 400 por validación).\r\n * - Devuelve `data` (puede venir paginado en `data.content` o como array).\r\n */\r\nexport async function getMovimientosPorRango({ fechaDesde, fechaHasta, tipos }) {\r\n  const params = new URLSearchParams();\r\n  params.set('page', 0);\r\n  params.set('size', 500);\r\n  if (fechaDesde) params.set('fechaDesde', fechaDesde); // YYYY-MM-DD\r\n  if (fechaHasta) params.set('fechaHasta', fechaHasta);\r\n\r\n  // CSV: evita &tipos=INGRESO&tipos=EGRESO → 400\r\n  if (Array.isArray(tipos) && tipos.length > 0) {\r\n    params.set('tipos', tipos.join(','));\r\n  } else if (typeof tipos === 'string' && tipos) {\r\n    params.set('tipos', tipos);\r\n  }\r\n\r\n  const url = `${URL_REGISTRO}/movimientos?${params.toString()}`;\r\n  const { data } = await axios.get(url, { headers: getUsuarioHeaders() });\r\n  return data;\r\n}\r\n\r\n","import * as React from 'react';\r\nimport {\r\n  Box, Typography, Paper, Grid, Button, Tabs, Tab, Avatar, Chip, Stack, Tooltip,\r\n  IconButton, Divider, Drawer, List, ListItem, ListItemText, TextField, MenuItem, Switch,\r\n  FormControlLabel, Menu, Table, TableHead, TableRow, TableCell, TableBody\r\n} from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport ExportadorSimple from '../../../shared-components/ExportadorSimple';\r\nimport http from '../../../api/http';\r\nimport { formatCurrency } from '../../../utils/currency';\r\nimport { eachMonthOfInterval, startOfMonth, endOfMonth, format as formatDate } from 'date-fns';\r\nimport { getMovimientosPorRango } from '../../../reportes/reportes.service';\r\nimport {\r\n  ResponsiveContainer, BarChart, Bar, XAxis, YAxis, Tooltip as RTooltip, Legend,\r\n  LineChart, Line, Area, ReferenceLine\r\n} from 'recharts';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\nimport FilterAltOutlinedIcon from '@mui/icons-material/FilterAltOutlined';\r\nimport RuleOutlinedIcon from '@mui/icons-material/RuleOutlined';\r\nimport HistoryOutlinedIcon from '@mui/icons-material/HistoryOutlined';\r\nimport SettingsOutlinedIcon from '@mui/icons-material/SettingsOutlined';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport WarningAmberOutlinedIcon from '@mui/icons-material/WarningAmberOutlined';\r\nimport API_CONFIG from '../../../config/api-config';\r\n\r\n// Helper seguro para números\r\nconst safeNumber = (v) =>\r\n  typeof v === 'number' ? v : v != null && !isNaN(Number(v)) ? Number(v) : 0;\r\n\r\n// Colores\r\nconst INGRESO_EST_COLOR = '#a5d6a7';\r\nconst INGRESO_REAL_COLOR = '#4caf50';\r\nconst EGRESO_EST_COLOR = '#ef9a9a';\r\nconst EGRESO_REAL_COLOR = '#f44336';\r\nconst SUPERAVIT_COLOR = '#4caf50';\r\nconst DEFICIT_COLOR = '#f44336';\r\nconst DEFICIT_CHIP_SX = {\r\n  fontWeight: 500,\r\n  bgcolor: '#FFDE70',\r\n  backgroundColor: '#FFDE70',\r\n  color: '#000',\r\n  border: '1px solid #F5C16C',\r\n  '& .MuiChip-label': { color: '#000' },\r\n  '& .MuiChip-icon': { color: '#000' },\r\n  '&.MuiChip-filled': { backgroundColor: '#FFDE70' },\r\n};\r\n\r\nconst datosBrutosTableSx = (theme) => ({\r\n  borderCollapse: 'collapse',\r\n  border: `1px solid ${(theme.vars || theme).palette.divider}`,\r\n});\r\n\r\nconst datosBrutosCellSx = (theme) => ({\r\n  border: `1px solid ${(theme.vars || theme).palette.divider}`,\r\n  padding: '12px',\r\n});\r\n\r\nconst datosBrutosHeaderCellSx = (theme) => ({\r\n  ...datosBrutosCellSx(theme),\r\n  fontWeight: 700,\r\n});\r\n\r\n// Mapeo de número de mes a nombre corto\r\nconst mesCorto = (numStr) => {\r\n  const nombres = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\r\n  const idx = parseInt(numStr, 10) - 1;\r\n  return nombres[idx] || numStr;\r\n};\r\n\r\n// Semáforo de salud presupuestaria por % cumplimiento\r\nfunction semaforoPorCumplimiento(pct) {\r\n  if (pct >= 0.95) return { label: 'Salud: Verde', color: 'success' };\r\n  if (pct >= 0.8) return { label: 'Salud: Amarillo', color: 'warning' };\r\n  return { label: 'Salud: Rojo', color: 'error' };\r\n}\r\n\r\n// Formatear diferencia\r\nconst formatDiff = (est, real) => {\r\n  const diff = safeNumber(real) - safeNumber(est);\r\n  const formatted = formatCurrency(Math.abs(diff));\r\n  return diff >= 0 ? `+${formatted}` : `-${formatted}`;\r\n};\r\n\r\nconst isValidDate = (value) => value instanceof Date && !Number.isNaN(value.getTime());\r\n\r\nconst toDateSafe = (value) => {\r\n  if (!value || typeof value !== 'string') return null;\r\n  const [yearStr, monthStr, dayStr] = value.split('-');\r\n  const year = Number(yearStr);\r\n  const month = Number(monthStr);\r\n  const day = Number(dayStr);\r\n  if (!Number.isFinite(year) || !Number.isFinite(month) || !Number.isFinite(day)) return null;\r\n  const date = new Date(year, month - 1, day);\r\n  return isValidDate(date) ? date : null;\r\n};\r\n\r\nasync function getRealPorMes(meses, tipo) {\r\n  const out = {};\r\n\r\n  for (const d of meses) {\r\n    const desde = formatDate(startOfMonth(d), 'yyyy-MM-dd');\r\n    const hasta = formatDate(endOfMonth(d), 'yyyy-MM-dd');\r\n    const mesKey = formatDate(d, 'yyyy-MM');\r\n    try {\r\n      const resp = await getMovimientosPorRango({ fechaDesde: desde, fechaHasta: hasta, tipos: tipo });\r\n      const movimientos = Array.isArray(resp?.content) ? resp.content : (Array.isArray(resp) ? resp : []);\r\n      const totalMes = movimientos.reduce((acc, movimiento) => {\r\n        const monto = Math.abs(Number(movimiento?.monto ?? movimiento?.montoTotal ?? 0));\r\n        return Number.isFinite(monto) ? acc + monto : acc;\r\n      }, 0);\r\n      out[mesKey] = totalMes;\r\n    } catch (error) {\r\n      console.error(`Error al obtener movimientos del mes ${mesKey} (${tipo}):`, error);\r\n      out[mesKey] = 0;\r\n    }\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\nexport default function PresupuestoDetalle() {\r\n  const { nombre: nombreUrl } = useParams();\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const isLightMode = theme.palette.mode === 'light';\r\n  const paletteVars = theme.vars?.palette ?? theme.palette;\r\n  const kpiColors = React.useMemo(\r\n    () => ({\r\n      ingresos: isLightMode ? 'hsl(120, 44%, 53%)' : paletteVars.success.light,\r\n      egresos: isLightMode ? 'hsl(0, 90%, 40%)' : paletteVars.error.light,\r\n      resultadoPos: isLightMode ? 'hsl(210, 98%, 42%)' : paletteVars.info.light,\r\n      resultadoNeg: isLightMode ? 'hsl(45, 90%, 40%)' : paletteVars.warning.light,\r\n    }),\r\n    [isLightMode, paletteVars.error.light, paletteVars.info.light, paletteVars.success.light, paletteVars.warning.light]\r\n  );\r\n  const tabsLabelColor = isLightMode\r\n    ? paletteVars.text?.primary ?? '#000'\r\n    : paletteVars.common?.white ?? '#fff';\r\n\r\n  const [presupuesto, setPresupuesto] = React.useState({\r\n    id: null,\r\n    nombre: '',\r\n    detalleMensual: [],\r\n  });\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n\r\n  const [tab, setTab] = React.useState(0); // 0: resumen, 1: tabla\r\n\r\n  // Filtros UI\r\n  const [verSoloDeficit, setVerSoloDeficit] = React.useState(false);\r\n  const [verSoloEstimados, setVerSoloEstimados] = React.useState(false);\r\n  const [umbralDesvio, setUmbralDesvio] = React.useState(0); // %\r\n  const [anchorFiltros, setAnchorFiltros] = React.useState(null);\r\n\r\n  // Panel lateral (KPIs clicables)\r\n  const [drawerOpen, setDrawerOpen] = React.useState(false);\r\n  const [drawerTipo, setDrawerTipo] = React.useState('Ingresos'); // 'ingresos' | 'egresos' | 'resultado'\r\n\r\n  React.useEffect(() => {\r\n    const cargar = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        // 1) Buscar presupuesto por nombre\r\n        const res = await http.get(`${API_CONFIG.PRONOSTICO}/api/presupuestos`);\r\n        const listaPayload = res?.data;\r\n        let lista = [];\r\n        if (Array.isArray(listaPayload)) {\r\n          lista = listaPayload;\r\n        } else if (Array.isArray(listaPayload?.content)) {\r\n          lista = listaPayload.content;\r\n        }\r\n\r\n        const slug = decodeURIComponent(nombreUrl || '')\r\n          .trim()\r\n          .toLowerCase()\r\n          .replace(/\\s+/g, '-');\r\n\r\n        const encontrado = lista.find(\r\n          (p) => (p?.nombre || '').trim().toLowerCase().replace(/\\s+/g, '-') === slug\r\n        );\r\n\r\n        if (!encontrado?.id) {\r\n          setPresupuesto({ id: null, nombre: 'No encontrado', detalleMensual: [] });\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        // 2) (opcional) obtener nombre \"oficial\" desde header\r\n        let nombreOficial = encontrado.nombre;\r\n        try {\r\n          const resHeader = await http.get(`${API_CONFIG.PRONOSTICO}/api/presupuestos/${encontrado.id}`);\r\n          if (resHeader?.data?.nombre) nombreOficial = resHeader.data.nombre;\r\n        } catch { /* no crítico */ }\r\n\r\n        // 3) Traer TOTALES mensuales del backend nuevo\r\n        const resTot = await http.get(`${API_CONFIG.PRONOSTICO}/api/presupuestos/${encontrado.id}/totales`);\r\n        const totales = Array.isArray(resTot.data) ? resTot.data : [];\r\n\r\n        // 4) Mapear a la forma que usa el front\r\n        const detalleMensual = totales.map((t, idx) => {\r\n          const ingresoEst = safeNumber(t.ingresoEstimado);\r\n          const egresoEst = safeNumber(t.egresoEstimado);\r\n          return {\r\n            id: idx + 1,\r\n            mes: t.mes, // \"YYYY-MM\"\r\n            ingresoEst,\r\n            ingresoReal: 0, // Inicializar en 0\r\n            egresoEst,\r\n            egresoReal: 0, // Inicializar en 0\r\n            totalEst: ingresoEst - egresoEst,\r\n            totalReal: 0,\r\n          };\r\n        });\r\n\r\n        let realesIngresoPorMes = {};\r\n        let realesEgresoPorMes = {};\r\n        try {\r\n          const fechasDisponibles = detalleMensual\r\n            .map((detalle) => {\r\n              const mesKey = (detalle?.mes || '').slice(0, 7);\r\n              if (!mesKey) return null;\r\n              return toDateSafe(`${mesKey}-01`);\r\n            })\r\n            .filter(Boolean);\r\n\r\n          if (fechasDisponibles.length > 0) {\r\n            const minTime = Math.min(...fechasDisponibles.map((d) => d.getTime()));\r\n            const maxTime = Math.max(...fechasDisponibles.map((d) => d.getTime()));\r\n            const rangoInicioDate = startOfMonth(new Date(minTime));\r\n            const rangoFinDate = endOfMonth(new Date(maxTime));\r\n            const meses = eachMonthOfInterval({ start: rangoInicioDate, end: rangoFinDate });\r\n\r\n            const [egresosPorMes, ingresosPorMes] = await Promise.all([\r\n              getRealPorMes(meses, 'Egreso'),\r\n              getRealPorMes(meses, 'Ingreso'),\r\n            ]);\r\n            realesEgresoPorMes = egresosPorMes;\r\n            realesIngresoPorMes = ingresosPorMes;\r\n          }\r\n        } catch (movError) {\r\n          console.error('Error al obtener datos reales del presupuesto:', movError);\r\n          setError((prev) => prev ?? 'No se pudieron cargar los datos reales del presupuesto.');\r\n        }\r\n\r\n        const detalleMensualCompleto = detalleMensual.map((detalle) => {\r\n          const mesKey = (detalle?.mes || '').slice(0, 7);\r\n          const egresoReal = safeNumber(realesEgresoPorMes[mesKey] || 0);\r\n          const ingresoReal = safeNumber(realesIngresoPorMes[mesKey] || 0);\r\n\r\n          return {\r\n            ...detalle,\r\n            ingresoReal,\r\n            egresoReal,\r\n            totalReal: ingresoReal - egresoReal,\r\n          };\r\n        });\r\n\r\n        setPresupuesto({\r\n          id: encontrado.id,\r\n          nombre: nombreOficial,\r\n          detalleMensual: detalleMensualCompleto,\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('Error al cargar presupuesto:', error);\r\n        setError('Error al cargar el presupuesto');\r\n        setPresupuesto({ id: null, nombre: 'Error', detalleMensual: [] });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (nombreUrl) cargar();\r\n  }, [nombreUrl]);\r\n\r\n  // ⚠️ Antes filtrabas por fila.id != null → vaciaba todo porque el endpoint no trae id.\r\n  // Ahora solo validamos que exista \"mes\".\r\n  const datosMensualesRaw = Array.isArray(presupuesto.detalleMensual)\r\n    ? presupuesto.detalleMensual.filter((fila) => !!fila?.mes)\r\n    : [];\r\n\r\n  // Transformaciones + filtros (sin tocar datos originales)\r\n  const datosMensuales = React.useMemo(() => {\r\n    let rows = [...datosMensualesRaw];\r\n\r\n    // Calcular % desvío por mes (en base a total Estimado vs Real)\r\n    rows = rows.map((fila) => {\r\n      const est = safeNumber(fila.totalEst ?? (safeNumber(fila.ingresoEst) - safeNumber(fila.egresoEst)));\r\n      const real = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n      const base = Math.abs(est) > 0 ? Math.abs(est) : 1;\r\n      const pctDesvio = (real - est) / base; // + = mejor que estimado, - = peor\r\n      const deficit = real < 0;\r\n      return { ...fila, _estTotal: est, _realTotal: real, _pctDesvio: pctDesvio, _deficit: deficit };\r\n    });\r\n\r\n    if (verSoloDeficit) {\r\n      rows = rows.filter((r) => r._realTotal < 0);\r\n    }\r\n\r\n    // Aplicar filtro por umbral de desvío\r\n    if (Number.isFinite(umbralDesvio) && umbralDesvio > 0) {\r\n      const thr = umbralDesvio / 100;\r\n      rows = rows.filter((r) => Math.abs(r._pctDesvio) >= thr || !Number.isFinite(r._pctDesvio));\r\n    }\r\n\r\n    return rows;\r\n  }, [datosMensualesRaw, verSoloDeficit, umbralDesvio]);\r\n\r\n  // Totales (sobre no-filtrados para KPIs globales)\r\n  const totalIngresoEst = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.ingresoEst), 0);\r\n  const totalIngresoReal = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.ingresoReal), 0);\r\n  const totalEgresoEst = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.egresoEst), 0);\r\n  const totalEgresoReal = datosMensualesRaw.reduce((acc, fila) => acc + safeNumber(fila.egresoReal), 0);\r\n  const resultadoReal = totalIngresoReal - totalEgresoReal;\r\n  const resultadoEstimado = totalIngresoEst - totalEgresoEst;\r\n\r\n  const pctCumplimientoGlobal = (() => {\r\n    const base = Math.abs(resultadoEstimado) > 0 ? Math.abs(resultadoEstimado) : 1;\r\n    // cap 120% para pintar semáforo\r\n    return Math.max(0, Math.min(1.2, resultadoReal / base));\r\n  })();\r\n\r\n  const salud = semaforoPorCumplimiento(pctCumplimientoGlobal);\r\n\r\n  // Datos para gráficos separados (respetan filtros visuales por meses)\r\n  const ingresosData = datosMensuales.map((fila) => {\r\n    const mm = (fila?.mes || '0000-01').split('-')[1];\r\n    return {\r\n      mes: mesCorto(mm),\r\n      estimado: safeNumber(fila.ingresoEst),\r\n      real: safeNumber(fila.ingresoReal),\r\n    };\r\n  });\r\n\r\n  const egresosData = datosMensuales.map((fila) => {\r\n    const mm = (fila?.mes || '0000-01').split('-')[1];\r\n    return {\r\n      mes: mesCorto(mm),\r\n      estimado: safeNumber(fila.egresoEst),\r\n      real: safeNumber(fila.egresoReal),\r\n    };\r\n  });\r\n\r\n  // Desvío/superávit mensual\r\n  const desvioData = datosMensuales.map((fila) => {\r\n    const superavit = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n    const mm = (fila?.mes || '0000-01').split('-')[1];\r\n    return {\r\n      mes: mesCorto(mm),\r\n      superavit,\r\n      fill: superavit >= 0 ? SUPERAVIT_COLOR : DEFICIT_COLOR,\r\n    };\r\n  });\r\n\r\n  // Navegación al detalle del mes\r\n  const goToMes = (fila) => {\r\n    // ⚠️ Antes exigías fila.id → muchos casos no lo traen.\r\n    // Con \"mes\" alcanza para derivar el nombre del mes.\r\n    if (!fila?.mes) {\r\n      alert('Mes no válido');\r\n      return;\r\n    }\r\n    const nombreNormalizado = encodeURIComponent((presupuesto.nombre || '').trim().toLowerCase().replace(/\\s+/g, '-'));\r\n    const parts = (fila.mes || '0000-01').split('-');\r\n    const mesNum = parseInt(parts[1] || '1', 10);\r\n    const mesNombre = new Intl.DateTimeFormat('es-ES', { month: 'long' }).format(new Date(2025, (mesNum || 1) - 1));\r\n    navigate(`/presupuestos/${nombreNormalizado}/detalle/${mesNombre}`);\r\n  };\r\n\r\n  // EXPORTS (igual)\r\n  const handleExportExcel = () => {\r\n    const data = [\r\n      ['Mes', 'Ingreso Estimado', 'Ingreso Real', 'Desvío Ingresos', 'Egreso Estimado', 'Egreso Real', 'Desvío Egresos', 'Total Estimado', 'Total Real', 'Total Desvío'],\r\n      ...datosMensualesRaw.map((fila) => [\r\n        fila.mes ?? '—',\r\n        safeNumber(fila.ingresoEst),\r\n        safeNumber(fila.ingresoReal),\r\n        safeNumber(fila.ingresoReal) - safeNumber(fila.ingresoEst),\r\n        safeNumber(fila.egresoEst),\r\n        safeNumber(fila.egresoReal),\r\n        safeNumber(fila.egresoReal) - safeNumber(fila.egresoEst),\r\n        safeNumber(fila.totalEst),\r\n        safeNumber(fila.totalReal),\r\n        safeNumber(fila.totalReal) - safeNumber(fila.totalEst),\r\n      ]),\r\n    ];\r\n\r\n    data.push(['', '', '', '', '', '', '', '', '', '']);\r\n    data.push(['Totales:', '', '', '', '', '', '', '', '', '']);\r\n    data.push([\r\n      '',\r\n      totalIngresoEst,\r\n      totalIngresoReal,\r\n      totalIngresoReal - totalIngresoEst,\r\n      totalEgresoEst,\r\n      totalEgresoReal,\r\n      totalEgresoReal - totalEgresoEst,\r\n      resultadoEstimado,\r\n      resultadoReal,\r\n      resultadoReal - resultadoEstimado,\r\n    ]);\r\n\r\n    import('xlsx').then(({ utils, writeFile }) => {\r\n      const ws = utils.aoa_to_sheet(data, { cellStyles: true });\r\n      const wb = utils.book_new();\r\n      utils.book_append_sheet(wb, ws, 'Detalle Presupuesto');\r\n      writeFile(wb, `Presupuesto_${presupuesto.nombre || ''}_${presupuesto.id || ''}.xlsx`, { cellStyles: true });\r\n    });\r\n  };\r\n\r\n  const handleExportPdf = () => {\r\n    import('html2pdf.js').then((html2pdf) => {\r\n      const element = document.getElementById('presupuesto-detalle-content');\r\n      const opt = {\r\n        margin: 0.5,\r\n        filename: `Presupuesto_${presupuesto.nombre || ''}_${presupuesto.id || ''}.pdf`,\r\n        image: { type: 'jpeg', quality: 0.95 },\r\n        html2canvas: { scale: 2 },\r\n        jsPDF: { unit: 'in', format: 'letter', orientation: 'landscape' },\r\n      };\r\n      html2pdf.default().from(element).set(opt).save();\r\n    });\r\n  };\r\n\r\n  // Drawer contenido: lista de meses ordenados por mayor desvío (absoluto)\r\n  const mesesOrdenadosPorDesvio = React.useMemo(() => {\r\n    const arr = datosMensualesRaw.map((fila) => {\r\n      const est = safeNumber(fila.totalEst ?? (safeNumber(fila.ingresoEst) - safeNumber(fila.egresoEst)));\r\n      const real = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n      const delta = real - est;\r\n      return { ...fila, _delta: delta, _absDelta: Math.abs(delta) };\r\n    });\r\n    return arr.sort((a, b) => b._absDelta - a._absDelta);\r\n  }, [datosMensualesRaw]);\r\n\r\n  const openMenu = Boolean(anchorFiltros);\r\n  const handleOpenMenu = (e) => setAnchorFiltros(e.currentTarget);\r\n  const handleCloseMenu = () => setAnchorFiltros(null);\r\n\r\n  return (\r\n    <Box id=\"presupuesto-detalle-content\" sx={{ width: '100%', p: 3 }}>\r\n      {/* Breadcrumbs simples */}\r\n      <Typography variant=\"h4\" gutterBottom fontWeight=\"600\">\r\n        Detalle de {presupuesto.nombre}\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" gutterBottom sx={{ color: 'text.primary' }}>\r\n        Compará tu planificación con lo real\r\n      </Typography>\r\n\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2, mt: 1, gap: 1, flexWrap: 'wrap' }}>\r\n        <Tabs value={tab} onChange={(e, v) => setTab(v)} indicatorColor=\"primary\">\r\n          <Tab\r\n            label=\"Resumen\"\r\n            sx={{\r\n              color: tabsLabelColor,\r\n              '&.Mui-selected': { color: tabsLabelColor },\r\n              '& .MuiTab-wrapper': { color: tabsLabelColor },\r\n            }}\r\n          />\r\n          <Tab\r\n            label=\"Datos brutos\"\r\n            sx={{\r\n              color: tabsLabelColor,\r\n              '&.Mui-selected': { color: tabsLabelColor },\r\n              '& .MuiTab-wrapper': { color: tabsLabelColor },\r\n            }}\r\n          />\r\n        </Tabs>\r\n\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n          <Tooltip title=\"Filtros\">\r\n            <IconButton onClick={handleOpenMenu}><FilterAltOutlinedIcon /></IconButton>\r\n          </Tooltip>\r\n          <ExportadorSimple onExportPdf={handleExportPdf} onExportExcel={handleExportExcel} />\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* Menú de Filtros */}\r\n      <Menu anchorEl={anchorFiltros} open={openMenu} onClose={handleCloseMenu}>\r\n        <Box sx={{ p: 2, width: 280 }}>\r\n          <Stack spacing={1.5}>\r\n            <FormControlLabel\r\n              control={<Switch checked={verSoloDeficit} onChange={(_, v) => setVerSoloDeficit(v)} />}\r\n              label=\"Ver solo meses con déficit\"\r\n            />\r\n            <FormControlLabel\r\n              control={<Switch checked={verSoloEstimados} onChange={(_, v) => setVerSoloEstimados(v)} />}\r\n              label=\"Mostrar foco en estimados (oculta ‘Real’ en gráficas)\"\r\n            />\r\n            <TextField\r\n              label=\"Umbral de desvío (%)\"\r\n              type=\"number\"\r\n              size=\"small\"\r\n              value={umbralDesvio}\r\n              onChange={(e) => setUmbralDesvio(Math.max(0, Number(e.target.value)))}\r\n            />\r\n          </Stack>\r\n        </Box>\r\n      </Menu>\r\n\r\n      {/* === PESTAÑA 0: RESUMEN VISUAL === */}\r\n      {tab === 0 && (\r\n        <>\r\n          {/* KPIs con acciones rápidas */}\r\n          <Grid container spacing={2} mb={2}>\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper sx={{ p: 3, textAlign: 'center', bgcolor: kpiColors.ingresos, color: 'white', position: 'relative' }}>\r\n                <Avatar sx={{ width: 56, height: 56, bgcolor: 'white', color: 'success.main', mx: 'auto', mb: 1 }}>+</Avatar>\r\n                <Typography variant=\"h6\">Ingresos</Typography>\r\n                <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                  {formatCurrency(totalIngresoReal)}\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  {formatDiff(totalIngresoEst, totalIngresoReal)}\r\n                </Typography>\r\n                <Tooltip title=\"Ver meses con mayor desvío en ingresos\">\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => setDrawerOpen(true) || setDrawerTipo('Ingresos')}\r\n                    sx={{ position: 'absolute', top: 8, right: 8, bgcolor: 'rgba(255,255,255,0.9)' }}\r\n                  >\r\n                    <RuleOutlinedIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper sx={{ p: 3, textAlign: 'center', bgcolor: kpiColors.egresos, color: 'white', position: 'relative' }}>\r\n                <Avatar sx={{ width: 56, height: 56, bgcolor: 'white', color: 'error.main', mx: 'auto', mb: 1 }}>-</Avatar>\r\n                <Typography variant=\"h6\">Egresos</Typography>\r\n                <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                  {formatCurrency(totalEgresoReal)}\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  {formatDiff(totalEgresoEst, totalEgresoReal)}\r\n                </Typography>\r\n                <Tooltip title=\"Ver meses con mayor desvío en egresos\">\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => setDrawerOpen(true) || setDrawerTipo('egresos')}\r\n                    sx={{ position: 'absolute', top: 8, right: 8, bgcolor: 'rgba(255,255,255,0.9)' }}\r\n                  >\r\n                    <SettingsOutlinedIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper\r\n                sx={{\r\n                  p: 3,\r\n                  textAlign: 'center',\r\n                  bgcolor: resultadoReal >= 0 ? kpiColors.resultadoPos : kpiColors.resultadoNeg,\r\n                  color: 'white',\r\n                  position: 'relative'\r\n                }}\r\n              >\r\n                <Avatar\r\n                  sx={{\r\n                    width: 56,\r\n                    height: 56,\r\n                    bgcolor: 'white',\r\n                    color: resultadoReal >= 0 ? 'info.main' : 'warning.main',\r\n                    mx: 'auto',\r\n                    mb: 1,\r\n                  }}\r\n                >\r\n                  {resultadoReal >= 0 ? '✓' : '⚠'}\r\n                </Avatar>\r\n                <Typography variant=\"h6\">Resultado</Typography>\r\n                <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                  {formatCurrency(resultadoReal)}\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  {resultadoReal >= 0 ? 'Superávit' : 'Déficit'}\r\n                </Typography>\r\n                <Tooltip title=\"Ver meses ordenados por impacto en resultado\">\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    onClick={() => setDrawerOpen(true) || setDrawerTipo('resultado')}\r\n                    sx={{ position: 'absolute', top: 8, right: 8, bgcolor: 'rgba(255,255,255,0.9)' }}\r\n                  >\r\n                    <HistoryOutlinedIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Paper>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <Paper sx={{ p: 3, textAlign: 'center' }}>\r\n                <Typography variant=\"overline\">Marcador de salud</Typography>\r\n                <Stack alignItems=\"center\" spacing={1}>\r\n                  <Chip label={`${salud.label}`} color={salud.color} />\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Cumplimiento: {(pctCumplimientoGlobal * 100).toFixed(0)}%\r\n                  </Typography>\r\n                </Stack>\r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Divider sx={{ mb: 2 }} />\r\n\r\n          {/* === GRÁFICO 1: Ingresos Estimado vs Real por mes === */}\r\n          <Paper sx={{ p: 3, mb: 3 }}>\r\n            <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\">\r\n              <Typography variant=\"h6\" fontWeight=\"600\">Ingresos: Estimado vs Real</Typography>\r\n              <Chip size=\"small\" label={verSoloEstimados ? 'Foco: Estimados' : 'Todos'} />\r\n            </Stack>\r\n            <Box sx={{ mt: 2 }}>\r\n              {ingresosData.map((item, index) => {\r\n                const max = Math.max(item.estimado, item.real) * 1.2 || 1;\r\n                const fila = datosMensuales[index];\r\n                return (\r\n                  <Box key={`${item.mes}-${index}`} sx={{ mb: 3 }}>\r\n                    <Typography variant=\"subtitle1\" fontWeight=\"600\" gutterBottom>\r\n                      {item.mes}\r\n                    </Typography>\r\n                    <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                      {/* Estimado */}\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                           onClick={() => fila && goToMes(fila)}>\r\n                        <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Estimado:</Typography>\r\n                        <Box sx={{ flex: 1, height: 30 }}>\r\n                          <ResponsiveContainer width=\"100%\" height={30}>\r\n                            <BarChart data={[{ name: item.mes, valor: item.estimado }]} layout=\"vertical\">\r\n                              <XAxis type=\"number\" domain={[0, max]} hide />\r\n                              <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                              <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                              <Bar dataKey=\"valor\" fill={INGRESO_EST_COLOR} radius={[4, 4, 4, 4]}\r\n                                   label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                            </BarChart>\r\n                          </ResponsiveContainer>\r\n                        </Box>\r\n                      </Box>\r\n\r\n                      {/* Real */}\r\n                      {!verSoloEstimados && (\r\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                             onClick={() => fila && goToMes(fila)}>\r\n                          <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Real:</Typography>\r\n                          <Box sx={{ flex: 1, height: 30 }}>\r\n                            <ResponsiveContainer width=\"100%\" height={30}>\r\n                              <BarChart data={[{ name: item.mes, valor: item.real }]} layout=\"vertical\">\r\n                                <XAxis type=\"number\" domain={[0, max]} hide />\r\n                                <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                                <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                                <Bar dataKey=\"valor\" fill={INGRESO_REAL_COLOR} radius={[4, 4, 4, 4]}\r\n                                     label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                              </BarChart>\r\n                            </ResponsiveContainer>\r\n                          </Box>\r\n                        </Box>\r\n                      )}\r\n                    </Box>\r\n                  </Box>\r\n                );\r\n              })}\r\n            </Box>\r\n          </Paper>\r\n\r\n          {/* === GRÁFICO 2: Egresos Estimado vs Real por mes === */}\r\n          <Paper sx={{ p: 3, mb: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom fontWeight=\"600\">\r\n              Egresos: Estimado vs Real\r\n            </Typography>\r\n            <Box sx={{ mt: 2 }}>\r\n              {egresosData.map((item, index) => {\r\n                const max = Math.max(item.estimado, item.real) * 1.2 || 1;\r\n                const fila = datosMensuales[index];\r\n                return (\r\n                  <Box key={`${item.mes}-${index}`} sx={{ mb: 3 }}>\r\n                    <Typography variant=\"subtitle1\" fontWeight=\"600\" gutterBottom>\r\n                      {item.mes}\r\n                    </Typography>\r\n                    <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                      {/* Estimado */}\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                           onClick={() => fila && goToMes(fila)}>\r\n                        <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Estimado:</Typography>\r\n                        <Box sx={{ flex: 1, height: 30 }}>\r\n                          <ResponsiveContainer width=\"100%\" height={30}>\r\n                            <BarChart data={[{ name: item.mes, valor: item.estimado }]} layout=\"vertical\">\r\n                              <XAxis type=\"number\" domain={[0, max]} hide />\r\n                              <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                              <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                              <Bar dataKey=\"valor\" fill={EGRESO_EST_COLOR} radius={[4, 4, 4, 4]}\r\n                                   label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                            </BarChart>\r\n                          </ResponsiveContainer>\r\n                        </Box>\r\n                      </Box>\r\n\r\n                      {/* Real */}\r\n                      {!verSoloEstimados && (\r\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, cursor: 'pointer' }}\r\n                             onClick={() => fila && goToMes(fila)}>\r\n                          <Typography variant=\"body2\" sx={{ minWidth: 80 }}>Real:</Typography>\r\n                          <Box sx={{ flex: 1, height: 30 }}>\r\n                            <ResponsiveContainer width=\"100%\" height={30}>\r\n                              <BarChart data={[{ name: item.mes, valor: item.real }]} layout=\"vertical\">\r\n                                <XAxis type=\"number\" domain={[0, max]} hide />\r\n                                <YAxis type=\"category\" dataKey=\"name\" hide />\r\n                                <RTooltip formatter={(value) => [formatCurrency(value), '']} />\r\n                                <Bar dataKey=\"valor\" fill={EGRESO_REAL_COLOR} radius={[4, 4, 4, 4]}\r\n                                     label={{ position: 'right', formatter: (v) => formatCurrency(v) }} />\r\n                              </BarChart>\r\n                            </ResponsiveContainer>\r\n                          </Box>\r\n                        </Box>\r\n                      )}\r\n                    </Box>\r\n                  </Box>\r\n                );\r\n              })}\r\n            </Box>\r\n          </Paper>\r\n\r\n          {/* === GRÁFICO 3: Tendencia del Resultado === */}\r\n          <Paper sx={{ p: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom fontWeight=\"600\">\r\n              Tendencia del Resultado Mensual\r\n            </Typography>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={desvioData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n                <defs>\r\n                  <linearGradient id=\"splitColor\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"50%\" stopColor=\"#4caf50\" stopOpacity={0.1} />\r\n                    <stop offset=\"50%\" stopColor=\"#f44336\" stopOpacity={0.1} />\r\n                  </linearGradient>\r\n                </defs>\r\n                <Area dataKey=\"superavit\" fill=\"url(#splitColor)\" stroke=\"none\" yAxisId=\"left\" />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"superavit\"\r\n                  stroke=\"#2196f3\"\r\n                  strokeWidth={2}\r\n                  dot={{ r: 6, cursor: 'pointer' }}\r\n                  activeDot={{ r: 8 }}\r\n                  yAxisId=\"left\"\r\n                  onClick={(_, index) => {\r\n                    const fila = datosMensuales[index];\r\n                    if (fila) goToMes(fila);\r\n                  }}\r\n                />\r\n                <ReferenceLine\r\n                  y={0}\r\n                  stroke=\"#666\"\r\n                  strokeDasharray=\"3 3\"\r\n                  label={{ value: 'Punto de equilibrio', position: 'right', fill: '#666', fontSize: 12 }}\r\n                />\r\n                <XAxis dataKey=\"mes\" />\r\n                <YAxis\r\n                  yAxisId=\"left\"\r\n                  domain={[dataMin => Math.min(dataMin, 0), dataMax => Math.max(dataMax, 0)]}\r\n                  tickFormatter={(value) => formatCurrency(value)}\r\n                  width={70}\r\n                />\r\n                <RTooltip\r\n                  formatter={(value) => [\r\n                    Number(value) >= 0\r\n                      ? `Superávit: ${formatCurrency(value)}`\r\n                      : `Déficit: ${formatCurrency(value)}`,\r\n                    'Resultado'\r\n                  ]}\r\n                  contentStyle={{ color: 'black' }}\r\n                />\r\n                <Legend\r\n                  payload={[\r\n                    { value: 'Resultado mensual', type: 'line', color: '#2196f3' },\r\n                    { value: 'Punto de equilibrio', type: 'dashedLine', color: '#666' },\r\n                  ]}\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </Paper>\r\n        </>\r\n      )}\r\n\r\n      {/* === PESTAÑA 1: TABLA === */}\r\n      {tab === 1 && (\r\n        <Paper sx={{ overflowX: 'auto' }}>\r\n          <Table sx={datosBrutosTableSx}>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Mes</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Ingreso Est.</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Ingreso Real</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Egreso Est.</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Egreso Real</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Resultado</TableCell>\r\n                <TableCell sx={datosBrutosHeaderCellSx}>Acciones</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datosMensuales.length > 0 ? (\r\n                datosMensuales.map((fila, idx) => {\r\n                  const ingresoEst = safeNumber(fila.ingresoEst);\r\n                  const ingresoReal = safeNumber(fila.ingresoReal);\r\n                  const egresoEst = safeNumber(fila.egresoEst);\r\n                  const egresoReal = safeNumber(fila.egresoReal);\r\n                  const totalReal = safeNumber(fila.totalReal ?? (ingresoReal - egresoReal));\r\n                  const totalEst = safeNumber(fila.totalEst ?? (ingresoEst - egresoEst));\r\n                  const diff = totalReal - totalEst;\r\n                  const pct = Math.abs(totalEst) > 0 ? (diff / Math.abs(totalEst)) * 100 : 0;\r\n\r\n                  return (\r\n                    <TableRow key={fila.mes || idx}>\r\n                      <TableCell sx={datosBrutosCellSx}>\r\n                        {fila.mes}\r\n                        {totalReal < 0 && (\r\n                          <Chip\r\n                            size=\"small\"\r\n                            icon={<WarningAmberOutlinedIcon fontSize=\"small\" />}\r\n                            sx={{ ml: 1, ...DEFICIT_CHIP_SX }}\r\n                            label=\"Mes con déficit\"\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(ingresoEst)}</TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(ingresoReal)}</TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(egresoEst)}</TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>{formatCurrency(egresoReal)}</TableCell>\r\n                      <TableCell\r\n                        sx={(theme) => ({\r\n                          ...datosBrutosCellSx(theme),\r\n                          fontWeight: 700,\r\n                          color: pct >= 0 ? '#66bb6a' : '#ef5350',\r\n                        })}\r\n                      >\r\n                        {formatCurrency(totalReal)}{' '}\r\n                        <span style={{ color: pct >= 0 ? '#66bb6a' : '#ef5350' }}>({pct.toFixed(0)}%)</span>\r\n                      </TableCell>\r\n                      <TableCell sx={datosBrutosCellSx}>\r\n                        <Stack direction=\"row\" spacing={1}>\r\n                          <Button size=\"small\" variant=\"contained\" onClick={() => goToMes(fila)}>Ver mes</Button>\r\n                        </Stack>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })\r\n              ) : (\r\n                <TableRow>\r\n                  <TableCell\r\n                    colSpan={7}\r\n                    sx={(theme) => ({\r\n                      ...datosBrutosCellSx(theme),\r\n                      textAlign: 'center',\r\n                      padding: '20px',\r\n                      color: (theme.vars || theme).palette.text.secondary,\r\n                    })}\r\n                  >\r\n                    No hay datos mensuales con los filtros actuales.\r\n                  </TableCell>\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n      )}\r\n\r\n      {/* Botón de volver */}\r\n      <Box mt={4} display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" flexWrap=\"wrap\" gap={1}>\r\n        <Button variant=\"outlined\" onClick={() => navigate(-1)}>Volver</Button>\r\n      </Box>\r\n\r\n      {/* Drawer lateral de KPIs */}\r\n      <Drawer anchor=\"right\" open={drawerOpen} onClose={() => setDrawerOpen(false)}>\r\n        <Box sx={{ width: 360, p: 2 }}>\r\n          <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\" sx={{ mb: 1 }}>\r\n            <Typography variant=\"h6\">Meses con mayor desvío</Typography>\r\n            <IconButton onClick={() => setDrawerOpen(false)}><CloseIcon /></IconButton>\r\n          </Stack>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n            {drawerTipo === 'Ingresos' && 'Ordenado por diferencia Ingreso Real vs Estimado.'}\r\n            {drawerTipo === 'Egresos' && 'Ordenado por diferencia Egreso Real vs Estimado.'}\r\n            {drawerTipo === 'resultado' && 'Ordenado por diferencia de Resultado Real vs Estimado.'}\r\n          </Typography>\r\n          <List dense>\r\n            {mesesOrdenadosPorDesvio.map((fila, idx) => {\r\n              const ingresoDelta = safeNumber(fila.ingresoReal) - safeNumber(fila.ingresoEst);\r\n              const egresoDelta = safeNumber(fila.egresoReal) - safeNumber(fila.egresoEst);\r\n              const resEst = safeNumber(fila.totalEst ?? (safeNumber(fila.ingresoEst) - safeNumber(fila.egresoEst)));\r\n              const resReal = safeNumber(fila.totalReal ?? (safeNumber(fila.ingresoReal) - safeNumber(fila.egresoReal)));\r\n              const resDelta = resReal - resEst;\r\n\r\n              const valor = drawerTipo === 'Ingresos' ? ingresoDelta : drawerTipo === 'egresos' ? egresoDelta : resDelta;\r\n\r\n              return (\r\n                <ListItem\r\n                  key={fila.mes || idx}\r\n                  secondaryAction={\r\n                    <Button size=\"small\" variant=\"text\" onClick={() => { setDrawerOpen(false); goToMes(fila); }}>\r\n                      Ajustar mes\r\n                    </Button>\r\n                  }\r\n                >\r\n                  <ListItemText\r\n                    primary={fila.mes}\r\n                    secondary={\r\n                      <span style={{ color: valor >= 0 ? '#66bb6a' : '#ef5350' }}>\r\n                        {valor >= 0 ? '+' : '-'}{formatCurrency(Math.abs(valor))}\r\n                      </span>\r\n                    }\r\n                  />\r\n                </ListItem>\r\n              );\r\n            })}\r\n          </List>\r\n        </Box>\r\n      </Drawer>\r\n    </Box>\r\n  );\r\n}\r\n"],"names":["numberFormatter","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","formatCurrency","value","allowEmpty","arguments","length","undefined","num","Number","isNaN","concat","format","Math","abs","formatCurrencyInput","parseCurrency","raw","returnEmpty","str","toString","trim","cleaned","replace","negative","startsWith","numeric","normalized","EXPORT_PDF_BG","EXPORT_PDF_BG_HOVER","EXPORT_EXCEL_BG","EXPORT_EXCEL_BG_HOVER","ExportadorSimple","_ref","onExportPdf","onExportExcel","sx","_jsxs","Box","_objectSpread","display","gap","children","_jsx","Tooltip","title","IconButton","onClick","size","color","theme","hoverStyles","bgcolor","backgroundColor","borderColor","border","width","height","applyStyles","PictureAsPdfIcon","fontSize","GridOnIcon","http","axios","create","PRONOSTICO_BASE_URL","URL_CONFIG","PRONOSTICO","cognitoPoolConfig","UserPoolId","process","ClientId","refreshPromise","hasForcedLogout","isPronosticoRequest","url","Boolean","String","safeSessionGet","key","sessionStorage","getItem","err","console","warn","safeSessionSet","setItem","clearSessionAndRedirect","clear","_unused","sessionService","limpiarSesion","window","location","href","refreshTokens","refreshTokenValue","cognitoUser","buildCognitoUser","username","pool","CognitoUserPool","CognitoUser","Username","Pool","Promise","reject","Error","refreshToken","CognitoRefreshToken","RefreshToken","resolve","refreshSession","session","nextAccessToken","getAccessToken","getJwtToken","nextIdToken","getIdToken","nextRefreshToken","getRefreshToken","getToken","interceptors","request","use","config","accessToken","_config$headers","headers","Authorization","usuarioSub","response","async","error","status","__isRetryRequest","_config$headers2","newAccessToken","then","token","catch","refreshError","URL_REGISTRO","API_CONFIG","REGISTRO","getUsuarioHeaders","sub","getMovimientosPorRango","fechaDesde","fechaHasta","tipos","params","URLSearchParams","set","Array","isArray","join","data","get","safeNumber","v","INGRESO_EST_COLOR","INGRESO_REAL_COLOR","EGRESO_EST_COLOR","EGRESO_REAL_COLOR","SUPERAVIT_COLOR","DEFICIT_COLOR","DEFICIT_CHIP_SX","fontWeight","datosBrutosTableSx","borderCollapse","vars","palette","divider","datosBrutosCellSx","padding","datosBrutosHeaderCellSx","mesCorto","numStr","parseInt","formatDiff","est","real","diff","formatted","toDateSafe","yearStr","monthStr","dayStr","split","year","month","day","isFinite","date","Date","getTime","isValidDate","getRealPorMes","meses","tipo","out","d","desde","formatDate","startOfMonth","hasta","endOfMonth","mesKey","resp","totalMes","content","reduce","acc","movimiento","_movimiento$monto","monto","montoTotal","PresupuestoDetalle","_theme$vars$palette","_theme$vars","_paletteVars$text$pri","_paletteVars$text","_paletteVars$common$w","_paletteVars$common","nombre","nombreUrl","useParams","navigate","useNavigate","useTheme","isLightMode","mode","paletteVars","kpiColors","React","ingresos","success","light","egresos","resultadoPos","info","resultadoNeg","warning","tabsLabelColor","text","primary","common","white","presupuesto","setPresupuesto","id","detalleMensual","loading","setLoading","setError","tab","setTab","verSoloDeficit","setVerSoloDeficit","verSoloEstimados","setVerSoloEstimados","umbralDesvio","setUmbralDesvio","anchorFiltros","setAnchorFiltros","drawerOpen","setDrawerOpen","drawerTipo","setDrawerTipo","res","listaPayload","lista","slug","decodeURIComponent","toLowerCase","encontrado","find","p","nombreOficial","_resHeader$data","resHeader","resTot","map","t","idx","ingresoEst","ingresoEstimado","egresoEst","egresoEstimado","mes","ingresoReal","egresoReal","totalEst","totalReal","realesIngresoPorMes","realesEgresoPorMes","fechasDisponibles","detalle","slice","filter","minTime","min","maxTime","max","rangoInicioDate","rangoFinDate","eachMonthOfInterval","start","end","egresosPorMes","ingresosPorMes","all","movError","prev","detalleMensualCompleto","cargar","datosMensualesRaw","fila","datosMensuales","rows","_fila$totalEst","_fila$totalReal","pctDesvio","deficit","_estTotal","_realTotal","_pctDesvio","_deficit","r","thr","totalIngresoEst","totalIngresoReal","totalEgresoEst","totalEgresoReal","resultadoReal","resultadoEstimado","pctCumplimientoGlobal","base","salud","pct","label","ingresosData","mm","estimado","egresosData","desvioData","_fila$totalReal2","superavit","fill","goToMes","alert","nombreNormalizado","encodeURIComponent","parts","mesNum","mesNombre","DateTimeFormat","mesesOrdenadosPorDesvio","_fila$totalEst2","_fila$totalReal3","delta","_delta","_absDelta","sort","a","b","openMenu","Typography","variant","gutterBottom","justifyContent","alignItems","mb","mt","flexWrap","Tabs","onChange","e","indicatorColor","Tab","Stack","direction","spacing","currentTarget","FilterAltOutlinedIcon","handleExportPdf","html2pdf","element","document","getElementById","opt","margin","filename","image","type","quality","html2canvas","scale","jsPDF","unit","orientation","default","from","save","handleExportExcel","_fila$mes","push","_ref2","utils","writeFile","ws","aoa_to_sheet","cellStyles","wb","book_new","book_append_sheet","Menu","anchorEl","open","onClose","handleCloseMenu","FormControlLabel","control","Switch","checked","_","TextField","target","_Fragment","Grid","container","item","xs","sm","md","Paper","textAlign","position","Avatar","mx","top","right","RuleOutlinedIcon","SettingsOutlinedIcon","HistoryOutlinedIcon","Chip","toFixed","Divider","index","flexDirection","cursor","minWidth","flex","ResponsiveContainer","BarChart","name","valor","layout","XAxis","domain","hide","YAxis","dataKey","RTooltip","formatter","Bar","radius","LineChart","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","Area","stroke","yAxisId","Line","strokeWidth","dot","activeDot","ReferenceLine","y","strokeDasharray","dataMin","dataMax","tickFormatter","contentStyle","Legend","payload","overflowX","Table","TableHead","TableRow","TableCell","TableBody","_fila$totalReal4","_fila$totalEst3","icon","WarningAmberOutlinedIcon","ml","style","Button","colSpan","secondary","Drawer","anchor","CloseIcon","List","dense","_fila$totalEst4","_fila$totalReal5","ingresoDelta","egresoDelta","resEst","resReal","ListItem","secondaryAction","ListItemText"],"sourceRoot":""}