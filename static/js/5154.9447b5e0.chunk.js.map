{"version":3,"file":"static/js/5154.9447b5e0.chunk.js","mappings":"8HAAA,MAAMA,EAAsB,IAAIC,KAAKC,aAAa,QAAS,CACzDC,MAAO,WACPC,SAAU,MACVC,sBAAuB,EACvBC,sBAAuB,IAOZC,EAAmB,SAACC,GAAsC,IAA/B,SAAEC,EAAW,UAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC9D,GAAc,OAAVF,QAA4BI,IAAVJ,EACpB,OAAOC,EAGT,MAAMI,EAAeC,OAAON,GAC5B,OAAIM,OAAOC,MAAMF,GACRJ,EAGFT,EAAoBgB,OAAOH,EACpC,EAEaI,EAAmB,SAACT,GAAyD,IAAlD,eAAEU,EAAiB,EAAC,SAAET,EAAW,MAAMC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACjF,GAAc,OAAVF,QAA4BI,IAAVJ,EACpB,OAAOC,EAGT,MAAMI,EAAeC,OAAON,GAC5B,OAAIM,OAAOC,MAAMF,GACRJ,EAGH,GAANU,OAAUN,EAAaO,QAAQF,GAAe,IAChD,C,iTC9Be,SAASG,IAA0B,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC/C,MAAMC,GAAQC,EAAAA,EAAAA,MACR,KAAEC,EAAI,WAAEC,IAAeC,EAAAA,EAAAA,MACvBC,GACM,WAATH,EAAoBC,EAAaD,IAASF,EAAMM,QAAQJ,MAAQ,QAC7DK,EAAkD,QAAvCpB,EAAsB,QAAtBC,EAAa,QAAbC,EAAGW,EAAMQ,YAAI,IAAAnB,OAAA,EAAVA,EAAYiB,eAAO,IAAAlB,EAAAA,EAAIY,EAAMM,eAAO,IAAAnB,EAAAA,EAAI,CAAC,EAiB7D,MAAO,CAAEkB,eAAcE,cAAaE,iBAdjB,SAAjBJ,EAE6B,QAFNf,EACM,QADNC,EACD,QADCC,EACnBe,EAAYG,cAAM,IAAAlB,OAAA,EAAlBA,EAAoBmB,aAAK,IAAApB,EAAAA,EACT,QADSE,EACzBc,EAAYK,YAAI,IAAAnB,OAAA,EAAhBA,EAAkBoB,eAAO,IAAAvB,EAAAA,EACzB,2BAEyB,QAFCI,EACD,QADCC,EACR,QADQC,EAC1BW,EAAYG,cAAM,IAAAd,OAAA,EAAlBA,EAAoBkB,aAAK,IAAAnB,EAAAA,EACT,QADSE,EACzBU,EAAYK,YAAI,IAAAf,OAAA,EAAhBA,EAAkBgB,eAAO,IAAAnB,EAAAA,EACzB,sBAQgDqB,mBALzB,QADLjB,EACN,QADMC,EACtBQ,EAAYK,YAAI,IAAAb,OAAA,EAAhBA,EAAkBiB,iBAAS,IAAAlB,EAAAA,EACT,SAAjBO,EACG,2BACA,qBAGR,C,eCjBA,MA2FA,EA3FqBlB,IAAkD,IAAjD,QAAE8B,EAAU,GAAE,QAAEC,GAAU,EAAK,SAAEC,GAAUhC,EAC/D,MAAM,aAAEkB,EAAY,iBAAEI,GAAqBvB,IACrCc,GAAQC,EAAAA,EAAAA,KACRmB,GAAWC,EAAAA,EAAAA,GAAcrB,EAAMsB,YAAYC,KAAK,OAChDC,EAA8B,SAAjBnB,EAEnB,OAAIa,GAEAO,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEC,MAAO,QAASC,UAC7CC,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAACJ,GAAI,CAAEK,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EACpEL,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,OAAOE,MAAO,OAChCJ,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI,CAAEK,QAAS,OAAQE,IAAK,GAAIL,SAClCQ,MAAMC,KAAK,CAAE/D,OAAQ,IAAKgE,IAAI,CAACC,EAAGC,KACjCjB,EAAAA,EAAAA,KAACW,EAAAA,EACC,CAEAT,QAAQ,UACRE,MAAO,IACPc,OAAQ,IAHHD,YAajBjB,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CACHC,QAAQ,WACRC,GAAI,CACFC,MAAO,OACPe,eAAgB,YAChBC,aAAc,EACdC,GAAI,QACJhB,UAEFL,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CACVJ,GAAI,CACFK,QAAS,OACTC,cAAe,SACfC,IAAK,EACLY,WAAY,UACZjB,UAEFL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CACFT,GAAI,CACFK,QAAS,OACTe,SAAU,CAAEC,GAAI,OAAQC,GAAI,QAC5BC,UAAW,UACXhB,IAAK,EACLiB,GAAI,CAAEH,GAAI,GAAKC,GAAI,GACnBG,eAAgB,CAAEJ,GAAI,SAAUC,GAAI,UACpCH,WAAY,SACZlB,MAAO,QACPC,SAEDb,EAAQuB,IAAKc,IACZ7B,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAEL5B,QAAQ,WACR6B,MAAM,UACNC,UAAYrC,OAAyB3C,EAAd6E,EAAOI,KAC9BC,QAASA,IAAc,OAARxC,QAAQ,IAARA,OAAQ,EAARA,EAAWmC,GAC1B1B,IAAEgC,EAAAA,EAAAA,GAAA,CACAC,WAAY,EACZC,KAAM1C,EAAW,uBAAyB,WAC1C2C,SAAU3C,EAAW,MAAQ,OAC7ByB,aAAc,EACdmB,GAAI5C,EAAW,EAAI,EACnB6C,GAAI7C,EAAW,IAAO,EACtB8C,cAAe,OACfC,SAAU,CAAElB,GAAI,GAAIC,GAAI,KACxBkB,UAAW,CAAEnB,GAAI,GAAIC,GAAI,IACzBrB,MAAOT,EAAW,OAAS,OAC3BiD,WAAY,IACZhB,eAAgB,SAChB,yBAA0B,CAAEiB,OAAQlD,EAAW,OAAI3C,IAC/C+C,GAAc,CAAEgC,MAAO,YAE7B,aAAYF,EAAOiB,MAAMzC,SAExBV,EAAWkC,EAAOI,KAAOJ,EAAOiB,OAvB5BjB,EAAOkB,YC5DpBC,EAAoBpG,GAAUA,EAoHpC,EAlHgBc,IAYT,IAZU,MACfuF,EAAK,MACLrG,EAAK,UACLsG,EAAYF,EAAgB,eAC5BG,EAAc,eACdC,EAAc,mBACdC,EAAqBL,EAAgB,MACrCM,EAAQ,GAAE,WACVC,EAAa,eAAc,QAC3B9D,GAAU,EAAK,MACf+D,EAAQ,KAAI,QACZC,GACD/F,EACC,MAAM,iBAAEsB,EAAgB,mBAAEM,GAAuB7B,IAEjD,OAAIgC,GAEAO,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,UAC9CC,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAAAF,SAAA,EACVL,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,OAAOE,MAAM,MAAMc,OAAQ,MAC7ClB,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,OAAOE,MAAM,MAAMc,OAAQ,MAC7ClB,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,cAAcE,MAAM,OAAOc,OAAQ,GAAIf,GAAI,CAAEuD,GAAI,UAMvEF,GAEAxD,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,UAC9CC,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAACJ,GAAI,CAAEK,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EACpEL,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,IACxBC,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,UAME,OAAVzD,GAAmC,qBAAVA,GAEzBoD,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,UAC9CC,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAACJ,GAAI,CAAEK,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EACpEL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQC,GAAI,CAAE4B,MAAOzC,GAAqBe,SAAC,+CAG9DoD,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,WAOVL,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,UAC9CC,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CACVJ,GAAI,CACFK,QAAS,OACTC,cAAe,SACfa,WAAY,UACZM,eAAgB,gBAChBlB,IAAK,EACL6B,GAAI,EACJC,GAAI,KACJnC,SAAA,EAEFL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,YACRC,GAAI,CACF4B,MAAO/C,EACP8E,SAAU,CAAEtC,GAAI,SAAUuC,GAAI,UAAWtC,GAAI,WAC7CpB,SAED4C,KAEH3C,EAAAA,EAAAA,MAACM,EAAAA,EAAG,CACFT,GAAI,CACF6D,UAAW,QACXC,SAAU,EACVvB,SAAU,GACVrC,SAAA,EAEFL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,KACR0C,WAAY,IACZzC,GAAI,CACF4B,MAAO/C,EACP8E,SAAU,CAAEtC,GAAI,SAAUuC,GAAI,SAAUtC,GAAI,UAC5CyC,WAAY,IACZC,UAAW,cACX9D,SAED6C,EAAUtG,KAEZuG,GACC7C,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,QAAQC,GAAI,CAAE4B,MAAOzC,GAAqBe,SAAA,CAC3D8C,EAAe,IAAE,KAClBnD,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACwD,UAAU,OAAOxB,WAAY,IAAIvC,SACnCgD,EAAmBD,QAGtB,c,2FCnGd,MAUMiB,EAAc,CAClB,QACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,aACA,UACA,YACA,aAGIC,EAAoB1H,IACxB,IAAKA,EAAO,MAAO,GACnB,MAAM2H,EAAQC,OAAO5H,GAAO6H,MAAM,KAClC,GAAIF,EAAMxH,OAAS,EACjB,OAAOH,EAET,MAAM8H,EAAOxH,OAAOqH,EAAM,IACpBI,EAAazH,OAAOqH,EAAM,IAAM,EACtC,OACGrH,OAAO0H,SAASF,KAChBxH,OAAO0H,SAASD,IACjBA,EAAa,GACbA,GAAcN,EAAYtH,OAEnBH,EAEH,GAANW,OAAU8G,EAAYM,GAAW,KAAApH,OAAImH,IAGjCG,EAAkBA,CAAC/D,EAAMgE,KAC7B,MAAMC,EAAaT,EAAiBxD,GAC9BkE,EAAWV,EAAiBQ,GAClC,OAAIC,GAAcC,EACTD,IAAeC,EAAWD,EAAU,GAAAxH,OAAMwH,EAAU,OAAAxH,OAAMyH,GAE5DD,GAAcC,GAAY,IAG7BC,EAAUC,GACdC,mBACEX,OAAW,OAAJU,QAAI,IAAJA,EAAAA,EAAQ,IACZE,OACAC,cACAC,QAAQ,OAAQ,MAGjBC,EAAuB3I,IAC3B,IAAKA,EAAO,OAAO,KACnB,MAAM2H,EAAQC,OAAO5H,GAAO6H,MAAM,KAClC,GAAIF,EAAMxH,OAAS,EACjB,OAAO,KAET,MAAM2H,EAAOxH,OAAOqH,EAAM,IACpBI,EAAazH,OAAOqH,EAAM,IAAM,EACtC,OAAKrH,OAAO0H,SAASF,IAAUxH,OAAO0H,SAASD,GAGxC,IAAIa,KAAKd,EAAMC,EAAY,GAFzB,MAWLc,EAAuBA,CAACC,EAAQC,KACpC,IAAKD,EAAQ,OAAO,EACpB,MAAM5E,EAAOyE,EAAoBG,EAAOE,OAClCd,EATmBlI,KACzB,MAAMiJ,EAAQN,EAAoB3I,GAClC,OAAKiJ,EACE,IAAIL,KAAKK,EAAMC,cAAeD,EAAME,WAAa,EAAG,EAAG,GAAI,GAAI,GAAI,KADvD,MAORC,CAAkBN,EAAOO,OACpC,SAAKnF,IAASgE,KAGPhE,GAAQ6E,GAAaA,GAAab,IAGrCoB,EAAiBtJ,IACrB,GAAc,OAAVA,QAA4BI,IAAVJ,EACpB,OAAO,EAET,GAAqB,kBAAVA,EACT,OAAOA,EAET,GAAqB,kBAAVA,EAAoB,CAC7B,MAAMuJ,EAASjJ,OAAON,GACtB,OAAOM,OAAOC,MAAMgJ,GAAU,EAAIA,CACpC,CACA,GAAqB,kBAAVvJ,GAAgC,OAAVA,GAAkB,UAAWA,EAAO,CACnE,MAAMwJ,EAASlJ,OAAON,EAAMA,OAC5B,OAAOM,OAAOC,MAAMiJ,GAAU,EAAIA,CACpC,CACA,OAAO,GAuBHC,EAAmBC,IACvB,IAAKA,EACH,MAAO,GAET,MAAMC,EAAa,CACjB,CACErB,KAAM,WACNsB,QAASF,EAAOG,gBAChBC,OAAQJ,EAAOK,aAEjB,CACEzB,KAAM,UACNsB,QAASF,EAAOM,eAChBF,OAAQJ,EAAOO,aAanB,OATEC,KAAKC,IAAIT,EAAOU,eAAiB,GACjCF,KAAKC,IAAIT,EAAOW,WAAa,IAE7BV,EAAWW,KAAK,CACdhC,KAAM,YACNsB,QAASF,EAAOU,cAChBN,OAAQJ,EAAOW,YAGZV,GAaHY,EAAkBC,IAAS,IAADC,EAAAC,EAC9B,OAAKF,EACc,kBAARA,EACFA,EAEF,OAAHA,QAAG,IAAHA,GAAa,QAAVC,EAAHD,EAAKG,gBAAQ,IAAAF,GAAM,QAANC,EAAbD,EAAeG,YAAI,IAAAF,GAAnBA,EAAqB9D,MAChBgB,OAAO4C,EAAIG,SAASC,KAAKhE,OAE3B,OAAH4D,QAAG,IAAHA,GAAAA,EAAKK,QACAL,EAAIK,QAEN,2CAVU,MA8WnB,EA9TqB/J,IAOd,IAADgK,EAAA,IAPgB,UACpBC,EAAS,OACTC,EAAM,KACNJ,EACA/H,QAASoI,GAAkB,EAC3BrE,MAAOsE,EAAgB,KAAI,QAC3BrE,GACD/F,EACC,MAAMqK,GAAWC,EAAAA,EAAAA,OACX,aAAEpJ,EAAY,iBAAEI,EAAgB,mBAAEM,GAAuB7B,IACzDsC,EAA8B,SAAjBnB,GACZa,EAASwI,GAAcC,EAAAA,UAAe,IACtC1E,EAAO2E,GAAYD,EAAAA,SAAe,OAClCxC,EAAQ0C,GAAaF,EAAAA,SAAe,MACrCG,EAA+C,SAApCC,CAAAA,SAAAA,aAAAA,WAAAA,SAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,EAAAA,qBAAAA,YAAAA,mBAAAA,+BAAAA,4BAAAA,6BAAAA,+BAAAA,sBAAAA,6BAAAA,8CAAAA,iBAAAA,kCAAAA,2BAAAA,4CAAAA,yBAAAA,0CAAAA,uBAAAA,wCAAAA,sBAAAA,uCAAAA,wBAAAA,gDAAYC,oBACvBC,EAAUC,EAAAA,EAAWC,WACrBC,EAAgBT,EAAAA,QACpB,SAAAU,EAAA,OAA0B,QAA1BA,EA/BkBhM,KACpB,IAAKA,EAAO,OAAO,KACnB,MAAM2H,EAAQC,OAAO5H,GAAO6H,MAAM,KAClC,GAAIF,EAAMxH,OAAS,EACjB,OAAO,KAET,MAAM2H,EAAOxH,OAAOqH,EAAM,IACpBI,EAAazH,OAAOqH,EAAM,IAAM,EACtC,OAAKrH,OAAO0H,SAASF,IAAUxH,OAAO0H,SAASD,GAGxC,IAAIa,KAAKd,EAAMC,EAAY,IAFzB,MAsBDkE,CAAajB,UAAO,IAAAgB,EAAAA,EAAI,IAAIpD,MAClC,CAACoC,IAGGkB,EAAiBZ,EAAAA,YAAkBa,UACvC,GAAIV,EACF,OAAIR,IAAoBL,GACtBS,GAAW,GACXE,EAAS,WACTC,EAAU,QAGZA,EAhEuBY,KAAU,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACpC,IAAKN,EACH,OAAO,KAET,MAAMO,EAAOP,EAAKO,KACdpE,mBAAmBX,OAAOwE,EAAKO,OAC/BtE,EAAO+D,EAAK9D,MAAQ8D,EAAKQ,QAAU,IACvC,MAAO,CACLzG,GAAW,QAATkG,EAAED,EAAKjG,UAAE,IAAAkG,EAAAA,EAAI,KACfO,OAAQR,EAAK9D,MAAQ8D,EAAKQ,QAAU,cACpCD,OACA3D,MAAiB,QAAZsD,EAAEF,EAAKpD,aAAK,IAAAsD,EAAAA,EAAI,KACrBjD,MAAiB,QAAZkD,EAAEH,EAAK/C,aAAK,IAAAkD,EAAAA,EAAI,KACrBM,YACa,QAAXL,EAAAJ,EAAKpB,cAAM,IAAAwB,OAAA,EAAXA,EAAatG,QACb+B,EAA0B,QAAXwE,EAACL,EAAKpD,aAAK,IAAAyD,EAAAA,EAAI,KAAgB,QAAZC,EAAEN,EAAK/C,aAAK,IAAAqD,EAAAA,EAAI,MACpD/C,WAAY1F,MAAM6I,QAAQV,EAAKzC,YAAcyC,EAAKzC,WAAa,GAC/DD,OAAQ,OA+CIqD,CAAoBnC,IAC9BW,EAASL,EAAgBX,EAAeW,GAAiB,WACzDG,GAAW,IAIbA,GAAW,GACXE,EAAS,MACT,IACE,MAAMyB,EAAS,IAAIC,gBACnBD,EAAOE,IAAI,SAAU,UACrBF,EAAOE,IAAI,OAAQ,KACnBF,EAAOE,IAAI,OAAQ,OACnBF,EAAOE,IAAI,OAAQ,kBACnB,MAAMvC,QAAiBwC,EAAAA,EAAKC,IAAI,GAADzM,OAC1BiL,EAAO,sBAAAjL,OAAqBqM,EAAOK,aAGlCC,GA1GeC,EAyGkB,OAAR5C,QAAQ,IAARA,OAAQ,EAARA,EAAUC,KAxGzC3G,MAAM6I,QAAQS,GACTA,EAELA,GAAWtJ,MAAM6I,QAAQS,EAAQC,SAC5BD,EAAQC,QAEV,IAmGkBC,KAAMC,GACzB7E,EAAqB6E,EAAM3B,IAE7B,IAAKuB,EAEH,YADA9B,EAAU,MAGZ,MAAMmC,QAAuBR,EAAAA,EAAKC,IAAI,GAADzM,OAChCiL,EAAO,sBAAAjL,OAAqB2M,EAAQnH,GAAE,aAErCyH,EAAU3J,MAAM6I,QAAsB,OAAda,QAAc,IAAdA,OAAc,EAAdA,EAAgB/C,MAC1C+C,EAAe/C,KACf,GACEiD,EAA6BD,EAvKjCE,OACJ,CAACC,EAAKL,KAAI,CACR7D,gBAAiBkE,EAAIlE,gBAAkBP,EAAcoE,EAAK7D,iBAC1DE,YAAagE,EAAIhE,YAAcT,EAAcoE,EAAK3D,aAClDC,eAAgB+D,EAAI/D,eAAiBV,EAAcoE,EAAK1D,gBACxDC,WAAY8D,EAAI9D,WAAaX,EAAcoE,EAAKzD,YAChDG,cAAe2D,EAAI3D,cAAgBd,EAAcoE,EAAKtD,eACtDC,UAAW0D,EAAI1D,UAAYf,EAAcoE,EAAKrD,aAEhD,CACER,gBAAiB,EACjBE,YAAa,EACbC,eAAgB,EAChBC,WAAY,EACZG,cAAe,EACfC,UAAW,IAyJXmB,EAAU,CACRrF,GAAImH,EAAQnH,GACZyG,OAAQU,EAAQV,OAChBD,KAAMtE,EAAOiF,EAAQV,QACrB5D,MAAOsE,EAAQtE,MACfK,MAAOiE,EAAQjE,MACfwD,WAAY5E,EAAgBqF,EAAQtE,MAAOsE,EAAQjE,OACnDM,WAAYF,EAAgBoE,GAC5BnE,OAAQmE,GAEZ,CAAE,MAAOrD,GACPe,EAAShB,EAAeC,IACxBgB,EAAU,KACZ,CAAC,QACCH,GAAW,EACb,CAxLqB2C,IAiDET,GAwItB,CACD9B,EACAR,EACAL,EACAM,EACAU,EACAG,IAGFT,EAAAA,UAAgB,KACdY,KACC,CAACA,IAEJ,MAAM+B,EAAc3C,EAAAA,YAAkB,KAChCG,GAA+B,oBAAZ5E,EACrBA,IAGFqF,KACC,CAACT,EAAU5E,EAASqF,IAEjBgC,EAAW5C,EAAAA,YAAkB,KACjCH,EAAS,kBACR,CAACA,IAEEgD,EAAU7C,EAAAA,YAAkB,KAChCH,EAAS,wBACR,CAACA,IAEEiD,EAAa9C,EAAAA,YAAkB,KACxB,OAANxC,QAAM,IAANA,GAAAA,EAAQ6D,MAGbxB,EAAS,iBAADxK,OAAkBmI,EAAO6D,QAChC,CAACxB,EAAUrC,IAEd,GAAIjG,EACF,OACEa,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAM,qBACNiI,UAAU,oBACVC,qBAAsB,CACpBjL,QAAS,KACTC,GAAI,CAAE4B,MAAO/C,IAEfoM,yBAA0B,CACxBlL,QAAS,QACTC,GAAI,CAAE4B,MAAOzC,OAGjBgB,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAAAF,SAAA,CACTQ,MAAMC,KAAK,CAAE/D,OAAQ,IAAKgE,IAAI,CAACC,EAAGC,KACjCX,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAEJC,UAAU,MACVhK,WAAW,SACXM,eAAe,gBACfzB,GAAI,CAAEoL,GAAI,KAAMlL,SAAA,EAEhBL,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,OAAOE,MAAM,SAC/BJ,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,OAAOE,MAAM,UAP1Ba,KAUTjB,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,cAAcgB,OAAQ,UAMhD,GAAIsC,EACF,OACElD,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAM,qBACNkI,qBAAsB,CAAEjL,QAAS,KAAMC,GAAI,CAAE4B,MAAO/C,OAEtDsB,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAACJ,GAAI,CAAEK,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EACpEL,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,IACxBqH,GACC7K,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAAS2I,EAAYxK,SAAC,eAG/C,WAMZ,MAAMkG,EAA+B,QAArBmB,EAAS,OAANhC,QAAM,IAANA,OAAM,EAANA,EAAQa,kBAAU,IAAAmB,EAAAA,EAAI,GACnCwD,GAAYxF,EACd,CAACA,EAAO8D,OAAQ9D,EAAO+D,YAAY+B,OAAOC,SAASC,KAAK,YACxD1O,EAEJ,OACEsD,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CACHC,QAAQ,WACRC,GAAI,CAAEe,OAAQ,OAAQV,QAAS,OAAQC,cAAe,UAAWJ,SAAA,EAEjEL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAM,qBACNiI,UAAWA,GACXC,qBAAsB,CAAEjL,QAAS,KAAMC,GAAI,CAAE4B,MAAO/C,IACpDoM,yBAA0B,CAAElL,QAAS,QAASC,GAAI,CAAE4B,MAAO/C,OAE7DgB,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAACJ,GAAI,CAAE8D,SAAU,GAAI5D,SAC9BqF,GACCpF,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAEtL,SAAA,CACfqF,EAAOY,QACNhG,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACC,UAAU,MAAM1J,eAAe,gBAAevB,SAAA,EACnDC,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,QAAQ6B,MAAM,iBAAgB1B,SAAA,CAAC,kBACjC,KACf1D,EAAAA,EAAAA,GAAiB+I,EAAOY,OAAOU,mBAElC1G,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CACT3D,QAAQ,QACR6B,MAAM,iBACNa,WAAY,IAAIvC,SAAA,CACjB,gBACc1D,EAAAA,EAAAA,GAAiB+I,EAAOY,OAAOW,iBAG9C,KACHV,EAAWxJ,OAAS,EACnBwJ,EAAWxF,IAAKuJ,IACd,MAAM9D,EAAUtJ,OAAOoN,EAAK9D,UAAY,EAClCE,EAASxJ,OAAOoN,EAAK5D,SAAW,EAEhCkF,EAtaEC,IAClBA,GAAS,GACJ,CAAE9J,MAAO,UAAWe,MAAO,YAEhC+I,GAAS,IACJ,CAAE9J,MAAO,UAAWe,MAAO,sBAE7B,CAAEf,MAAO,UAAWe,MAAO,iBA+ZLgJ,CADW,IAAZtF,EAAgB,EAAIE,EAASF,GAErCuF,EACQ,IAAZvF,EAAgB,EAAKE,EAASF,EAAW,IACrCwF,EAAkBlF,KAAKmF,IAAIF,EAAe,KAC1CG,EACJF,EAAkB,IACd,IACAlF,KAAKqF,IAAI,EAAGH,GAElB,OACE1L,EAAAA,EAAAA,MAACM,EAAAA,EAAG,CAEFT,GAAI,CAAEK,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EAEzDC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJC,UAAU,MACV1J,eAAe,gBACfN,WAAW,SAAQjB,SAAA,EAEnBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAWG,SAC5BiK,EAAKpF,QAERlF,EAAAA,EAAAA,KAACoM,EAAAA,EAAI,CACHrK,MAAO6J,EAAO7J,MACde,MAAK,GAAAvF,QAAKF,EAAAA,EAAAA,GAAiB0O,EAAe,CACxCzO,eAAgB,IAChB,OAAAC,OAAMqO,EAAO9I,OACfuJ,KAAK,QACLnM,QAAQ,iBAGZF,EAAAA,EAAAA,KAACsM,EAAAA,EAAc,CACbpM,QAAQ,cACRtD,MAAOsP,EACPnK,MAAO6J,EAAO7J,MACd5B,GAAI,CACFe,OAAQ,EACRE,aAAc,IACdmL,gBAAiB,eACjB,2BAA8B,CAC5BnL,aAAc,SAIpBd,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACC,UAAU,MAAM1J,eAAe,gBAAevB,SAAA,EACnDC,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,QAAQ6B,MAAM,iBAAgB1B,SAAA,CAAC,iBACnC1D,EAAAA,EAAAA,GAAiB6J,OAEjClG,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CACT3D,QAAQ,QACR6B,MAAM,iBACNa,WAAY,IAAIvC,SAAA,CACjB,eACa1D,EAAAA,EAAAA,GAAiB+J,UAGjC1G,EAAAA,EAAAA,KAACwM,EAAAA,EAAO,CAACrM,GAAI,CAAEsM,GAAI,QA7CdnC,EAAKpF,SAkDhBlF,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQ6B,MAAM,iBAAgB1B,SAAC,qDAMvDC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAEtL,SAAA,EAChBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQ6B,MAAM,iBAAgB1B,SAAC,gCAGnDC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACC,UAAU,MAAMK,QAAS,EAAEtL,SAAA,EAChCL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACL5B,QAAQ,YACRgC,QAAS6I,EACT5K,GAAIJ,EAAa,CAAEgC,MAAO,gBAAc/E,EAAUqD,SACnD,uBAGDL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,OAAOgC,QAAS4I,EAASzK,SAAC,6BAOjDqF,GACC1F,EAAAA,EAAAA,KAAC0M,EAAAA,EAAW,CAACvM,GAAI,CAAEyB,eAAgB,WAAYW,GAAI,EAAGZ,GAAI,GAAItB,UAC5DC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACC,UAAU,MAAMK,QAAS,EAAEtL,SAAA,EAChCL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACL5B,QAAQ,YACRgC,QAAS8I,EACT2B,WAAiB,OAANjH,QAAM,IAANA,GAAAA,EAAQ6D,MAAKlJ,SACzB,gBAGDL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACL5B,QAAQ,WACRgC,QAAS6I,EACT5K,GAAIJ,EAAa,CAAEgC,MAAO,gBAAc/E,EAAUqD,SACnD,uBAGDL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,OAAOgC,QAAS4I,EAASzK,SAAC,0BAK5C,S,8FC1hBV,MAAM7D,GAAYoQ,GAAM,IAAIvQ,KAAKC,aAAa,QAAS,CAAEC,MAAO,WAAYC,SAAU,QAASY,OAAOwP,GAAK,GAE5F,SAASC,KACtB,MAAOpN,EAASwI,GAAcC,EAAAA,UAAe,IACtC1E,EAAO2E,GAAYD,EAAAA,SAAe,OAClCV,EAAMsF,GAAW5E,EAAAA,SAAe,OACjC,iBAAElJ,EAAgB,mBAAEM,GAAuB7B,IA6DjD,OA3DAyK,EAAAA,UAAgB,KACd,MAAM6E,EAAUtE,EAAAA,EAAWuE,QAC3B,IAAKD,EAAS,OAEd,MAAME,EAAM,IAAIzH,KACVd,EAAOuI,EAAInH,cACXoH,EAAQD,EAAIlH,WAAa,EAEzBoH,EAAU,CAAC,EACXC,EAAMC,eAAeC,QAAQ,OAC7BC,EAAQF,eAAeC,QAAQ,eACjCF,IAAKD,EAAQ,iBAAmBC,GAChCG,IAAOJ,EAAuB,cAAC,UAAA5P,OAAagQ,IAEhDtF,GAAW,GACXE,EAAS,MAET,MAAMqF,EAAYC,MAAM,GAADlQ,OAAIwP,EAAO,mBAAAxP,OAAkBmH,GAAQ,CAAEyI,YAC3DO,KAAKC,GAAKA,EAAEC,GAAKD,EAAEE,OAASC,QAAQC,OAAO,QAADxQ,OAASoQ,EAAE/B,UACrD8B,KAAKM,IACJ,MAAMC,EAAYpN,MAAM6I,QAAQsE,GAAOA,EAAM,GAK7C,MAAO,CAAEE,SAJQD,EAAUzC,OAAOmC,GAAgB,YAAXA,EAAEQ,MAAsB,IAAI3I,KAAKmI,EAAES,cAAcrI,WAAa,IAAMmH,GACxGxC,OAAO,CAAC2D,EAAGV,IAAMU,GAAKV,EAAEW,YAAc,GAAI,GAG1BC,QAFHN,EAAUzC,OAAOmC,GAAgB,WAAXA,EAAEQ,MAAqB,IAAI3I,KAAKmI,EAAES,cAAcrI,WAAa,IAAMmH,GACtGxC,OAAO,CAAC2D,EAAGV,IAAMU,GAAKV,EAAEW,YAAc,GAAI,MAI3C1E,EAAS,IAAIC,gBACnBD,EAAOE,IAAI,OAAQpF,GACnB,MAAM8J,EAAef,MAAM,GAADlQ,OAAIwP,EAAO,SAAAxP,OAAQqM,EAAOK,YAAc,CAAEkD,YACjEO,KAAKC,GAAKA,EAAEC,GAAKD,EAAEE,OAASC,QAAQC,OAAO,QAADxQ,OAASoQ,EAAE/B,UACrD8B,KAAKG,IAAS,IAADY,EAAAC,EACZ,MAAMC,EAAMzB,EAAQ,EAGpB,MAAO,CAAEgB,UAFgC,QAAxBO,EAAK,OAAJZ,QAAI,IAAJA,OAAI,EAAJA,EAAMe,yBAAiB,IAAAH,EAAAA,EAAI,IAAIE,IAAQ,EAEtCJ,SADoB,QAAvBG,EAAK,OAAJb,QAAI,IAAJA,OAAI,EAAJA,EAAMgB,wBAAgB,IAAAH,EAAAA,EAAI,IAAIC,IAAQ,KAI3Db,QAAQgB,IAAI,CAACtB,EAAWgB,IACrBd,KAAKhQ,IAAsB,IAApBqR,EAAMC,GAAQtR,EACpB,MAAMuR,EAAU,CACd,CACE/J,KAAM,WACNgK,OAAQH,EAAKb,SACbiB,UAAWH,EAAQd,UAErB,CACEhJ,KAAM,UACNgK,OAAQH,EAAKR,QACbY,UAAWH,EAAQT,UAGvBzB,EAAQ,CAAEmC,UAASF,OAAMC,cAE1BI,MAAMhI,GAAOe,EAAS3D,OAAO4C,KAC7BiI,QAAQ,IAAMpH,GAAW,KAC3B,KAGD3H,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,OAAQV,QAAS,OAAQC,cAAe,UAAWJ,SAAA,EACxFL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAM,oCACNiI,UAAU,uDACVC,qBAAsB,CACpBjL,QAAS,KACTC,GAAI,CAAE4B,MAAO/C,IAEfoM,yBAA0B,CACxBlL,QAAS,QACTC,GAAI,CAAE4B,MAAO/C,OAGjBgB,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAACJ,GAAI,CAAE8D,SAAU,GAAI5D,SAC9BZ,GACCO,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,cAAcgB,OAAQ,MACtCsC,GACFxD,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,IACvBgE,GACFlH,EAAAA,EAAAA,MAAAgP,EAAAA,SAAA,CAAAjP,SAAA,EACEL,EAAAA,EAAAA,KAACuP,EAAAA,EAAmB,CAACnP,MAAM,OAAOc,OAAQ,IAAIb,UAC5CC,EAAAA,EAAAA,MAACkP,EAAAA,EAAQ,CAAChI,KAAMA,EAAKyH,QAASpM,OAAQ,CAAE4M,IAAK,EAAGC,MAAO,GAAIC,OAAQ,EAAGC,KAAM,GAAIvP,SAAA,EAC9EL,EAAAA,EAAAA,KAAC6P,EAAAA,EAAa,CAACC,gBAAgB,MAAMC,OAAO,aAC5C/P,EAAAA,EAAAA,KAACgQ,EAAAA,EAAK,CAACC,QAAQ,UACfjQ,EAAAA,EAAAA,KAACkQ,EAAAA,EAAK,KACNlQ,EAAAA,EAAAA,KAACmQ,GAAAA,EAAO,CAACjN,UAAY0J,GAAMpQ,GAASoQ,MACpC5M,EAAAA,EAAAA,KAACoQ,GAAAA,EAAM,KACPpQ,EAAAA,EAAAA,KAACqQ,GAAAA,EAAG,CAACJ,QAAQ,SAASK,KAAK,aAC3BtQ,EAAAA,EAAAA,KAACqQ,GAAAA,EAAG,CAACJ,QAAQ,YAAYK,KAAK,kBAGlChQ,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACC,UAAU,MAAMK,QAAS,EAAGxL,GAAI,CAAEuD,GAAI,GAAKnC,SAAS,OAAMlB,SAAA,EAC/DL,EAAAA,EAAAA,KAACuQ,GAAQ,CAACzN,MAAM,eAAelG,MAAOJ,IAAUgL,EAAKwH,QAAQd,UAAY,IAAM1G,EAAKuH,KAAKb,UAAY,OACrGlO,EAAAA,EAAAA,KAACuQ,GAAQ,CAACzN,MAAM,cAAclG,MAAOJ,IAAUgL,EAAKwH,QAAQT,SAAW,IAAM/G,EAAKuH,KAAKR,SAAW,YAGpG,SAIZ,CAEA,MAAMgC,GAAW1S,IAAuB,IAAD2S,EAAAC,EAAA,IAArB,MAAE3N,EAAK,MAAElG,GAAOiB,EAChC,MAAM,iBAAEmB,EAAgB,mBAAEM,EAAkB,YAAER,EAAW,aAAEF,GACzDnB,IACIiT,EACqB,QADPF,EACA,QADAC,EAClB3R,EAAY+C,cAAM,IAAA4O,OAAA,EAAlBA,EAAoBE,aAAK,IAAAH,EAAAA,EACP,SAAjB5R,EACG,4BACA,sBAEN,OACE0B,EAAAA,EAAAA,MAAA,OACE/D,MAAO,CACLqU,QAAS,WACTxP,aAAc,EACdyP,WAAYH,GACZrQ,SAAA,EAEFL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAUC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAC3DyC,KAEH9C,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,QACR0C,WAAY,IACZzC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAE/BzD,Q,4EC9HT,MAAMkU,GAAa,CACjBC,QAAS,CAAEhP,MAAO,UAAWwK,gBAAiB,2BAC9CyE,OAAQ,CAAEjP,MAAO,UAAWwK,gBAAiB,2BAC7C0E,MAAO,CAAElP,MAAO,UAAWwK,gBAAiB,0BAC5C2E,UAAW,CAAEnP,MAAO,UAAWwK,gBAAiB,0BAChD4E,cAAe,CAAEpP,MAAO,UAAWwK,gBAAiB,4BAWhD6E,GAAe,SAACxU,GAA6B,IAAtBJ,EAAQM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MACtC,MAAMuU,EAAUnU,OAAON,GACvB,IAAKM,OAAO0H,SAASyM,GACnB,MAAO,IAET,IACE,OAAO,IAAIhV,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAUA,GAAY,MACtBC,sBAAuB,EACvBC,sBAAuB,IACtBU,OAAOiU,EACZ,CAAE,MAAO7N,GACP,MAAO,GAAAjG,OAAG8T,EAAQC,eAAe,QAAS,CACxC7U,sBAAuB,EACvBC,sBAAuB,IACvB,KAAAa,OAAIf,GAAY,IAAK4I,MACzB,CACF,EAEMmM,GAAc3U,IAClB,IAAKA,EACH,MAAO,IAET,MAAM4U,EAAO,IAAIhM,KAAK5I,GACtB,OAAIM,OAAOC,MAAMqU,EAAKC,WACb,IAEFD,EAAKE,mBAAmB,QAAS,CACtCC,IAAK,UACLzE,MAAO,WAuJX,GAnJ8BxP,IAMvB,IANwB,KAC7B8J,EAAI,QACJ/H,GAAU,EAAK,MACf+D,EAAQ,KAAI,QACZC,EAAO,WACPmO,GACDlU,EACC,MAAM,aAAEkB,EAAY,iBAAEI,EAAgB,mBAAEM,GAAuB7B,IACzDc,GAAQC,EAAAA,EAAAA,KACRmB,GAAWC,EAAAA,EAAAA,GAAcrB,EAAMsB,YAAYC,KAAK,OAChDC,EAA8B,SAAjBnB,EACbiT,EAAuB3J,EAAAA,QAC3B,MACEiD,qBAAsB,CACpBjL,QAAS,KACTC,GAAI,CAAE4B,MAAO/C,IAEfoM,yBAA0B,CACxBlL,QAAS,QACTC,GAAI,CAAE4B,MAAO/C,MAGjB,CAACA,IAGH,GAAIS,EACF,OACEa,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,GAAU9I,EAAAA,EAAAA,GAAA,CACTc,MAAM,cACNiI,UAAU,eACN2G,KAEN7R,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAAAF,UACVL,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,cAAcgB,OAAQ,WAMhD,GAAIsC,EACF,OACElD,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,GAAU9I,EAAAA,EAAAA,GAAA,CAACc,MAAM,eAAkB4O,KACpCvR,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAACJ,GAAI,CAAEK,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EACpEL,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,IACxBC,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,WAMZ,MAAMyR,EAAYjR,MAAM6I,QAAQlC,GAAQA,EAAO,GAE/C,OACElH,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CACHC,QAAQ,WACRC,GAAI,CAAEe,OAAQ,OAAQV,QAAS,OAAQC,cAAe,UAAWJ,SAAA,EAEjEL,EAAAA,EAAAA,KAACiL,EAAAA,GAAU9I,EAAAA,EAAAA,GAAA,CACTc,MAAM,cACNiI,UAAU,sCACN2G,KAEN7R,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAACJ,GAAI,CAAE8D,SAAU,GAAI5D,SACT,IAArByR,EAAU/U,QACTuD,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAGrK,WAAW,aAAYjB,SAAA,EACxCL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQC,GAAI,CAAE4B,MAAOzC,GAAqBe,SAAC,kGAG9DoD,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,SAGNL,EAAAA,EAAAA,KAAC+R,GAAAA,EAAc,CAAA1R,UACbC,EAAAA,EAAAA,MAAC0R,GAAAA,EAAK,CAAC3F,KAAK,QAAOhM,SAAA,EACjBL,EAAAA,EAAAA,KAACiS,GAAAA,EAAS,CAAA5R,UACRC,EAAAA,EAAAA,MAAC4R,GAAAA,EAAQ,CAAA7R,SAAA,EACPL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,SAAC,UACXL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAACC,MAAM,QAAO/R,SAAC,WACzBL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,SAAC,UACTV,EAA8C,MAAnCK,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,SAAC,uBAG5BL,EAAAA,EAAAA,KAACqS,GAAAA,EAAS,CAAAhS,SACPyR,EAAU/Q,IAAI,CAACuR,EAAUrR,KAAW,IAADsR,EAAAC,EAAAC,EAClC,MAAMC,EAAiB,QAAdH,EAAGD,EAASvP,UAAE,IAAAwP,EAAAA,EAAA,YAAAhV,OAAgB0D,GACjCkN,EAAoB,QAAhBqE,EAAGF,EAASnE,YAAI,IAAAqE,EAAAA,EAAI,aACxBG,EAAYL,EAASK,WAAa,mBAClCC,GAAkC,QAApBH,EAACH,EAAShE,kBAAU,IAAAmE,EAAAA,EAAI,GAAK,EAAI,aAAe,eAC9DI,EA3IF1E,KAAU,IAAD2E,EAC7B,IAAK3E,EACH,MAAO,CAAEpM,MAAO,UAAWwK,gBAAiB,yBAE9C,MAAMmG,EAAMlO,OAAO2J,GAAM9I,cACzB,OAAsB,QAAtByN,EAAOhC,GAAW4B,UAAI,IAAAI,EAAAA,EAAI,CAAE/Q,MAAO,UAAWwK,gBAAiB,0BAsI7BwG,CAAa5E,GAC/B,OACE7N,EAAAA,EAAAA,MAAC4R,GAAAA,EAAQ,CAAWvB,OAAK,EAAAtQ,SAAA,EACvBL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,UACRL,EAAAA,EAAAA,KAACoM,EAAAA,EAAI,CACHtJ,MAAOqL,EACP9B,KAAK,QACLlM,GAAI,CACFyC,WAAY,IACZb,MAAO8Q,EAAU9Q,MACjBwK,gBAAiBsG,EAAUtG,gBAC3ByG,OAAO,aAADzV,OAAesV,EAAU9Q,aAIrC/B,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAACC,MAAM,QAAQjS,GAAI,CAAE4B,MAAO6Q,EAAahQ,WAAY,KAAMvC,SAClE+Q,GAAakB,EAAShE,WAAYgE,EAASW,WAE9CjT,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,UACRL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAOG,SAAEkR,GAAWe,EAASlE,kBAEjDzO,EAME,MALFK,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,UACRL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQC,GAAI,CAAE4B,MAAOzC,GAAqBe,SAC3DsS,QAtBMD,eAkC7B1S,EAAAA,EAAAA,KAAC0M,EAAAA,EAAW,CAACvM,GAAI,CAAEoC,GAAI,EAAGZ,GAAI,EAAGjB,IAAK,GAAIL,UACxCL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACL5B,QAAQ,WACRgC,QAAS0P,EACTjF,UAAWiF,EACXzR,GAAIJ,EAAa,CAAEgC,MAAO,gBAAc/E,EAAUqD,SACnD,qBC7LHyQ,GAAa,CACjBoC,MAAO,CAAEnR,MAAO,UAAWwK,gBAAiB,2BAC5C4G,OAAQ,CAAEpR,MAAO,UAAWwK,gBAAiB,4BAWzC6E,GAAe,SAACxU,GAA6B,IAAtBJ,EAAQM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,MACtC,MAAMuU,EAAUnU,OAAON,GACvB,IAAKM,OAAO0H,SAASyM,GACnB,MAAO,IAET,IACE,OAAO,IAAIhV,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAUA,GAAY,MACtBC,sBAAuB,EACvBC,sBAAuB,IACtBU,OAAOiU,EACZ,CAAE,MAAO7N,GACP,MAAO,GAAAjG,OAAG8T,EAAQC,eAAe,QAAS,CACxC7U,sBAAuB,EACvBC,sBAAuB,IACvB,KAAAa,OAAIf,GAAY,IAAK4I,MACzB,CACF,EAEMmM,GAAc3U,IAClB,IAAKA,EACH,MAAO,IAET,MAAM4U,EAAO,IAAIhM,KAAK5I,GACtB,OAAIM,OAAOC,MAAMqU,EAAKC,WACb,IAEFD,EAAKE,mBAAmB,QAAS,CACtCC,IAAK,UACLzE,MAAO,WAgKX,GA5J6BxP,IAMtB,IANuB,KAC5B8J,EAAI,QACJ/H,GAAU,EAAK,MACf+D,EAAQ,KAAI,QACZC,EAAO,WACPmO,GACDlU,EACC,MAAM,aAAEkB,EAAY,iBAAEI,EAAgB,mBAAEM,GAAuB7B,IACzDc,GAAQC,EAAAA,EAAAA,KACRmB,GAAWC,EAAAA,EAAAA,GAAcrB,EAAMsB,YAAYC,KAAK,OAChDC,EAA8B,SAAjBnB,EACbiT,EAAuB3J,EAAAA,QAC3B,MACEiD,qBAAsB,CACpBjL,QAAS,KACTC,GAAI,CAAE4B,MAAO/C,IAEfoM,yBAA0B,CACxBlL,QAAS,QACTC,GAAI,CAAE4B,MAAO/C,MAGjB,CAACA,IAGH,GAAIS,EACF,OACEa,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,GAAU9I,EAAAA,EAAAA,GAAA,CACTc,MAAM,WACNiI,UAAU,eACN2G,KAEN7R,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAAAF,UACVL,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,cAAcgB,OAAQ,WAMhD,GAAIsC,EACF,OACElD,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,GAAU9I,EAAAA,EAAAA,GAAA,CAACc,MAAM,YAAe4O,KACjCvR,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAACJ,GAAI,CAAEK,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EACpEL,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,IACxBC,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,WAMZ,MAAM+S,EAAWvS,MAAM6I,QAAQlC,GAAQA,EAAO,GAE9C,OACElH,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CACHC,QAAQ,WACRC,GAAI,CAAEe,OAAQ,OAAQV,QAAS,OAAQC,cAAe,UAAWJ,SAAA,EAEjEL,EAAAA,EAAAA,KAACiL,EAAAA,GAAU9I,EAAAA,EAAAA,GAAA,CACTc,MAAM,WACNiI,UAAU,mCACN2G,KAEN7R,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAACJ,GAAI,CAAE8D,SAAU,GAAI5D,SACV,IAApB+S,EAASrW,QACRuD,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAGrK,WAAW,aAAYjB,SAAA,EACxCL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQC,GAAI,CAAE4B,MAAOzC,GAAqBe,SAAC,kFAG9DoD,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,SAGNL,EAAAA,EAAAA,KAAC+R,GAAAA,EAAc,CAAA1R,UACbC,EAAAA,EAAAA,MAAC0R,GAAAA,EAAK,CAAC3F,KAAK,QAAOhM,SAAA,EACjBL,EAAAA,EAAAA,KAACiS,GAAAA,EAAS,CAAA5R,UACRC,EAAAA,EAAAA,MAAC4R,GAAAA,EAAQ,CAAA7R,SAAA,EACPL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,SAAC,SACTV,EAA2C,MAAhCK,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,SAAC,eACxBL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAACC,MAAM,QAAO/R,SAAC,WACzBL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,SAAC,UACTV,EAA4C,MAAjCK,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,SAAC,kBAG5BL,EAAAA,EAAAA,KAACqS,GAAAA,EAAS,CAAAhS,SACP+S,EAASrS,IAAI,CAACsS,EAASpS,KAAW,IAADqS,EAAAC,EAAAC,EAAAC,EAChC,MAAMf,EAAgB,QAAbY,EAAGD,EAAQtQ,UAAE,IAAAuQ,EAAAA,EAAA,WAAA/V,OAAe0D,GAC/BkN,EAA0B,QAAtBoF,EAAGF,EAAQK,mBAAW,IAAAH,EAAAA,EAAI,UAC9BI,EAAgC,QAA1BH,EAAGH,EAAQO,uBAAe,IAAAJ,EAAAA,EAAI,IACpCK,EACJR,EAAQS,iBAAmBT,EAAQU,gBAAkB,WACjDnB,GAAiC,QAAnBa,EAACJ,EAAQ/E,kBAAU,IAAAmF,EAAAA,EAAI,GAAK,EAAI,aAAe,eAC7DZ,EA9IF1E,KAAU,IAAD2E,EAC7B,IAAK3E,EACH,MAAO,CAAEpM,MAAO,UAAWwK,gBAAiB,yBAE9C,MAAMmG,EAAMlO,OAAO2J,GAAM9I,cACzB,OAAsB,QAAtByN,EAAOhC,GAAW4B,UAAI,IAAAI,EAAAA,EAAI,CAAE/Q,MAAO,UAAWwK,gBAAiB,0BAyI7BwG,CAAa5E,GAE/B,OACE7N,EAAAA,EAAAA,MAAC4R,GAAAA,EAAQ,CAAWvB,OAAK,EAAAtQ,SAAA,EACvBL,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,UACRL,EAAAA,EAAAA,KAACoM,EAAAA,EAAI,CACHtJ,MAAOqL,EACP9B,KAAK,QACLlM,GAAI,CACFyC,WAAY,IACZb,MAAO8Q,EAAU9Q,MACjBwK,gBAAiBsG,EAAUtG,gBAC3ByG,OAAO,aAADzV,OAAesV,EAAU9Q,YAInCpC,EAIE,MAHFK,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,UACRL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAOG,SAAEsT,OAGjC3T,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAACC,MAAM,QAAQjS,GAAI,CAAE4B,MAAO6Q,EAAahQ,WAAY,KAAMvC,SAClE+Q,GAAaiC,EAAQ/E,WAAY+E,EAAQJ,WAE5CjT,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,UACRL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAOG,SAAEkR,GAAW8B,EAAQjF,kBAEhDzO,EAME,MALFK,EAAAA,EAAAA,KAACmS,GAAAA,EAAS,CAAA9R,UACRL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQC,GAAI,CAAE4B,MAAOzC,GAAqBe,SAC3DwT,QA3BMnB,eAuC7B1S,EAAAA,EAAAA,KAAC0M,EAAAA,EAAW,CAACvM,GAAI,CAAEoC,GAAI,EAAGZ,GAAI,EAAGjB,IAAK,GAAIL,UACxCL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACL5B,QAAQ,WACRgC,QAAS0P,EACTjF,UAAWiF,EACXzR,GAAIJ,EAAa,CAAEgC,MAAO,gBAAc/E,EAAUqD,SACnD,qBC1MH2T,GAAkB,IAAI3X,KAAKC,aAAa,QAAS,CACrDI,sBAAuB,IAGnBuX,GAAkBrX,IACtB,GAAc,OAAVA,QAA4BI,IAAVJ,EACpB,MAAO,KAET,MAAMyU,EAAUnU,OAAON,GACvB,OAAKM,OAAO0H,SAASyM,GAGd,IAAIhV,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAU,MACVE,sBAAuB,IACtBU,OAAOiU,GAND,MASL6C,GAAmB,IAAI7X,KAAKC,aAAa,QAAS,CACtDG,sBAAuB,EACvBC,sBAAuB,IAGnByX,GAAgBvX,IACpB,MAAMyU,EAAUnU,OAAON,GACvB,OAAKM,OAAO0H,SAASyM,GAGdvK,KAAKmF,IAAInF,KAAKqF,IAAIkF,EAAS,GAAI,KAF7B,GAKL+C,GAAiBxX,GAAK,GAAAW,OAAQ2W,GAAiB9W,OAAO+W,GAAavX,IAAO,KAE1E2U,GAAc3U,GACbA,EAGE4H,OAAO5H,GAFL,KAqPX,GAhP6Bc,IAMtB,IAAD2W,EAAAC,EAAAC,EAAA,IANwB,KAC5B/M,EAAI,QACJ/H,GAAU,EAAK,MACf+D,EAAQ,KAAI,QACZC,EAAO,WACPmO,GACDlU,EACC,MAAM,aAAEkB,GAAiBnB,IACnBsC,EAA8B,SAAjBnB,EAEnB,GAAIa,EACF,OACEa,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CAAChI,MAAM,2BAAwBiI,UAAU,kCACpDlL,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAAAF,SACTQ,MAAMC,KAAK,CAAE/D,OAAQ,IAAKgE,IAAI,CAACC,EAAGC,KACjCjB,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAAaT,QAAQ,cAAcgB,OAAQ,GAAIf,GAAI,CAAEoL,GAAI,MAAnDtK,SAOzB,GAAIuC,EACF,OACElD,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,OAAQV,QAAS,OAAQC,cAAe,UAAWJ,SAAA,EACxFL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CAAChI,MAAM,8BAClB3C,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAACJ,GAAI,CAAE8D,SAAU,EAAGzD,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAAA,EACjFL,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,IACxBC,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,WAMZ,MAAMmU,EAAc,OAAJhN,QAAI,IAAJA,EAAAA,EAAQ,KAClB0E,EAAWiI,GAAoB,OAAPK,QAAO,IAAPA,OAAO,EAAPA,EAASC,uBACjCC,EAAU7T,MAAM6I,QAAe,OAAP8K,QAAO,IAAPA,OAAO,EAAPA,EAASE,SAAW,IAAIF,EAAQE,SAAW,GACzEA,EAAQC,KAAK,CAACtG,EAAGuG,KAAC,IAAAC,EAAAC,EAAA,OAAM5X,OAAe,QAAT2X,EAAE,OAADD,QAAC,IAADA,OAAC,EAADA,EAAGG,aAAK,IAAAF,EAAAA,EAAI,IAAM,IAAM3X,OAAe,QAAT4X,EAAE,OAADzG,QAAC,IAADA,OAAC,EAADA,EAAG0G,aAAK,IAAAD,EAAAA,EAAI,IAAM,KAEhF,MAAME,EACJR,GAAWA,EAAQS,iBACQ,IAAtBT,EAAQU,aAAsBV,EAAQS,kBAAoB,GAC3D,EACAE,EACJX,GAAWA,EAAQS,iBACO,IAArBT,EAAQY,YAAqBZ,EAAQS,kBAAoB,GAC1D,EAEAI,EAAeA,CAACvS,EAAOlG,EAAO0Y,KAClChV,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAEJM,QAAS,GACTxL,GAAI,CACFoV,EAAG,KACHnU,aAAc,IACd4R,OAAQ,YACRwC,YAAa,UACb9S,SAAU,EACVL,KAAM,GACNhC,SAAA,EAEFL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SACjDyC,KAEH9C,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAY0C,WAAY,IAAIvC,SAC7CzD,IAEF0Y,GACCtV,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SACjDiV,IAED,OArBCxS,GAyBT,OACExC,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,OAAQV,QAAS,OAAQC,cAAe,UAAWJ,SAAA,EACxFL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAM,2BACNiI,UACS,OAAPsJ,QAAO,IAAPA,GAAAA,EAASiB,YAAW,cAAAlY,OAAciX,EAAQiB,aAAgB,sCAG9DzV,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAACJ,GAAI,CAAE8D,SAAU,EAAGzD,QAAS,OAAQC,cAAe,SAAUC,IAAK,GAAIL,SAChFmU,GACClU,EAAAA,EAAAA,MAAAgP,EAAAA,SAAA,CAAAjP,SAAA,EACEC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJC,UAAW,CAAE9J,GAAI,SAAUuC,GAAI,OAC/B4H,QAAS,IACTxL,GAAI,CAAEmB,WAAY,CAAEE,GAAI,UAAWuC,GAAI,eAAiB1D,SAAA,CAEvDgV,EACC,cACArB,GAAgB5W,OAA+B,QAAzBiX,EAACG,EAAQS,wBAAgB,IAAAZ,EAAAA,EAAI,GACnD,wBAEDgB,EACD,cACArB,GAAgB5W,OAA0B,QAApBkX,EAACE,EAAQU,mBAAW,IAAAZ,EAAAA,EAAI,GAC9CF,GAAcY,IAEfK,EACC,aACArB,GAAgB5W,OAAyB,QAAnBmX,EAACC,EAAQY,kBAAU,IAAAb,EAAAA,EAAI,GAC7CH,GAAce,QAIhB7U,EAAAA,EAAAA,MAACM,EAAAA,EAAG,CAAAP,SAAA,EACFC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJC,UAAU,MACV1J,eAAe,gBACfN,WAAW,SACXnB,GAAI,CAAEoL,GAAI,KAAOlL,SAAA,EAEjBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAWG,SAAC,oBAChCL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SACjD+T,GAAclI,SAGnBlM,EAAAA,EAAAA,KAACsM,EAAAA,EAAc,CACbpM,QAAQ,cACRtD,MAAOsP,EACP/L,GAAI,CACFe,OAAQ,GACRE,aAAc,IACdmL,gBAAiB,eACjB,2BAA8B,CAC5BnL,aAAc,YAMtBd,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,GAAItL,SAAA,EAClBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAWG,SAAC,4BAChCC,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAA,CAAC,8BAC7BkR,GAAWiD,EAAQkB,wBAE3CpV,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAA,CAAC,mCACrBkR,GAAWiD,EAAQmB,wBAIrDrV,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAEtL,SAAA,EAChBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAWG,SAAC,qBAC/BqU,EAAQ3X,OAAS,EAChB2X,EAAQ3T,IAAKuJ,IAAU,IAADsL,EAAAC,EAAAC,EAAAC,EAAAC,EACpB,MAAMC,EAAe9B,GAA6B,QAAjByB,EAAK,OAAJtL,QAAI,IAAJA,OAAI,EAAJA,EAAM4L,kBAAU,IAAAN,EAAAA,EAAI,GACtD,OACEtV,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAEJM,QAAS,GACTxL,GAAI,CACF6S,OAAQ,YACRwC,YAAa,UACbpU,aAAc,IACdmU,EAAG,MACHlV,SAAA,EAEFC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACC,UAAU,MAAM1J,eAAe,gBAAgBN,WAAW,SAAQjB,SAAA,EACvEL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQ0C,WAAY,IAAIvC,SAC/B,QAD+ByV,EACrC,OAAJxL,QAAI,IAAJA,OAAI,EAAJA,EAAM6D,YAAI,IAAA2H,EAAAA,EAAI,cAEjB9V,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SACjD+T,GAAc6B,SAGnBjW,EAAAA,EAAAA,KAACsM,EAAAA,EAAc,CACbpM,QAAQ,cACRtD,MAAOqZ,EACP9V,GAAI,CACFe,OAAQ,EACRE,aAAc,IACdmL,gBAAiB,eACjB,2BAA8B,CAC5BnL,aAAc,SAIpBd,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACC,UAAU,MAAM1J,eAAe,gBAAgBN,WAAW,SAAQjB,SAAA,EACvEC,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAA,CACjD2T,GAAgB5W,OAAwB,QAAlB2Y,EAAK,OAAJzL,QAAI,IAAJA,OAAI,EAAJA,EAAM4K,mBAAW,IAAAa,EAAAA,EAAI,GAAG,KAAG,IAClD/B,GAAgB5W,OAAkB,QAAZ4Y,EAAK,OAAJ1L,QAAI,IAAJA,OAAI,EAAJA,EAAMyK,aAAK,IAAAiB,EAAAA,EAAI,GAAG,uBAErBhZ,KAAjB,OAAJsN,QAAI,IAAJA,OAAI,EAAJA,EAAMgE,aAAiD,QAAjB,OAAJhE,QAAI,IAAJA,OAAI,EAAJA,EAAMgE,cACxCtO,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,QACR0C,WAAY,IACZzC,GAAI,CACF4B,MAAsB,WAAduI,EAAK6D,MAAqB7D,EAAKgE,WAAa,EAAK,aAAe,gBACxEjO,SAED4T,GAAe3J,EAAKgE,mBA1CZ,QA6CPuH,EA7CC,OAAJvL,QAAI,IAAJA,OAAI,EAAJA,EAAM6D,YAAI,IAAA0H,EAAAA,EAAI,uBAkDzB7V,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAC,wEAO3DC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAGrK,WAAW,aAAYjB,SAAA,EACxCL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQ6B,MAAM,iBAAgB1B,SAAC,6HAIlDoD,GACCzD,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,WAAWgC,QAASuB,EAAQpD,SAAC,eAG3C,WAIVL,EAAAA,EAAAA,KAAC0M,EAAAA,EAAW,CAACvM,GAAI,CAAEoC,GAAI,EAAGZ,GAAI,GAAItB,UAChCL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACL5B,QAAQ,WACRgC,QAASA,IAAgB,OAAV0P,QAAU,IAAVA,OAAU,EAAVA,IACfjF,UAAWiF,EACXzR,GAAIJ,EAAa,CAAEgC,MAAO,gBAAc/E,EAAUqD,SACnD,+B,sCChRT,MAAM4T,GAAkBrX,IACtB,GAAc,OAAVA,QAA4BI,IAAVJ,EACpB,MAAO,KAET,MAAMyU,EAAUnU,OAAON,GACvB,OAAKM,OAAO0H,SAASyM,GAGd,IAAIhV,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAU,MACVE,sBAAuB,IACtBU,OAAOiU,GAND,MAaL8E,IAJkB,IAAI9Z,KAAKC,aAAa,QAAS,CACrDI,sBAAuB,IAGNyZ,CAACC,EAAKnV,KACvB,IAAKmV,EAAK,CACR,MAAMvZ,EAAW,IAAI2I,KAAK,IAAMvE,EAAQ,GAAI,GAC5C,OAAO,IAAI5E,KAAKga,eAAe,QAAS,CAAEnJ,MAAO,SAAU9P,OAAOP,EACpE,CAEA,MAAMyZ,EAAa9R,OAAO4R,GAAKhR,OAAOC,cAChCkR,EAAa,CACjBC,IAAK,QACLC,IAAK,UACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,aACLC,IAAK,UACLC,IAAK,YACLC,IAAK,YACLC,QAAS,QACTC,SAAU,UACVC,MAAO,QACPC,MAAO,QACPC,KAAM,QACNC,KAAM,QACNC,OAAQ,SACRC,UAAW,aACXC,QAAS,UACTC,SAAU,YACVC,SAAU,aAGZ,GAAIvB,EAAWD,GACb,OAAOC,EAAWD,GAGpB,MAAMnQ,EAASX,KAAKuS,MAAM,GAADxa,OAAI+Y,EAAU,aACvC,GAAIpZ,OAAOC,MAAMgJ,GAAS,CACxB,MAAMtJ,EAAW,IAAI2I,KAAK,IAAMvE,EAAQ,GAAI,GAC5C,OAAO,IAAI5E,KAAKga,eAAe,QAAS,CAAEnJ,MAAO,SAAU9P,OAAOP,EACpE,CACA,OAAO,IAAIR,KAAKga,eAAe,QAAS,CAAEnJ,MAAO,SAAU9P,OAAO+I,KAkPpE,GA/OyBzI,IAA4D,IAADsa,EAAAna,EAAAoa,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAA1D,KAAEhR,EAAI,QAAE/H,GAAU,EAAK,MAAE+D,EAAQ,KAAI,aAAEiV,GAAc/a,EAC7E,MAAMa,GAAQC,EAAAA,EAAAA,KACRka,GAAU9Y,EAAAA,EAAAA,GAAcrB,EAAMsB,YAAYC,KAAK,QAC/C,iBAAEd,EAAgB,mBAAEM,GAAuB7B,IAEnC,IAADkb,EAgBFC,EAhBX,GAAInZ,EACF,OACEa,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAkB,QAAb0V,EAAM,OAAJnR,QAAI,IAAJA,OAAI,EAAJA,EAAMvE,aAAK,IAAA0V,EAAAA,EAAI,iCACtBzN,UAAU,wBAEZ5K,EAAAA,EAAAA,MAACC,EAAAA,EAAW,CAAAF,SAAA,EACVL,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,OAAOE,MAAM,SAC/BJ,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,OAAOE,MAAM,SAC/BJ,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,cAAcgB,OAAQ,IAAKf,GAAI,CAAEuD,GAAI,WAM/D,GAAIF,EACF,OACElD,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CAAChI,MAAkB,QAAb2V,EAAM,OAAJpR,QAAI,IAAJA,OAAI,EAAJA,EAAMvE,aAAK,IAAA2V,EAAAA,EAAI,oCAClC5Y,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAAAF,UACVL,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,SAMjC,MACMqV,GADqB,QAAfb,EAAO,OAAJxQ,QAAI,IAAJA,OAAI,EAAJA,EAAMsR,cAAM,IAAAd,EAAAA,EAAI,IACNjX,IAAI,CAACuJ,EAAMrJ,KAAK,IAAA8X,EAAA,MAAM,CAC7C7T,KAAMiR,GAAW7L,EAAK4C,MAAO5C,EAAK3F,YAClC/H,MAAiB,QAAZmc,EAAEzO,EAAK1N,aAAK,IAAAmc,EAAAA,EAAI,KAEjBC,EAAkD,QAArCnb,EAAe,OAAZ4a,QAAY,IAAZA,EAAAA,EAAoB,OAAJjR,QAAI,IAAJA,OAAI,EAAJA,EAAMiR,oBAAY,IAAA5a,EAAAA,EAAI,kDACtDob,EAAUJ,EAAU9b,OAAS,GAAK8b,EAAUK,KAAKC,GAAiB,IAAZA,EAAEvc,OAE9D,OACE0D,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CACHC,QAAQ,WACRC,GAAI,CACFe,OAAQ,OACRyB,UAAW,IACXnC,QAAS,OACTC,cAAe,UACfJ,SAAA,EAEAL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAkB,QAAbgV,EAAM,OAAJzQ,QAAI,IAAJA,OAAI,EAAJA,EAAMvE,aAAK,IAAAgV,EAAAA,EAAI,iCACtB/M,UAA0B,QAAjBgN,EAAM,OAAJ1Q,QAAI,IAAJA,OAAI,EAAJA,EAAM0D,iBAAS,IAAAgN,EAAAA,EAAI,oEAChC/M,qBAAsB,CACpBjL,QAAS,KACT0C,WAAY,IACZzC,GAAI,CAAE4B,MAAO/C,IAEfoM,yBAA0B,CACxBlL,QAAS,QACTC,GAAI,CAAE4B,MAAO/C,IAEf6C,QACE7B,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CACFT,GAAI,CACFC,MAAO,CAAEoB,GAAI,OAAQuC,GAAI,QACzBqV,GAAI,CAAE5X,GAAI,EAAGuC,GAAI,KACjBsV,GAAI,CAAE7X,GAAI,EAAGuC,GAAI,IACjBuV,GAAI,CAAE9X,GAAI,GAAIuC,GAAI,IAClB1D,UAEFC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJC,UAAWoN,EAAU,SAAW,MAChC/M,QAAS+M,EAAU,KAAO,EAC1BpX,WAAsB,aACtBM,eAAgB8W,EAAU,aAAe,WACzCa,SACEvZ,EAAAA,EAAAA,KAACwM,EAAAA,EAAO,CACNgN,UAAWd,EACXe,YAAaf,EAAU,aAAe,WACtCvY,GAAI,CACFqV,YAAa,UACbnU,GAAIqX,EAAU,EAAI,GAClBjM,GAAIiM,EAAU,IAAO,KAI3BvY,GAAI,CACFC,MAAO,OACP,4BAA6B,CAAEsZ,cAAe,KAC9CrZ,SAAA,EAEFC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJM,QAAS,GACTrK,WAAYoX,EAAU,aAAe,WACrCvY,GAAI,CAAEuC,SAAU,IAAKtC,MAAOsY,EAAU,OAAS,QAASrY,SAAA,EAExDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,WAAWC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAAC,YAGhEL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAY0C,WAAY,IAAKzC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAC9E4T,GAAmB,OAAJzM,QAAI,IAAJA,GAAS,QAAL2Q,EAAJ3Q,EAAM2E,WAAG,IAAAgM,OAAL,EAAJA,EAAWvb,UAE7BoD,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAUC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAC3C,QAD2C+X,EACvD,OAAJ5Q,QAAI,IAAJA,GAAS,QAAL6Q,EAAJ7Q,EAAM2E,WAAG,IAAAkM,OAAL,EAAJA,EAAWvV,aAAK,IAAAsV,EAAAA,EAAI,WAGzB9X,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJM,QAAS,GACTrK,WAAYoX,EAAU,aAAe,WACrCvY,GAAI,CAAEuC,SAAU,IAAKtC,MAAOsY,EAAU,OAAS,QAASrY,SAAA,EAExDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,WAAWC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAAC,YAGhEL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAY0C,WAAY,IAAKzC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAC9E4T,GAAmB,OAAJzM,QAAI,IAAJA,GAAS,QAAL8Q,EAAJ9Q,EAAMyE,WAAG,IAAAqM,OAAL,EAAJA,EAAW1b,UAE7BoD,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAUC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAC3C,QAD2CkY,EACvD,OAAJ/Q,QAAI,IAAJA,GAAS,QAALgR,EAAJhR,EAAMyE,WAAG,IAAAuM,OAAL,EAAJA,EAAW1V,aAAK,IAAAyV,EAAAA,EAAI,WAGzBjY,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJM,QAAS,GACTrK,WAAYoX,EAAU,aAAe,WACrCvY,GAAI,CAAEuC,SAAU,IAAKtC,MAAOsY,EAAU,OAAS,QAASrY,SAAA,EAExDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,WAAWC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAAC,cAGhEL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,YAAY0C,WAAY,IAAKzC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAC9E4T,GAAmB,OAAJzM,QAAI,IAAJA,OAAI,EAAJA,EAAMmS,YAEtB3Z,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAUC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAAC,gCAOzEF,GAAI,CACFqC,GAAI,EACJ,2BAA4B,CAC1B9B,IAAK,IACLkZ,UAAW,cAEb,0BAA2B,CACzBlW,GAAI,EACJtD,MAAO,CAAEoB,GAAI,OAAQuC,GAAI,QACzB6V,UAAW,CAAEpY,GAAI,UAAWuC,GAAI,mBAItC/D,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CACVJ,GAAI,CACF8D,SAAU,EACVzD,QAAS,OACTC,cAAe,SACf8B,GAAI,CAAEf,GAAI,EAAGC,GAAI,KACjB4X,GAAI,CAAE7X,GAAI,GAAKC,GAAI,MACnBE,GAAI,CAAEH,GAAI,IAAKC,GAAI,OACnBpB,UAEFL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CACFT,GAAI,CACFC,MAAO,OACPc,OAAQ,IACRwC,GAAI,CAAElC,GAAI,EAAGC,GAAI,IACjBpB,SAED4Y,GACCjZ,EAAAA,EAAAA,KAACuP,EAAAA,EAAmB,CAACnP,MAAM,OAAOc,OAAO,OAAMb,UAC7CC,EAAAA,EAAAA,MAACuZ,GAAAA,EAAS,CACRrS,KAAMqR,EACNhW,OAAQ,CAAE4M,IAAK,GAAIC,MAAO,GAAIE,KAAM,EAAGD,OAAQ,IAAKtP,SAAA,EAEpDL,EAAAA,EAAAA,KAAA,QAAAK,UACEC,EAAAA,EAAAA,MAAA,kBAAgByC,GAAG,aAAa+W,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAG5Z,SAAA,EACzDL,EAAAA,EAAAA,KAAA,QAAMka,OAAO,KAAKC,UAAW5b,EAAMM,QAAQO,QAAQgb,KAAMC,YAAa,MACtEra,EAAAA,EAAAA,KAAA,QAAMka,OAAO,MAAMC,UAAW5b,EAAMM,QAAQO,QAAQgb,KAAMC,YAAa,UAG3Era,EAAAA,EAAAA,KAAC6P,EAAAA,EAAa,CAACC,gBAAgB,MAAMC,QAAQuK,EAAAA,GAAAA,IAAM/b,EAAMM,QAAQ0a,QAAS,OAC1EvZ,EAAAA,EAAAA,KAACgQ,EAAAA,EAAK,CACJC,QAAQ,OACRsK,KAAM,CAAEjK,KAAMtR,EAAkB8E,SAAU,GAC1C0W,OAAQ,GACRC,WAAW,MACXvZ,OAAQ,GACRwZ,SAAU,KAEZ1a,EAAAA,EAAAA,KAACkQ,EAAAA,EAAK,CACJqK,KAAM,CAAEjK,KAAMtR,EAAkB8E,SAAU,GAC1C6W,cAAgB/d,GAAUqX,GAAerX,GACzCwD,MAAO,MAETJ,EAAAA,EAAAA,KAACmQ,GAAAA,EAAO,CACNyK,aAAc,CACZrO,gBAAiBhO,EAAMM,QAAQgS,WAAWgK,MAC1C7H,OAAO,aAADzV,OAAegB,EAAMM,QAAQ0a,SACnCnY,aAAc,GAEhB0Z,WAAY,CAAE/Y,MAAO/C,GACrBkE,UAAYtG,GAAU,CAACqX,GAAerX,GAAQ,YAEhDoD,EAAAA,EAAAA,KAAC+a,GAAAA,GAAI,CACHC,KAAK,WACL/K,QAAQ,QACRF,OAAQxR,EAAMM,QAAQO,QAAQgb,KAC9Ba,YAAa,EACb3K,KAAK,mBACL4K,IAAK,CAAE5K,KAAM/R,EAAMM,QAAQO,QAAQgb,KAAMzM,EAAG,GAC5CwN,UAAW,CAAExN,EAAG,WAKtB3N,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CACFT,GAAI,CACFe,OAAQ,OACRV,QAAS,OACTc,WAAY,SACZM,eAAgB,SAChBR,aAAc,EACd4R,OAAQ,aACRwC,YAAa,UACbzT,MAAOzC,EACP8b,WAAY,SACZ/a,SAED2Y,Y,gBCtSf,MAAM/E,GAAkBrX,IACtB,GAAc,OAAVA,QAA4BI,IAAVJ,EACpB,MAAO,KAET,MAAMyU,EAAUnU,OAAON,GACvB,OAAKM,OAAO0H,SAASyM,GAGd,IAAIhV,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAU,MACVE,sBAAuB,IACtBU,OAAOiU,GAND,MA6RX,GApR8B3T,IAOvB,IAAD2d,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAPyB,KAC7BlU,EAAO,GAAE,QACT/H,GAAU,EAAK,MACf+D,EAAQ,KAAI,aACZiV,EAAe,iEAA0D,MACzExV,EAAQ,6BAAyB,SACjC0Y,EAAW,sCACZje,EACC,MAAMa,GAAQC,EAAAA,EAAAA,KACRka,GAAU9Y,EAAAA,EAAAA,GAAcrB,EAAMsB,YAAYC,KAAK,QAC/C,iBAAEd,EAAgB,mBAAEM,GAAuB7B,IAEjD,GAAIgC,EACF,OACEa,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CAAChI,MAAOA,EAAOiI,UAAU,wBACpClL,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAAAF,UACVL,EAAAA,EAAAA,KAACqL,EAAAA,EAAK,CAACM,QAAS,EAAEtL,SACfQ,MAAMC,KAAK,CAAE/D,OAAQ,IAAKgE,IAAI,CAACC,EAAGC,KACjCjB,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAAaT,QAAQ,cAAcgB,OAAQ,IAArCD,WAQ3B,GAAIuC,EACF,OACElD,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,QAASb,SAAA,EAC9CL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CAAChI,MAAOA,KACnBjD,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAAAF,UACVL,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,SAMjC,MAAMyV,EAAUpY,MAAM6I,QAAQlC,IAASA,EAAKzK,OAAS,EAE/C8b,GADWI,EAAUzR,EAAO,IACPzG,IAAKuJ,IAAI,IAAAsR,EAAA,MAAM,CACxC1W,KAAmB,QAAf0W,EAAEtR,EAAKuR,gBAAQ,IAAAD,EAAAA,EAAI,mBACvBhf,MAAOM,OAAOoN,EAAK1N,QAAU,KAG/B,IAAIkf,EAAc,KACdC,EAAiB,KACjBpC,EAAU,KAEd,GAAIV,EAAS,CACX,MAAM+C,EAASnD,EAAU9X,IAAIoY,GAAKA,EAAEvc,OAC9BmY,EAAQiH,EAAOtR,OAAO,CAACuR,EAAKrf,IAAUqf,EAAMrf,EAAO,GACzD+c,EAAUqC,EAAOjf,OAAS,EAAIgY,EAAQiH,EAAOjf,OAAS,KACtD,MAAMmf,EAAS,IAAIrD,GAAWlE,KAAK,CAACtG,EAAGuG,IAAMA,EAAEhY,MAAQyR,EAAEzR,OACzDkf,EAAcI,EAAO,GAAK,CAAEL,SAAUK,EAAO,GAAGhX,KAAMtI,MAAOsf,EAAO,GAAGtf,OAAU,KACjFmf,EAAiBG,EAAOA,EAAOnf,OAAS,GAAK,CAAE8e,SAAUK,EAAOA,EAAOnf,OAAS,GAAGmI,KAAMtI,MAAOsf,EAAOA,EAAOnf,OAAS,GAAGH,OAAU,IACtI,CAEA,OACE0D,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CACHC,QAAQ,WACRC,GAAI,CACFe,OAAQ,OACRyB,UAAW,IACXnC,QAAS,OACTC,cAAe,UACfJ,SAAA,EAEFL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CACThI,MAAOA,EACPiI,UAAWyQ,EACXxQ,qBAAsB,CACpBjL,QAAS,KACT0C,WAAY,IACZzC,GAAI,CAAE4B,MAAO/C,IAEfoM,yBAA0B,CACxBlL,QAAS,QACTC,GAAI,CAAE4B,MAAO/C,IAEf6C,OACEoX,GACEjZ,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CACFT,GAAI,CACFC,MAAO,CAAEoB,GAAI,OAAQuC,GAAI,QACzBqV,GAAI,CAAE5X,GAAI,EAAGuC,GAAI,KACjBsV,GAAI,CAAE7X,GAAI,EAAGuC,GAAI,IACjBuV,GAAI,CAAE9X,GAAI,EAAGuC,GAAI,MACjB1D,UAEFC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJC,UAAWoN,EAAU,SAAW,MAChC/M,QAAS+M,EAAU,KAAO,EAC1BpX,WAAsB,aACtBM,eAAgB8W,EAAU,aAAe,WACzCa,SACEvZ,EAAAA,EAAAA,KAACwM,EAAAA,EAAO,CACNgN,UAAWd,EACXe,YAAaf,EAAU,aAAe,WACtCvY,GAAI,CACFqV,YAAa,UACbnU,GAAIqX,EAAU,EAAI,GAClBjM,GAAIiM,EAAU,IAAO,KAI3BvY,GAAI,CACFC,MAAO,OACP,4BAA6B,CAAEsZ,cAAe,KAC9CrZ,SAAA,EAEFC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJM,QAAS,GACTrK,WAAYoX,EAAU,aAAe,WACrCvY,GAAI,CAAEuC,SAAU,IAAKtC,MAAOsY,EAAU,OAAS,QAASrY,SAAA,EAExDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,WACRC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SACjC,2BAGDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,YACR0C,WAAY,IACZzC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAE/B4T,GAA0B,QAAZoH,EAACS,SAAW,IAAAT,OAAA,EAAXA,EAAaze,UAE/BoD,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAUC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SACtC,QADsCib,EAChD,QADgDC,EAC3DO,SAAW,IAAAP,OAAA,EAAXA,EAAaM,gBAAQ,IAAAP,EAAAA,EAAI,WAG9Bhb,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJM,QAAS,GACTrK,WAAYoX,EAAU,aAAe,WACrCvY,GAAI,CAAEuC,SAAU,IAAKtC,MAAOsY,EAAU,OAAS,QAASrY,SAAA,EAExDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,WACRC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SACjC,wBAGDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,YACR0C,WAAY,IACZzC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAE/B4T,GAA6B,QAAfuH,EAACO,SAAc,IAAAP,OAAA,EAAdA,EAAgB5e,UAElCoD,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAUC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SACnC,QADmCob,EAC7C,QAD6CC,EAC3DK,SAAc,IAAAL,OAAA,EAAdA,EAAgBG,gBAAQ,IAAAJ,EAAAA,EAAI,WAGjCnb,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CACJM,QAAS,GACTrK,WAAYoX,EAAU,aAAe,WACrCvY,GAAI,CAAEuC,SAAU,IAAKtC,MAAOsY,EAAU,OAAS,QAASrY,SAAA,EAExDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,WACRC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SACjC,cAGDL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,YACR0C,WAAY,IACZzC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAE/B4T,GAAe0F,MAElBrZ,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,UAAUC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAAA,CAC3DwY,EAAU9b,OAAO,4BAKxB,KAENoD,GAAI,CACFqC,GAAI,EACJ,2BAA4B,CAC1B9B,IAAK,IACLkZ,UAAW,cAEb,0BAA2B,CACzBlW,GAAI,EACJtD,MAAO,CAAEoB,GAAI,OAAQuC,GAAI,QACzB6V,UAAW,CAAEpY,GAAI,UAAWuC,GAAI,mBAItC/D,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CACVJ,GAAI,CACF8D,SAAU,EACVzD,QAAS,OACTC,cAAe,SACf8B,GAAI,CAAEf,GAAI,EAAGC,GAAI,KACjB4X,GAAI,CAAE7X,GAAI,GAAKC,GAAI,MACnBE,GAAI,CAAEH,GAAI,IAAKC,GAAI,OACnBpB,SAED4Y,GACCjZ,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CACFT,GAAI,CACFC,MAAO,OACPc,OAAQ,IACRwC,GAAI,CAAElC,GAAI,EAAGC,GAAI,IACjBpB,UAEFL,EAAAA,EAAAA,KAACuP,EAAAA,EAAmB,CAACnP,MAAM,OAAOc,OAAO,OAAMb,UAC7CC,EAAAA,EAAAA,MAACkP,EAAAA,EAAQ,CACPhI,KAAMqR,EACNhW,OAAQ,CAAE4M,IAAK,GAAIC,MAAO,GAAIE,KAAM,EAAGD,OAAQ,IAAKtP,SAAA,EAEpDL,EAAAA,EAAAA,KAAC6P,EAAAA,EAAa,CAACC,gBAAgB,MAAMC,QAAQuK,EAAAA,GAAAA,IAAM/b,EAAMM,QAAQ0a,QAAS,OAC1EvZ,EAAAA,EAAAA,KAACgQ,EAAAA,EAAK,CACJC,QAAQ,OACRsK,KAAM,CAAEjK,KAAMtR,EAAkB8E,SAAU,GAC1C0W,OAAQ,GACRC,WAAW,MACXvZ,OAAQ,GACRwZ,SAAU,KAEZ1a,EAAAA,EAAAA,KAACkQ,EAAAA,EAAK,CACJqK,KAAM,CAAEjK,KAAMtR,EAAkB8E,SAAU,GAC1C6W,cAAgB/d,GAAUqX,GAAerX,GACzCwD,MAAO,MAETJ,EAAAA,EAAAA,KAACmQ,GAAAA,EAAO,CACNyK,aAAc,CACZrO,gBAAiBhO,EAAMM,QAAQgS,WAAWgK,MAC1C7H,OAAO,aAADzV,OAAegB,EAAMM,QAAQ0a,SACnCnY,aAAc,GAEhB0Z,WAAY,CAAE/Y,MAAO/C,GACrBkE,UAAYtG,GAAU,CAACqX,GAAerX,GAAQ,YAEhDoD,EAAAA,EAAAA,KAACqQ,GAAAA,EAAG,CACFJ,QAAQ,QACRK,KAAM/R,EAAMM,QAAQO,QAAQgb,KAC5B+B,OAAQ,CAAC,EAAG,EAAG,EAAG,GAAG9b,SAEpBwY,EAAU9X,IAAI,CAACqb,EAAOnb,KACrBjB,EAAAA,EAAAA,KAACqc,GAAAA,EAAI,CAAuB/L,MAAMgK,EAAAA,GAAAA,IAAM/b,EAAMM,QAAQO,QAAQgb,KAAM,MAAM,QAAA7c,OAAvD0D,eAO7BjB,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CACFT,GAAI,CACF8D,SAAU,EACVzD,QAAS,OACTc,WAAY,SACZM,eAAgB,SAChBW,GAAI,CAAEf,GAAI,IAAKC,GAAI,IACnBpB,UAEFL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACT3D,QAAQ,QACR8D,UAAU,SACV7D,GAAI,CAAE4B,MAAOzC,GAAqBe,SAEjCoY,YC1If,GAnJuB6D,KACrB,MAAO7c,EAASwI,GAAcC,EAAAA,UAAe,IACtC1E,EAAO2E,GAAYD,EAAAA,SAAe,OAClCV,EAAMsF,GAAW5E,EAAAA,SAAe,MACjCqU,EACJ/U,GAA0C,kBAA3BA,EAAKgV,kBAChBhV,EAAKgV,kBACF/X,MAAM,OACN1D,IAAK0b,GAASA,EAAKrX,QACnBoG,OAAOC,SACV,GACAiR,EACJlV,GAAQA,EAAKmV,QACTC,OAAOC,QAAQrV,EAAKmV,SAASnR,OAAO9N,IAAA,IAAE,CAAEd,GAAMc,EAAA,OAAK+N,QAAQ7O,KAC3D,GACAkgB,EACJtV,GAAQA,EAAKuV,SACTH,OAAOZ,OAAOxU,EAAKuV,UAAUvR,OAC1B5O,GAA2B,kBAAVA,GAAsBA,EAAMwI,OAAOrI,OAAS,GAEhE,GACAigB,EACJnc,MAAM6I,QAAY,OAAJlC,QAAI,IAAJA,OAAI,EAAJA,EAAMyV,gBAAkBzV,EAAKyV,cAAclgB,OAAS,EAC9DyK,EAAKyV,cAAczR,OAAOC,SAC1B,GACAyR,EACJrc,MAAM6I,QAAY,OAAJlC,QAAI,IAAJA,OAAI,EAAJA,EAAM0V,OAAS1V,EAAK0V,KAAKngB,OAAS,EAC5CyK,EAAK0V,KAAK1R,OAAOC,SACjB,GA+BN,OACEnL,EAAAA,EAAAA,MAACL,EAAAA,EAAI,CAACC,QAAQ,WAAWC,GAAI,CAAEe,OAAQ,OAAQV,QAAS,OAAQC,cAAe,UAAWJ,SAAA,EACxFL,EAAAA,EAAAA,KAACiL,EAAAA,EAAU,CAAChI,MAAM,iBAAciI,UAAU,qDAC1ClL,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CAACJ,GAAI,CAAE8D,SAAU,GAAI5D,SAC9BZ,GACCO,EAAAA,EAAAA,KAACW,EAAAA,EAAQ,CAACT,QAAQ,cAAcgB,OAAQ,MACtCsC,GACFxD,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,QAAOvD,SAAEmD,IACvBgE,GACFlH,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAEtL,SAAA,CACfmH,EAAK2V,QACJnd,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CAACC,SAAS,UAAU1D,QAAQ,WAAUG,SAAC,4CAG3C,KACHkc,EAAaxf,OAAS,EACrBwf,EAAaxb,IAAI,CAAC0b,EAAM9N,KACtB3O,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAW3D,QAAQ,QAAOG,SAClCoc,GADc9N,KAKnB3O,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAOG,SAAC,+BAE7Byc,EAAa/f,OAAS,GACrBuD,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,IAAKtL,SAAA,EACnBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAC,oBAGpDyc,EAAa/b,IAAI,CAAC0b,EAAM9N,KACvBrO,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAoB3D,QAAQ,QAAOG,SAAA,CAAC,KAC1Coc,IAAI,OAAAlf,OADeoR,QAK1B,KACH+N,EAAe3f,OAAS,GACvBuD,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,IAAKtL,SAAA,EACnBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAC,eAGpDqc,EAAe3b,IAAIlD,IAAA,IAAE6U,EAAK9V,GAAMiB,EAAA,OAC/ByC,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAW3D,QAAQ,QAAOG,SAAA,EACnCC,EAAAA,EAAAA,MAAA,KAAAD,SAAA,CAAIqS,EAAI0K,OAAO,GAAGC,cAAgB3K,EAAI4K,MAAM,GAAG,OAAK,IAAE1gB,IADvC8V,QAKnB,KACHsK,EAAQjgB,OAAS,GAChBuD,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,IAAKtL,SAAA,EACnBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAC,kBAGpD2c,EAAQjc,IAAI,CAACuJ,EAAMqE,KAClBrO,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAqB3D,QAAQ,QAAOG,SAAA,CAAC,KAC3CiK,IAAI,QAAA/M,OADgBoR,QAK3B,KACHuO,EAAKngB,OAAS,GACbuD,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,IAAKtL,SAAA,EACnBL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,UAAU6B,MAAM,iBAAgB1B,SAAC,oBAGpD6c,EAAKI,MAAM,EAAG,GAAGvc,IAAI,CAACuJ,EAAMqE,KAC3BrO,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAoB3D,QAAQ,QAAOG,SAAA,CAAC,KAC1CiK,IAAI,OAAA/M,OADeoR,QAK1B,SAGN3O,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQ6B,MAAM,iBAAgB1B,SAAC,+EAKvDL,EAAAA,EAAAA,KAAC0M,EAAAA,EAAW,CAACvM,GAAI,CAAEoC,GAAI,EAAGZ,GAAI,EAAGC,eAAgB,WAAYN,WAAY,UAAWjB,UAClFL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CAAC5B,QAAQ,YAAYgC,QA7GhB6G,UAChBd,GAAW,GACXE,EAAS,MACT2E,EAAQ,MACR,IACE,MAAMC,EAAUtE,EAAAA,EAAW8U,GACrBtQ,EAAM,IAAIzH,KACVoE,EAAS,IAAIC,gBACnBD,EAAOE,IAAI,OAAQmD,EAAInH,eACvB8D,EAAOE,IAAI,MAAOmD,EAAIlH,WAAa,GACnC,MAAMoH,EAAU,CAAE,eAAgB,oBAC5BC,EAAMC,eAAeC,QAAQ,OAC7BC,EAAQF,eAAeC,QAAQ,eACjCF,IAAKD,EAAQ,iBAAmBC,GAChCG,IAAOJ,EAAuB,cAAC,UAAA5P,OAAagQ,IAChD,MAAMiQ,QAAY/P,MAAM,GAADlQ,OAAIwP,EAAO,iBAAAxP,OAAgBqM,EAAOK,YAAc,CACrEwT,OAAQ,OACRtQ,YAEF,IAAKqQ,EAAI5P,GAAI,MAAM,IAAI8P,MAAM,QAADngB,OAASigB,EAAI5R,SACzC,MAAMiC,QAAa2P,EAAI3P,OACvBf,EAAQe,EACV,CAAE,MAAO8P,GACPxV,EAAS3D,OAAOmZ,GAClB,CAAC,QACC1V,GAAW,EACb,GAmFoD0E,SAAUlN,EAAQY,SAAC,mCCzI9Dud,GAAwB7U,iBAKzB,IALgC,OAC1CnB,EAAM,OACNiW,EAAS,GAAE,eACXC,EAAiB,EAAC,cAClBC,EAAgB,GACjBjhB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACH,MAAMkhB,EAlBkBC,MACxB,GAAsB,qBAAXC,OACT,OAAO,KAET,IACE,OAAOA,OAAO7Q,eAAeC,QAAQ,MACvC,CAAE,MAAOlG,GAEP,OADA+W,QAAQ3a,MAAM,uCAAwC4D,GAC/C,IACT,GASmB6W,GACnB,IAAKD,EACH,MAAM,IAAIN,MAAM,8CAGlB,MAAM9T,EAAS,IAAIC,gBAEnB,GAAIjC,EAAQ,CACV,MAAOlD,EAAMwI,GAAStF,EAAOnD,MAAM,KAC/BC,GAAQwI,GACVtD,EAAOE,IAAI,QAAQ,GAADvM,OAAKmH,EAAI,KAAAnH,OAAI2P,EAAK,OAExC,CAEI2Q,GACFjU,EAAOE,IAAI,QAAStF,OAAOqZ,IAGzBC,GACFlU,EAAOE,IAAI,oBAAqBtF,OAAOsZ,IAGrCC,GACFnU,EAAOE,IAAI,iBAAkBtF,OAAOuZ,IAGtC,MAAMK,EAAG,GAAA7gB,OAAMkL,EAAAA,EAAW4V,SAAQ,kCAAA9gB,OAChCqM,EAAOK,WAAU,IAAA1M,OAAOqM,EAAOK,YAAe,IAG1C1C,QAAiBkG,MAAM2Q,EAAK,CAChCjR,QAAS,CACP,gBAAiB6Q,GAEnBM,YAAa,YAGf,IAAInU,EAAU,KACd,IACEA,QAAgB5C,EAASsG,MAC3B,CAAE,MAAOzG,GACP,CAGF,IAAKG,EAASqG,GAAI,CAChB,MAAMnG,EACH0C,IAAYA,EAAQoU,SAAWpU,EAAQ3G,OAAS2G,EAAQ1C,UAAQ,yDAAAlK,OACXgK,EAASqE,OAAM,MACjEpI,EAAQ,IAAIka,MAAMjW,GAExB,MADAjE,EAAMoI,OAASrE,EAASqE,OAClBpI,CACR,CAEA,OAAO2G,CACT,ECrCMqU,GAAW,CACfC,aAAc,KACdC,cAAe,KACfC,UAAW,KACXC,YAAa,MACbC,eAAgB,GAChBC,mBAAoB,KACpBC,mBAAoB,KACpBC,gBAAiB,KACjBC,gBAAiB,MAYbC,GAAiB,CACrBjc,MAAO,iCACP0W,QAAS,MACTxN,IAAK,CAAEvP,MAAO,MAAQkG,MAAO,YAC7BmJ,IAAK,CAAErP,MAAO,MAAQkG,MAAO,YAC7BgW,OAAQ,CACN,CAAE5L,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,QACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,QACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,QACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,UAIrBuiB,GAAoB,CACxBlc,MAAO,gCACP0W,QAAS,MACTxN,IAAK,CAAEvP,MAAO,MAAQkG,MAAO,YAC7BmJ,IAAK,CAAErP,MAAO,MAAQkG,MAAO,YAC7BgW,OAAQ,CACN,CAAE5L,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,OACvB,CAAEsQ,MAAO,MAAOtQ,MAAO,SAIrBwiB,GAAyB,CAC7B,CAAEvD,SAAU,uBAAqBjf,MAAO,MACxC,CAAEif,SAAU,WAAYjf,MAAO,MAC/B,CAAEif,SAAU,aAAcjf,MAAO,MACjC,CAAEif,SAAU,wBAAyBjf,MAAO,OAC5C,CAAEif,SAAU,oBAAqBjf,MAAO,MACxC,CAAEif,SAAU,sBAAuBjf,MAAO,OAC1C,CAAEif,SAAU,eAAajf,MAAO,OAChC,CAAEif,SAAU,QAASjf,MAAO,QAGxByiB,GAA0B,CAC9B,CAAExD,SAAU,SAAUjf,MAAO,QAC7B,CAAEif,SAAU,YAAajf,MAAO,QAChC,CAAEif,SAAU,aAAcjf,MAAO,QACjC,CAAEif,SAAU,YAAajf,MAAO,QAChC,CAAEif,SAAU,YAAajf,MAAO,QAChC,CAAEif,SAAU,aAAcjf,MAAO,QACjC,CAAEif,SAAU,OAAQjf,MAAO,OAC3B,CAAEif,SAAU,iBAAkBjf,MAAO,QAGjC0iB,GAAa,CACjBpa,KAAM,yBACNqE,KAAM,yBACN3B,OAAQ,CACN9E,MAAO,eACPyc,WAAY,gBAEdhZ,WAAY,CACV,CAAErB,KAAM,SAAUsB,QAAS,KAAQE,OAAQ,MAC3C,CAAExB,KAAM,YAAasB,QAAS,KAAQE,OAAQ,MAC9C,CAAExB,KAAM,cAAesB,QAAS,IAAQE,OAAQ,MAChD,CAAExB,KAAM,OAAQsB,QAAS,KAAQE,OAAQ,QAIvC8Y,GAAe,CACnBC,OAAQ,CAAC,MAAO,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,QACvDC,QAAS,CAAC,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,IAAQ,MAC1DC,SAAU,CAAC,KAAQ,KAAQ,KAAQ,MAAQ,MAAQ,KAAQ,OAC3DC,IAAK,CAAC,IAAO,IAAO,IAAO,KAAO,KAAO,IAAO,OAG5CC,GAAe,CACnB,CACE9c,GAAI,UACJyO,MAAM,IAAIhM,MAAOsa,cACjB9E,KAAM,OACN9V,KAAM,cACN6a,OAAQ,OAEV,CACEhd,GAAI,UACJyO,KAAM,IAAIhM,KAAKA,KAAKyH,MAAQ,QAAc6S,cAC1C9E,KAAM,YACN9V,KAAM,kBACN6a,OAAQ,MAEV,CACEhd,GAAI,SACJyO,KAAM,IAAIhM,KAAKA,KAAKyH,MAAQ,QAAc6S,cAC1C9E,KAAM,UACN9V,KAAM,yBACN6a,OAAQ,OAINC,GAAY,CAChB,CACEjd,GAAI,SACJE,MAAO,4BACPgd,YAAa,gDACbrc,SAAU,QAEZ,CACEb,GAAI,SACJE,MAAO,6BACPgd,YAAa,mDACbrc,SAAU,UAEZ,CACEb,GAAI,SACJE,MAAO,yBACPgd,YAAa,wCACbrc,SAAU,QAIRsc,GAAgB,CACpB,CACEnd,GAAI,QACJoL,KAAM,SACNG,YAAa,MACb2E,OAAQ,MACR7E,cAAc,IAAI5I,MAAOsa,cACzBnN,UAAW,aAEb,CACE5P,GAAI,QACJoL,KAAM,UACNG,WAAY,MACZ2E,OAAQ,MACR7E,aAAc,IAAI5I,KAAKA,KAAKyH,MAAQ,OAAU6S,cAC9CnN,UAAW,UAEb,CACE5P,GAAI,QACJoL,KAAM,SACNG,YAAa,KACb2E,OAAQ,MACR7E,aAAc,IAAI5I,KAAKA,KAAKyH,MAAQ,QAAc6S,cAClDnN,UAAW,aAEb,CACE5P,GAAI,QACJoL,KAAM,gBACNG,YAAa,KACb2E,OAAQ,MACR7E,aAAc,IAAI5I,KAAKA,KAAKyH,MAAQ,QAAc6S,cAClDnN,UAAW,OAITwN,GAAqB,CACzBC,QAAS,UACT3K,YAAa,eACbR,iBAAkB,IAClBC,YAAa,GACbE,WAAY,GACZX,sBAAuB,KACvBiB,mBAAoB,aACpBC,gBAAiB,aACjBjB,QAAS,CACP,CACEvG,KAAM,UACN4G,MAAO,GACPG,YAAa,GACbE,WAAY,GACZc,WAAY,MAEd,CACE/H,KAAM,SACN4G,MAAO,GACPG,YAAa,GACbE,WAAY,GACZc,WAAY,QAKZmK,GAAc,CAClBjN,SAAU,CACR,CACErQ,GAAI,SACJud,OAAQ,gBACRC,SAAU,oBACVR,OAAQ,MACRvO,MAAM,IAAIhM,MAAOsa,eAEnB,CACE/c,GAAI,SACJud,OAAQ,gBACRC,SAAU,oBACVR,OAAQ,KACRvO,KAAM,IAAIhM,KAAKA,KAAKyH,MAAQ,OAAU6S,eAExC,CACE/c,GAAI,SACJud,OAAQ,gBACRC,SAAU,uBACVR,OAAQ,KACRvO,KAAM,IAAIhM,KAAKA,KAAKyH,MAAQ,QAAc6S,iBAK1CU,GAAsB,uBAetBC,GAAyBA,CAACnW,EAAMrJ,KAAW,IAADvD,EAAAgjB,EAAA7iB,EAAAI,EAAA4X,EAAA8K,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC9C,IAAKhX,EACH,MAAO,CACLvH,GAAG,YAADxF,OAAc0D,GAChBkN,KAAM,aACNG,WAAY,EACZ2E,OAAQ,MACR7E,aAAc,KACduE,UAAW,MASf,MAAO,CACL5P,GAAwB,QAAtBrF,EAAS,QAATgjB,EAAEpW,EAAKvH,UAAE,IAAA2d,EAAAA,EAAIpW,EAAKiX,YAAI,IAAA7jB,EAAAA,EAAA,YAAAH,OAAgB0D,GACxCkN,KAA4D,QAAxDtQ,EAAkC,QAAlCI,EAAW,QAAX4X,EAAEvL,EAAK6D,YAAI,IAAA0H,EAAAA,EAAIvL,EAAKkX,sBAAc,IAAAvjB,EAAAA,EAAIqM,EAAKmX,qBAAa,IAAA5jB,EAAAA,EAAI,aAChEyQ,WARgB1R,KAChB,MAAMyU,EAAUnU,OAAON,GACvB,OAAOM,OAAO0H,SAASyM,GAAWA,EAAU,GAMhCqQ,CAAsD,QAA9Cf,EAA8B,QAA9BC,EAAgB,QAAhBC,EAACvW,EAAKgE,kBAAU,IAAAuS,EAAAA,EAAIvW,EAAKqX,aAAK,IAAAf,EAAAA,EAAItW,EAAKsX,eAAO,IAAAjB,EAAAA,EAAI,GACtE1N,OAAwC,QAAlC6N,EAAa,QAAbC,EAAEzW,EAAK2I,cAAM,IAAA8N,EAAAA,EAAIzW,EAAKuX,oBAAY,IAAAf,EAAAA,EAAI,MAC5C1S,aAAmE,QAAvD4S,EAAiC,QAAjCC,EAAmB,QAAnBC,EAAE5W,EAAK8D,oBAAY,IAAA8S,EAAAA,EAAI5W,EAAKwX,aAAK,IAAAb,EAAAA,EAAI3W,EAAKyX,qBAAa,IAAAf,EAAAA,EAAI,KACvErO,UAIW,QAJFwO,EAGkB,QAHlBC,EAEa,QAFbC,EACO,QADPC,EACPhX,EAAKqI,iBAAS,IAAA2O,EAAAA,EACdhX,EAAK0X,uBAAe,IAAAX,EAAAA,EACpB/W,EAAK2X,4BAAoB,IAAAb,EAAAA,EACzB9W,EAAK4X,YAAI,IAAAf,EAAAA,EACT,OAIAgB,GAAwBA,CAAC7X,EAAMrJ,KAAW,IAADmhB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC7C,IAAKtY,EACH,MAAO,CACLvH,GAAG,WAADxF,OAAa0D,GACfyS,YAAa,UACbE,gBAAiB,KACjBtF,WAAY,EACZ2E,OAAQ,MACR7E,aAAc,KACd0F,gBAAiB,KACjBC,eAAgB,MASpB,MAAO,CACLhR,GAA+B,QAA7Bqf,EAAS,QAATC,EAAE/X,EAAKvH,UAAE,IAAAsf,EAAAA,EAAI/X,EAAKuY,mBAAW,IAAAT,EAAAA,EAAA,WAAA7kB,OAAe0D,GAC9CyS,YAA6B,QAAlB4O,EAAEhY,EAAKoJ,mBAAW,IAAA4O,EAAAA,EAAI,UACjC1O,gBAAqC,QAAtB2O,EAAEjY,EAAKsJ,uBAAe,IAAA2O,EAAAA,EAAI,KACzCjU,WATgB1R,KAChB,MAAMyU,EAAUnU,OAAON,GACvB,OAAOM,OAAO0H,SAASyM,GAAWA,EAAU,GAOhCqQ,CAAwB,QAAhBc,EAAClY,EAAKgE,kBAAU,IAAAkU,EAAAA,EAAI,GACxCvP,OAAmB,QAAbwP,EAAEnY,EAAK2I,cAAM,IAAAwP,EAAAA,EAAI,MACvBrU,aAA+B,QAAnBsU,EAAEpY,EAAK8D,oBAAY,IAAAsU,EAAAA,EAAI,KACnC5O,gBAAqC,QAAtB6O,EAAErY,EAAKwJ,uBAAe,IAAA6O,EAAAA,EAAI,KACzC5O,eAAmC,QAArB6O,EAAEtY,EAAKyJ,sBAAc,IAAA6O,EAAAA,EAAI,OAIrCE,GAAwB,CAC5BC,KAAM,CAAEtjB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC1C9B,OAAQ,CAAEjG,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC5Cwb,SAAU,CAAEvjB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC9Cyb,SAAU,CAAExjB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC9C0b,MAAO,CAAEzjB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC3CsK,UAAW,CAAErS,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC/C4L,SAAU,CAAE3T,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC9C2b,eAAgB,CAAE1jB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MACpD4b,QAAS,CAAE3jB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAC7C6b,WAAY,CAAE5jB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MAChD8b,gBAAiB,CAAE7jB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MACrD+b,cAAe,CAAE9jB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,MACnDgc,mBAAoB,CAAE/jB,SAAS,EAAM+D,MAAO,KAAMgE,KAAM,OAGpDic,GAAgB,CAAC,aAAc,YAAa,gBA07BlD,GAz6BkBvb,EAAAA,KAAW,KAAO,IAADwb,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACjC,MAAMvc,GAAWC,EAAAA,EAAAA,MACXzJ,GAAQC,EAAAA,EAAAA,MACR,aAAEI,EAAY,YAAEE,EAAW,iBAAEE,GACjCvB,IACIkC,GAAWC,EAAAA,EAAAA,GAAcrB,EAAMsB,YAAYC,KAAK,QAC/CykB,EAAOC,GAAYtc,EAAAA,SAAe4a,KAClC2B,EAAcC,GAAmBxc,EAAAA,UAAe,GACjDyc,EAAkBzc,EAAAA,SAClB0c,EAAmB1c,EAAAA,OAAa,GAChCG,EAAWH,EAAAA,OACqB,SAApCI,CAAAA,SAAAA,aAAAA,WAAAA,SAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,EAAAA,qBAAAA,YAAAA,mBAAAA,+BAAAA,4BAAAA,6BAAAA,+BAAAA,sBAAAA,6BAAAA,8CAAAA,iBAAAA,kCAAAA,2BAAAA,4CAAAA,yBAAAA,0CAAAA,uBAAAA,wCAAAA,sBAAAA,uCAAAA,wBAAAA,gDAAYC,qBACZsc,QACIC,EAAiB5c,EAAAA,YACrB,MACE6a,KAAM,CAAEtjB,SAAS,EAAO+D,MAAO,KAAMgE,KAAMgX,IAC3C9Y,OAAQ,CAAEjG,SAAS,EAAO+D,MAAO,KAAMgE,KAAM8X,IAC7C0D,SAAU,CAAEvjB,SAAS,EAAO+D,MAAO,KAAMgE,KAAMgY,IAC/CyD,SAAU,CAAExjB,SAAS,EAAO+D,MAAO,KAAMgE,KAAMqY,IAC/CqD,MAAO,CAAEzjB,SAAS,EAAO+D,MAAO,KAAMgE,KAAMwY,IAC5ClO,UAAW,CAAErS,SAAS,EAAO+D,MAAO,KAAMgE,KAAM0Y,IAChD9M,SAAU,CAAE3T,SAAS,EAAO+D,MAAO,KAAMgE,KAAM,IAC/C2b,eAAgB,CAAE1jB,SAAS,EAAO+D,MAAO,KAAMgE,KAAM2Y,IACrDiD,QAAS,CAAE3jB,SAAS,EAAO+D,MAAO,KAAMgE,KAAM6Y,IAC9CgD,WAAY,CAAE5jB,SAAS,EAAO+D,MAAO,KAAMgE,KAAM0X,IACjDoE,gBAAiB,CACf7jB,SAAS,EACT+D,MAAO,KACPgE,KAAM6X,IAERkE,cAAe,CAAE9jB,SAAS,EAAO+D,MAAO,KAAMgE,KAAM2X,IACpDqE,mBAAoB,CAClB/jB,SAAS,EACT+D,MAAO,KACPgE,KAAM4X,MAGV,KAEK2F,EAAUC,GAAe9c,EAAAA,SAAe,OACxC+c,GAASC,IAAchd,EAAAA,SAAeub,GAAc,IACrD0B,GAAgBjd,EAAAA,QAAc,IAxDb,eAACkd,EAAKtoB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAAC,OACjC+D,MAAMC,KAAK,CAAE/D,OAAQqoB,IAASrkB,IAAI,CAACC,EAAGC,KACpC,MAAMuQ,EAAO,IAAIhM,KAUjB,OATAgM,EAAK6T,SAAS7T,EAAKzL,WAAa9E,GASzB,CAAE6B,MARK,IAAIzG,KAAKga,eAAe,QAAS,CAC7CnJ,MAAO,OACPxI,KAAM,YACLtH,OAAOoU,GAKM5U,MAJL,GAAAW,OAAMiU,EAAK1L,cAAa,KAAAvI,OAAIiH,OAAOgN,EAAKzL,WAAa,GAAGuf,SACjE,EACA,QAGD,CA2CuCC,CAAiB,GAAI,KACxD3d,GAAQ4d,IAAatd,EAAAA,SAAsC,QAAxBwb,EAAiB,QAAjBC,EAACwB,GAAc,UAAE,IAAAxB,OAAA,EAAhBA,EAAkB/mB,aAAK,IAAA8mB,EAAAA,EAAI,IAEhE+B,GAAkBvd,EAAAA,QAAc,KACpC,GAAsB,qBAAXgW,OACT,MAAO,UAET,IACE,MAAMwH,EAAiBrY,eAAeC,QAAQ,UAC9C,GAAIoY,GAAkBA,EAAetgB,OACnC,OAAOsgB,EAAetgB,OAExB,MAAMugB,EAAatY,eAAeC,QAAQ,QAC1C,GAAIqY,GAAcA,EAAWvgB,OAC3B,OAAOugB,EAAWvgB,OAEpB,MAAMwgB,EAAcvY,eAAeC,QAAQ,SAC3C,GAAIsY,GAAeA,EAAYC,SAAS,KACtC,OAAOD,EAAYnhB,MAAM,KAAK,EAElC,CAAE,MAAOjB,GACP,CAEF,MAAO,WACN,IAEGsiB,GAAoB5d,EAAAA,YAAkB,KAa1C,GAZAiW,QAAQ4H,IAAI,kDACZrB,GAAgB,GAChBF,EAAUwB,IACR,MAAMC,EAAO,CAAC,EAId,OAHArJ,OAAOC,QAAQmJ,GAAME,QAAQC,IAAmB,IAAjBzT,EAAK9V,GAAMupB,EACxCF,EAAKvT,IAAIvQ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQvF,GAAK,IAAE6C,SAAS,EAAM+D,MAAO,SAEzCyiB,IAGTG,aAAazB,EAAgBE,SAEzBxc,EAMF,YALAsc,EAAgBE,QAAUwB,WAAW,KACnC7B,EAASM,KACTJ,GAAgB,GAChBvG,QAAQ4H,IAAI,sDACX,MAILpB,EAAgBE,aAAU7nB,EAE1B,MAAMspB,EAAY1B,EAAiBC,QAAU,EAC7CD,EAAiBC,QAAUyB,EAE3B,MAiDMC,EAAmBA,CAAChf,EAAQif,KAA0C,IAADC,EAAAC,EAAA,IAAvC,MAAEzjB,EAAK,aAAEwV,EAAY,UAAEvN,GAAWsb,EACpE,MAAMG,EAAQ9lB,MAAM6I,QAAgB,OAARnC,QAAQ,IAARA,OAAQ,EAARA,EAAUof,OAASpf,EAASof,MAAQ,GAC1DC,EAAa,IAAIvqB,KAAKga,eAAe,QAAS,CAAEnJ,MAAO,UACvD2Z,EAAY,IAAIxqB,KAAKga,eAAe,QAAS,CACjDnJ,MAAO,OACPxI,KAAM,YAGFoiB,EAActiB,OACwB,QADlBiiB,EACH,QADGC,EAChB,OAARnf,QAAQ,IAARA,OAAQ,EAARA,EAAUuf,mBAAW,IAAAJ,EAAAA,EAAY,OAARnf,QAAQ,IAARA,OAAQ,EAARA,EAAU6Y,eAAO,IAAAqG,EAAAA,EAAI,KAEzCM,GAAeD,EAAYriB,MAAM,KAClCuiB,EAAa9pB,OAAO6pB,KAAgB,IAAIvhB,MAAOM,cAE/CmhB,EAAiB,IAAIC,IAC3BP,EAAMT,QAAS5b,IAAU,IAAD6c,EACtB,MAAM/G,EAAU5b,OAAoB,QAAd2iB,EAAK,OAAJ7c,QAAI,IAAJA,OAAI,EAAJA,EAAM8V,eAAO,IAAA+G,EAAAA,EAAI,KACjCC,EAASC,GAAYjH,EAAQ3b,MAAM,KACpC6iB,EAAUpqB,OAAOkqB,GACjBG,EAAWrqB,OAAOmqB,GACxB,GAAInqB,OAAO0H,SAAS0iB,IAAYpqB,OAAO0H,SAAS2iB,GAAW,CAAC,IAADvR,EACzD,MAAMtD,EAAG,GAAAnV,OAAM+pB,EAAO,KAAA/pB,OAAIiH,OAAO+iB,GAAUjC,SAAS,EAAG,MACvD2B,EAAend,IAAI4I,EAAKxV,OAAkB,QAAZ8Y,EAAK,OAAJ1L,QAAI,IAAJA,OAAI,EAAJA,EAAMyK,aAAK,IAAAiB,EAAAA,EAAI,GAChD,IAGF,MAAMwR,EAAkBb,EAAMjc,OAAO,CAACC,EAAKL,KAAU,IAADmd,EAClD,MAAMrH,EAAU5b,OAAoB,QAAdijB,EAAK,OAAJnd,QAAI,IAAJA,OAAI,EAAJA,EAAM8V,eAAO,IAAAqH,EAAAA,EAAI,KACjC,CAAEJ,GAAYjH,EAAQ3b,MAAM,KAC7B8iB,EAAWrqB,OAAOmqB,GAC8B,IAADK,EAAjDxqB,OAAO0H,SAAS2iB,KAAc5c,EAAIgd,IAAIJ,IACxC5c,EAAIb,IAAIyd,EAAUrqB,OAAkB,QAAZwqB,EAAK,OAAJpd,QAAI,IAAJA,OAAI,EAAJA,EAAMyK,aAAK,IAAA2S,EAAAA,EAAI,IAE1C,OAAO/c,GACN,IAAIuc,KAEDU,EAAiB/mB,MAAMC,KAAK,CAAE/D,OAAQ,IAAM,CAACiE,EAAGC,KACpD,MAAMuQ,EAAO,IAAIhM,KAAKwhB,EAAY/lB,EAAO,GACnCyR,EAAG,GAAAnV,OAAMiU,EAAK1L,cAAa,KAAAvI,OAAIiH,OAAOvD,EAAQ,GAAGqkB,SACrD,EACA,MAEF,IAAI1oB,EAAQqqB,EAAejd,IAAI0I,GACI,IAADmV,EAAb,qBAAVjrB,IACTA,EAAsC,QAAjCirB,EAAGL,EAAgBxd,IAAI/I,EAAQ,UAAE,IAAA4mB,EAAAA,EAAI,GAE5C,MAAO,CACL3a,MAAO0Z,EAAWxpB,OAAOoU,GACzBsW,UAAWjB,EAAUzpB,OAAOoU,GAC5B5U,WAIEof,EAAS4L,EAAe7mB,IAAKgnB,GAAUA,EAAMnrB,OAI7CorB,EAAgBhM,EAAOxQ,OAAQyc,GAAgB,IAARA,GACvCtO,EACJqO,EAAcjrB,OAAS,EACnBirB,EAActd,OAAO,CAACC,EAAKsd,IAAQtd,EAAMsd,EAAK,GAAKD,EAAcjrB,OACjE,EACAmrB,EAAWlM,EAAOjf,OAAS,EAAI+J,KAAKqF,OAAO6P,GAAU,EACrDmM,EAAWnM,EAAOjf,OAAS,EAAI+J,KAAKmF,OAAO+P,GAAU,EACrDoM,EAAWR,EAAevd,KAAM0d,GAAUA,EAAMnrB,QAAUsrB,GAC1DG,EAAWT,EAAevd,KAAM0d,GAAUA,EAAMnrB,QAAUurB,GAEhE,MAAO,CACLllB,QACAwV,eACAvN,YACA4N,OAAQ8O,EAAe7mB,IAAIunB,IAAA,IAAC,MAAEpb,EAAK,MAAEtQ,GAAO0rB,EAAA,MAAM,CAAEpb,QAAOtQ,WAC3D+c,UACAxN,IAAK,CACHvP,MAAOsrB,EACPplB,MAAOslB,EAAWA,EAASN,UAAY,MAEzC7b,IAAK,CACHrP,MAAOurB,EACPrlB,MAAOulB,EAAWA,EAASP,UAAY,QAKvCS,EAAuBhhB,IACR1G,MAAM6I,QAAgB,OAARnC,QAAQ,IAARA,OAAQ,EAARA,EAAUihB,YACvCjhB,EAASihB,WACT,IACcznB,IAAKuJ,IAAI,IAAAme,EAAAC,EAAA,MAAM,CAC/B7M,SAAyB,QAAjB4M,EAAM,OAAJne,QAAI,IAAJA,OAAI,EAAJA,EAAMqI,iBAAS,IAAA8V,EAAAA,EAAI,gBAC7B7rB,MAAOM,OAAkB,QAAZwrB,EAAK,OAAJpe,QAAI,IAAJA,OAAI,EAAJA,EAAMyK,aAAK,IAAA2T,EAAAA,EAAI,MAI3BC,EAA2BphB,IAAc,IAADqhB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC5C,IAAK1hB,EACH,OAAO,KAGT,MAAMwN,EAAQ7X,OAAgC,QAA1B0rB,EAACrhB,EAAS0N,wBAAgB,IAAA2T,EAAAA,EAAI,GAC5C1T,EAAchY,OAA2B,QAArB2rB,EAACthB,EAAS2N,mBAAW,IAAA2T,EAAAA,EAAI,GAC7CzT,OACoBpY,IAAxBuK,EAAS6N,WACLlY,OAA0B,QAApB4rB,EAACvhB,EAAS6N,kBAAU,IAAA0T,EAAAA,EAAI,GAC9BhiB,KAAKqF,IAAI4I,EAAQG,EAAa,GAC9BgB,OAC+BlZ,IAAnCuK,EAASkN,uBAC0B,OAAnClN,EAASkN,sBACLvX,OAAOqK,EAASkN,uBAChBM,EAAQ,EACO,IAAdG,EAAqBH,EACtB,EAEAqL,EAAU5b,OAAuB,QAAjBukB,EAACxhB,EAAS6Y,eAAO,IAAA2I,EAAAA,EAAI,IAC3C,IAAItT,EAAc2K,GAAW,iBAC7B,MAAOgH,EAASC,GAAYjH,EAAQ3b,MAAM,KACpCE,EAAazH,OAAOmqB,GAAY,EAChCC,EAAUpqB,OAAOkqB,GACjB8B,EAAa,CACjB,QACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,aACA,UACA,YACA,aAGAvkB,GAAc,GACdA,EAAaukB,EAAWnsB,QACxBG,OAAO0H,SAAS0iB,KAEhB7R,EAAW,GAAAlY,OAAM2rB,EAAWvkB,GAAW,KAAApH,OAAI+pB,IAG7C,MAGM5S,GAHa7T,MAAM6I,QAAQnC,EAASmN,SACtCnN,EAASmN,QACT,IACuB3T,IAAKuJ,IAAU,IAAD6e,EAAApT,EAAAqT,EAAAtT,EACvC,MAAMuT,EAAYnsB,OAAkB,QAAZisB,EAAK,OAAJ7e,QAAI,IAAJA,OAAI,EAAJA,EAAMyK,aAAK,IAAAoU,EAAAA,EAAI,GAClCG,EAAkBpsB,OAAwB,QAAlB6Y,EAAK,OAAJzL,QAAI,IAAJA,OAAI,EAAJA,EAAM4K,mBAAW,IAAAa,EAAAA,EAAI,GAC9CwT,OACiBvsB,KAAjB,OAAJsN,QAAI,IAAJA,OAAI,EAAJA,EAAM8K,YACFlY,OAAsB,QAAhBksB,EAAC9e,EAAK8K,kBAAU,IAAAgU,EAAAA,EAAI,GAC1BtiB,KAAKqF,IAAIkd,EAAYC,EAAiB,GACtCE,EACJH,EAAY,EAAuB,IAAlBC,EAAyBD,EAAY,EACxD,MAAO,CACLlb,KAAgB,QAAZ2H,EAAM,OAAJxL,QAAI,IAAJA,OAAI,EAAJA,EAAM6D,YAAI,IAAA2H,EAAAA,EAAI,WACpBf,MAAOsU,EACPnU,YAAaoU,EACblU,WAAYmU,EACZrT,WAAYsT,KAIhB,MAAO,CACLpJ,UACA3K,cACAR,iBAAkBF,EAClBG,cACAE,aACAX,sBAAuByB,EACvBR,mBAA+C,QAA7BsT,EAAEzhB,EAASmO,0BAAkB,IAAAsT,EAAAA,EAAI,KACnDrT,gBAAyC,QAA1BsT,EAAE1hB,EAASoO,uBAAe,IAAAsT,EAAAA,EAAI,KAC7CvU,YAIJ,WACE,MAAM+U,EAA0BC,IAC9B,IAAKA,EAAW,OAEhB,MAAMC,EAAqB9oB,MAAM6I,QAAQggB,EAAUE,sBAC/CF,EAAUE,qBACV,GACEC,EAAkBhpB,MAAM6I,QAAQggB,EAAUI,mBAC5CJ,EAAUI,kBACV,GAEEC,EAAiB,CACrBtqB,SAAS,EACT+D,MAAO,KACPgE,KAAMmiB,EAAmB5oB,IAAI0f,KAGzBuJ,EAAgB,CACpBvqB,SAAS,EACT+D,MAAO,KACPgE,KAAMqiB,EAAgB9oB,IAAIohB,KAG5B,IAAI8H,EAAY,KAChB,MAAMC,EAAUR,EAAUS,eACpBC,EAAaV,EAAUU,WACf,IAADC,EAATH,IACFD,EAAY,CACVxqB,SAAS,EACT+D,MAAO,KACPgE,KAAM,CACJiX,aAAcyL,EAAQI,gBACtB5L,cAAewL,EAAQK,eACvB5L,UAAWuL,EAAQM,cACnB5iB,OAAQsiB,EAAQ9J,QAChB3K,YAAayU,EAAQ9J,QACrBqK,eAAgBP,EAAQjV,iBACxByV,aAAoC,QAAxBL,EAAY,OAAVD,QAAU,IAAVA,OAAU,EAAVA,EAAYA,kBAAU,IAAAC,EAAAA,EAAI,QAK9C,MAAMM,EAAkBjB,EAAU9a,kBAC9B,CACEnP,SAAS,EACT+D,MAAO,KACPgE,KAAM+e,EAAiBmD,EAAU9a,kBAAmB,CAClD3L,MAAO,iCACPwV,aAAc,+CACdvN,UACE,oEAGN,CAAEzL,SAAS,EAAO+D,MAAO,KAAMgE,KAAM,MAEnCojB,EAAqBlB,EAAU7a,iBACjC,CACEpP,SAAS,EACT+D,MAAO,KACPgE,KAAM+e,EAAiBmD,EAAU7a,iBAAkB,CACjD5L,MAAO,gCACPwV,aAAc,8CACdvN,UACE,mEAGN,CAAEzL,SAAS,EAAO+D,MAAO,KAAMgE,KAAM,MAjSzBqjB,KASb,IARL/Y,UAAWiY,EACX3W,SAAU4W,EACVjH,KAAMkH,EACN5G,WAAYsH,EACZrH,gBAAiBwH,EACjBvH,cAAeqH,EACfpH,mBAAoBuH,EACpB5H,eAAgB6H,GACjBH,EACC,GAAIjG,EAAiBC,UAAYyB,EAC/B,OAEF,MAAM2E,EAAYnG,IAClBmG,EAAUnZ,UAA0B,OAAdiY,QAAc,IAAdA,EAAAA,EAAkBkB,EAAUnZ,UAC9CkY,IACFiB,EAAU7X,SAAW4W,GAEnBC,IACFgB,EAAUlI,KAAOkH,GAEfU,IACFM,EAAU5H,WAAasH,GAErBG,IACFG,EAAU3H,gBAAkBwH,GAE1BF,IACFK,EAAU1H,cAAgBqH,GAExBG,IACFE,EAAUzH,mBAAqBuH,GAE7BC,IACFC,EAAU9H,eAAiB6H,GAE7BxG,EAASyG,GACTvG,GAAgB,GAChBvG,QAAQ4H,IAAI,0CAqRVmF,CAAY,CACVpZ,UAAWiY,EACX3W,SAAU4W,EACVjH,KAAMkH,EACN5G,WAAYsH,EACZrH,gBA7B2BoG,EAAUyB,qBACnC,CACE1rB,SAAS,EACT+D,MAAO,KACPgE,KAAM+gB,EAAoBmB,EAAUyB,uBAEtC,CAAE1rB,SAAS,EAAO+D,MAAO,KAAMgE,KAAM,MAwBvC+b,cAAeqH,EACfpH,mBAvB8BkG,EAAU0B,oBACtC,CACE3rB,SAAS,EACT+D,MAAO,KACPgE,KAAM+gB,EAAoBmB,EAAU0B,sBAEtC,CAAE3rB,SAAS,EAAO+D,MAAO,KAAMgE,KAAM,MAkBvC2b,eAhB0BuG,EAAU2B,aAClC,CACE5rB,SAAS,EACT+D,MAAO,KACPgE,KAAMmhB,EAAwBe,EAAU2B,eAE1C,CAAE5rB,SAAS,EAAO+D,MAAO,KAAMgE,KAAM,SAe3C,GAAsB,qBAAX0W,OACT,IACE,MAAM9H,EAAM8H,OAAO7Q,eAAeC,QAAQkT,IAC1C,GAAIpK,EAAK,CAEPqT,EADe6B,KAAKvT,MAAM3B,GAE5B,CACF,CAAE,MAAOhP,GACP,CAKJ,IACE,MAAMsiB,QAAkB9L,GAAsB,CAC5ChW,UACAiW,OAAQ,GACRC,eAAgB,EAChBC,cAAe,IAIjB,GAAsB,qBAAXG,OACT,IACEA,OAAO7Q,eAAeke,QACpB/K,GACA8K,KAAKE,UAAU9B,GAEnB,CAAE,MAAOtiB,GACP,CAIJqiB,EAAuBC,EACzB,CAAE,MAAOlmB,GACP2a,QAAQ3a,MAAM,qCAAiCA,GAC/CkhB,GAAgB,GAChBF,EAAUwB,IAAI7jB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACT6jB,GAAI,IACPjD,MAAI5gB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACC6jB,EAAKjD,MAAI,IACZtjB,SAAS,EACT+D,OACO,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOiE,UACP,qDAGR,CACD,EAzJD,IA0JC,CAACqd,EAAgBzc,EAAUT,KAE9BM,EAAAA,UAAgB,KACd4d,KACO,KACLM,aAAazB,EAAgBE,SAC7BD,EAAiBC,SAAW,IAE7B,CAACiB,KAEJ,MAAM2F,GAAiBvjB,EAAAA,YACrB,CAACwjB,EAAM9hB,KACL,GAAK8hB,EAAL,CACA,GAAI9hB,EAAQ,CACV,MAAM+hB,EAAe,IAAI9hB,gBAAgBD,GACzC7B,EAAS,CAAE6jB,SAAUF,EAAMG,OAAO,IAADtuB,OAAMouB,EAAa1hB,aACtD,MACElC,EAAS2jB,GAEW,qBAAXxN,QACTA,OAAO4N,SAAS,CAAErc,IAAK,EAAGsc,SAAU,UARrB,GAWnB,CAAChkB,IAGGikB,GAAe9jB,EAAAA,QACnB,IAAM,CACJ,CACEnF,GAAI,WACJD,MAAO,oBACPb,MAAMjC,EAAAA,EAAAA,KAACisB,EAAAA,EAA2B,IAClCpqB,OAAQA,IAAM4pB,GAAe,WAE/B,CACE1oB,GAAI,QACJD,MAAO,iBACPb,MAAMjC,EAAAA,EAAAA,KAACksB,EAAAA,EAAqB,IAC5BrqB,OAAQA,IAAM4pB,GAAe,uBAE/B,CACE1oB,GAAI,KACJD,MAAO,eACPb,MAAMjC,EAAAA,EAAAA,KAACmsB,EAAAA,EAA+B,IACtCtqB,OAAQA,IAAM4pB,GAAe,kBAE/B,CACE1oB,GAAI,YACJD,MAAO,YACPb,MAAMjC,EAAAA,EAAAA,KAACosB,EAAAA,EAA+B,IACtCvqB,OAAQA,IAAM4pB,GAAe,kBAE/B,CACE1oB,GAAI,UACJD,MAAO,iBACPb,MAAMjC,EAAAA,EAAAA,KAACqsB,EAAAA,EAAsB,IAC7BxqB,OAAQA,IAAM4pB,GAAe,mBAE/B,CACE1oB,GAAI,SACJD,MAAO,oBACPb,MAAMjC,EAAAA,EAAAA,KAACssB,EAAAA,EAAqB,IAC5BzqB,OAAQA,IAAM4pB,GAAe,wBAE/B,CACE1oB,GAAI,WACJD,MAAO,eACPb,MAAMjC,EAAAA,EAAAA,KAACusB,EAAAA,EAA8B,IACrC1qB,OAAQA,IAAM4pB,GAAe,oBAGjC,CAACA,KAcGe,GAAsBA,CAACxrB,EAAGyrB,KACf,cAAXA,GACJzH,EAAY,OAOR0H,GAAWxkB,EAAAA,QAAc,KAAO,IAADykB,EAAAC,EAAAC,EAAAC,EACnC,MAAMtlB,EAAO+c,EAAMxB,KAAKvb,KAExB,MAAO,CACL,CACEzE,GAAI,eACJE,MAAO,6BACPrG,MAAyB,QAApB+vB,EAAM,OAAJnlB,QAAI,IAAJA,OAAI,EAAJA,EAAMiX,oBAAY,IAAAkO,EAAAA,EAAI,KAC7BzpB,UAAWvG,EAAAA,EACX2G,MAAO,IAET,CACEP,GAAI,gBACJE,MAAO,4BACPrG,MAA0B,QAArBgwB,EAAM,OAAJplB,QAAI,IAAJA,OAAI,EAAJA,EAAMkX,qBAAa,IAAAkO,EAAAA,EAAI,KAC9B1pB,UAAWvG,EAAAA,EACX2G,MAAO,IAET,CACEP,GAAI,YACJE,MAAO,2BACPrG,MAAsB,QAAjBiwB,EAAM,OAAJrlB,QAAI,IAAJA,OAAI,EAAJA,EAAMmX,iBAAS,IAAAkO,EAAAA,EAAI,KAC1B3pB,UAAWvG,EAAAA,EACX2G,MAAO,IAET,CACEP,GAAI,eACJE,MAAO,eACPrG,MAAyB,QAApBkwB,EAAM,OAAJtlB,QAAI,IAAJA,OAAI,EAAJA,EAAMkjB,oBAAY,IAAAoC,EAAAA,EAAI,KAC7B5pB,UAAWvG,EAAAA,EACX2G,MAAO,MAoCV,CAACihB,EAAMxB,KAAKvb,OAETulB,GAAsBxI,EAAMxB,KAAKtjB,UAAY8kB,EAAMxB,KAAKvb,KAExDwlB,GAAiB9kB,EAAAA,QACrB,MACE+kB,SAAU,CAAEzrB,GAAI,WAAYC,GAAI,UAChCgO,IAAK,CAAEhO,GAAIlD,EAAMoN,QAAQ,IACzBuhB,OAAQ3uB,EAAM2uB,OAAOC,OAAS,EAC9B3sB,QAAS,OACToB,eAAgB,WAElB,CAACrD,IAGH,OACE+B,EAAAA,EAAAA,MAACM,EAAAA,EAAG,CACFT,GAAI,CACFC,MAAO,OACPkC,SAAU,KACVjB,GAAI,OACJkB,GAAI,CAAEf,GAAI,EAAGuC,GAAI,EAAGtC,GAAI,EAAG2rB,GAAI,GAC/BzrB,GAAI,GACJtB,SAAA,EAEFC,EAAAA,EAAAA,MAAC+K,EAAAA,EAAK,CAACM,QAAS,EAAGxL,GAAI,CAAEC,MAAO,QAASC,SAAA,EACvCL,EAAAA,EAAAA,KAACqL,EAAAA,EAAK,CACJC,UAAW,CAAE9J,GAAI,SAAUC,GAAI,OAC/BkK,QAAS,EACT/J,eAAe,gBACfN,WAAY,CAAEE,GAAI,aAAcC,GAAI,UACpCtB,GAAI,CAAEC,MAAO,QAASC,UAEtBC,EAAAA,EAAAA,MAACM,EAAAA,EAAG,CAAAP,SAAA,EACFC,EAAAA,EAAAA,MAACuD,EAAAA,EAAU,CAAC3D,QAAQ,KAAK0C,WAAY,IAAIvC,SAAA,CAAC,SACjColB,OAETzlB,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC3D,QAAQ,QAAQC,GAAI,CAAE4B,MAAO/C,GAAmBqB,SAAC,6DAoCjEL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI6sB,GAAe3sB,UACtBL,EAAAA,EAAAA,KAACqtB,EAAY,CACX7tB,QAASwsB,GACTvsB,QAASstB,GACTrtB,SAnKiBmC,IAGjB,IAADyrB,EAFG,OAANzrB,QAAM,IAANA,GAAAA,EAAQA,OACVA,EAAOA,SAEPmjB,EAAY,CACVphB,SAAU,OACV6D,QAAQ,GAADlK,OAAkB,QAAlB+vB,EAAW,OAANzrB,QAAM,IAANA,OAAM,EAANA,EAAQiB,aAAK,IAAAwqB,EAAAA,EAAI,YAAQ,2BAiKrCttB,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CACHC,WAAS,EACT7hB,QAAS,EACT/J,eAAe,SACfzB,GAAI,CAAEmC,SAAU,CAAEd,GAAI,OAAQC,GAAI,MAAQJ,GAAI,QAAShB,SAEtDqsB,GAAS3rB,IAAK0sB,IACbztB,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAC9I,GAAI,GAAIuC,GAAI,GAAItC,GAAI,EAAEpB,UAC/BL,EAAAA,EAAAA,KAAC0tB,EAAO,CACNzqB,MAAOwqB,EAAKxqB,MACZrG,MAAO6wB,EAAK7wB,MACZsG,UAAWuqB,EAAKvqB,UAChBC,eAAgBsqB,EAAKtqB,eACrBC,eAAgBqqB,EAAKrqB,eACrBC,mBAAoBoqB,EAAKpqB,mBACzBC,MAAOmqB,EAAKnqB,MACZC,WAAYkqB,EAAKlqB,WACjB9D,QAAS8kB,EAAMxB,KAAKtjB,UAAY8kB,EAAMxB,KAAKvb,KAC3ChE,MAAO+gB,EAAMxB,KAAKvf,MAClBC,QAASqiB,MAZ0B2H,EAAK1qB,QAkBhDzC,EAAAA,EAAAA,MAACitB,EAAAA,EAAI,CACHC,WAAS,EACT7hB,QAAS,EACT/J,eAAe,SACfzB,GAAI,CAAEC,MAAO,OAAQkC,SAAU,KAAMjB,GAAI,QAAShB,SAAA,EAElDL,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAAjK,UACRL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI,CAAEC,MAAO,CAAEoB,GAAI,OAAQC,GAAI,MAAQpB,UAC1CL,EAAAA,EAAAA,KAAC2tB,GAAgB,CACfnmB,KACuB,QADnBoc,EACFW,EAAMlB,WAAW7b,YAAI,IAAAoc,EAAAA,EAAI,CACvB3gB,MAAO,iCACP6V,OAAQ,GACRa,QAAS,EACTxN,IAAK,CAAEvP,MAAO,EAAGkG,MAAO,MACxBmJ,IAAK,CAAErP,MAAO,EAAGkG,MAAO,OAG5BrD,QAAS8kB,EAAMlB,WAAW5jB,UAAY8kB,EAAMlB,WAAW7b,KACvDhE,MAAO+gB,EAAMlB,WAAW7f,MACxBoO,WAAYA,IAAM6Z,GAAe,2BAIvCzrB,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAAjK,UACRL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI,CAAEC,MAAO,CAAEoB,GAAI,OAAQC,GAAI,MAAQpB,UAC1CL,EAAAA,EAAAA,KAAC4tB,GAAqB,CACpBpmB,KAAgC,QAA5Bqc,EAAEU,EAAMjB,gBAAgB9b,YAAI,IAAAqc,EAAAA,EAAI,GACpCpkB,QACE8kB,EAAMjB,gBAAgB7jB,UAAY8kB,EAAMjB,gBAAgB9b,KAE1DhE,MAAO+gB,EAAMjB,gBAAgB9f,gBAMrClD,EAAAA,EAAAA,MAACitB,EAAAA,EAAI,CACHC,WAAS,EACT7hB,QAAS,EACT/J,eAAe,SACfzB,GAAI,CAAEC,MAAO,OAAQkC,SAAU,KAAMjB,GAAI,QAAShB,SAAA,EAElDL,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAAjK,UACRL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI,CAAEC,MAAO,CAAEoB,GAAI,OAAQC,GAAI,MAAQpB,UAC1CL,EAAAA,EAAAA,KAAC2tB,GAAgB,CACfnmB,KAC0B,QADtBsc,EACFS,EAAMhB,cAAc/b,YAAI,IAAAsc,EAAAA,EAAI,CAC1B7gB,MAAO,gCACP6V,OAAQ,GACRa,QAAS,EACTxN,IAAK,CAAEvP,MAAO,EAAGkG,MAAO,MACxBmJ,IAAK,CAAErP,MAAO,EAAGkG,MAAO,OAG5BrD,QACE8kB,EAAMhB,cAAc9jB,UAAY8kB,EAAMhB,cAAc/b,KAEtDhE,MAAO+gB,EAAMhB,cAAc/f,MAC3BiV,aAAa,qDAInBzY,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAAjK,UACRL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI,CAAEC,MAAO,CAAEoB,GAAI,OAAQC,GAAI,MAAQpB,UAC1CL,EAAAA,EAAAA,KAAC4tB,GAAqB,CACpBpmB,KAAmC,QAA/Buc,EAAEQ,EAAMf,mBAAmBhc,YAAI,IAAAuc,EAAAA,EAAI,GACvCtkB,QACE8kB,EAAMf,mBAAmB/jB,UACxB8kB,EAAMf,mBAAmBhc,KAE5BhE,MAAO+gB,EAAMf,mBAAmBhgB,MAChCiV,aAAa,gDACbxV,MAAM,yBACN0Y,SAAS,4CAMjBrb,EAAAA,EAAAA,MAACitB,EAAAA,EAAI,CACHC,WAAS,EACT7hB,QAAS,EACT/J,eAAe,SACfzB,GAAI,CAAEuD,GAAI,EAAGtD,MAAO,OAAQkC,SAAU,KAAMjB,GAAI,QAAShB,SAAA,EAEzDL,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAC9I,GAAI,GAAIC,GAAI,EAAEpB,UACvBL,EAAAA,EAAAA,KAAC6tB,EAAY,CACXlmB,UAAWsd,GACXrd,OAAQA,GACRJ,KAAM+c,EAAM7e,OAAO8B,KACnB/H,QAAS8kB,EAAM7e,OAAOjG,UAAY8kB,EAAM7e,OAAO8B,KAC/ChE,MAAO+gB,EAAM7e,OAAOlC,MACpBC,QAASqiB,QAGb9lB,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAC9I,GAAI,GAAIC,GAAI,EAAEpB,UAEvBL,EAAAA,EAAAA,KAAC6M,GAAkB,OAErB7M,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAC9I,GAAI,GAAIC,GAAI,EAAGtB,GAAI,CAAEK,QAAS,CAAEgB,GAAI,OAAQC,GAAI,UAAYpB,UACrEL,EAAAA,EAAAA,KAAC8tB,GAAoB,CACnBtmB,KAAM+c,EAAMpB,eAAe3b,KAC3B/H,QACE8kB,EAAMpB,eAAe1jB,UAAY8kB,EAAMpB,eAAe3b,KAExDhE,MAAO+gB,EAAMpB,eAAe3f,MAC5BC,QAASqiB,GACTlU,WAAamc,GACXtC,GACE,gBACAsC,EAAU,CAAEC,OAAQD,QAAY/wB,WAQ1CsD,EAAAA,EAAAA,MAACitB,EAAAA,EAAI,CACHC,WAAS,EACT7hB,QAAS,EACT/J,eAAe,SACfzB,GAAI,CACFuD,GAAI,EACJtD,MAAO,OACPkC,SAAU,KACVjB,GAAI,OACJb,QAAS,CAAEgB,GAAI,OAAQC,GAAI,SAC3BpB,SAAA,EAEFL,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAC9I,GAAI,GAAIC,GAAI,EAAEpB,UACvBL,EAAAA,EAAAA,KAACiuB,GAAqB,CACpBzmB,KAAM+c,EAAMzS,UAAUtK,KACtB/H,QAAS8kB,EAAMzS,UAAUrS,UAAY8kB,EAAMzS,UAAUtK,KACrDhE,MAAO+gB,EAAMzS,UAAUtO,MACvBC,QAASqiB,GACTlU,WAAYA,IAAM6Z,GAAe,yBAGrCzrB,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAC9I,GAAI,GAAIC,GAAI,EAAEpB,UACvBL,EAAAA,EAAAA,KAACkuB,GAAoB,CACnB1mB,KAA0B,QAAtBwc,EAAgB,QAAhBC,EAAEM,EAAMnR,gBAAQ,IAAA6Q,OAAA,EAAdA,EAAgBzc,YAAI,IAAAwc,EAAAA,EAAI,KAC9BvkB,SAAuB,QAAdykB,EAAAK,EAAMnR,gBAAQ,IAAA8Q,OAAA,EAAdA,EAAgBzkB,YAA0B,QAAf0kB,EAACI,EAAMnR,gBAAQ,IAAA+Q,GAAdA,EAAgB3c,MACrDhE,MAA4B,QAAvB4gB,EAAgB,QAAhBC,EAAEE,EAAMnR,gBAAQ,IAAAiR,OAAA,EAAdA,EAAgB7gB,aAAK,IAAA4gB,EAAAA,EAAI,KAChC3gB,QAASqiB,GACTlU,WAAYA,IAAM6Z,GAAe,yBAKvCzrB,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CACHC,WAAS,EACT7hB,QAAS,EACT/J,eAAe,SACfzB,GAAI,CAAEuD,GAAI,EAAGtD,MAAO,OAAQkC,SAAU,KAAMjB,GAAI,QAAShB,UAEzDL,EAAAA,EAAAA,KAACutB,EAAAA,EAAI,CAACjjB,MAAI,EAAC9I,GAAI,GAAIC,GAAI,GAAGpB,UACxBL,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI,CAAEC,MAAO,OAAQiB,GAAI,QAAShB,UACrCL,EAAAA,EAAAA,KAACsc,GAAc,WAKrBtc,EAAAA,EAAAA,KAACY,EAAAA,EAAG,CAACT,GAAI,CAAEK,QAAS,OAAQoB,eAAgB,YAAavB,UACvDL,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACL5B,QAAQ,OACRmM,KAAK,QACLnK,QAAS4jB,GACTnZ,SAAU8X,EAAapkB,SAEtBokB,EAAe,gBAAkB,sCAKxCzkB,EAAAA,EAAAA,KAACmuB,EAAAA,EAAQ,CACPC,KAAM3iB,QAAQsZ,GACdsJ,iBAAkB,IAClBC,QAAS9B,GACT+B,aAAc,CACZC,SAAU7uB,EAAW,MAAQ,SAC7B8uB,WAAY,UACZpuB,SAED0kB,GACC/kB,EAAAA,EAAAA,KAAC2D,EAAAA,EAAK,CACJ2qB,QAAS9B,GACT5oB,SAA2B,QAAnB0gB,EAAES,EAASnhB,gBAAQ,IAAA0gB,EAAAA,EAAI,OAC/BpkB,QAAQ,SACRC,GAAI,CAAEC,MAAO,QAASC,SAErB0kB,EAAStd,UAEV,W,mFC9xCZ,MAAMsC,EAAO2kB,EAAAA,EAAMC,SACbC,EAAsBC,EAAAA,EAAWnmB,WACjComB,EAAoB,CACxBC,WAAYzmB,sBACZ0mB,SAAU1mB,8BAGZ,IAAI2mB,EAAiB,KACjBC,GAAkB,EAEtB,MAAMC,EAAuB/Q,GAC3B3S,QACE2S,GACEwQ,GACApqB,OAAO4Z,GAAKgR,WAAW5qB,OAAOoqB,KAG9BS,EAAkB3c,IACtB,IACE,OAAOrF,eAAeC,QAAQoF,EAChC,CAAE,MAAOtL,GAEP,OADA+W,QAAQmR,KAAK,kCAAmCloB,GACzC,IACT,GAGImoB,EAAiBA,CAAC7c,EAAK9V,KAC3B,SACgBI,IAAVJ,GAAiC,OAAVA,GACzByQ,eAAeke,QAAQ7Y,EAAK9V,EAEhC,CAAE,MAAOwK,GACP+W,QAAQmR,KAAK,yCAA0CloB,EACzD,GAGIooB,EAA0BA,KAC9B,IAAIN,EAAJ,CAGAA,GAAkB,EAClB,IACE7hB,eAAeoiB,OACjB,CAAE,MAAAC,GACU,CAEM,OAAdC,EAAAA,QAAc,IAAdA,EAAAA,GAAAA,EAAAA,EAAgBC,eAClBD,EAAAA,EAAeC,gBAEK,qBAAX1R,SACTA,OAAO2R,SAASC,KAAO,YAXzB,GA+BIC,EAAgBA,KACpB,MAAMC,EAAoBX,EAAe,gBACnCY,EAlBiBC,MACvB,MAAMC,EAAWd,EAAe,UAAYA,EAAe,YAC3D,IACGc,IACArB,EAAkBC,aAClBD,EAAkBE,SAEnB,OAAO,KAET,MAAMoB,EAAO,IAAIC,EAAAA,GAAgBvB,GACjC,OAAO,IAAIwB,EAAAA,GAAY,CACrBC,SAAUJ,EACVK,KAAMJ,KAMYF,GACpB,IAAKF,IAAsBC,EACzB,OAAOniB,QAAQC,OAAO,IAAI2P,MAAM,4CAElC,MAAM+S,EAAe,IAAIC,EAAAA,GAAoB,CAC3CC,aAAcX,IAEhB,OAAO,IAAIliB,QAAQ,CAAC8iB,EAAS7iB,KAC3BkiB,EAAYY,eAAeJ,EAAc,CAACrpB,EAAK0pB,KAC7C,GAAI1pB,EAEF,YADA2G,EAAO3G,GAGT,MAAM2pB,EAAkBD,EAAQE,iBAAiBC,cAC3CC,EAAcJ,EAAQK,aAAaF,cACnCG,EAAmBN,EAAQO,kBAAkBC,WACnD/B,EAAe,cAAewB,GAC9BxB,EAAe,UAAW2B,GACtBE,GACF7B,EAAe,eAAgB6B,GAEjCR,EAAQG,QAoBdhnB,EAAKwnB,aAAaC,QAAQC,IAAKC,IAC7B,MAAMC,EAActkB,eAAeC,QAAQ,eAC3C,GAAI6hB,EAAoBuC,EAAOtT,KAAM,CAAC,IAADwT,EACnCF,EAAOvkB,QAAwB,QAAjBykB,EAAGF,EAAOvkB,eAAO,IAAAykB,EAAAA,EAAI,CAAC,EAChCD,IACFD,EAAOvkB,QAAQ0kB,cAAa,UAAAt0B,OAAao0B,IAE3C,MAAM3T,EAAa3Q,eAAeC,QAAQ,OACtC0Q,IACF0T,EAAOvkB,QAAQ,iBAAmB6Q,EAEtC,CACA,OAAO0T,IAGT3nB,EAAKwnB,aAAahqB,SAASkqB,IACxBlqB,GAAaA,EACdwB,UACE,MAAM,OAAE2oB,EAAM,SAAEnqB,GAAa/D,EAC7B,IACGkuB,IACAnqB,GACmB,MAApBA,EAASqE,SACRujB,EAAoBuC,EAAOtT,KAE5B,OAAOtQ,QAAQC,OAAOvK,GAGxB,GAAIkuB,EAAOI,iBAET,OADAtC,IACO1hB,QAAQC,OAAOvK,GAGxB,IAAK,IAADuuB,EACF,MAAMC,QAhDL/C,IACHA,EAAiBc,IACdriB,KAAMH,IACL0hB,EAAiB,KACV1hB,IAER6B,MAAO5L,IAEN,MADAyrB,EAAiB,KACXzrB,KAGLyrB,GAsCH,IAAK+C,EACH,MAAM,IAAItU,MAAM,mCAKlB,OAHAgU,EAAOI,kBAAmB,EAC1BJ,EAAOvkB,QAAwB,QAAjB4kB,EAAGL,EAAOvkB,eAAO,IAAA4kB,EAAAA,EAAI,CAAC,EACpCL,EAAOvkB,QAAQ0kB,cAAa,UAAAt0B,OAAay0B,GAClCjoB,EAAK2nB,EACd,CAAE,MAAOO,GAEP,OADAzC,IACO1hB,QAAQC,OAAOkkB,EACxB,IAIJ,S","sources":["utils/formatters.js","dashboard/useResolvedColorTokens.js","dashboard/components/QuickActions.js","dashboard/components/KpiCard.js","dashboard/components/BudgetWidget.js","dashboard/components/LiquidityGapWidget.js","dashboard/components/RecentMovementsWidget.js","dashboard/components/RecentInvoicesWidget.js","dashboard/components/ReconciliationWidget.js","dashboard/components/SalesTrendWidget.js","dashboard/components/SalesByCategoryWidget.js","dashboard/components/InsightsWidget.js","dashboard/services/dashboardSummaryService.js","dashboard/Dashboard.js","api/http.js"],"sourcesContent":["const currencyFormatterAR = new Intl.NumberFormat('es-AR', {\r\n  style: 'currency',\r\n  currency: 'ARS',\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 2,\r\n});\r\n\r\n/**\r\n * Devuelve una cadena formateada en pesos argentinos.\r\n * Se asegura de manejar valores nulos, indefinidos o no numricos.\r\n */\r\nexport const formatCurrencyAR = (value, { fallback = '$0' } = {}) => {\r\n  if (value === null || value === undefined) {\r\n    return fallback;\r\n  }\r\n\r\n  const numericValue = Number(value);\r\n  if (Number.isNaN(numericValue)) {\r\n    return fallback;\r\n  }\r\n\r\n  return currencyFormatterAR.format(numericValue);\r\n};\r\n\r\nexport const formatPercentage = (value, { fractionDigits = 0, fallback = '0%' } = {}) => {\r\n  if (value === null || value === undefined) {\r\n    return fallback;\r\n  }\r\n\r\n  const numericValue = Number(value);\r\n  if (Number.isNaN(numericValue)) {\r\n    return fallback;\r\n  }\r\n\r\n  return `${numericValue.toFixed(fractionDigits)}%`;\r\n};\r\n","import { useTheme, useColorScheme } from \"@mui/material/styles\";\r\n\r\n/**\r\n * Resolves the actual color mode (light/dark/system) and exposes handy text colors.\r\n */\r\nexport default function useResolvedColorTokens() {\r\n  const theme = useTheme();\r\n  const { mode, systemMode } = useColorScheme();\r\n  const resolvedMode =\r\n    (mode === \"system\" ? systemMode : mode) || theme.palette.mode || \"light\";\r\n  const paletteVars = theme.vars?.palette ?? theme.palette ?? {};\r\n\r\n  const primaryTextColor =\r\n    resolvedMode === \"dark\"\r\n      ? paletteVars.common?.white ??\r\n        paletteVars.text?.primary ??\r\n        \"rgba(255, 255, 255, 0.9)\"\r\n      : paletteVars.common?.black ??\r\n        paletteVars.text?.primary ??\r\n        \"rgba(0, 0, 0, 0.88)\";\r\n\r\n  const secondaryTextColor =\r\n    paletteVars.text?.secondary ??\r\n    (resolvedMode === \"dark\"\r\n      ? \"rgba(255, 255, 255, 0.7)\"\r\n      : \"rgba(0, 0, 0, 0.6)\");\r\n\r\n  return { resolvedMode, paletteVars, primaryTextColor, secondaryTextColor };\r\n}\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst QuickActions = ({ actions = [], loading = false, onAction }) => {\r\n  const { resolvedMode, primaryTextColor } = useResolvedColorTokens();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ width: \"100%\" }}>\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}>\r\n          <Skeleton variant=\"text\" width={160} />\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            {Array.from({ length: 4 }).map((_, index) => (\r\n              <Skeleton\r\n                // eslint-disable-next-line react/no-array-index-key\r\n                key={index}\r\n                variant=\"rounded\"\r\n                width={120}\r\n                height={40}\r\n              />\r\n            ))}\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        width: \"100%\",\r\n        backdropFilter: \"blur(6px)\",\r\n        borderRadius: 2,\r\n        mx: \"auto\",\r\n      }}\r\n    >\r\n      <CardContent\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: 1,\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            display: \"flex\",\r\n            flexWrap: { xs: \"wrap\", md: \"wrap\" },\r\n            overflowX: \"visible\",\r\n            gap: 1,\r\n            pb: { xs: 0.5, md: 0 },\r\n            justifyContent: { xs: \"center\", md: \"center\" },\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n          }}\r\n        >\r\n          {actions.map((action) => (\r\n            <Button\r\n              key={action.id}\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              startIcon={!isMobile ? action.icon : undefined}\r\n              onClick={() => onAction?.(action)}\r\n              sx={{\r\n                flexShrink: 0,\r\n                flex: isMobile ? \"1 0 calc(25% - 12px)\" : \"0 0 auto\",\r\n                maxWidth: isMobile ? \"25%\" : \"none\",\r\n                borderRadius: 2,\r\n                px: isMobile ? 1 : 2,\r\n                py: isMobile ? 0.75 : 1,\r\n                textTransform: \"none\",\r\n                minWidth: { xs: 80, md: 150 },\r\n                minHeight: { xs: 56, md: 40 },\r\n                width: isMobile ? \"100%\" : \"auto\",\r\n                fontWeight: 600,\r\n                justifyContent: \"center\",\r\n                \"& .MuiButton-startIcon\": { margin: isMobile ? 0 : undefined },\r\n                ...(isDarkMode && { color: \"#42897f\" }),\r\n              }}\r\n              aria-label={action.label}\r\n            >\r\n              {isMobile ? action.icon : action.label}\r\n            </Button>\r\n          ))}\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default QuickActions;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Box from \"@mui/material/Box\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst defaultFormatter = (value) => value;\r\n\r\nconst KpiCard = ({\r\n  title,\r\n  value,\r\n  formatter = defaultFormatter,\r\n  secondaryLabel,\r\n  secondaryValue,\r\n  secondaryFormatter = defaultFormatter,\r\n  trend = [],\r\n  trendColor = \"primary.main\",\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n}) => {\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardContent>\r\n          <Skeleton variant=\"text\" width=\"60%\" height={24} />\r\n          <Skeleton variant=\"text\" width=\"70%\" height={36} />\r\n          <Skeleton variant=\"rectangular\" width=\"100%\" height={40} sx={{ mt: 2 }} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (value === null || typeof value === \"undefined\") {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n            Sin datos disponibles para este indicador.\r\n          </Typography>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Actualizar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n      <CardContent\r\n        sx={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"stretch\",\r\n          justifyContent: \"space-between\",\r\n          gap: 1,\r\n          px: 2.0,\r\n          py: 1.5,\r\n        }}\r\n      >\r\n        <Typography\r\n          variant=\"subtitle2\"\r\n          sx={{\r\n            color: primaryTextColor,\r\n            fontSize: { xs: \"0.8rem\", sm: \"0.85rem\", md: \"0.9rem\" },\r\n          }}\r\n        >\r\n          {title}\r\n        </Typography>\r\n        <Box\r\n          sx={{\r\n            textAlign: \"right\",\r\n            flexGrow: 1,\r\n            minWidth: 0,\r\n          }}\r\n        >\r\n          <Typography\r\n            variant=\"h5\"\r\n            fontWeight={600}\r\n            sx={{\r\n              color: primaryTextColor,\r\n              fontSize: { xs: \"1.3rem\", sm: \"1.6rem\", md: \"1.9rem\" },\r\n              lineHeight: 1.1,\r\n              wordBreak: \"break-word\",\r\n            }}\r\n          >\r\n            {formatter(value)}\r\n          </Typography>\r\n          {secondaryLabel ? (\r\n            <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n              {secondaryLabel}:{\" \"}\r\n              <Box component=\"span\" fontWeight={500}>\r\n                {secondaryFormatter(secondaryValue)}\r\n              </Box>\r\n            </Typography>\r\n          ) : null}\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default KpiCard;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport LinearProgress from \"@mui/material/LinearProgress\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Divider from \"@mui/material/Divider\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport http from \"../../api/http\";\r\nimport { formatCurrencyAR, formatPercentage } from \"../../utils/formatters\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\nimport API_CONFIG from \"../../config/api-config\";\r\n\r\nconst getStatusColor = (ratio) => {\r\n  if (ratio <= 0.9) {\r\n    return { color: \"primary\", label: \"En verde\" };\r\n  }\r\n  if (ratio <= 1.1) {\r\n    return { color: \"primary\", label: \"Cerca del objetivo\" };\r\n  }\r\n  return { color: \"primary\", label: \"Sobre el plan\" };\r\n};\r\n\r\nconst monthLabels = [\r\n  \"enero\",\r\n  \"febrero\",\r\n  \"marzo\",\r\n  \"abril\",\r\n  \"mayo\",\r\n  \"junio\",\r\n  \"julio\",\r\n  \"agosto\",\r\n  \"septiembre\",\r\n  \"octubre\",\r\n  \"noviembre\",\r\n  \"diciembre\",\r\n];\r\n\r\nconst formatMonthLabel = (value) => {\r\n  if (!value) return \"\";\r\n  const parts = String(value).split(\"-\");\r\n  if (parts.length < 2) {\r\n    return value;\r\n  }\r\n  const year = Number(parts[0]);\r\n  const monthIndex = Number(parts[1]) - 1;\r\n  if (\r\n    !Number.isFinite(year) ||\r\n    !Number.isFinite(monthIndex) ||\r\n    monthIndex < 0 ||\r\n    monthIndex >= monthLabels.length\r\n  ) {\r\n    return value;\r\n  }\r\n  return `${monthLabels[monthIndex]} ${year}`;\r\n};\r\n\r\nconst formatDateRange = (from, to) => {\r\n  const startLabel = formatMonthLabel(from);\r\n  const endLabel = formatMonthLabel(to);\r\n  if (startLabel && endLabel) {\r\n    return startLabel === endLabel ? startLabel : `${startLabel} - ${endLabel}`;\r\n  }\r\n  return startLabel || endLabel || \"\";\r\n};\r\n\r\nconst toSlug = (name) =>\r\n  encodeURIComponent(\r\n    String(name ?? \"\")\r\n      .trim()\r\n      .toLowerCase()\r\n      .replace(/\\s+/g, \"-\"),\r\n  );\r\n\r\nconst parseYearMonthStart = (value) => {\r\n  if (!value) return null;\r\n  const parts = String(value).split(\"-\");\r\n  if (parts.length < 2) {\r\n    return null;\r\n  }\r\n  const year = Number(parts[0]);\r\n  const monthIndex = Number(parts[1]) - 1;\r\n  if (!Number.isFinite(year) || !Number.isFinite(monthIndex)) {\r\n    return null;\r\n  }\r\n  return new Date(year, monthIndex, 1);\r\n};\r\n\r\nconst parseYearMonthEnd = (value) => {\r\n  const start = parseYearMonthStart(value);\r\n  if (!start) return null;\r\n  return new Date(start.getFullYear(), start.getMonth() + 1, 0, 23, 59, 59, 999);\r\n};\r\n\r\nconst isBudgetActiveOnDate = (budget, reference) => {\r\n  if (!budget) return false;\r\n  const from = parseYearMonthStart(budget.desde);\r\n  const to = parseYearMonthEnd(budget.hasta);\r\n  if (!from || !to) {\r\n    return false;\r\n  }\r\n  return from <= reference && reference <= to;\r\n};\r\n\r\nconst valueToNumber = (value) => {\r\n  if (value === null || value === undefined) {\r\n    return 0;\r\n  }\r\n  if (typeof value === \"number\") {\r\n    return value;\r\n  }\r\n  if (typeof value === \"string\") {\r\n    const parsed = Number(value);\r\n    return Number.isNaN(parsed) ? 0 : parsed;\r\n  }\r\n  if (typeof value === \"object\" && value !== null && \"value\" in value) {\r\n    const nested = Number(value.value);\r\n    return Number.isNaN(nested) ? 0 : nested;\r\n  }\r\n  return 0;\r\n};\r\n\r\nconst aggregateTotals = (items) =>\r\n  items.reduce(\r\n    (acc, item) => ({\r\n      ingresoEstimado: acc.ingresoEstimado + valueToNumber(item.ingresoEstimado),\r\n      ingresoReal: acc.ingresoReal + valueToNumber(item.ingresoReal),\r\n      egresoEstimado: acc.egresoEstimado + valueToNumber(item.egresoEstimado),\r\n      egresoReal: acc.egresoReal + valueToNumber(item.egresoReal),\r\n      saldoEstimado: acc.saldoEstimado + valueToNumber(item.saldoEstimado),\r\n      saldoReal: acc.saldoReal + valueToNumber(item.saldoReal),\r\n    }),\r\n    {\r\n      ingresoEstimado: 0,\r\n      ingresoReal: 0,\r\n      egresoEstimado: 0,\r\n      egresoReal: 0,\r\n      saldoEstimado: 0,\r\n      saldoReal: 0,\r\n    },\r\n  );\r\n\r\nconst buildCategories = (totals) => {\r\n  if (!totals) {\r\n    return [];\r\n  }\r\n  const categories = [\r\n    {\r\n      name: \"Ingresos\",\r\n      planned: totals.ingresoEstimado,\r\n      actual: totals.ingresoReal,\r\n    },\r\n    {\r\n      name: \"Egresos\",\r\n      planned: totals.egresoEstimado,\r\n      actual: totals.egresoReal,\r\n    },\r\n  ];\r\n  if (\r\n    Math.abs(totals.saldoEstimado) > 0 ||\r\n    Math.abs(totals.saldoReal) > 0\r\n  ) {\r\n    categories.push({\r\n      name: \"Resultado\",\r\n      planned: totals.saldoEstimado,\r\n      actual: totals.saldoReal,\r\n    });\r\n  }\r\n  return categories;\r\n};\r\n\r\nconst extractBudgetList = (payload) => {\r\n  if (Array.isArray(payload)) {\r\n    return payload;\r\n  }\r\n  if (payload && Array.isArray(payload.content)) {\r\n    return payload.content;\r\n  }\r\n  return [];\r\n};\r\n\r\nconst normalizeError = (err) => {\r\n  if (!err) return null;\r\n  if (typeof err === \"string\") {\r\n    return err;\r\n  }\r\n  if (err?.response?.data?.error) {\r\n    return String(err.response.data.error);\r\n  }\r\n  if (err?.message) {\r\n    return err.message;\r\n  }\r\n  return \"No pudimos cargar el presupuesto actual.\";\r\n};\r\n\r\nconst transformMockBudget = (mock) => {\r\n  if (!mock) {\r\n    return null;\r\n  }\r\n  const slug = mock.slug\r\n    ? encodeURIComponent(String(mock.slug))\r\n    : toSlug(mock.name || mock.nombre || \"\");\r\n  return {\r\n    id: mock.id ?? null,\r\n    nombre: mock.name || mock.nombre || \"Presupuesto\",\r\n    slug,\r\n    desde: mock.desde ?? null,\r\n    hasta: mock.hasta ?? null,\r\n    rangeLabel:\r\n      mock.period?.label ||\r\n      formatDateRange(mock.desde ?? null, mock.hasta ?? null),\r\n    categories: Array.isArray(mock.categories) ? mock.categories : [],\r\n    totals: null,\r\n  };\r\n};\r\n\r\nconst periodToDate = (value) => {\r\n  if (!value) return null;\r\n  const parts = String(value).split(\"-\");\r\n  if (parts.length < 2) {\r\n    return null;\r\n  }\r\n  const year = Number(parts[0]);\r\n  const monthIndex = Number(parts[1]) - 1;\r\n  if (!Number.isFinite(year) || !Number.isFinite(monthIndex)) {\r\n    return null;\r\n  }\r\n  return new Date(year, monthIndex, 15);\r\n};\r\n\r\nconst BudgetWidget = ({\r\n  companyId,\r\n  period,\r\n  data,\r\n  loading: externalLoading = false,\r\n  error: externalError = null,\r\n  onRetry,\r\n}) => {\r\n  const navigate = useNavigate();\r\n  const { resolvedMode, primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n  const [budget, setBudget] = React.useState(null);\r\n  const useMocks = process.env.REACT_APP_USE_MOCKS === \"true\";\r\n  const baseURL = API_CONFIG.PRONOSTICO;\r\n  const referenceDate = React.useMemo(\r\n    () => periodToDate(period) ?? new Date(),\r\n    [period],\r\n  );\r\n\r\n  const loadBudgetData = React.useCallback(async () => {\r\n    if (useMocks) {\r\n      if (externalLoading && !data) {\r\n        setLoading(true);\r\n        setError(null);\r\n        setBudget(null);\r\n        return;\r\n      }\r\n      setBudget(transformMockBudget(data));\r\n      setError(externalError ? normalizeError(externalError) : null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const params = new URLSearchParams();\r\n      params.set(\"status\", \"active\");\r\n      params.set(\"page\", \"0\");\r\n      params.set(\"size\", \"100\");\r\n      params.set(\"sort\", \"createdAt,desc\");\r\n      const response = await http.get(\r\n        `${baseURL}/api/presupuestos?${params.toString()}`,\r\n      );\r\n      const list = extractBudgetList(response?.data);\r\n      const vigente = list.find((item) =>\r\n        isBudgetActiveOnDate(item, referenceDate),\r\n      );\r\n      if (!vigente) {\r\n        setBudget(null);\r\n        return;\r\n      }\r\n      const totalsResponse = await http.get(\r\n        `${baseURL}/api/presupuestos/${vigente.id}/totales`,\r\n      );\r\n      const totales = Array.isArray(totalsResponse?.data)\r\n        ? totalsResponse.data\r\n        : [];\r\n      const aggregated = aggregateTotals(totales);\r\n      setBudget({\r\n        id: vigente.id,\r\n        nombre: vigente.nombre,\r\n        slug: toSlug(vigente.nombre),\r\n        desde: vigente.desde,\r\n        hasta: vigente.hasta,\r\n        rangeLabel: formatDateRange(vigente.desde, vigente.hasta),\r\n        categories: buildCategories(aggregated),\r\n        totals: aggregated,\r\n      });\r\n    } catch (err) {\r\n      setError(normalizeError(err));\r\n      setBudget(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [\r\n    useMocks,\r\n    externalLoading,\r\n    data,\r\n    externalError,\r\n    baseURL,\r\n    referenceDate,\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    loadBudgetData();\r\n  }, [loadBudgetData]);\r\n\r\n  const handleRetry = React.useCallback(() => {\r\n    if (useMocks && typeof onRetry === \"function\") {\r\n      onRetry();\r\n      return;\r\n    }\r\n    loadBudgetData();\r\n  }, [useMocks, onRetry, loadBudgetData]);\r\n\r\n  const goToList = React.useCallback(() => {\r\n    navigate(\"/presupuestos\");\r\n  }, [navigate]);\r\n\r\n  const goToNew = React.useCallback(() => {\r\n    navigate(\"/presupuestos/nuevo\");\r\n  }, [navigate]);\r\n\r\n  const goToDetail = React.useCallback(() => {\r\n    if (!budget?.slug) {\r\n      return;\r\n    }\r\n    navigate(`/presupuestos/${budget.slug}`);\r\n  }, [navigate, budget]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Presupuesto actual\"\r\n          subheader=\"Cargando datos...\"\r\n          titleTypographyProps={{\r\n            variant: \"h6\",\r\n            sx: { color: primaryTextColor },\r\n          }}\r\n          subheaderTypographyProps={{\r\n            variant: \"body2\",\r\n            sx: { color: secondaryTextColor },\r\n          }}\r\n        />\r\n        <CardContent>\r\n          {Array.from({ length: 4 }).map((_, index) => (\r\n            <Stack\r\n              key={index}\r\n              direction=\"row\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"space-between\"\r\n              sx={{ mb: 1.5 }}\r\n            >\r\n              <Skeleton variant=\"text\" width=\"40%\" />\r\n              <Skeleton variant=\"text\" width=\"20%\" />\r\n            </Stack>\r\n          ))}\r\n          <Skeleton variant=\"rectangular\" height={8} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Presupuesto actual\"\r\n          titleTypographyProps={{ variant: \"h6\", sx: { color: primaryTextColor } }}\r\n        />\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {handleRetry ? (\r\n            <Button variant=\"outlined\" onClick={handleRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const categories = budget?.categories ?? [];\r\n  const subheader = budget\r\n    ? [budget.nombre, budget.rangeLabel].filter(Boolean).join(\" - \")\r\n    : undefined;\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}\r\n    >\r\n      <CardHeader\r\n        title=\"Presupuesto actual\"\r\n        subheader={subheader}\r\n        titleTypographyProps={{ variant: \"h6\", sx: { color: primaryTextColor } }}\r\n        subheaderTypographyProps={{ variant: \"body2\", sx: { color: primaryTextColor } }}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {budget ? (\r\n          <Stack spacing={2}>\r\n            {budget.totals ? (\r\n              <Stack direction=\"row\" justifyContent=\"space-between\">\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Saldo estimado:{\" \"}\r\n                  {formatCurrencyAR(budget.totals.saldoEstimado)}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"body2\"\r\n                  color=\"text.secondary\"\r\n                  fontWeight={600}\r\n                >\r\n                  Saldo real: {formatCurrencyAR(budget.totals.saldoReal)}\r\n                </Typography>\r\n              </Stack>\r\n            ) : null}\r\n            {categories.length > 0 ? (\r\n              categories.map((item) => {\r\n                const planned = Number(item.planned) || 0;\r\n                const actual = Number(item.actual) || 0;\r\n                const ratio = planned === 0 ? 0 : actual / planned;\r\n                const status = getStatusColor(ratio);\r\n                const rawPercentage =\r\n                  planned === 0 ? 0 : (actual / planned) * 100;\r\n                const limitedProgress = Math.min(rawPercentage, 150);\r\n                const progress =\r\n                  limitedProgress > 100\r\n                    ? 100\r\n                    : Math.max(0, limitedProgress);\r\n\r\n                return (\r\n                  <Box\r\n                    key={item.name}\r\n                    sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}\r\n                  >\r\n                    <Stack\r\n                      direction=\"row\"\r\n                      justifyContent=\"space-between\"\r\n                      alignItems=\"center\"\r\n                    >\r\n                      <Typography variant=\"subtitle2\">\r\n                        {item.name}\r\n                      </Typography>\r\n                      <Chip\r\n                        color={status.color}\r\n                        label={`${formatPercentage(rawPercentage, {\r\n                          fractionDigits: 0,\r\n                        })} - ${status.label}`}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                      />\r\n                    </Stack>\r\n                    <LinearProgress\r\n                      variant=\"determinate\"\r\n                      value={progress}\r\n                      color={status.color}\r\n                      sx={{\r\n                        height: 8,\r\n                        borderRadius: 999,\r\n                        backgroundColor: \"action.hover\",\r\n                        [`& .MuiLinearProgress-bar`]: {\r\n                          borderRadius: 999,\r\n                        },\r\n                      }}\r\n                    />\r\n                    <Stack direction=\"row\" justifyContent=\"space-between\">\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        Planificado: {formatCurrencyAR(planned)}\r\n                      </Typography>\r\n                      <Typography\r\n                        variant=\"body2\"\r\n                        color=\"text.secondary\"\r\n                        fontWeight={600}\r\n                      >\r\n                        Ejecutado: {formatCurrencyAR(actual)}\r\n                      </Typography>\r\n                    </Stack>\r\n                    <Divider sx={{ my: 0.5 }} />\r\n                  </Box>\r\n                );\r\n              })\r\n            ) : (\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                No hay datos cargados para este presupuesto.\r\n              </Typography>\r\n            )}\r\n          </Stack>\r\n        ) : (\r\n          <Stack spacing={2}>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              No hay presupuesto actual.\r\n            </Typography>\r\n            <Stack direction=\"row\" spacing={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={goToNew}\r\n                sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n              >\r\n                Nuevo presupuesto\r\n              </Button>\r\n              <Button variant=\"text\" onClick={goToList}>\r\n                Ver presupuestos\r\n              </Button>\r\n            </Stack>\r\n          </Stack>\r\n        )}\r\n      </CardContent>\r\n      {budget ? (\r\n        <CardActions sx={{ justifyContent: \"flex-end\", px: 3, pb: 2 }}>\r\n          <Stack direction=\"row\" spacing={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={goToDetail}\r\n              disabled={!budget?.slug}\r\n            >\r\n              Ver ms\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={goToNew}\r\n              sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n            >\r\n              Nuevo presupuesto\r\n            </Button>\r\n            <Button variant=\"text\" onClick={goToList}>\r\n              Ver presupuestos\r\n            </Button>\r\n          </Stack>\r\n        </CardActions>\r\n      ) : null}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default BudgetWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\r\nimport API_CONFIG from \"../../config/api-config\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst currency = (v) => new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS' }).format(v || 0);\r\n\r\nexport default function LiquidityGapWidget() {\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState(null);\r\n  const [data, setData] = React.useState(null);\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n\r\n  React.useEffect(() => {\r\n    const baseUrl = API_CONFIG.REPORTE;\r\n    if (!baseUrl) return;\r\n\r\n    const now = new Date();\r\n    const year = now.getFullYear();\r\n    const month = now.getMonth() + 1; // 1..12\r\n\r\n    const headers = {};\r\n    const sub = sessionStorage.getItem('sub');\r\n    const token = sessionStorage.getItem('accessToken');\r\n    if (sub) headers['X-Usuario-Sub'] = sub;\r\n    if (token) headers['Authorization'] = `Bearer ${token}`;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    const fetchCash = fetch(`${baseUrl}/cashflow?anio=${year}`, { headers })\r\n      .then(r => r.ok ? r.json() : Promise.reject(`HTTP ${r.status}`))\r\n      .then(arr => {\r\n        const registros = Array.isArray(arr) ? arr : [];\r\n        const ingresos = registros.filter(r => r.tipo === 'Ingreso' && new Date(r.fechaEmision).getMonth() + 1 === month)\r\n          .reduce((a, r) => a + (r.montoTotal || 0), 0);\r\n        const egresos = registros.filter(r => r.tipo === 'Egreso' && new Date(r.fechaEmision).getMonth() + 1 === month)\r\n          .reduce((a, r) => a + (r.montoTotal || 0), 0);\r\n        return { ingresos, egresos };\r\n      });\r\n\r\n    const params = new URLSearchParams();\r\n    params.set('anio', year);\r\n    const fetchAccrual = fetch(`${baseUrl}/pyl?${params.toString()}`, { headers })\r\n      .then(r => r.ok ? r.json() : Promise.reject(`HTTP ${r.status}`))\r\n      .then(json => {\r\n        const idx = month - 1;\r\n        const ingresos = (json?.ingresosMensuales ?? [])[idx] || 0;\r\n        const egresos = (json?.egresosMensuales ?? [])[idx] || 0;\r\n        return { ingresos, egresos };\r\n      });\r\n\r\n    Promise.all([fetchCash, fetchAccrual])\r\n      .then(([cash, accrual]) => {\r\n        const dataset = [\r\n          {\r\n            name: 'Ingresos',\r\n            Reales: cash.ingresos,\r\n            Devengado: accrual.ingresos,\r\n          },\r\n          {\r\n            name: 'Egresos',\r\n            Reales: cash.egresos,\r\n            Devengado: accrual.egresos,\r\n          },\r\n        ];\r\n        setData({ dataset, cash, accrual });\r\n      })\r\n      .catch(err => setError(String(err)))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\", display: 'flex', flexDirection: 'column' }}>\r\n      <CardHeader\r\n        title=\"Caja vs Devengado (ltimo mes)\"\r\n        subheader=\"Comparativo de ingresos y egresos para detectar gaps\"\r\n        titleTypographyProps={{\r\n          variant: \"h6\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        subheaderTypographyProps={{\r\n          variant: \"body2\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {loading ? (\r\n          <Skeleton variant=\"rectangular\" height={220} />\r\n        ) : error ? (\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        ) : data ? (\r\n          <>\r\n            <ResponsiveContainer width=\"100%\" height={240}>\r\n              <BarChart data={data.dataset} margin={{ top: 8, right: 16, bottom: 8, left: 0 }}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E0E0E0\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip formatter={(v) => currency(v)} />\r\n                <Legend />\r\n                <Bar dataKey=\"Reales\" fill=\"#2e7d32\" />\r\n                <Bar dataKey=\"Devengado\" fill=\"#0288d1\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n            <Stack direction=\"row\" spacing={2} sx={{ mt: 2 }} flexWrap=\"wrap\">\r\n              <ChipLike label=\"Gap Ingresos\" value={currency((data.accrual.ingresos || 0) - (data.cash.ingresos || 0))} />\r\n              <ChipLike label=\"Gap Egresos\" value={currency((data.accrual.egresos || 0) - (data.cash.egresos || 0))} />\r\n            </Stack>\r\n          </>\r\n        ) : null}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nconst ChipLike = ({ label, value }) => {\r\n  const { primaryTextColor, secondaryTextColor, paletteVars, resolvedMode } =\r\n    useResolvedColorTokens();\r\n  const chipBackground =\r\n    paletteVars.action?.hover ??\r\n    (resolvedMode === \"dark\"\r\n      ? \"rgba(255, 255, 255, 0.12)\"\r\n      : \"rgba(0, 0, 0, 0.05)\");\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"6px 12px\",\r\n        borderRadius: 8,\r\n        background: chipBackground,\r\n      }}\r\n    >\r\n      <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n        {label}\r\n      </Typography>\r\n      <Typography\r\n        variant=\"body2\"\r\n        fontWeight={600}\r\n        sx={{ color: primaryTextColor }}\r\n      >\r\n        {value}\r\n      </Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst typeStyles = {\r\n  ingreso: { color: \"#1b5e20\", backgroundColor: \"rgba(46, 125, 50, 0.12)\" },\r\n  egreso: { color: \"#b71c1c\", backgroundColor: \"rgba(198, 40, 40, 0.12)\" },\r\n  deuda: { color: \"#37474f\", backgroundColor: \"rgba(55, 71, 79, 0.12)\" },\r\n  acreencia: { color: \"#01579b\", backgroundColor: \"rgba(1, 87, 155, 0.12)\" },\r\n  transferencia: { color: \"#4a148c\", backgroundColor: \"rgba(74, 20, 140, 0.12)\" },\r\n};\r\n\r\nconst getTypeStyle = (tipo) => {\r\n  if (!tipo) {\r\n    return { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n  }\r\n  const key = String(tipo).toLowerCase();\r\n  return typeStyles[key] ?? { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n};\r\n\r\nconst formatAmount = (value, currency = \"ARS\") => {\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"-\";\r\n  }\r\n  try {\r\n    return new Intl.NumberFormat(\"es-AR\", {\r\n      style: \"currency\",\r\n      currency: currency || \"ARS\",\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(numeric);\r\n  } catch (error) {\r\n    return `${numeric.toLocaleString(\"es-AR\", {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    })} ${currency || \"\"}`.trim();\r\n  }\r\n};\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) {\r\n    return \"-\";\r\n  }\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"-\";\r\n  }\r\n  return date.toLocaleDateString(\"es-AR\", {\r\n    day: \"2-digit\",\r\n    month: \"short\",\r\n  });\r\n};\r\n\r\nconst RecentMovementsWidget = ({\r\n  data,\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n  onNavigate,\r\n}) => {\r\n  const { resolvedMode, primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n  const cardHeaderTypography = React.useMemo(\r\n    () => ({\r\n      titleTypographyProps: {\r\n        variant: \"h6\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n      subheaderTypographyProps: {\r\n        variant: \"body2\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n    }),\r\n    [primaryTextColor]\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Movimientos\"\r\n          subheader=\"Cargando...\"\r\n          {...cardHeaderTypography}\r\n        />\r\n        <CardContent>\r\n          <Skeleton variant=\"rectangular\" height={180} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title=\"Movimientos\" {...cardHeaderTypography} />\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const movements = Array.isArray(data) ? data : [];\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}\r\n    >\r\n      <CardHeader\r\n        title=\"Movimientos\"\r\n        subheader=\"ltimos movimientos registrados\"\r\n        {...cardHeaderTypography}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {movements.length === 0 ? (\r\n          <Stack spacing={2} alignItems=\"flex-start\">\r\n            <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n              Todava no hay movimientos para mostrar. Registra un ingreso o egreso para verlos aqu.\r\n            </Typography>\r\n            {onRetry ? (\r\n              <Button variant=\"outlined\" onClick={onRetry}>\r\n                Actualizar\r\n              </Button>\r\n            ) : null}\r\n          </Stack>\r\n        ) : (\r\n          <TableContainer>\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Tipo</TableCell>\r\n                  <TableCell align=\"right\">Monto</TableCell>\r\n                  <TableCell>Fecha</TableCell>\r\n                  {!isMobile ? <TableCell>Categora</TableCell> : null}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {movements.map((movement, index) => {\r\n                  const key = movement.id ?? `movement-${index}`;\r\n                  const tipo = movement.tipo ?? \"Movimiento\";\r\n                  const categoria = movement.categoria || \"Sin categora\";\r\n                  const amountColor = (movement.montoTotal ?? 0) < 0 ? \"error.main\" : \"success.main\";\r\n                  const typeStyle = getTypeStyle(tipo);\r\n                  return (\r\n                    <TableRow key={key} hover>\r\n                      <TableCell>\r\n                        <Chip\r\n                          label={tipo}\r\n                          size=\"small\"\r\n                          sx={{\r\n                            fontWeight: 600,\r\n                            color: typeStyle.color,\r\n                            backgroundColor: typeStyle.backgroundColor,\r\n                            border: `1px solid ${typeStyle.color}`,\r\n                          }}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell align=\"right\" sx={{ color: amountColor, fontWeight: 600 }}>\r\n                        {formatAmount(movement.montoTotal, movement.moneda)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">{formatDate(movement.fechaEmision)}</Typography>\r\n                      </TableCell>\r\n                      {!isMobile ? (\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n                            {categoria}\r\n                          </Typography>\r\n                        </TableCell>\r\n                      ) : null}\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 3, pb: 2, gap: 1 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={onNavigate}\r\n          disabled={!onNavigate}\r\n          sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n        >\r\n          Ver ms\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RecentMovementsWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Chip from \"@mui/material/Chip\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst typeStyles = {\r\n  venta: { color: \"#1b5e20\", backgroundColor: \"rgba(46, 125, 50, 0.12)\" },\r\n  compra: { color: \"#b71c1c\", backgroundColor: \"rgba(198, 40, 40, 0.12)\" },\r\n};\r\n\r\nconst getTypeStyle = (tipo) => {\r\n  if (!tipo) {\r\n    return { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n  }\r\n  const key = String(tipo).toLowerCase();\r\n  return typeStyles[key] ?? { color: \"#424242\", backgroundColor: \"rgba(66, 66, 66, 0.1)\" };\r\n};\r\n\r\nconst formatAmount = (value, currency = \"ARS\") => {\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"-\";\r\n  }\r\n  try {\r\n    return new Intl.NumberFormat(\"es-AR\", {\r\n      style: \"currency\",\r\n      currency: currency || \"ARS\",\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(numeric);\r\n  } catch (error) {\r\n    return `${numeric.toLocaleString(\"es-AR\", {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    })} ${currency || \"\"}`.trim();\r\n  }\r\n};\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) {\r\n    return \"-\";\r\n  }\r\n  const date = new Date(value);\r\n  if (Number.isNaN(date.getTime())) {\r\n    return \"-\";\r\n  }\r\n  return date.toLocaleDateString(\"es-AR\", {\r\n    day: \"2-digit\",\r\n    month: \"short\",\r\n  });\r\n};\r\n\r\nconst RecentInvoicesWidget = ({\r\n  data,\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n  onNavigate,\r\n}) => {\r\n  const { resolvedMode, primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n  const cardHeaderTypography = React.useMemo(\r\n    () => ({\r\n      titleTypographyProps: {\r\n        variant: \"h6\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n      subheaderTypographyProps: {\r\n        variant: \"body2\",\r\n        sx: { color: primaryTextColor },\r\n      },\r\n    }),\r\n    [primaryTextColor]\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title=\"Facturas\"\r\n          subheader=\"Cargando...\"\r\n          {...cardHeaderTypography}\r\n        />\r\n        <CardContent>\r\n          <Skeleton variant=\"rectangular\" height={180} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title=\"Facturas\" {...cardHeaderTypography} />\r\n        <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const invoices = Array.isArray(data) ? data : [];\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}\r\n    >\r\n      <CardHeader\r\n        title=\"Facturas\"\r\n        subheader=\"ltimas facturas registradas\"\r\n        {...cardHeaderTypography}\r\n      />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {invoices.length === 0 ? (\r\n          <Stack spacing={2} alignItems=\"flex-start\">\r\n            <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n              Todava no hay facturas para mostrar. Carga una factura para verla ac.\r\n            </Typography>\r\n            {onRetry ? (\r\n              <Button variant=\"outlined\" onClick={onRetry}>\r\n                Actualizar\r\n              </Button>\r\n            ) : null}\r\n          </Stack>\r\n        ) : (\r\n          <TableContainer>\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Tipo</TableCell>\r\n                  {!isMobile ? <TableCell>Nmero</TableCell> : null}\r\n                  <TableCell align=\"right\">Monto</TableCell>\r\n                  <TableCell>Fecha</TableCell>\r\n                  {!isMobile ? <TableCell>Cliente</TableCell> : null}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {invoices.map((invoice, index) => {\r\n                  const key = invoice.id ?? `invoice-${index}`;\r\n                  const tipo = invoice.tipoFactura ?? \"Factura\";\r\n                  const numero = invoice.numeroDocumento ?? \"-\";\r\n                  const cliente =\r\n                    invoice.compradorNombre || invoice.vendedorNombre || \"Sin dato\";\r\n                  const amountColor = (invoice.montoTotal ?? 0) < 0 ? \"error.main\" : \"success.main\";\r\n                  const typeStyle = getTypeStyle(tipo);\r\n\r\n                  return (\r\n                    <TableRow key={key} hover>\r\n                      <TableCell>\r\n                        <Chip\r\n                          label={tipo}\r\n                          size=\"small\"\r\n                          sx={{\r\n                            fontWeight: 600,\r\n                            color: typeStyle.color,\r\n                            backgroundColor: typeStyle.backgroundColor,\r\n                            border: `1px solid ${typeStyle.color}`,\r\n                          }}\r\n                        />\r\n                      </TableCell>\r\n                      {!isMobile ? (\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\">{numero}</Typography>\r\n                        </TableCell>\r\n                      ) : null}\r\n                      <TableCell align=\"right\" sx={{ color: amountColor, fontWeight: 600 }}>\r\n                        {formatAmount(invoice.montoTotal, invoice.moneda)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">{formatDate(invoice.fechaEmision)}</Typography>\r\n                      </TableCell>\r\n                      {!isMobile ? (\r\n                        <TableCell>\r\n                          <Typography variant=\"body2\" sx={{ color: secondaryTextColor }}>\r\n                            {cliente}\r\n                          </Typography>\r\n                        </TableCell>\r\n                      ) : null}\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 3, pb: 2, gap: 1 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={onNavigate}\r\n          disabled={!onNavigate}\r\n          sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n        >\r\n          Ver ms\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default RecentInvoicesWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport LinearProgress from \"@mui/material/LinearProgress\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Box from \"@mui/material/Box\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst numberFormatter = new Intl.NumberFormat(\"es-AR\", {\r\n  maximumFractionDigits: 0,\r\n});\r\n\r\nconst formatCurrency = (value) => {\r\n  if (value === null || value === undefined) {\r\n    return \"--\";\r\n  }\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"--\";\r\n  }\r\n  return new Intl.NumberFormat(\"es-AR\", {\r\n    style: \"currency\",\r\n    currency: \"ARS\",\r\n    maximumFractionDigits: 0,\r\n  }).format(numeric);\r\n};\r\n\r\nconst percentFormatter = new Intl.NumberFormat(\"es-AR\", {\r\n  minimumFractionDigits: 0,\r\n  maximumFractionDigits: 1,\r\n});\r\n\r\nconst clampPercent = (value) => {\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return 0;\r\n  }\r\n  return Math.min(Math.max(numeric, 0), 100);\r\n};\r\n\r\nconst formatPercent = (value) => `${percentFormatter.format(clampPercent(value))}%`;\r\n\r\nconst formatDate = (value) => {\r\n  if (!value) {\r\n    return \"--\";\r\n  }\r\n  return String(value);\r\n};\r\n\r\nconst ReconciliationWidget = ({\r\n  data,\r\n  loading = false,\r\n  error = null,\r\n  onRetry,\r\n  onNavigate,\r\n}) => {\r\n  const { resolvedMode } = useResolvedColorTokens();\r\n  const isDarkMode = resolvedMode === \"dark\";\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title=\"Conciliacin bancaria\" subheader=\"Sincronizando movimientos...\" />\r\n        <CardContent>\r\n          {Array.from({ length: 3 }).map((_, index) => (\r\n            <Skeleton key={index} variant=\"rectangular\" height={48} sx={{ mb: 1.5 }} />\r\n          ))}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n        <CardHeader title=\"Conciliacin bancaria\" />\r\n        <CardContent sx={{ flexGrow: 1, display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n          {onRetry ? (\r\n            <Button variant=\"outlined\" onClick={onRetry}>\r\n              Reintentar\r\n            </Button>\r\n          ) : null}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const summary = data ?? null;\r\n  const progress = clampPercent(summary?.porcentajeConciliados);\r\n  const porTipo = Array.isArray(summary?.porTipo) ? [...summary.porTipo] : [];\r\n  porTipo.sort((a, b) => (Number(b?.total ?? 0) || 0) - (Number(a?.total ?? 0) || 0));\r\n\r\n  const conciliadosPercent =\r\n    summary && summary.totalMovimientos\r\n      ? (summary.conciliados * 100) / (summary.totalMovimientos || 1)\r\n      : 0;\r\n  const pendientesPercent =\r\n    summary && summary.totalMovimientos\r\n      ? (summary.pendientes * 100) / (summary.totalMovimientos || 1)\r\n      : 0;\r\n\r\n  const renderMetric = (label, value, helper) => (\r\n    <Stack\r\n      key={label}\r\n      spacing={0.5}\r\n      sx={{\r\n        p: 1.25,\r\n        borderRadius: 1.5,\r\n        border: \"1px solid\",\r\n        borderColor: \"divider\",\r\n        minWidth: 0,\r\n        flex: 1,\r\n      }}\r\n    >\r\n      <Typography variant=\"caption\" color=\"text.secondary\">\r\n        {label}\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\" fontWeight={600}>\r\n        {value}\r\n      </Typography>\r\n      {helper ? (\r\n        <Typography variant=\"caption\" color=\"text.secondary\">\r\n          {helper}\r\n        </Typography>\r\n      ) : null}\r\n    </Stack>\r\n  );\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n      <CardHeader\r\n        title=\"Conciliacin bancaria\"\r\n        subheader={\r\n          summary?.periodLabel ? `Perodo ${summary.periodLabel}` : \"Resumen del ltimo perodo\"\r\n        }\r\n      />\r\n      <CardContent sx={{ flexGrow: 1, display: \"flex\", flexDirection: \"column\", gap: 2 }}>\r\n        {summary ? (\r\n          <>\r\n            <Stack\r\n              direction={{ xs: \"column\", sm: \"row\" }}\r\n              spacing={1.5}\r\n              sx={{ alignItems: { xs: \"stretch\", sm: \"flex-start\" } }}\r\n            >\r\n              {renderMetric(\r\n                \"Movimientos\",\r\n                numberFormatter.format(summary.totalMovimientos ?? 0),\r\n                \"Total del perodo\"\r\n              )}\r\n              {renderMetric(\r\n              \"Conciliados\",\r\n              numberFormatter.format(summary.conciliados ?? 0),\r\n              formatPercent(conciliadosPercent)\r\n            )}\r\n            {renderMetric(\r\n              \"Pendientes\",\r\n              numberFormatter.format(summary.pendientes ?? 0),\r\n              formatPercent(pendientesPercent)\r\n            )}\r\n            </Stack>\r\n\r\n            <Box>\r\n              <Stack\r\n                direction=\"row\"\r\n                justifyContent=\"space-between\"\r\n                alignItems=\"center\"\r\n                sx={{ mb: 0.75 }}\r\n              >\r\n                <Typography variant=\"subtitle2\">Avance general</Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  {formatPercent(progress)}\r\n                </Typography>\r\n              </Stack>\r\n              <LinearProgress\r\n                variant=\"determinate\"\r\n                value={progress}\r\n                sx={{\r\n                  height: 10,\r\n                  borderRadius: 999,\r\n                  backgroundColor: \"action.hover\",\r\n                  [`& .MuiLinearProgress-bar`]: {\r\n                    borderRadius: 999,\r\n                  },\r\n                }}\r\n              />\r\n            </Box>\r\n\r\n            <Stack spacing={0.5}>\r\n              <Typography variant=\"subtitle2\">ltimas referencias</Typography>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                ltima conciliacin: {formatDate(summary.ultimaConciliacion)}\r\n              </Typography>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                ltimo movimiento pendiente: {formatDate(summary.ultimoPendiente)}\r\n              </Typography>\r\n            </Stack>\r\n\r\n            <Stack spacing={1}>\r\n              <Typography variant=\"subtitle2\">Detalle por tipo</Typography>\r\n              {porTipo.length > 0 ? (\r\n                porTipo.map((item) => {\r\n                  const itemProgress = clampPercent(item?.porcentaje ?? 0);\r\n                  return (\r\n                    <Stack\r\n                      key={item?.tipo ?? \"tipo-desconocido\"}\r\n                      spacing={0.5}\r\n                      sx={{\r\n                        border: \"1px solid\",\r\n                        borderColor: \"divider\",\r\n                        borderRadius: 1.5,\r\n                        p: 1.25,\r\n                      }}\r\n                    >\r\n                      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                        <Typography variant=\"body2\" fontWeight={600}>\r\n                          {item?.tipo ?? \"Sin tipo\"}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" color=\"text.secondary\">\r\n                          {formatPercent(itemProgress)}\r\n                        </Typography>\r\n                      </Stack>\r\n                      <LinearProgress\r\n                        variant=\"determinate\"\r\n                        value={itemProgress}\r\n                        sx={{\r\n                          height: 8,\r\n                          borderRadius: 999,\r\n                          backgroundColor: \"action.hover\",\r\n                          [`& .MuiLinearProgress-bar`]: {\r\n                            borderRadius: 999,\r\n                          },\r\n                        }}\r\n                      />\r\n                      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                        <Typography variant=\"caption\" color=\"text.secondary\">\r\n                          {numberFormatter.format(item?.conciliados ?? 0)} /{\" \"}\r\n                          {numberFormatter.format(item?.total ?? 0)} conciliados\r\n                        </Typography>\r\n                        {(item?.montoTotal !== undefined && item?.montoTotal !== null) && (\r\n                          <Typography \r\n                            variant=\"body2\" \r\n                            fontWeight={700}\r\n                            sx={{ \r\n                              color: (item.tipo === \"Egreso\" || item.montoTotal < 0) ? \"error.main\" : \"success.main\" \r\n                            }}\r\n                          >\r\n                            {formatCurrency(item.montoTotal)}\r\n                          </Typography>\r\n                        )}\r\n                      </Stack>\r\n                    </Stack>\r\n                  );\r\n                })\r\n              ) : (\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  No hay movimientos clasificados por tipo en este perodo.\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n          </>\r\n        ) : (\r\n          <Stack spacing={2} alignItems=\"flex-start\">\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Todava no hay movimientos que analizar en este perodo. Carga o importa operaciones\r\n              para comenzar a conciliarlas.\r\n            </Typography>\r\n            {onRetry ? (\r\n              <Button variant=\"outlined\" onClick={onRetry}>\r\n                Actualizar\r\n              </Button>\r\n            ) : null}\r\n          </Stack>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 3, pb: 2 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          onClick={() => onNavigate?.()}\r\n          disabled={!onNavigate}\r\n          sx={isDarkMode ? { color: \"#42897f\" } : undefined}\r\n        >\r\n          Ir a conciliacin\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ReconciliationWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Divider from \"@mui/material/Divider\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Area, AreaChart } from \"recharts\";\r\nimport { useTheme, alpha } from \"@mui/material/styles\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst formatCurrency = (value) => {\r\n  if (value === null || value === undefined) {\r\n    return \"--\";\r\n  }\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"--\";\r\n  }\r\n  return new Intl.NumberFormat(\"es-AR\", {\r\n    style: \"currency\",\r\n    currency: \"ARS\",\r\n    maximumFractionDigits: 0,\r\n  }).format(numeric);\r\n};\r\n\r\nconst numberFormatter = new Intl.NumberFormat(\"es-AR\", {\r\n  maximumFractionDigits: 0,\r\n});\r\n\r\nconst monthLabel = (raw, index) => {\r\n  if (!raw) {\r\n    const fallback = new Date(2000, index % 12, 1);\r\n    return new Intl.DateTimeFormat(\"es-AR\", { month: \"long\" }).format(fallback);\r\n  }\r\n\r\n  const normalized = String(raw).trim().toLowerCase();\r\n  const dictionary = {\r\n    ene: \"enero\",\r\n    feb: \"febrero\",\r\n    mar: \"marzo\",\r\n    abr: \"abril\",\r\n    may: \"mayo\",\r\n    jun: \"junio\",\r\n    jul: \"julio\",\r\n    ago: \"agosto\",\r\n    sep: \"septiembre\",\r\n    oct: \"octubre\",\r\n    nov: \"noviembre\",\r\n    dic: \"diciembre\",\r\n    january: \"enero\",\r\n    february: \"febrero\",\r\n    march: \"marzo\",\r\n    april: \"abril\",\r\n    june: \"junio\",\r\n    july: \"julio\",\r\n    august: \"agosto\",\r\n    september: \"septiembre\",\r\n    october: \"octubre\",\r\n    november: \"noviembre\",\r\n    december: \"diciembre\",\r\n  };\r\n\r\n  if (dictionary[normalized]) {\r\n    return dictionary[normalized];\r\n  }\r\n\r\n  const parsed = Date.parse(`${normalized} 1, 2020`);\r\n  if (Number.isNaN(parsed)) {\r\n    const fallback = new Date(2000, index % 12, 1);\r\n    return new Intl.DateTimeFormat(\"es-AR\", { month: \"long\" }).format(fallback);\r\n  }\r\n  return new Intl.DateTimeFormat(\"es-AR\", { month: \"long\" }).format(parsed);\r\n};\r\n\r\nconst SalesTrendWidget = ({ data, loading = false, error = null, emptyMessage }) => {\r\n  const theme = useTheme();\r\n  const isSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader\r\n          title={data?.title ?? \"Ingresos durante el perodo\"}\r\n          subheader=\"Generando serie...\"\r\n        />\r\n        <CardContent>\r\n          <Skeleton variant=\"text\" width=\"60%\" />\r\n          <Skeleton variant=\"text\" width=\"40%\" />\r\n          <Skeleton variant=\"rectangular\" height={220} sx={{ mt: 2 }} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title={data?.title ?? \"Ingresos durante el perodo\"} />\r\n        <CardContent>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const points = data?.points ?? [];\r\n  const chartData = points.map((item, index) => ({\r\n    name: monthLabel(item.month, item.monthIndex),\r\n    value: item.value ?? 0,\r\n  }));\r\n  const noDataMessage = emptyMessage ?? data?.emptyMessage ?? \"No hay ingresos registrados en este perodo.\";\r\n  const hasData = chartData.length > 0 && chartData.some(d => d.value !== 0);\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        height: \"100%\",\r\n        minHeight: 520,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n        <CardHeader\r\n          title={data?.title ?? \"Ingresos durante el perodo\"}\r\n          subheader={data?.subheader ?? \"Serie mensual de ingresos registrados en los ltimos 12 meses.\"}\r\n        titleTypographyProps={{\r\n          variant: \"h6\",\r\n          fontWeight: 600,\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        subheaderTypographyProps={{\r\n          variant: \"body2\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        action={\r\n          <Box\r\n            sx={{\r\n              width: { xs: \"100%\", sm: \"auto\" },\r\n              pr: { xs: 0, sm: 2.5 },\r\n              pt: { xs: 1, sm: 0.5 },\r\n              ml: { xs: 10, sm: 5 },\r\n            }}\r\n          >\r\n            <Stack\r\n              direction={isSmall ? \"column\" : \"row\"}\r\n              spacing={isSmall ? 1.25 : 2}\r\n              alignItems={isSmall ? \"flex-start\" : \"flex-start\"}\r\n              justifyContent={isSmall ? \"flex-start\" : \"flex-end\"}\r\n              divider={\r\n                <Divider\r\n                  flexItem={!isSmall}\r\n                  orientation={isSmall ? \"horizontal\" : \"vertical\"}\r\n                  sx={{\r\n                    borderColor: \"divider\",\r\n                    mx: isSmall ? 0 : 0.5,\r\n                    my: isSmall ? 0.75 : 0,\r\n                  }}\r\n                />\r\n              }\r\n              sx={{\r\n                width: \"100%\",\r\n                \"& .MuiTypography-overline\": { letterSpacing: 0.6 },\r\n              }}\r\n            >\r\n              <Stack\r\n                spacing={0.5}\r\n                alignItems={isSmall ? \"flex-start\" : \"flex-end\"}\r\n                sx={{ minWidth: 120, width: isSmall ? \"100%\" : \"auto\" }}\r\n              >\r\n                <Typography variant=\"overline\" sx={{ color: primaryTextColor }}>\r\n                  Maximo\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" fontWeight={600} sx={{ color: primaryTextColor }}>\r\n                  {formatCurrency(data?.max?.value)}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                  {data?.max?.label ?? \"--\"}\r\n                </Typography>\r\n              </Stack>\r\n              <Stack\r\n                spacing={0.5}\r\n                alignItems={isSmall ? \"flex-start\" : \"flex-end\"}\r\n                sx={{ minWidth: 120, width: isSmall ? \"100%\" : \"auto\" }}\r\n              >\r\n                <Typography variant=\"overline\" sx={{ color: primaryTextColor }}>\r\n                  Minimo\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" fontWeight={600} sx={{ color: primaryTextColor }}>\r\n                  {formatCurrency(data?.min?.value)}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                  {data?.min?.label ?? \"--\"}\r\n                </Typography>\r\n              </Stack>\r\n              <Stack\r\n                spacing={0.5}\r\n                alignItems={isSmall ? \"flex-start\" : \"flex-end\"}\r\n                sx={{ minWidth: 120, width: isSmall ? \"100%\" : \"auto\" }}\r\n              >\r\n                <Typography variant=\"overline\" sx={{ color: primaryTextColor }}>\r\n                  Promedio\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" fontWeight={600} sx={{ color: primaryTextColor }}>\r\n                  {formatCurrency(data?.average)}\r\n                </Typography>\r\n                  <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                    ltimos 12 meses\r\n                  </Typography>\r\n              </Stack>\r\n            </Stack>\r\n          </Box>\r\n        }\r\n        sx={{\r\n          py: 2,\r\n          \"& .MuiCardHeader-content\": {\r\n            gap: 0.25,\r\n            alignSelf: \"flex-start\",\r\n          },\r\n          \"& .MuiCardHeader-action\": {\r\n            mt: 0,\r\n            width: { xs: \"100%\", sm: \"auto\" },\r\n            alignSelf: { xs: \"stretch\", sm: \"flex-start\" },\r\n          },\r\n        }}\r\n      />\r\n      <CardContent\r\n        sx={{\r\n          flexGrow: 1,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          px: { xs: 1, md: 1.5 },\r\n          pt: { xs: 0.9, md: 1.25 },\r\n          pb: { xs: 2.1, md: 2.35 },\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            width: \"100%\",\r\n            height: 350,\r\n            mt: { xs: 1, md: 2 },\r\n          }}\r\n        >\r\n          {hasData ? (\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <AreaChart\r\n                data={chartData}\r\n                margin={{ top: 10, right: 10, left: 0, bottom: 10 }}\r\n              >\r\n                <defs>\r\n                  <linearGradient id=\"colorValue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"5%\" stopColor={theme.palette.primary.main} stopOpacity={0.3}/>\r\n                    <stop offset=\"95%\" stopColor={theme.palette.primary.main} stopOpacity={0}/>\r\n                  </linearGradient>\r\n                </defs>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke={alpha(theme.palette.divider, 0.3)} />\r\n                <XAxis \r\n                  dataKey=\"name\" \r\n                  tick={{ fill: primaryTextColor, fontSize: 9 }}\r\n                  angle={-40}\r\n                  textAnchor=\"end\"\r\n                  height={45}\r\n                  interval={0}\r\n                />\r\n                <YAxis \r\n                  tick={{ fill: primaryTextColor, fontSize: 9 }}\r\n                  tickFormatter={(value) => formatCurrency(value)}\r\n                  width={80}\r\n                />\r\n                <Tooltip \r\n                  contentStyle={{\r\n                    backgroundColor: theme.palette.background.paper,\r\n                    border: `1px solid ${theme.palette.divider}`,\r\n                    borderRadius: 8,\r\n                  }}\r\n                  labelStyle={{ color: primaryTextColor }}\r\n                  formatter={(value) => [formatCurrency(value), \"Valor\"]}\r\n                />\r\n                <Area \r\n                  type=\"monotone\" \r\n                  dataKey=\"value\" \r\n                  stroke={theme.palette.primary.main}\r\n                  strokeWidth={3}\r\n                  fill=\"url(#colorValue)\"\r\n                  dot={{ fill: theme.palette.primary.main, r: 4 }}\r\n                  activeDot={{ r: 6 }}\r\n                />\r\n              </AreaChart>\r\n            </ResponsiveContainer>\r\n          ) : (\r\n            <Box\r\n              sx={{\r\n                height: \"100%\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                borderRadius: 2,\r\n                border: \"1px dashed\",\r\n                borderColor: \"divider\",\r\n                color: secondaryTextColor,\r\n                typography: \"body2\",\r\n              }}\r\n            >\r\n              {noDataMessage}\r\n            </Box>\r\n          )}\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SalesTrendWidget;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Divider from \"@mui/material/Divider\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell } from \"recharts\";\r\nimport { useTheme, alpha } from \"@mui/material/styles\";\r\nimport useResolvedColorTokens from \"../useResolvedColorTokens\";\r\n\r\nconst formatCurrency = (value) => {\r\n  if (value === null || value === undefined) {\r\n    return \"--\";\r\n  }\r\n  const numeric = Number(value);\r\n  if (!Number.isFinite(numeric)) {\r\n    return \"--\";\r\n  }\r\n  return new Intl.NumberFormat(\"es-AR\", {\r\n    style: \"currency\",\r\n    currency: \"ARS\",\r\n    maximumFractionDigits: 0,\r\n  }).format(numeric);\r\n};\r\n\r\nconst SalesByCategoryWidget = ({\r\n  data = [],\r\n  loading = false,\r\n  error = null,\r\n  emptyMessage = \"No hay datos para mostrar por categora en este perodo.\",\r\n  title = \"Ingresos por categoras\",\r\n  subtitle = \"Distribucin anual por segmento\",\r\n}) => {\r\n  const theme = useTheme();\r\n  const isSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const { primaryTextColor, secondaryTextColor } = useResolvedColorTokens();\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title={title} subheader=\"Armando ranking...\" />\r\n        <CardContent>\r\n          <Stack spacing={1}>\r\n            {Array.from({ length: 6 }).map((_, index) => (\r\n              <Skeleton key={index} variant=\"rectangular\" height={24} />\r\n            ))}\r\n          </Stack>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card variant=\"outlined\" sx={{ height: \"100%\" }}>\r\n        <CardHeader title={title} />\r\n        <CardContent>\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const hasData = Array.isArray(data) && data.length > 0;\r\n  const safeData = hasData ? data : [];\r\n  const chartData = safeData.map((item) => ({\r\n    name: item.category ?? \"Sin categora\",\r\n    value: Number(item.value) || 0,\r\n  }));\r\n\r\n  let topCategory = null;\r\n  let bottomCategory = null;\r\n  let average = null;\r\n\r\n  if (hasData) {\r\n    const values = chartData.map(d => d.value);\r\n    const total = values.reduce((sum, value) => sum + value, 0);\r\n    average = values.length > 0 ? total / values.length : null;\r\n    const sorted = [...chartData].sort((a, b) => b.value - a.value);\r\n    topCategory = sorted[0] ? { category: sorted[0].name, value: sorted[0].value } : null;\r\n    bottomCategory = sorted[sorted.length - 1] ? { category: sorted[sorted.length - 1].name, value: sorted[sorted.length - 1].value } : null;\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      variant=\"outlined\"\r\n      sx={{\r\n        height: \"100%\",\r\n        minHeight: 520,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n      <CardHeader\r\n        title={title}\r\n        subheader={subtitle}\r\n        titleTypographyProps={{\r\n          variant: \"h6\",\r\n          fontWeight: 600,\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        subheaderTypographyProps={{\r\n          variant: \"body2\",\r\n          sx: { color: primaryTextColor },\r\n        }}\r\n        action={\r\n          hasData ? (\r\n            <Box\r\n              sx={{\r\n                width: { xs: \"100%\", sm: \"auto\" },\r\n                pr: { xs: 0, sm: 2.5 },\r\n                pt: { xs: 1, sm: 0.5 },\r\n                ml: { xs: 5, sm: 2.5 },\r\n              }}\r\n            >\r\n              <Stack\r\n                direction={isSmall ? \"column\" : \"row\"}\r\n                spacing={isSmall ? 1.25 : 2}\r\n                alignItems={isSmall ? \"flex-start\" : \"flex-start\"}\r\n                justifyContent={isSmall ? \"flex-start\" : \"flex-end\"}\r\n                divider={\r\n                  <Divider\r\n                    flexItem={!isSmall}\r\n                    orientation={isSmall ? \"horizontal\" : \"vertical\"}\r\n                    sx={{\r\n                      borderColor: \"divider\",\r\n                      mx: isSmall ? 0 : 0.5,\r\n                      my: isSmall ? 0.75 : 0,\r\n                    }}\r\n                  />\r\n                }\r\n                sx={{\r\n                  width: \"100%\",\r\n                  \"& .MuiTypography-overline\": { letterSpacing: 0.6 },\r\n                }}\r\n              >\r\n                <Stack\r\n                  spacing={0.5}\r\n                  alignItems={isSmall ? \"flex-start\" : \"flex-end\"}\r\n                  sx={{ minWidth: 120, width: isSmall ? \"100%\" : \"auto\" }}\r\n                >\r\n                  <Typography\r\n                    variant=\"overline\"\r\n                    sx={{ color: primaryTextColor }}\r\n                  >\r\n                    Categora superior\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"subtitle2\"\r\n                    fontWeight={600}\r\n                    sx={{ color: primaryTextColor }}\r\n                  >\r\n                    {formatCurrency(topCategory?.value)}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                    {topCategory?.category ?? \"--\"}\r\n                  </Typography>\r\n                </Stack>\r\n                <Stack\r\n                  spacing={0.5}\r\n                  alignItems={isSmall ? \"flex-start\" : \"flex-end\"}\r\n                  sx={{ minWidth: 120, width: isSmall ? \"100%\" : \"auto\" }}\r\n                >\r\n                  <Typography\r\n                    variant=\"overline\"\r\n                    sx={{ color: primaryTextColor }}\r\n                  >\r\n                    Categora menor\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"subtitle2\"\r\n                    fontWeight={600}\r\n                    sx={{ color: primaryTextColor }}\r\n                  >\r\n                    {formatCurrency(bottomCategory?.value)}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                    {bottomCategory?.category ?? \"--\"}\r\n                  </Typography>\r\n                </Stack>\r\n                <Stack\r\n                  spacing={0.5}\r\n                  alignItems={isSmall ? \"flex-start\" : \"flex-end\"}\r\n                  sx={{ minWidth: 120, width: isSmall ? \"100%\" : \"auto\" }}\r\n                >\r\n                  <Typography\r\n                    variant=\"overline\"\r\n                    sx={{ color: primaryTextColor }}\r\n                  >\r\n                    Promedio\r\n                  </Typography>\r\n                  <Typography\r\n                    variant=\"subtitle2\"\r\n                    fontWeight={600}\r\n                    sx={{ color: primaryTextColor }}\r\n                  >\r\n                    {formatCurrency(average)}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ color: primaryTextColor }}>\r\n                    {chartData.length} categoras\r\n                  </Typography>\r\n                </Stack>\r\n              </Stack>\r\n            </Box>\r\n          ) : null\r\n        }\r\n        sx={{\r\n          py: 2,\r\n          \"& .MuiCardHeader-content\": {\r\n            gap: 0.25,\r\n            alignSelf: \"flex-start\",\r\n          },\r\n          \"& .MuiCardHeader-action\": {\r\n            mt: 0,\r\n            width: { xs: \"100%\", sm: \"auto\" },\r\n            alignSelf: { xs: \"stretch\", sm: \"flex-start\" },\r\n          },\r\n        }}\r\n      />\r\n      <CardContent\r\n        sx={{\r\n          flexGrow: 1,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          px: { xs: 1, md: 1.5 },\r\n          pt: { xs: 0.9, md: 1.25 },\r\n          pb: { xs: 2.1, md: 2.35 },\r\n        }}\r\n      >\r\n        {hasData ? (\r\n          <Box\r\n            sx={{\r\n              width: \"100%\",\r\n              height: 350,\r\n              mt: { xs: 1, md: 2 },\r\n            }}\r\n          >\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart\r\n                data={chartData}\r\n                margin={{ top: 10, right: 10, left: 0, bottom: 10 }}\r\n              >\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke={alpha(theme.palette.divider, 0.3)} />\r\n                <XAxis \r\n                  dataKey=\"name\" \r\n                  tick={{ fill: primaryTextColor, fontSize: 9 }}\r\n                  angle={-40}\r\n                  textAnchor=\"end\"\r\n                  height={60}\r\n                  interval={0}\r\n                />\r\n                <YAxis \r\n                  tick={{ fill: primaryTextColor, fontSize: 9 }}\r\n                  tickFormatter={(value) => formatCurrency(value)}\r\n                  width={80}\r\n                />\r\n                <Tooltip \r\n                  contentStyle={{\r\n                    backgroundColor: theme.palette.background.paper,\r\n                    border: `1px solid ${theme.palette.divider}`,\r\n                    borderRadius: 8,\r\n                  }}\r\n                  labelStyle={{ color: primaryTextColor }}\r\n                  formatter={(value) => [formatCurrency(value), \"Valor\"]}\r\n                />\r\n                <Bar \r\n                  dataKey=\"value\" \r\n                  fill={theme.palette.primary.main}\r\n                  radius={[8, 8, 0, 0]}\r\n                >\r\n                  {chartData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={alpha(theme.palette.primary.main, 0.85)} />\r\n                  ))}\r\n                </Bar>\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </Box>\r\n        ) : (\r\n          <Box\r\n            sx={{\r\n              flexGrow: 1,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              px: { xs: 2.5, md: 3 },\r\n            }}\r\n          >\r\n            <Typography\r\n              variant=\"body2\"\r\n              textAlign=\"center\"\r\n              sx={{ color: secondaryTextColor }}\r\n            >\r\n              {emptyMessage}\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default SalesByCategoryWidget;\r\n","import * as React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Skeleton from \"@mui/material/Skeleton\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport API_CONFIG from \"../../config/api-config\";\r\n\r\nconst InsightsWidget = () => {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(null);\r\n  const [data, setData] = React.useState(null);\r\n  const summaryLines =\r\n    data && typeof data.diagnostico_corto === \"string\"\r\n      ? data.diagnostico_corto\r\n          .split(/\\n+/)\r\n          .map((line) => line.trim())\r\n          .filter(Boolean)\r\n      : [];\r\n  const senalesEntries =\r\n    data && data.senales\r\n      ? Object.entries(data.senales).filter(([, value]) => Boolean(value))\r\n      : [];\r\n  const detalleLines =\r\n    data && data.detalles\r\n      ? Object.values(data.detalles).filter(\r\n          (value) => typeof value === \"string\" && value.trim().length > 0\r\n        )\r\n      : [];\r\n  const riesgos =\r\n    Array.isArray(data?.riesgos_clave) && data.riesgos_clave.length > 0\r\n      ? data.riesgos_clave.filter(Boolean)\r\n      : [];\r\n  const tips =\r\n    Array.isArray(data?.tips) && data.tips.length > 0\r\n      ? data.tips.filter(Boolean)\r\n      : [];\r\n\r\n  const handleRun = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setData(null);\r\n    try {\r\n      const baseUrl = API_CONFIG.IA;\r\n      const now = new Date();\r\n      const params = new URLSearchParams();\r\n      params.set(\"anio\", now.getFullYear());\r\n      params.set(\"mes\", now.getMonth() + 1);\r\n      const headers = { \"Content-Type\": \"application/json\" };\r\n      const sub = sessionStorage.getItem('sub');\r\n      const token = sessionStorage.getItem('accessToken');\r\n      if (sub) headers['X-Usuario-Sub'] = sub;\r\n      if (token) headers['Authorization'] = `Bearer ${token}`;\r\n      const res = await fetch(`${baseUrl}/ia/insights?${params.toString()}`, {\r\n        method: 'POST',\r\n        headers,\r\n      });\r\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n      const json = await res.json();\r\n      setData(json);\r\n    } catch (e) {\r\n      setError(String(e));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card variant=\"outlined\" sx={{ height: \"100%\", display: 'flex', flexDirection: 'column' }}>\r\n      <CardHeader title=\"Anlisis IA\" subheader=\"Diagnstico automtico de tu situacin\" />\r\n      <CardContent sx={{ flexGrow: 1 }}>\r\n        {loading ? (\r\n          <Skeleton variant=\"rectangular\" height={180} />\r\n        ) : error ? (\r\n          <Alert severity=\"error\">{error}</Alert>\r\n        ) : data ? (\r\n          <Stack spacing={1}>\r\n            {data.alerta ? (\r\n              <Alert severity=\"warning\" variant=\"outlined\">\r\n                Indicadores financieros en observacion.\r\n              </Alert>\r\n            ) : null}\r\n            {summaryLines.length > 0 ? (\r\n              summaryLines.map((line, idx) => (\r\n                <Typography key={idx} variant=\"body2\">\r\n                  {line}\r\n                </Typography>\r\n              ))\r\n            ) : (\r\n              <Typography variant=\"body2\">No hay resumen disponible.</Typography>\r\n            )}\r\n            {detalleLines.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Detalle del mes\r\n                </Typography>\r\n                {detalleLines.map((line, idx) => (\r\n                  <Typography key={`det-${idx}`} variant=\"body2\">\r\n                    - {line}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n            {senalesEntries.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Seales\r\n                </Typography>\r\n                {senalesEntries.map(([key, value]) => (\r\n                  <Typography key={key} variant=\"body2\">\r\n                    <b>{key.charAt(0).toUpperCase() + key.slice(1)}:</b> {value}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n            {riesgos.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Riesgos clave\r\n                </Typography>\r\n                {riesgos.map((item, idx) => (\r\n                  <Typography key={`risk-${idx}`} variant=\"body2\">\r\n                    - {item}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n            {tips.length > 0 ? (\r\n              <Stack spacing={0.25}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  Recomendaciones\r\n                </Typography>\r\n                {tips.slice(0, 4).map((item, idx) => (\r\n                  <Typography key={`tip-${idx}`} variant=\"body2\">\r\n                    - {item}\r\n                  </Typography>\r\n                ))}\r\n              </Stack>\r\n            ) : null}\r\n          </Stack>\r\n        ) : (\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Presiona \"Interpretar situacin\" para obtener el anlisis con IA.\r\n          </Typography>\r\n        )}\r\n      </CardContent>\r\n      <CardActions sx={{ px: 2, pb: 2, justifyContent: \"flex-end\", alignItems: \"center\" }}>\r\n        <Button variant=\"contained\" onClick={handleRun} disabled={loading}>\r\n          Interpretar situacin\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default InsightsWidget;\r\n\r\n","import API_CONFIG from \"../../config/api-config\";\r\n\r\nconst getSessionUserSub = () => {\r\n  if (typeof window === \"undefined\") {\r\n    return null;\r\n  }\r\n  try {\r\n    return window.sessionStorage.getItem(\"sub\");\r\n  } catch (err) {\r\n    console.error(\"No se pudo acceder a sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const fetchDashboardSummary = async ({\r\n  period,\r\n  months = 12,\r\n  limitMovements = 6,\r\n  limitInvoices = 6,\r\n} = {}) => {\r\n  const usuarioSub = getSessionUserSub();\r\n  if (!usuarioSub) {\r\n    throw new Error(\"No encontramos el usuario en la sesin.\");\r\n  }\r\n\r\n  const params = new URLSearchParams();\r\n\r\n  if (period) {\r\n    const [year, month] = period.split(\"-\");\r\n    if (year && month) {\r\n      params.set(\"fecha\", `${year}-${month}-01`);\r\n    }\r\n  }\r\n\r\n  if (months) {\r\n    params.set(\"meses\", String(months));\r\n  }\r\n\r\n  if (limitMovements) {\r\n    params.set(\"limiteMovimientos\", String(limitMovements));\r\n  }\r\n\r\n  if (limitInvoices) {\r\n    params.set(\"limiteFacturas\", String(limitInvoices));\r\n  }\r\n\r\n  const url = `${API_CONFIG.REGISTRO}/movimientos/resumen/dashboard${\r\n    params.toString() ? `?${params.toString()}` : \"\"\r\n  }`;\r\n\r\n  const response = await fetch(url, {\r\n    headers: {\r\n      \"X-Usuario-Sub\": usuarioSub,\r\n    },\r\n    credentials: \"include\",\r\n  });\r\n\r\n  let payload = null;\r\n  try {\r\n    payload = await response.json();\r\n  } catch (err) {\r\n    // ignoramos errores de parseo si la respuesta no es JSON\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const message =\r\n      (payload && (payload.mensaje || payload.error || payload.message)) ||\r\n      `No pudimos obtener el resumen de dashboard (cdigo ${response.status}).`;\r\n    const error = new Error(message);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  return payload;\r\n};\r\n","import * as React from \"react\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport Alert from \"@mui/material/Alert\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\r\nimport AddCircleOutlineRoundedIcon from \"@mui/icons-material/AddCircleOutlineRounded\";\r\nimport UploadFileRoundedIcon from \"@mui/icons-material/UploadFileRounded\";\r\nimport AccountBalanceWalletRoundedIcon from \"@mui/icons-material/AccountBalanceWalletRounded\";\r\nimport PublishedWithChangesRoundedIcon from \"@mui/icons-material/PublishedWithChangesRounded\";\r\nimport ReceiptLongRoundedIcon from \"@mui/icons-material/ReceiptLongRounded\";\r\nimport AssessmentRoundedIcon from \"@mui/icons-material/AssessmentRounded\";\r\nimport NotificationsActiveRoundedIcon from \"@mui/icons-material/NotificationsActiveRounded\";\r\n\r\nimport QuickActions from \"./components/QuickActions\";\r\nimport KpiCard from \"./components/KpiCard\";\r\nimport BudgetWidget from \"./components/BudgetWidget\";\r\nimport CashflowWidget from \"./components/CashflowWidget\";\r\nimport LiquidityGapWidget from \"./components/LiquidityGapWidget\";\r\nimport RecentMovementsWidget from \"./components/RecentMovementsWidget\";\r\nimport RecentInvoicesWidget from \"./components/RecentInvoicesWidget\";\r\nimport ReconciliationWidget from \"./components/ReconciliationWidget\";\r\nimport SalesTrendWidget from \"./components/SalesTrendWidget\";\r\nimport SalesByCategoryWidget from \"./components/SalesByCategoryWidget\";\r\nimport InsightsWidget from \"./components/InsightsWidget\";\r\n// import BillingWidget from \"./components/BillingWidget\";\r\nimport { fetchDashboardSummary } from \"./services/dashboardSummaryService\";\r\nimport useResolvedColorTokens from \"./useResolvedColorTokens\";\r\nimport { formatCurrencyAR } from \"../utils/formatters\";\r\n\r\nconst mockKpis = {\r\n  totalIncomes: 820000,\r\n  totalExpenses: 540000,\r\n  netResult: 280000,\r\n  cashBalance: 1250000,\r\n  cashRunwayDays: 46,\r\n  pendingReceivables: 420000,\r\n  receivablesDueSoon: 160000,\r\n  pendingPayables: 210000,\r\n  payablesOverdue: 65000,\r\n};\r\n\r\nconst mockKpiTrends = {\r\n  totalIncomes: [620000, 680000, 750000, 820000],\r\n  totalExpenses: [430000, 480000, 510000, 540000],\r\n  netResult: [190000, 205000, 240000, 280000],\r\n  cashBalance: [980000, 1080000, 1190000, 1250000],\r\n  pendingReceivables: [360000, 395000, 410000, 420000],\r\n  pendingPayables: [260000, 235000, 215000, 210000],\r\n};\r\n\r\nconst mockSalesTrend = {\r\n  title: \"Ingresos durante el perodo\",\r\n  average: 185000,\r\n  max: { value: 215000, label: \"abr 2025\" },\r\n  min: { value: 142000, label: \"ene 2025\" },\r\n  points: [\r\n    { month: \"ene\", value: 142000 },\r\n    { month: \"feb\", value: 168000 },\r\n    { month: \"mar\", value: 178500 },\r\n    { month: \"abr\", value: 215000 },\r\n    { month: \"may\", value: 204000 },\r\n    { month: \"jun\", value: 198000 },\r\n    { month: \"jul\", value: 191000 },\r\n    { month: \"ago\", value: 199500 },\r\n    { month: \"sep\", value: 188000 },\r\n    { month: \"oct\", value: 194500 },\r\n    { month: \"nov\", value: 187000 },\r\n    { month: \"dic\", value: 181500 },\r\n  ],\r\n};\r\n\r\nconst mockExpensesTrend = {\r\n  title: \"Egresos durante el perodo\",\r\n  average: 142000,\r\n  max: { value: 168000, label: \"mar 2025\" },\r\n  min: { value: 118000, label: \"ene 2025\" },\r\n  points: [\r\n    { month: \"ene\", value: 125000 },\r\n    { month: \"feb\", value: 132000 },\r\n    { month: \"mar\", value: 168000 },\r\n    { month: \"abr\", value: 154000 },\r\n    { month: \"may\", value: 149000 },\r\n    { month: \"jun\", value: 138000 },\r\n    { month: \"jul\", value: 146000 },\r\n    { month: \"ago\", value: 152000 },\r\n    { month: \"sep\", value: 139000 },\r\n    { month: \"oct\", value: 145000 },\r\n    { month: \"nov\", value: 141000 },\r\n    { month: \"dic\", value: 134000 },\r\n  ],\r\n};\r\n\r\nconst mockExpensesByCategory = [\r\n  { category: \"Servicios Bsicos\", value: 54000 },\r\n  { category: \"Vivienda\", value: 76000 },\r\n  { category: \"Transporte\", value: 42000 },\r\n  { category: \"Servicios Financieros\", value: 35500 },\r\n  { category: \"Impuestos y Tasas\", value: 68000 },\r\n  { category: \"Alimentos y Bebidas\", value: 38500 },\r\n  { category: \"Educacin\", value: 29500 },\r\n  { category: \"Salud\", value: 31800 },\r\n];\r\n\r\nconst mockCategoryPerformance = [\r\n  { category: \"Ventas\", value: 385188 },\r\n  { category: \"Servicios\", value: 353625 },\r\n  { category: \"Produccion\", value: 272799 },\r\n  { category: \"Logistica\", value: 199511 },\r\n  { category: \"Marketing\", value: 194480 },\r\n  { category: \"Tecnologia\", value: 193511 },\r\n  { category: \"RRHH\", value: 91909 },\r\n  { category: \"Administracion\", value: 77346 },\r\n];\r\n\r\nconst mockBudget = {\r\n  name: \"Presupuesto anual 2025\",\r\n  slug: \"presupuesto-anual-2025\",\r\n  period: {\r\n    label: \"Octubre 2025\",\r\n    routeParam: \"octubre-2025\",\r\n  },\r\n  categories: [\r\n    { name: \"Ventas\", planned: 850000, actual: 640000 },\r\n    { name: \"Marketing\", planned: 250000, actual: 210000 },\r\n    { name: \"Operaciones\", planned: 300000, actual: 320000 },\r\n    { name: \"RRHH\", planned: 180000, actual: 150000 },\r\n  ],\r\n};\r\n\r\nconst mockCashflow = {\r\n  labels: [\"Hoy\", \"+5d\", \"+10d\", \"+15d\", \"+20d\", \"+25d\", \"+30d\"],\r\n  incomes: [220000, 180000, 210000, 190000, 230000, 200000, 250000],\r\n  expenses: [150000, 160000, 170000, 165000, 175000, 160000, 185000],\r\n  net: [70000, 20000, 40000, 25000, 55000, 40000, 65000],\r\n};\r\n\r\nconst mockDueDates = [\r\n  {\r\n    id: \"afip-01\",\r\n    date: new Date().toISOString(),\r\n    type: \"AFIP\",\r\n    name: \"IVA mensual\",\r\n    amount: 155000,\r\n  },\r\n  {\r\n    id: \"prov-02\",\r\n    date: new Date(Date.now() + 3 * 86400000).toISOString(),\r\n    type: \"Proveedor\",\r\n    name: \"Servicios Cloud\",\r\n    amount: 98000,\r\n  },\r\n  {\r\n    id: \"cli-03\",\r\n    date: new Date(Date.now() + 7 * 86400000).toISOString(),\r\n    type: \"Cliente\",\r\n    name: \"Cobranza Grupo Litoral\",\r\n    amount: 210000,\r\n  },\r\n];\r\n\r\nconst mockTasks = [\r\n  {\r\n    id: \"task-1\",\r\n    title: \"Conciliar Banco Nacin\",\r\n    description: \"Tens 4 movimientos pendientes de revisar.\",\r\n    severity: \"high\",\r\n  },\r\n  {\r\n    id: \"task-2\",\r\n    title: \"Subir comprobantes de AFIP\",\r\n    description: \"Faltan adjuntar comprobantes del ltimo pago.\",\r\n    severity: \"medium\",\r\n  },\r\n  {\r\n    id: \"task-3\",\r\n    title: \"categoriar movimientos\",\r\n    description: \"3 ingresos sin categora asignada.\",\r\n    severity: \"low\",\r\n  },\r\n];\r\n\r\nconst mockMovements = [\r\n  {\r\n    id: \"mov-1\",\r\n    tipo: \"Egreso\",\r\n    montoTotal: -125000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date().toISOString(),\r\n    categoria: \"Logistica\",\r\n  },\r\n  {\r\n    id: \"mov-2\",\r\n    tipo: \"Ingreso\",\r\n    montoTotal: 185000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date(Date.now() - 86400000).toISOString(),\r\n    categoria: \"Ventas\",\r\n  },\r\n  {\r\n    id: \"mov-3\",\r\n    tipo: \"Egreso\",\r\n    montoTotal: -78000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date(Date.now() - 2 * 86400000).toISOString(),\r\n    categoria: \"Marketing\",\r\n  },\r\n  {\r\n    id: \"mov-4\",\r\n    tipo: \"Transferencia\",\r\n    montoTotal: -45000,\r\n    moneda: \"ARS\",\r\n    fechaEmision: new Date(Date.now() - 3 * 86400000).toISOString(),\r\n    categoria: null,\r\n  },\r\n];\r\n\r\nconst mockReconciliation = {\r\n  periodo: \"2025-10\",\r\n  periodLabel: \"octubre 2025\",\r\n  totalMovimientos: 124,\r\n  conciliados: 96,\r\n  pendientes: 28,\r\n  porcentajeConciliados: 77.4,\r\n  ultimaConciliacion: \"2025-10-28\",\r\n  ultimoPendiente: \"2025-10-30\",\r\n  porTipo: [\r\n    {\r\n      tipo: \"Ingreso\",\r\n      total: 68,\r\n      conciliados: 55,\r\n      pendientes: 13,\r\n      porcentaje: 80.9,\r\n    },\r\n    {\r\n      tipo: \"Egreso\",\r\n      total: 56,\r\n      conciliados: 41,\r\n      pendientes: 15,\r\n      porcentaje: 73.2,\r\n    },\r\n  ],\r\n};\r\n\r\nconst mockBilling = {\r\n  invoices: [\r\n    {\r\n      id: \"fac-01\",\r\n      number: \"A-0003-000125\",\r\n      customer: \"Fbrica El Sol\",\r\n      amount: 145000,\r\n      date: new Date().toISOString(),\r\n    },\r\n    {\r\n      id: \"fac-02\",\r\n      number: \"A-0003-000124\",\r\n      customer: \"Cooperativa Delta\",\r\n      amount: 98000,\r\n      date: new Date(Date.now() - 86400000).toISOString(),\r\n    },\r\n    {\r\n      id: \"fac-03\",\r\n      number: \"B-0001-000543\",\r\n      customer: \"Estudio Contable Sur\",\r\n      amount: 54000,\r\n      date: new Date(Date.now() - 2 * 86400000).toISOString(),\r\n    },\r\n  ],\r\n};\r\n\r\nconst DASHBOARD_CACHE_KEY = \"dashboard_summary_v1\";\r\n\r\nconst normalizeMovementsError = (error) => {\r\n  if (!error) {\r\n    return \"No pudimos cargar los movimientos.\";\r\n  }\r\n  if (typeof error === \"string\") {\r\n    return error;\r\n  }\r\n  if (error?.message) {\r\n    return error.message;\r\n  }\r\n  return \"No pudimos cargar los movimientos.\";\r\n};\r\n\r\nconst mapMovementFromBackend = (item, index) => {\r\n  if (!item) {\r\n    return {\r\n      id: `movement-${index}`,\r\n      tipo: \"Movimiento\",\r\n      montoTotal: 0,\r\n      moneda: \"ARS\",\r\n      fechaEmision: null,\r\n      categoria: null,\r\n    };\r\n  }\r\n\r\n  const toNumber = (value) => {\r\n    const numeric = Number(value);\r\n    return Number.isFinite(numeric) ? numeric : 0;\r\n  };\r\n\r\n  return {\r\n    id: item.id ?? item.uuid ?? `movement-${index}`,\r\n    tipo: item.tipo ?? item.tipoMovimiento ?? item.tipoOperacion ?? \"Movimiento\",\r\n    montoTotal: toNumber(item.montoTotal ?? item.monto ?? item.importe ?? 0),\r\n    moneda: item.moneda ?? item.monedaCodigo ?? \"ARS\",\r\n    fechaEmision: item.fechaEmision ?? item.fecha ?? item.fechaRegistro ?? null,\r\n    categoria:\r\n      item.categoria ??\r\n      item.categoriaNombre ??\r\n      item.categoriaDescripcion ??\r\n      item.area ??\r\n      null,\r\n  };\r\n};\r\n\r\nconst mapInvoiceFromBackend = (item, index) => {\r\n  if (!item) {\r\n    return {\r\n      id: `invoice-${index}`,\r\n      tipoFactura: \"Factura\",\r\n      numeroDocumento: null,\r\n      montoTotal: 0,\r\n      moneda: \"ARS\",\r\n      fechaEmision: null,\r\n      compradorNombre: null,\r\n      vendedorNombre: null,\r\n    };\r\n  }\r\n\r\n  const toNumber = (value) => {\r\n    const numeric = Number(value);\r\n    return Number.isFinite(numeric) ? numeric : 0;\r\n  };\r\n\r\n  return {\r\n    id: item.id ?? item.idDocumento ?? `invoice-${index}`,\r\n    tipoFactura: item.tipoFactura ?? \"Factura\",\r\n    numeroDocumento: item.numeroDocumento ?? null,\r\n    montoTotal: toNumber(item.montoTotal ?? 0),\r\n    moneda: item.moneda ?? \"ARS\",\r\n    fechaEmision: item.fechaEmision ?? null,\r\n    compradorNombre: item.compradorNombre ?? null,\r\n    vendedorNombre: item.vendedorNombre ?? null,\r\n  };\r\n};\r\n\r\nconst initialDashboardState = {\r\n  kpis: { loading: true, error: null, data: null },\r\n  budget: { loading: true, error: null, data: null },\r\n  cashflow: { loading: true, error: null, data: null },\r\n  dueDates: { loading: true, error: null, data: null },\r\n  tasks: { loading: true, error: null, data: null },\r\n  movements: { loading: true, error: null, data: null },\r\n  invoices: { loading: true, error: null, data: null },\r\n  reconciliation: { loading: true, error: null, data: null },\r\n  billing: { loading: true, error: null, data: null },\r\n  salesTrend: { loading: true, error: null, data: null },\r\n  salesByCategory: { loading: true, error: null, data: null },\r\n  expensesTrend: { loading: true, error: null, data: null },\r\n  expensesByCategory: { loading: true, error: null, data: null },\r\n};\r\n\r\nconst companiesMock = [\"MyCFO Demo\", \"Acme Corp\", \"Globex Latam\"];\r\n\r\nconst getRecentPeriods = (count = 6) =>\r\n  Array.from({ length: count }).map((_, index) => {\r\n    const date = new Date();\r\n    date.setMonth(date.getMonth() - index);\r\n    const label = new Intl.DateTimeFormat(\"es-AR\", {\r\n      month: \"long\",\r\n      year: \"numeric\",\r\n    }).format(date);\r\n    const value = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(\r\n      2,\r\n      \"0\"\r\n    )}`;\r\n    return { label, value };\r\n  });\r\n\r\nconst Dashboard = React.memo(() => {\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const { resolvedMode, paletteVars, primaryTextColor } =\r\n    useResolvedColorTokens();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n  const [state, setState] = React.useState(initialDashboardState);\r\n  const [isRefreshing, setIsRefreshing] = React.useState(false);\r\n  const fetchTimeoutRef = React.useRef();\r\n  const activeRequestRef = React.useRef(0);\r\n  const useMocks = React.useRef(\r\n    process.env.REACT_APP_USE_MOCKS === \"true\"\r\n  ).current;\r\n  const buildMockState = React.useCallback(\r\n    () => ({\r\n      kpis: { loading: false, error: null, data: mockKpis },\r\n      budget: { loading: false, error: null, data: mockBudget },\r\n      cashflow: { loading: false, error: null, data: mockCashflow },\r\n      dueDates: { loading: false, error: null, data: mockDueDates },\r\n      tasks: { loading: false, error: null, data: mockTasks },\r\n      movements: { loading: false, error: null, data: mockMovements },\r\n      invoices: { loading: false, error: null, data: [] },\r\n      reconciliation: { loading: false, error: null, data: mockReconciliation },\r\n      billing: { loading: false, error: null, data: mockBilling },\r\n      salesTrend: { loading: false, error: null, data: mockSalesTrend },\r\n      salesByCategory: {\r\n        loading: false,\r\n        error: null,\r\n        data: mockCategoryPerformance,\r\n      },\r\n      expensesTrend: { loading: false, error: null, data: mockExpensesTrend },\r\n      expensesByCategory: {\r\n        loading: false,\r\n        error: null,\r\n        data: mockExpensesByCategory,\r\n      },\r\n    }),\r\n    []\r\n  );\r\n  const [snackbar, setSnackbar] = React.useState(null);\r\n  const [company, setCompany] = React.useState(companiesMock[0]);\r\n  const periodOptions = React.useMemo(() => getRecentPeriods(6), []);\r\n  const [period, setPeriod] = React.useState(periodOptions[0]?.value ?? \"\");\r\n\r\n  const userDisplayName = React.useMemo(() => {\r\n    if (typeof window === \"undefined\") {\r\n      return \"Usuario\";\r\n    }\r\n    try {\r\n      const storedFullName = sessionStorage.getItem(\"nombre\");\r\n      if (storedFullName && storedFullName.trim()) {\r\n        return storedFullName.trim();\r\n      }\r\n      const storedName = sessionStorage.getItem(\"name\");\r\n      if (storedName && storedName.trim()) {\r\n        return storedName.trim();\r\n      }\r\n      const storedEmail = sessionStorage.getItem(\"email\");\r\n      if (storedEmail && storedEmail.includes(\"@\")) {\r\n        return storedEmail.split(\"@\")[0];\r\n      }\r\n    } catch (error) {\r\n      // Ignoramos errores de acceso al storage\r\n    }\r\n    return \"Usuario\";\r\n  }, []);\r\n\r\n  const loadDashboardData = React.useCallback(() => {\r\n    console.log(\" Recargando datos del dashboard...\");\r\n    setIsRefreshing(true);\r\n    setState((prev) => {\r\n      const next = {};\r\n      Object.entries(prev).forEach(([key, value]) => {\r\n        next[key] = { ...value, loading: true, error: null };\r\n      });\r\n      return next;\r\n    });\r\n\r\n    clearTimeout(fetchTimeoutRef.current);\r\n\r\n    if (useMocks) {\r\n      fetchTimeoutRef.current = setTimeout(() => {\r\n        setState(buildMockState());\r\n        setIsRefreshing(false);\r\n        console.log(\" Datos del dashboard recargados (modo mock)\");\r\n      }, 700);\r\n      return;\r\n    }\r\n\r\n    fetchTimeoutRef.current = undefined;\r\n\r\n    const requestId = activeRequestRef.current + 1;\r\n    activeRequestRef.current = requestId;\r\n\r\n    const applyResult = ({\r\n      movements: movementsState,\r\n      invoices: invoicesState,\r\n      kpis: kpisState,\r\n      salesTrend: salesTrendState,\r\n      salesByCategory: salesByCategoryState,\r\n      expensesTrend: expensesTrendState,\r\n      expensesByCategory: expensesByCategoryState,\r\n      reconciliation: reconciliationState,\r\n    }) => {\r\n      if (activeRequestRef.current !== requestId) {\r\n        return;\r\n      }\r\n      const mockState = buildMockState();\r\n      mockState.movements = movementsState ?? mockState.movements;\r\n      if (invoicesState) {\r\n        mockState.invoices = invoicesState;\r\n      }\r\n      if (kpisState) {\r\n        mockState.kpis = kpisState;\r\n      }\r\n      if (salesTrendState) {\r\n        mockState.salesTrend = salesTrendState;\r\n      }\r\n      if (salesByCategoryState) {\r\n        mockState.salesByCategory = salesByCategoryState;\r\n      }\r\n      if (expensesTrendState) {\r\n        mockState.expensesTrend = expensesTrendState;\r\n      }\r\n      if (expensesByCategoryState) {\r\n        mockState.expensesByCategory = expensesByCategoryState;\r\n      }\r\n      if (reconciliationState) {\r\n        mockState.reconciliation = reconciliationState;\r\n      }\r\n      setState(mockState);\r\n      setIsRefreshing(false);\r\n      console.log(\" Datos del dashboard recargados\");\r\n    };\r\n\r\n    const resolveErrorMessage = (reason, fallback) => {\r\n      if (!reason) return fallback;\r\n      if (typeof reason === \"string\") return reason;\r\n      if (reason.message) return reason.message;\r\n      if (reason.mensaje) return reason.mensaje;\r\n      return fallback;\r\n    };\r\n\r\n    const mapTrendResponse = (response, { title, emptyMessage, subheader }) => {\r\n      const datos = Array.isArray(response?.datos) ? response.datos : [];\r\n      const monthShort = new Intl.DateTimeFormat(\"es-AR\", { month: \"short\" });\r\n      const monthLong = new Intl.DateTimeFormat(\"es-AR\", {\r\n        month: \"long\",\r\n        year: \"numeric\",\r\n      });\r\n\r\n      const periodoBase = String(\r\n        response?.periodoBase ?? response?.periodo ?? \"\"\r\n      );\r\n      const [baseYearStr] = periodoBase.split(\"-\");\r\n      const targetYear = Number(baseYearStr) || new Date().getFullYear();\r\n\r\n      const totalsByPeriod = new Map();\r\n      datos.forEach((item) => {\r\n        const periodo = String(item?.periodo ?? \"\");\r\n        const [yearStr, monthStr] = periodo.split(\"-\");\r\n        const yearNum = Number(yearStr);\r\n        const monthNum = Number(monthStr);\r\n        if (Number.isFinite(yearNum) && Number.isFinite(monthNum)) {\r\n          const key = `${yearNum}-${String(monthNum).padStart(2, \"0\")}`;\r\n          totalsByPeriod.set(key, Number(item?.total ?? 0));\r\n        }\r\n      });\r\n\r\n      const fallbackByMonth = datos.reduce((acc, item) => {\r\n        const periodo = String(item?.periodo ?? \"\");\r\n        const [, monthStr] = periodo.split(\"-\");\r\n        const monthNum = Number(monthStr);\r\n        if (Number.isFinite(monthNum) && !acc.has(monthNum)) {\r\n          acc.set(monthNum, Number(item?.total ?? 0));\r\n        }\r\n        return acc;\r\n      }, new Map());\r\n\r\n      const pointsDetailed = Array.from({ length: 12 }, (_, index) => {\r\n        const date = new Date(targetYear, index, 1);\r\n        const key = `${date.getFullYear()}-${String(index + 1).padStart(\r\n          2,\r\n          \"0\"\r\n        )}`;\r\n        let value = totalsByPeriod.get(key);\r\n        if (typeof value === \"undefined\") {\r\n          value = fallbackByMonth.get(index + 1) ?? 0;\r\n        }\r\n        return {\r\n          month: monthShort.format(date),\r\n          fullLabel: monthLong.format(date),\r\n          value,\r\n        };\r\n      });\r\n\r\n      const values = pointsDetailed.map((point) => point.value);\r\n\r\n      // Promedio solo sobre los meses con movimiento distinto de cero,\r\n      // para que no se \"lice\" cuando solo hubo pocos meses con actividad.\r\n      const nonZeroValues = values.filter((val) => val !== 0);\r\n      const average =\r\n        nonZeroValues.length > 0\r\n          ? nonZeroValues.reduce((acc, val) => acc + val, 0) / nonZeroValues.length\r\n          : 0;\r\n      const maxValue = values.length > 0 ? Math.max(...values) : 0;\r\n      const minValue = values.length > 0 ? Math.min(...values) : 0;\r\n      const maxPoint = pointsDetailed.find((point) => point.value === maxValue);\r\n      const minPoint = pointsDetailed.find((point) => point.value === minValue);\r\n\r\n      return {\r\n        title,\r\n        emptyMessage,\r\n        subheader,\r\n        points: pointsDetailed.map(({ month, value }) => ({ month, value })),\r\n        average,\r\n        max: {\r\n          value: maxValue,\r\n          label: maxPoint ? maxPoint.fullLabel : \"--\",\r\n        },\r\n        min: {\r\n          value: minValue,\r\n          label: minPoint ? minPoint.fullLabel : \"--\",\r\n        },\r\n      };\r\n    };\r\n\r\n    const mapCategoryResponse = (response) => {\r\n      const categorias = Array.isArray(response?.categorias)\r\n        ? response.categorias\r\n        : [];\r\n      return categorias.map((item) => ({\r\n        category: item?.categoria ?? \"Sin categoria\",\r\n        value: Number(item?.total ?? 0),\r\n      }));\r\n    };\r\n\r\n    const mapConciliationResponse = (response) => {\r\n      if (!response) {\r\n        return null;\r\n      }\r\n\r\n      const total = Number(response.totalMovimientos ?? 0);\r\n      const conciliados = Number(response.conciliados ?? 0);\r\n      const pendientes =\r\n        response.pendientes !== undefined\r\n          ? Number(response.pendientes ?? 0)\r\n          : Math.max(total - conciliados, 0);\r\n      const porcentaje =\r\n        response.porcentajeConciliados !== undefined &&\r\n        response.porcentajeConciliados !== null\r\n          ? Number(response.porcentajeConciliados)\r\n          : total > 0\r\n          ? (conciliados * 100) / total\r\n          : 0;\r\n\r\n      const periodo = String(response.periodo ?? \"\");\r\n      let periodLabel = periodo || \"Periodo actual\";\r\n      const [yearStr, monthStr] = periodo.split(\"-\");\r\n      const monthIndex = Number(monthStr) - 1;\r\n      const yearNum = Number(yearStr);\r\n      const monthNames = [\r\n        \"enero\",\r\n        \"febrero\",\r\n        \"marzo\",\r\n        \"abril\",\r\n        \"mayo\",\r\n        \"junio\",\r\n        \"julio\",\r\n        \"agosto\",\r\n        \"septiembre\",\r\n        \"octubre\",\r\n        \"noviembre\",\r\n        \"diciembre\",\r\n      ];\r\n      if (\r\n        monthIndex >= 0 &&\r\n        monthIndex < monthNames.length &&\r\n        Number.isFinite(yearNum)\r\n      ) {\r\n        periodLabel = `${monthNames[monthIndex]} ${yearNum}`;\r\n      }\r\n\r\n      const porTipoRaw = Array.isArray(response.porTipo)\r\n        ? response.porTipo\r\n        : [];\r\n      const porTipo = porTipoRaw.map((item) => {\r\n        const totalTipo = Number(item?.total ?? 0);\r\n        const conciliadosTipo = Number(item?.conciliados ?? 0);\r\n        const pendientesTipo =\r\n          item?.pendientes !== undefined\r\n            ? Number(item.pendientes ?? 0)\r\n            : Math.max(totalTipo - conciliadosTipo, 0);\r\n        const porcentajeTipo =\r\n          totalTipo > 0 ? (conciliadosTipo * 100) / totalTipo : 0;\r\n        return {\r\n          tipo: item?.tipo ?? \"Sin tipo\",\r\n          total: totalTipo,\r\n          conciliados: conciliadosTipo,\r\n          pendientes: pendientesTipo,\r\n          porcentaje: porcentajeTipo,\r\n        };\r\n      });\r\n\r\n      return {\r\n        periodo,\r\n        periodLabel,\r\n        totalMovimientos: total,\r\n        conciliados,\r\n        pendientes,\r\n        porcentajeConciliados: porcentaje,\r\n        ultimaConciliacion: response.ultimaConciliacion ?? null,\r\n        ultimoPendiente: response.ultimoPendiente ?? null,\r\n        porTipo,\r\n      };\r\n    };\r\n\r\n    (async () => {\r\n      const applyCompositeResponse = (composite) => {\r\n        if (!composite) return;\r\n\r\n        const movimientosBackend = Array.isArray(composite.movimientosRecientes)\r\n          ? composite.movimientosRecientes\r\n          : [];\r\n        const facturasBackend = Array.isArray(composite.facturasRecientes)\r\n          ? composite.facturasRecientes\r\n          : [];\r\n\r\n        const movementsState = {\r\n          loading: false,\r\n          error: null,\r\n          data: movimientosBackend.map(mapMovementFromBackend),\r\n        };\r\n\r\n        const invoicesState = {\r\n          loading: false,\r\n          error: null,\r\n          data: facturasBackend.map(mapInvoiceFromBackend),\r\n        };\r\n\r\n        let kpisState = null;\r\n        const resumen = composite.resumenMensual;\r\n        const saldoTotal = composite.saldoTotal;\r\n        if (resumen) {\r\n          kpisState = {\r\n            loading: false,\r\n            error: null,\r\n            data: {\r\n              totalIncomes: resumen.ingresosTotales,\r\n              totalExpenses: resumen.egresosTotales,\r\n              netResult: resumen.resultadoNeto,\r\n              period: resumen.periodo,\r\n              periodLabel: resumen.periodo,\r\n              movementsCount: resumen.totalMovimientos,\r\n              totalBalance: saldoTotal?.saldoTotal ?? null,\r\n            },\r\n          };\r\n        }\r\n\r\n        const salesTrendState = composite.ingresosMensuales\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapTrendResponse(composite.ingresosMensuales, {\r\n                title: \"Ingresos durante el perodo\",\r\n                emptyMessage: \"No hay ingresos registrados en este periodo.\",\r\n                subheader:\r\n                  \"Serie mensual de ingresos registrados en los ultimos 12 meses.\",\r\n              }),\r\n            }\r\n          : { loading: false, error: null, data: null };\r\n\r\n        const expensesTrendState = composite.egresosMensuales\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapTrendResponse(composite.egresosMensuales, {\r\n                title: \"Egresos durante el perodo\",\r\n                emptyMessage: \"No hay egresos registrados en este periodo.\",\r\n                subheader:\r\n                  \"Serie mensual de egresos registrados en los ultimos 12 meses.\",\r\n              }),\r\n            }\r\n          : { loading: false, error: null, data: null };\r\n\r\n        const salesByCategoryState = composite.ingresosPorCategoria\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapCategoryResponse(composite.ingresosPorCategoria),\r\n            }\r\n          : { loading: false, error: null, data: null };\r\n\r\n        const expensesByCategoryState = composite.egresosPorCategoria\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapCategoryResponse(composite.egresosPorCategoria),\r\n            }\r\n          : { loading: false, error: null, data: null };\r\n\r\n        const reconciliationState = composite.conciliacion\r\n          ? {\r\n              loading: false,\r\n              error: null,\r\n              data: mapConciliationResponse(composite.conciliacion),\r\n            }\r\n          : { loading: false, error: null, data: null };\r\n\r\n        applyResult({\r\n          movements: movementsState,\r\n          invoices: invoicesState,\r\n          kpis: kpisState,\r\n          salesTrend: salesTrendState,\r\n          salesByCategory: salesByCategoryState,\r\n          expensesTrend: expensesTrendState,\r\n          expensesByCategory: expensesByCategoryState,\r\n          reconciliation: reconciliationState,\r\n        });\r\n      };\r\n\r\n      // 1) Mostrar primero lo que haya en cache (si existe)\r\n      if (typeof window !== \"undefined\") {\r\n        try {\r\n          const raw = window.sessionStorage.getItem(DASHBOARD_CACHE_KEY);\r\n          if (raw) {\r\n            const cached = JSON.parse(raw);\r\n            applyCompositeResponse(cached);\r\n          }\r\n        } catch (err) {\r\n          // ignoramos errores de parseo / storage\r\n        }\r\n      }\r\n\r\n      // 2) Hacer la llamada al endpoint compuesto\r\n      try {\r\n        const composite = await fetchDashboardSummary({\r\n          period,\r\n          months: 12,\r\n          limitMovements: 6,\r\n          limitInvoices: 6,\r\n        });\r\n\r\n        // guardar en cache la respuesta cruda del backend\r\n        if (typeof window !== \"undefined\") {\r\n          try {\r\n            window.sessionStorage.setItem(\r\n              DASHBOARD_CACHE_KEY,\r\n              JSON.stringify(composite)\r\n            );\r\n          } catch (err) {\r\n            // ignoramos errores de storage\r\n          }\r\n        }\r\n\r\n        applyCompositeResponse(composite);\r\n      } catch (error) {\r\n        console.error(\" Error recargando dashboard:\", error);\r\n        setIsRefreshing(false);\r\n        setState((prev) => ({\r\n          ...prev,\r\n          kpis: {\r\n            ...prev.kpis,\r\n            loading: false,\r\n            error:\r\n              error?.message ||\r\n              \"No pudimos actualizar el resumen de dashboard.\",\r\n          },\r\n        }));\r\n      }\r\n    })();\r\n  }, [buildMockState, useMocks, period]);\r\n\r\n  React.useEffect(() => {\r\n    loadDashboardData();\r\n    return () => {\r\n      clearTimeout(fetchTimeoutRef.current);\r\n      activeRequestRef.current += 1;\r\n    };\r\n  }, [loadDashboardData]);\r\n\r\n  const handleNavigate = React.useCallback(\r\n    (path, params) => {\r\n      if (!path) return;\r\n      if (params) {\r\n        const searchParams = new URLSearchParams(params);\r\n        navigate({ pathname: path, search: `?${searchParams.toString()}` });\r\n      } else {\r\n        navigate(path);\r\n      }\r\n      if (typeof window !== \"undefined\") {\r\n        window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n      }\r\n    },\r\n    [navigate]\r\n  );\r\n\r\n  const quickActions = React.useMemo(\r\n    () => [\r\n      {\r\n        id: \"movement\",\r\n        label: \"Cargar movimiento\",\r\n        icon: <AddCircleOutlineRoundedIcon />,\r\n        action: () => handleNavigate(\"/carga\"),\r\n      },\r\n      {\r\n        id: \"excel\",\r\n        label: \"Importar Excel\",\r\n        icon: <UploadFileRoundedIcon />,\r\n        action: () => handleNavigate(\"/carga-movimientos\"),\r\n      },\r\n      {\r\n        id: \"mp\",\r\n        label: \"Mercado Pago\",\r\n        icon: <AccountBalanceWalletRoundedIcon />,\r\n        action: () => handleNavigate(\"/mercado-pago\"),\r\n      },\r\n      {\r\n        id: \"reconcile\",\r\n        label: \"Conciliar\",\r\n        icon: <PublishedWithChangesRoundedIcon />,\r\n        action: () => handleNavigate(\"/conciliacion\"),\r\n      },\r\n      {\r\n        id: \"invoice\",\r\n        label: \"Cargar factura\",\r\n        icon: <ReceiptLongRoundedIcon />,\r\n        action: () => handleNavigate(\"/carga/factura\"),\r\n      },\r\n      {\r\n        id: \"budget\",\r\n        label: \"Nuevo presupuesto\",\r\n        icon: <AssessmentRoundedIcon />,\r\n        action: () => handleNavigate(\"/presupuestos/nuevo\"),\r\n      },\r\n      {\r\n        id: \"reminder\",\r\n        label: \"Recordatorio\",\r\n        icon: <NotificationsActiveRoundedIcon />,\r\n        action: () => handleNavigate(\"/recordatorios\"),\r\n      },\r\n    ],\r\n    [handleNavigate]\r\n  );\r\n\r\n  const handleQuickAction = (action) => {\r\n    if (action?.action) {\r\n      action.action();\r\n    } else {\r\n      setSnackbar({\r\n        severity: \"info\",\r\n        message: `${action?.label ?? \"Accin\"} en desarrollo.`,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCloseSnackbar = (_, reason) => {\r\n    if (reason === \"clickaway\") return;\r\n    setSnackbar(null);\r\n  };\r\n\r\n  // const showMessage = React.useCallback((message, severity = \"success\") => {\r\n  //   setSnackbar({ message, severity });\r\n  // }, []);\r\n\r\n  const kpiCards = React.useMemo(() => {\r\n    const data = state.kpis.data;\r\n\r\n    return [\r\n      {\r\n        id: \"totalIncomes\",\r\n        title: \"Ingresos Totales Mensuales\",\r\n        value: data?.totalIncomes ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      {\r\n        id: \"totalExpenses\",\r\n        title: \"Egresos Totales Mensuales\",\r\n        value: data?.totalExpenses ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      {\r\n        id: \"netResult\",\r\n        title: \"Resultado Neto Mensuales\",\r\n        value: data?.netResult ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      {\r\n        id: \"totalBalance\",\r\n        title: \"Dinero Total\",\r\n        value: data?.totalBalance ?? null,\r\n        formatter: formatCurrencyAR,\r\n        trend: [],\r\n      },\r\n      // {\r\n      //   id: \"cashBalance\",\r\n      //   title: \"Saldo de caja\",\r\n      //    value: data.cashBalance,\r\n      //    formatter: formatCurrencyAR,\r\n      //    trend: mockKpiTrends.cashBalance,\r\n      //    trendColor: theme.palette.info.main,\r\n      //    secondaryLabel: \"Dias de cobertura\",\r\n      //    secondaryValue: data.cashRunwayDays,\r\n      //    secondaryFormatter: formatDays,\r\n      // },\r\n      // {\r\n      //   id: \"pendingReceivables\",\r\n      //   title: \"Cobros pendientes (30 dias)\",\r\n      //   value: data.pendingReceivables,\r\n      //   formatter: formatCurrencyAR,\r\n      //   trend: mockKpiTrends.pendingReceivables,\r\n      //   trendColor: theme.palette.primary.main,\r\n      //   secondaryLabel: \"Por vencer 7d\",\r\n      //   secondaryValue: data.receivablesDueSoon,\r\n      //   secondaryFormatter: formatCurrencyAR,\r\n      // },\r\n      // {\r\n      //   id: \"pendingPayables\",\r\n      //   title: \"Pagos pendientes (30 dias)\",\r\n      //   value: data.pendingPayables,\r\n      //   formatter: formatCurrencyAR,\r\n      //   trend: mockKpiTrends.pendingPayables,\r\n      //   trendColor: theme.palette.warning.main,\r\n      //   secondaryLabel: \"Vencidos\",\r\n      //   secondaryValue: data.payablesOverdue,\r\n      //   secondaryFormatter: formatCurrencyAR,\r\n      // },\r\n    ];\r\n  }, [state.kpis.data]);\r\n\r\n  const quickActionsLoading = state.kpis.loading && !state.kpis.data;\r\n\r\n  const quickActionsSx = React.useMemo(\r\n    () => ({\r\n      position: { xs: \"relative\", md: \"sticky\" },\r\n      top: { md: theme.spacing(1) },\r\n      zIndex: theme.zIndex.appBar - 1,\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n    }),\r\n    [theme]\r\n  );\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        width: \"100%\",\r\n        maxWidth: 1650,\r\n        mx: \"auto\",\r\n        px: { xs: 2, sm: 3, md: 4, lg: 6 },\r\n        pb: 6,\r\n      }}\r\n    >\r\n      <Stack spacing={3} sx={{ width: \"100%\" }}>\r\n        <Stack\r\n          direction={{ xs: \"column\", md: \"row\" }}\r\n          spacing={2}\r\n          justifyContent=\"space-between\"\r\n          alignItems={{ xs: \"flex-start\", md: \"center\" }}\r\n          sx={{ width: \"100%\" }}\r\n        >\r\n          <Box>\r\n            <Typography variant=\"h4\" fontWeight={600}>\r\n              Hola, {userDisplayName}\r\n            </Typography>\r\n            <Typography variant=\"body2\" sx={{ color: primaryTextColor }}>\r\n              Todo lo importante de tu cuenta, en un solo lugar.\r\n            </Typography>\r\n          </Box>\r\n          {/* <Stack direction={{ xs: \"column\", sm: \"row\" }} spacing={2} sx={{ width: { xs: \"100%\", sm: \"auto\" } }}>\r\n            <TextField\r\n              select\r\n              label=\"Empresa\"\r\n              value={company}\r\n              onChange={(event) => setCompany(event.target.value)}\r\n              size=\"small\"\r\n              sx={{ minWidth: { xs: \"100%\", sm: 200 } }}\r\n            >\r\n              {companiesMock.map((option) => (\r\n                <MenuItem key={option} value={option}>\r\n                  {option}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n            <TextField\r\n              select\r\n              label=\"Perodo\"\r\n              value={period}\r\n              onChange={(event) => setPeriod(event.target.value)}\r\n              size=\"small\"\r\n              sx={{ minWidth: { xs: \"100%\", sm: 200 } }}\r\n            >\r\n              {periodOptions.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n          </Stack> */}\r\n        </Stack>\r\n\r\n        <Box sx={quickActionsSx}>\r\n          <QuickActions\r\n            actions={quickActions}\r\n            loading={quickActionsLoading}\r\n            onAction={handleQuickAction}\r\n          />\r\n        </Box>\r\n\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ maxWidth: { xs: \"100%\", md: 1600 }, mx: \"auto\" }}\r\n        >\r\n          {kpiCards.map((card) => (\r\n            <Grid item xs={12} sm={12} md={3} key={card.id}>\r\n              <KpiCard\r\n                title={card.title}\r\n                value={card.value}\r\n                formatter={card.formatter}\r\n                secondaryLabel={card.secondaryLabel}\r\n                secondaryValue={card.secondaryValue}\r\n                secondaryFormatter={card.secondaryFormatter}\r\n                trend={card.trend}\r\n                trendColor={card.trendColor}\r\n                loading={state.kpis.loading && !state.kpis.data}\r\n                error={state.kpis.error}\r\n                onRetry={loadDashboardData}\r\n              />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={3}\r\n          justifyContent=\"center\"\r\n          sx={{ width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item>\r\n            <Box sx={{ width: { xs: \"100%\", md: 720 } }}>\r\n              <SalesTrendWidget\r\n                data={\r\n                  state.salesTrend.data ?? {\r\n                    title: \"Ingresos durante el perodo\",\r\n                    points: [],\r\n                    average: 0,\r\n                    max: { value: 0, label: \"--\" },\r\n                    min: { value: 0, label: \"--\" },\r\n                  }\r\n                }\r\n                loading={state.salesTrend.loading && !state.salesTrend.data}\r\n                error={state.salesTrend.error}\r\n                onNavigate={() => handleNavigate(\"/reportes/ventas\")}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item>\r\n            <Box sx={{ width: { xs: \"100%\", md: 720 } }}>\r\n              <SalesByCategoryWidget\r\n                data={state.salesByCategory.data ?? []}\r\n                loading={\r\n                  state.salesByCategory.loading && !state.salesByCategory.data\r\n                }\r\n                error={state.salesByCategory.error}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={3}\r\n          justifyContent=\"center\"\r\n          sx={{ width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item>\r\n            <Box sx={{ width: { xs: \"100%\", md: 720 } }}>\r\n              <SalesTrendWidget\r\n                data={\r\n                  state.expensesTrend.data ?? {\r\n                    title: \"Egresos durante el perodo\",\r\n                    points: [],\r\n                    average: 0,\r\n                    max: { value: 0, label: \"--\" },\r\n                    min: { value: 0, label: \"--\" },\r\n                  }\r\n                }\r\n                loading={\r\n                  state.expensesTrend.loading && !state.expensesTrend.data\r\n                }\r\n                error={state.expensesTrend.error}\r\n                emptyMessage=\"No hay egresos registrados en este periodo.\"\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item>\r\n            <Box sx={{ width: { xs: \"100%\", md: 720 } }}>\r\n              <SalesByCategoryWidget\r\n                data={state.expensesByCategory.data ?? []}\r\n                loading={\r\n                  state.expensesByCategory.loading &&\r\n                  !state.expensesByCategory.data\r\n                }\r\n                error={state.expensesByCategory.error}\r\n                emptyMessage=\"No hay egresos por categoria en este periodo.\"\r\n                title=\"Egresos por categorias\"\r\n                subtitle=\"Distribucion anual por segmento\"\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ mt: 1, width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item xs={12} md={4}>\r\n            <BudgetWidget\r\n              companyId={company}\r\n              period={period}\r\n              data={state.budget.data}\r\n              loading={state.budget.loading && !state.budget.data}\r\n              error={state.budget.error}\r\n              onRetry={loadDashboardData}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} md={4}>\r\n            {/* Seccin comparativa Caja vs Devengado del ltimo mes */}\r\n            <LiquidityGapWidget />\r\n          </Grid>\r\n          <Grid item xs={12} md={4} sx={{ display: { xs: \"none\", md: \"block\" } }}>\r\n            <ReconciliationWidget\r\n              data={state.reconciliation.data}\r\n              loading={\r\n                state.reconciliation.loading && !state.reconciliation.data\r\n              }\r\n              error={state.reconciliation.error}\r\n              onRetry={loadDashboardData}\r\n              onNavigate={(account) =>\r\n                handleNavigate(\r\n                  \"/conciliacion\",\r\n                  account ? { cuenta: account } : undefined\r\n                )\r\n              }\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n\r\n        {/* Bloque de IA / insights a lo ancho al final */}\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{\r\n            mt: 1,\r\n            width: \"100%\",\r\n            maxWidth: 1600,\r\n            mx: \"auto\",\r\n            display: { xs: \"none\", md: \"flex\" },\r\n          }}\r\n        >\r\n          <Grid item xs={12} md={6}>\r\n            <RecentMovementsWidget\r\n              data={state.movements.data}\r\n              loading={state.movements.loading && !state.movements.data}\r\n              error={state.movements.error}\r\n              onRetry={loadDashboardData}\r\n              onNavigate={() => handleNavigate(\"/ver-movimientos\")}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <RecentInvoicesWidget\r\n              data={state.invoices?.data ?? null}\r\n              loading={state.invoices?.loading && !state.invoices?.data}\r\n              error={state.invoices?.error ?? null}\r\n              onRetry={loadDashboardData}\r\n              onNavigate={() => handleNavigate(\"/ver-facturas\")}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          justifyContent=\"center\"\r\n          sx={{ mt: 1, width: \"100%\", maxWidth: 1600, mx: \"auto\" }}\r\n        >\r\n          <Grid item xs={12} md={10}>\r\n            <Box sx={{ width: \"100%\", mx: \"auto\" }}>\r\n              <InsightsWidget />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n          <Button \r\n            variant=\"text\" \r\n            size=\"small\" \r\n            onClick={loadDashboardData}\r\n            disabled={isRefreshing}\r\n          >\r\n            {isRefreshing ? \"Recargando...\" : \"Recargar datos de Dashboard\"}\r\n          </Button>\r\n        </Box>\r\n      </Stack>\r\n\r\n      <Snackbar\r\n        open={Boolean(snackbar)}\r\n        autoHideDuration={4000}\r\n        onClose={handleCloseSnackbar}\r\n        anchorOrigin={{\r\n          vertical: isMobile ? \"top\" : \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n      >\r\n        {snackbar ? (\r\n          <Alert\r\n            onClose={handleCloseSnackbar}\r\n            severity={snackbar.severity ?? \"info\"}\r\n            variant=\"filled\"\r\n            sx={{ width: \"100%\" }}\r\n          >\r\n            {snackbar.message}\r\n          </Alert>\r\n        ) : null}\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n});\r\n\r\nexport default Dashboard;\r\n","import axios from \"axios\";\r\nimport {\r\n  CognitoUserPool,\r\n  CognitoUser,\r\n  CognitoRefreshToken,\r\n} from \"amazon-cognito-identity-js\";\r\nimport { sessionService } from \"../shared-services/sessionService\";\r\nimport URL_CONFIG from \"../config/api-config\";\r\n\r\nconst http = axios.create();\r\nconst PRONOSTICO_BASE_URL = URL_CONFIG.PRONOSTICO;\r\nconst cognitoPoolConfig = {\r\n  UserPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\r\n  ClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\r\n};\r\n\r\nlet refreshPromise = null;\r\nlet hasForcedLogout = false;\r\n\r\nconst isPronosticoRequest = (url) =>\r\n  Boolean(\r\n    url &&\r\n      PRONOSTICO_BASE_URL &&\r\n      String(url).startsWith(String(PRONOSTICO_BASE_URL)),\r\n  );\r\n\r\nconst safeSessionGet = (key) => {\r\n  try {\r\n    return sessionStorage.getItem(key);\r\n  } catch (err) {\r\n    console.warn(\"No se pudo leer sessionStorage:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\nconst safeSessionSet = (key, value) => {\r\n  try {\r\n    if (value !== undefined && value !== null) {\r\n      sessionStorage.setItem(key, value);\r\n    }\r\n  } catch (err) {\r\n    console.warn(\"No se pudo escribir en sessionStorage:\", err);\r\n  }\r\n};\r\n\r\nconst clearSessionAndRedirect = () => {\r\n  if (hasForcedLogout) {\r\n    return;\r\n  }\r\n  hasForcedLogout = true;\r\n  try {\r\n    sessionStorage.clear();\r\n  } catch {\r\n    /* noop */\r\n  }\r\n  if (sessionService?.limpiarSesion) {\r\n    sessionService.limpiarSesion();\r\n  }\r\n  if (typeof window !== \"undefined\") {\r\n    window.location.href = \"/#/signin\";\r\n  }\r\n};\r\n\r\nconst buildCognitoUser = () => {\r\n  const username = safeSessionGet(\"email\") || safeSessionGet(\"username\");\r\n  if (\r\n    !username ||\r\n    !cognitoPoolConfig.UserPoolId ||\r\n    !cognitoPoolConfig.ClientId\r\n  ) {\r\n    return null;\r\n  }\r\n  const pool = new CognitoUserPool(cognitoPoolConfig);\r\n  return new CognitoUser({\r\n    Username: username,\r\n    Pool: pool,\r\n  });\r\n};\r\n\r\nconst refreshTokens = () => {\r\n  const refreshTokenValue = safeSessionGet(\"refreshToken\");\r\n  const cognitoUser = buildCognitoUser();\r\n  if (!refreshTokenValue || !cognitoUser) {\r\n    return Promise.reject(new Error(\"No hay datos para renovar la sesin.\"));\r\n  }\r\n  const refreshToken = new CognitoRefreshToken({\r\n    RefreshToken: refreshTokenValue,\r\n  });\r\n  return new Promise((resolve, reject) => {\r\n    cognitoUser.refreshSession(refreshToken, (err, session) => {\r\n      if (err) {\r\n        reject(err);\r\n        return;\r\n      }\r\n      const nextAccessToken = session.getAccessToken().getJwtToken();\r\n      const nextIdToken = session.getIdToken().getJwtToken();\r\n      const nextRefreshToken = session.getRefreshToken().getToken();\r\n      safeSessionSet(\"accessToken\", nextAccessToken);\r\n      safeSessionSet(\"idToken\", nextIdToken);\r\n      if (nextRefreshToken) {\r\n        safeSessionSet(\"refreshToken\", nextRefreshToken);\r\n      }\r\n      resolve(nextAccessToken);\r\n    });\r\n  });\r\n};\r\n\r\nconst getRefreshPromise = () => {\r\n  if (!refreshPromise) {\r\n    refreshPromise = refreshTokens()\r\n      .then((token) => {\r\n        refreshPromise = null;\r\n        return token;\r\n      })\r\n      .catch((error) => {\r\n        refreshPromise = null;\r\n        throw error;\r\n      });\r\n  }\r\n  return refreshPromise;\r\n};\r\n\r\nhttp.interceptors.request.use((config) => {\r\n  const accessToken = sessionStorage.getItem(\"accessToken\");\r\n  if (isPronosticoRequest(config.url)) {\r\n    config.headers = config.headers ?? {};\r\n    if (accessToken) {\r\n      config.headers.Authorization = `Bearer ${accessToken}`;\r\n    }\r\n    const usuarioSub = sessionStorage.getItem(\"sub\");\r\n    if (usuarioSub) {\r\n      config.headers[\"X-Usuario-Sub\"] = usuarioSub;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nhttp.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const { config, response } = error;\r\n    if (\r\n      !config ||\r\n      !response ||\r\n      response.status !== 401 ||\r\n      !isPronosticoRequest(config.url)\r\n    ) {\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    if (config.__isRetryRequest) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    try {\r\n      const newAccessToken = await getRefreshPromise();\r\n      if (!newAccessToken) {\r\n        throw new Error(\"No se obtuvo un token renovado.\");\r\n      }\r\n      config.__isRetryRequest = true;\r\n      config.headers = config.headers ?? {};\r\n      config.headers.Authorization = `Bearer ${newAccessToken}`;\r\n      return http(config);\r\n    } catch (refreshError) {\r\n      clearSessionAndRedirect();\r\n      return Promise.reject(refreshError);\r\n    }\r\n  },\r\n);\r\n\r\nexport default http;\r\n"],"names":["currencyFormatterAR","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","formatCurrencyAR","value","fallback","arguments","length","undefined","numericValue","Number","isNaN","format","formatPercentage","fractionDigits","concat","toFixed","useResolvedColorTokens","_ref","_theme$vars$palette","_theme$vars","_ref2","_paletteVars$common$w","_paletteVars$common","_paletteVars$text","_ref3","_paletteVars$common$b","_paletteVars$common2","_paletteVars$text2","_paletteVars$text$sec","_paletteVars$text3","theme","useTheme","mode","systemMode","useColorScheme","resolvedMode","palette","paletteVars","vars","primaryTextColor","common","white","text","primary","black","secondaryTextColor","secondary","actions","loading","onAction","isMobile","useMediaQuery","breakpoints","down","isDarkMode","_jsx","Card","variant","sx","width","children","_jsxs","CardContent","display","flexDirection","gap","Skeleton","Box","Array","from","map","_","index","height","backdropFilter","borderRadius","mx","alignItems","flexWrap","xs","md","overflowX","pb","justifyContent","action","Button","color","startIcon","icon","onClick","_objectSpread","flexShrink","flex","maxWidth","px","py","textTransform","minWidth","minHeight","fontWeight","margin","label","id","defaultFormatter","title","formatter","secondaryLabel","secondaryValue","secondaryFormatter","trend","trendColor","error","onRetry","mt","Alert","severity","Typography","fontSize","sm","textAlign","flexGrow","lineHeight","wordBreak","component","monthLabels","formatMonthLabel","parts","String","split","year","monthIndex","isFinite","formatDateRange","to","startLabel","endLabel","toSlug","name","encodeURIComponent","trim","toLowerCase","replace","parseYearMonthStart","Date","isBudgetActiveOnDate","budget","reference","desde","start","getFullYear","getMonth","parseYearMonthEnd","hasta","valueToNumber","parsed","nested","buildCategories","totals","categories","planned","ingresoEstimado","actual","ingresoReal","egresoEstimado","egresoReal","Math","abs","saldoEstimado","saldoReal","push","normalizeError","err","_err$response","_err$response$data","response","data","message","_budget$categories","companyId","period","externalLoading","externalError","navigate","useNavigate","setLoading","React","setError","setBudget","useMocks","process","REACT_APP_USE_MOCKS","baseURL","API_CONFIG","PRONOSTICO","referenceDate","_periodToDate","periodToDate","loadBudgetData","async","mock","_mock$id","_mock$desde","_mock$hasta","_mock$period","_mock$desde2","_mock$hasta2","slug","nombre","rangeLabel","isArray","transformMockBudget","params","URLSearchParams","set","http","get","toString","vigente","payload","content","find","item","totalsResponse","totales","aggregated","reduce","acc","items","handleRetry","goToList","goToNew","goToDetail","CardHeader","subheader","titleTypographyProps","subheaderTypographyProps","Stack","direction","mb","filter","Boolean","join","spacing","status","ratio","getStatusColor","rawPercentage","limitedProgress","min","progress","max","Chip","size","LinearProgress","backgroundColor","Divider","my","CardActions","disabled","v","LiquidityGapWidget","setData","baseUrl","REPORTE","now","month","headers","sub","sessionStorage","getItem","token","fetchCash","fetch","then","r","ok","json","Promise","reject","arr","registros","ingresos","tipo","fechaEmision","a","montoTotal","egresos","fetchAccrual","_json$ingresosMensual","_json$egresosMensuale","idx","ingresosMensuales","egresosMensuales","all","cash","accrual","dataset","Reales","Devengado","catch","finally","_Fragment","ResponsiveContainer","BarChart","top","right","bottom","left","CartesianGrid","strokeDasharray","stroke","XAxis","dataKey","YAxis","Tooltip","Legend","Bar","fill","ChipLike","_paletteVars$action$h","_paletteVars$action","chipBackground","hover","padding","background","typeStyles","ingreso","egreso","deuda","acreencia","transferencia","formatAmount","numeric","toLocaleString","formatDate","date","getTime","toLocaleDateString","day","onNavigate","cardHeaderTypography","movements","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","movement","_movement$id","_movement$tipo","_movement$montoTotal","key","categoria","amountColor","typeStyle","_typeStyles$key","getTypeStyle","border","moneda","venta","compra","invoices","invoice","_invoice$id","_invoice$tipoFactura","_invoice$numeroDocume","_invoice$montoTotal","tipoFactura","numero","numeroDocumento","cliente","compradorNombre","vendedorNombre","numberFormatter","formatCurrency","percentFormatter","clampPercent","formatPercent","_summary$totalMovimie","_summary$conciliados","_summary$pendientes","summary","porcentajeConciliados","porTipo","sort","b","_b$total","_a$total","total","conciliadosPercent","totalMovimientos","conciliados","pendientesPercent","pendientes","renderMetric","helper","p","borderColor","periodLabel","ultimaConciliacion","ultimoPendiente","_item$porcentaje","_item$tipo","_item$tipo2","_item$conciliados","_item$total","itemProgress","porcentaje","monthLabel","raw","DateTimeFormat","normalized","dictionary","ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic","january","february","march","april","june","july","august","september","october","november","december","parse","_data$points","_data$title3","_data$subheader","_data$max","_data$max$label","_data$max2","_data$min","_data$min$label","_data$min2","emptyMessage","isSmall","_data$title","_data$title2","chartData","points","_item$value","noDataMessage","hasData","some","d","pr","pt","ml","divider","flexItem","orientation","letterSpacing","average","alignSelf","AreaChart","x1","y1","x2","y2","offset","stopColor","main","stopOpacity","alpha","tick","angle","textAnchor","interval","tickFormatter","contentStyle","paper","labelStyle","Area","type","strokeWidth","dot","activeDot","typography","_topCategory","_topCategory$category","_topCategory2","_bottomCategory","_bottomCategory$categ","_bottomCategory2","subtitle","_item$category","category","topCategory","bottomCategory","values","sum","sorted","radius","entry","Cell","InsightsWidget","summaryLines","diagnostico_corto","line","senalesEntries","senales","Object","entries","detalleLines","detalles","riesgos","riesgos_clave","tips","alerta","charAt","toUpperCase","slice","IA","res","method","Error","e","fetchDashboardSummary","months","limitMovements","limitInvoices","usuarioSub","getSessionUserSub","window","console","url","REGISTRO","credentials","mensaje","mockKpis","totalIncomes","totalExpenses","netResult","cashBalance","cashRunwayDays","pendingReceivables","receivablesDueSoon","pendingPayables","payablesOverdue","mockSalesTrend","mockExpensesTrend","mockExpensesByCategory","mockCategoryPerformance","mockBudget","routeParam","mockCashflow","labels","incomes","expenses","net","mockDueDates","toISOString","amount","mockTasks","description","mockMovements","mockReconciliation","periodo","mockBilling","number","customer","DASHBOARD_CACHE_KEY","mapMovementFromBackend","_item$id","_ref4","_ref5","_item$montoTotal","_ref6","_item$moneda","_ref7","_ref8","_item$fechaEmision","_ref9","_ref0","_ref1","_item$categoria","uuid","tipoMovimiento","tipoOperacion","toNumber","monto","importe","monedaCodigo","fecha","fechaRegistro","categoriaNombre","categoriaDescripcion","area","mapInvoiceFromBackend","_ref10","_item$id2","_item$tipoFactura","_item$numeroDocumento","_item$montoTotal2","_item$moneda2","_item$fechaEmision2","_item$compradorNombre","_item$vendedorNombre","idDocumento","initialDashboardState","kpis","cashflow","dueDates","tasks","reconciliation","billing","salesTrend","salesByCategory","expensesTrend","expensesByCategory","companiesMock","_periodOptions$0$valu","_periodOptions$","_state$salesTrend$dat","_state$salesByCategor","_state$expensesTrend$","_state$expensesByCate","_state$invoices$data","_state$invoices","_state$invoices2","_state$invoices3","_state$invoices$error","_state$invoices4","_snackbar$severity","state","setState","isRefreshing","setIsRefreshing","fetchTimeoutRef","activeRequestRef","current","buildMockState","snackbar","setSnackbar","company","setCompany","periodOptions","count","setMonth","padStart","getRecentPeriods","setPeriod","userDisplayName","storedFullName","storedName","storedEmail","includes","loadDashboardData","log","prev","next","forEach","_ref11","clearTimeout","setTimeout","requestId","mapTrendResponse","_ref13","_ref14","_response$periodoBase","datos","monthShort","monthLong","periodoBase","baseYearStr","targetYear","totalsByPeriod","Map","_item$periodo","yearStr","monthStr","yearNum","monthNum","fallbackByMonth","_item$periodo2","_item$total2","has","pointsDetailed","_fallbackByMonth$get","fullLabel","point","nonZeroValues","val","maxValue","minValue","maxPoint","minPoint","_ref15","mapCategoryResponse","categorias","_item$categoria2","_item$total3","mapConciliationResponse","_response$totalMovimi","_response$conciliados","_response$pendientes","_response$periodo","_response$ultimaConci","_response$ultimoPendi","monthNames","_item$total4","_item$pendientes","totalTipo","conciliadosTipo","pendientesTipo","porcentajeTipo","applyCompositeResponse","composite","movimientosBackend","movimientosRecientes","facturasBackend","facturasRecientes","movementsState","invoicesState","kpisState","resumen","resumenMensual","saldoTotal","_saldoTotal$saldoTota","ingresosTotales","egresosTotales","resultadoNeto","movementsCount","totalBalance","salesTrendState","expensesTrendState","_ref12","salesByCategoryState","expensesByCategoryState","reconciliationState","mockState","applyResult","ingresosPorCategoria","egresosPorCategoria","conciliacion","JSON","setItem","stringify","handleNavigate","path","searchParams","pathname","search","scrollTo","behavior","quickActions","AddCircleOutlineRoundedIcon","UploadFileRoundedIcon","AccountBalanceWalletRoundedIcon","PublishedWithChangesRoundedIcon","ReceiptLongRoundedIcon","AssessmentRoundedIcon","NotificationsActiveRoundedIcon","handleCloseSnackbar","reason","kpiCards","_data$totalIncomes","_data$totalExpenses","_data$netResult","_data$totalBalance","quickActionsLoading","quickActionsSx","position","zIndex","appBar","lg","QuickActions","_action$label","Grid","container","card","KpiCard","SalesTrendWidget","SalesByCategoryWidget","BudgetWidget","ReconciliationWidget","account","cuenta","RecentMovementsWidget","RecentInvoicesWidget","Snackbar","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","axios","create","PRONOSTICO_BASE_URL","URL_CONFIG","cognitoPoolConfig","UserPoolId","ClientId","refreshPromise","hasForcedLogout","isPronosticoRequest","startsWith","safeSessionGet","warn","safeSessionSet","clearSessionAndRedirect","clear","_unused","sessionService","limpiarSesion","location","href","refreshTokens","refreshTokenValue","cognitoUser","buildCognitoUser","username","pool","CognitoUserPool","CognitoUser","Username","Pool","refreshToken","CognitoRefreshToken","RefreshToken","resolve","refreshSession","session","nextAccessToken","getAccessToken","getJwtToken","nextIdToken","getIdToken","nextRefreshToken","getRefreshToken","getToken","interceptors","request","use","config","accessToken","_config$headers","Authorization","__isRetryRequest","_config$headers2","newAccessToken","refreshError"],"sourceRoot":""}